/*! Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */
!function(){"use strict";var t=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function e(n){var a=this.prototype;t=!0;var s=new this;for(var i in t=!1,n)if("function"==typeof n[i]&&"function"==typeof a[i])s[i]=function(t,e){return function(){var n=this._super;this._super=function(e){return a[t].apply(this,e||[])};var s=e.apply(this,arguments);return this._super=n,s}}(i,n[i]);else if("object"==typeof n[i]&&"object"==typeof a[i]&&"defaultOptions"===i){var r,o=a[i],u=n[i],c={};for(r in o)c[r]=o[r];for(r in u)c[r]=u[r];s[i]=c}else s[i]=n[i];function h(){!t&&this._init&&this._init.apply(this,arguments)}return h.prototype=s,h.prototype.constructor=h,h.extend=e,h}}(),
/*! Abstract base class for collection plugins v1.0.2.
	Written by Keith Wood (wood.keith{at}optusnet.com.au) December 2013.
	Licensed under the MIT license (http://keith-wood.name/licence.html). */
function($){"use strict";function camelCase(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},deepMerge:!0,_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var t=camelCase(this.name);$[t]=this,$.fn[t]=function(e){var n=Array.prototype.slice.call(arguments,1),a=this,s=this;return this.each((function(){if("string"==typeof e){if("_"===e[0]||!$[t][e])throw"Unknown method: "+e;var i=$[t][e].apply($[t],[this].concat(n));if(i!==a&&void 0!==i)return s=i,!1}else $[t]._attach(this,e)})),s}},setDefaults:function(t){$.extend(this.defaultOptions,t||{})},_attach:function(t,e){if(!(t=$(t)).hasClass(this._getMarker())){t.addClass(this._getMarker()),e=$.extend(this.deepMerge,{},this.defaultOptions,this._getMetadata(t),e||{});var n=$.extend({name:this.name,elem:t,options:e},this._instSettings(t,e));t.data(this.name,n),this._postAttach(t,n),this.option(t,e)}},_instSettings:function(t,e){return{}},_postAttach:function(t,e){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";for(var key in data=data.replace(/(\\?)'/g,(function(t,e){return e?"'":'"'})).replace(/([a-zA-Z0-9]+):/g,(function(t,e,n){var a=data.substring(0,n).match(/"/g);return a&&a.length%2!=0?e+":":'"'+e+'":'})).replace(/\\:/g,":"),data=$.parseJSON("{"+data+"}"),data)if(data.hasOwnProperty(key)){var value=data[key];"string"==typeof value&&value.match(/^new Date\(([-0-9,\s]*)\)$/)&&(data[key]=eval(value))}return data}catch(t){return{}}},_getInst:function(t){return $(t).data(this.name)||{}},option:function(t,e,n){var a=(t=$(t)).data(this.name),s=e||{};if(!e||"string"==typeof e&&void 0===n)return(s=(a||{}).options)&&e?s[e]:s;t.hasClass(this._getMarker())&&("string"==typeof e&&((s={})[e]=n),this._optionsChanged(t,a,s),$.extend(a.options,s))},_optionsChanged:function(t,e,n){},destroy:function(t){(t=$(t)).hasClass(this._getMarker())&&(this._preDestroy(t,this._getInst(t)),t.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(t,e){}}),$.JQPlugin={createPlugin:function(t,e){"object"==typeof t&&(e=t,t="JQPlugin"),t=camelCase(t);var n=camelCase(e.name);JQClass.classes[n]=JQClass.classes[t].extend(e),new JQClass.classes[n]}}}(jQuery);
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}((function(){return function t(e,n,s){function r(i,a){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!a&&l)return l(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var d=n[i]={exports:{}};e[i][0].call(d.exports,(function(t){var n=e[i][1][t];return r(n||t)}),d,d.exports,t,e,n,s)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<s.length;i++)r(s[i]);return r}({1:[function(t,e,n){"use strict";var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t,e){for(var n,r,o,i,a,l,d,c="",u=0;u<t.length;)i=(n=t.charCodeAt(u++))>>2,a=(3&n)<<4|(r=t.charCodeAt(u++))>>4,l=(15&r)<<2|(o=t.charCodeAt(u++))>>6,d=63&o,isNaN(r)?l=d=64:isNaN(o)&&(d=64),c=c+s.charAt(i)+s.charAt(a)+s.charAt(l)+s.charAt(d);return c},n.decode=function(t,e){var n,r,o,i,a,l,d="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)n=s.indexOf(t.charAt(c++))<<2|(i=s.indexOf(t.charAt(c++)))>>4,r=(15&i)<<4|(a=s.indexOf(t.charAt(c++)))>>2,o=(3&a)<<6|(l=s.indexOf(t.charAt(c++))),d+=String.fromCharCode(n),64!=a&&(d+=String.fromCharCode(r)),64!=l&&(d+=String.fromCharCode(o));return d}},{}],2:[function(t,e,n){"use strict";function s(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}s.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=s},{}],3:[function(t,e,n){"use strict";n.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},n.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e,n){"use strict";var s=t("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if(void 0===t||!t.length)return 0;var n="string"!==s.getTypeOf(t);void 0===e&&(e=0);var o=0;e^=-1;for(var i=0,a=t.length;i<a;i++)o=n?t[i]:t.charCodeAt(i),e=e>>>8^r[255&(e^o)];return-1^e}},{"./utils":21}],5:[function(t,e,n){"use strict";var s=t("./utils");function r(t){this.data=null,this.length=0,this.index=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return s.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":21}],6:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!1,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],7:[function(t,e,n){"use strict";var s=t("./utils");n.string2binary=function(t){return s.string2binary(t)},n.string2Uint8Array=function(t){return s.transformTo("uint8array",t)},n.uint8Array2String=function(t){return s.transformTo("string",t)},n.string2Blob=function(t){var e=s.transformTo("arraybuffer",t);return s.arrayBuffer2Blob(e)},n.arrayBuffer2Blob=function(t){return s.arrayBuffer2Blob(t)},n.transformTo=function(t,e){return s.transformTo(t,e)},n.getTypeOf=function(t){return s.getTypeOf(t)},n.checkSupport=function(t){return s.checkSupport(t)},n.MAX_VALUE_16BITS=s.MAX_VALUE_16BITS,n.MAX_VALUE_32BITS=s.MAX_VALUE_32BITS,n.pretty=function(t){return s.pretty(t)},n.findCompression=function(t){return s.findCompression(t)},n.isRegExp=function(t){return s.isRegExp(t)}},{"./utils":21}],8:[function(t,e,n){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");n.uncompressInputType=s?"uint8array":"array",n.compressInputType=s?"uint8array":"array",n.magic="\b\0",n.compress=function(t,e){return r.deflateRaw(t,{level:e.level||-1})},n.uncompress=function(t){return r.inflateRaw(t)}},{pako:24}],9:[function(t,e,n){"use strict";var s=t("./base64");function r(t,e){if(!(this instanceof r))return new r(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}r.prototype=t("./object"),r.prototype.load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return s.encode(t)},decode:function(t){return s.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e,n){"use strict";var s=t("./base64"),r=t("./zipEntries");e.exports=function(t,e){var n,o,i,a;for((e=e||{}).base64&&(t=s.decode(t)),n=(o=new r(t,e)).files,i=0;i<n.length;i++)a=n[i],this.file(a.fileName,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileComment.length?a.fileComment:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e,n){(function(t){"use strict";e.exports=function(e,n){return new t(e,n)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e,n){"use strict";var s=t("./uint8ArrayReader");function r(t){this.data=t,this.length=this.data.length,this.index=0}r.prototype=new s,r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":18}],13:[function(t,e,n){"use strict";var s=t("./support"),r=t("./utils"),o=t("./crc32"),i=t("./signature"),a=t("./defaults"),l=t("./base64"),d=t("./compressions"),c=t("./compressedObject"),u=t("./nodeBuffer"),h=t("./utf8"),f=t("./stringWriter"),p=t("./uint8ArrayWriter"),m=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===r.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=m(t);return"string"===r.getTypeOf(e)?!t.options.binary&&s.nodebuffer?u(e,"utf-8"):t.asBinary():e},b=function(t){var e=m(this);return null==e?"":(this.options.base64&&(e=l.decode(e)),e=t&&this.options.binary?F.utf8decode(e):r.transformTo("string",e),t||this.options.binary||(e=r.transformTo("string",F.utf8encode(e))),e)},v=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};v.prototype={asText:function(){return b.call(this,!0)},asBinary:function(){return b.call(this,!1)},asNodeBuffer:function(){var t=g(this);return r.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return r.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var y=function(t,e){var n,s="";for(n=0;n<e;n++)s+=String.fromCharCode(255&t),t>>>=8;return s},w=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},_=function(t,e,n){var s,o=r.getTypeOf(e);if("string"==typeof(n=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),(t=w(t,a)).date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t}(n)).unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(t=C(t)),n.createFolders&&(s=x(t))&&T.call(this,s,!0),n.dir||null==e)n.base64=!1,n.binary=!1,e=null,o=null;else if("string"===o)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(e=r.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=r.transformTo("uint8array",e))}var i=new v(t,e,n);return this.files[t]=i,i},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},C=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},T=function(t,e){return e=void 0!==e&&e,t=C(t),this.files[t]||_.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},I=function(t,e,n){var s,i=new c;return t._data instanceof c?(i.uncompressedSize=t._data.uncompressedSize,i.crc32=t._data.crc32,0===i.uncompressedSize||t.dir?(e=d.STORE,i.compressedContent="",i.crc32=0):t._data.compressionMethod===e.magic?i.compressedContent=t._data.getCompressedContent():(s=t._data.getContent(),i.compressedContent=e.compress(r.transformTo(e.compressInputType,s),n))):((s=g(t))&&0!==s.length&&!t.dir||(e=d.STORE,s=""),i.uncompressedSize=s.length,i.crc32=o(s),i.compressedContent=e.compress(r.transformTo(e.compressInputType,s),n)),i.compressedSize=i.compressedContent.length,i.compressionMethod=e.magic,i},S=function(t,e,n,s,a){n.compressedContent;var l,d,c,u,f=r.transformTo("string",h.utf8encode(e.name)),p=e.comment||"",m=r.transformTo("string",h.utf8encode(p)),g=f.length!==e.name.length,b=m.length!==p.length,v=e.options,w="",_="",x="";c=e._initialMetadata.dir!==e.dir?e.dir:v.dir,u=e._initialMetadata.date!==e.date?e.date:v.date;var C,T,I,S=0,F=0;c&&(S|=16),"UNIX"===a?(F=798,S|=(C=e.unixPermissions,T=c,I=C,C||(I=T?16893:33204),(65535&I)<<16)):(F=20,S|=63&(e.dosPermissions||0)),l=u.getHours(),l<<=6,l|=u.getMinutes(),l<<=5,l|=u.getSeconds()/2,d=u.getFullYear()-1980,d<<=4,d|=u.getMonth()+1,d<<=5,d|=u.getDate(),g&&(_=y(1,1)+y(o(f),4)+f,w+="up"+y(_.length,2)+_),b&&(x=y(1,1)+y(this.crc32(m),4)+m,w+="uc"+y(x.length,2)+x);var D="";return D+="\n\0",D+=g||b?"\0\b":"\0\0",D+=n.compressionMethod,D+=y(l,2),D+=y(d,2),D+=y(n.crc32,4),D+=y(n.compressedSize,4),D+=y(n.uncompressedSize,4),D+=y(f.length,2),D+=y(w.length,2),{fileRecord:i.LOCAL_FILE_HEADER+D+f+w,dirRecord:i.CENTRAL_FILE_HEADER+y(F,2)+D+y(m.length,2)+"\0\0\0\0"+y(S,4)+y(s,4)+f+w+m,compressedObject:n}},F={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,s,r,o=[];for(e in this.files)this.files.hasOwnProperty(e)&&(s=this.files[e],r=new v(s.name,s._data,w(s.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,r)&&o.push(r));return o},file:function(t,e,n){if(1===arguments.length){if(r.isRegExp(t)){var s=t;return this.filter((function(t,e){return!e.dir&&s.test(t)}))}return this.filter((function(e,n){return!n.dir&&e===t}))[0]||null}return t=this.root+t,_.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(r.isRegExp(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=T.call(this,e),s=this.clone();return s.root=n.name,s},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),s=0;s<n.length;s++)delete this.files[n[s].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),r.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,n,s=[],o=0,a=0,c=r.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var u in this.files)if(this.files.hasOwnProperty(u)){var h=this.files[u],m=h.options.compression||t.compression.toUpperCase(),g=d[m];if(!g)throw new Error(m+" is not a valid compression method !");var b=h.options.compressionOptions||t.compressionOptions||{},v=I.call(this,h,g,b),_=S.call(this,u,h,v,o,t.platform);o+=_.fileRecord.length+v.compressedSize,a+=_.dirRecord.length,s.push(_)}var x;x=i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(s.length,2)+y(s.length,2)+y(a,4)+y(o,4)+y(c.length,2)+c;var C=t.type.toLowerCase();for(e="uint8array"===C||"arraybuffer"===C||"blob"===C||"nodebuffer"===C?new p(o+a+x.length):new f(o+a+x.length),n=0;n<s.length;n++)e.append(s[n].fileRecord),e.append(s[n].compressedObject.compressedContent);for(n=0;n<s.length;n++)e.append(s[n].dirRecord);e.append(x);var T=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(t.type.toLowerCase(),T);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",T),t.mimeType);case"base64":return t.base64?l.encode(T):T;default:return T}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return r.transformTo("string",h.utf8encode(t))},utf8decode:function(t){return h.utf8decode(t)}};e.exports=F},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e,n){"use strict";var s=t("./dataReader"),r=t("./utils");function o(t,e){this.data=t,e||(this.data=r.string2binary(this.data)),this.length=this.data.length,this.index=0}o.prototype=new s,o.prototype.byteAt=function(t){return this.data.charCodeAt(t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=o},{"./dataReader":5,"./utils":21}],16:[function(t,e,n){"use strict";var s=t("./utils"),r=function(){this.data=[]};r.prototype={append:function(t){t=s.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=r},{"./utils":21}],17:[function(t,e,n){(function(t){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var e=new ArrayBuffer(0);try{n.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);s.append(e),n.blob=0===s.getBlob("application/zip").size}catch(t){n.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e,n){"use strict";var s=t("./dataReader");function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}r.prototype=new s,r.prototype.byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),s=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===s&&this.data[o+3]===r)return o;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5}],19:[function(t,e,n){"use strict";var s=t("./utils"),r=function(t){this.data=new Uint8Array(t),this.index=0};r.prototype={append:function(t){0!==t.length&&(t=s.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=r},{"./utils":21}],20:[function(t,e,n){"use strict";for(var s=t("./utils"),r=t("./support"),o=t("./nodeBuffer"),i=new Array(256),a=0;a<256;a++)i[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;i[254]=i[254]=1;var l=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+i[t[n]]>e?n:e},d=function(t){var e,n,r,o,a=t.length,l=new Array(2*a);for(n=0,e=0;e<a;)if((r=t[e++])<128)l[n++]=r;else if((o=i[r])>4)l[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&e<a;)r=r<<6|63&t[e++],o--;o>1?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),s.applyFromCharCode(l)};n.utf8encode=function(t){return r.nodebuffer?o(t,"utf-8"):function(t){var e,n,s,o,i,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(s=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(s-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),i=0,o=0;i<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(s=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(s-56320),o++),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e}(t)},n.utf8decode=function(t){if(r.nodebuffer)return s.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],n=0,o=(t=s.transformTo(r.uint8array?"uint8array":"array",t)).length;n<o;){var i=l(t,Math.min(n+65536,o));r.uint8array?e.push(d(t.subarray(n,i))):e.push(d(t.slice(n,i))),n=i}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,n){"use strict";var s=t("./support"),r=t("./compressions"),o=t("./nodeBuffer");function i(t){return t}function a(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function l(t){var e=65536,s=[],r=t.length,i=n.getTypeOf(t),a=0,l=!0;try{switch(i){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch(t){l=!1}if(!l){for(var d="",c=0;c<t.length;c++)d+=String.fromCharCode(t[c]);return d}for(;a<r&&e>1;)try{"array"===i||"nodebuffer"===i?s.push(String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,r)))):s.push(String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,r)))),a+=e}catch(t){e=Math.floor(e/2)}return s.join("")}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},n.arrayBuffer2Blob=function(t,e){n.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(n){try{var s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return s.append(t),s.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=l;var c={};c.string={string:i,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:function(t){return a(t,o(t.length))}},c.array={string:l,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(t)}},c.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(new Uint8Array(t))}},c.uint8array={string:l,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return o(t)}},c.nodebuffer={string:l,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:i},n.transformTo=function(t,e){if(e||(e=""),!t)return e;n.checkSupport(t);var s=n.getTypeOf(e);return c[s][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":s.nodebuffer&&o.test(t)?"nodebuffer":s.uint8array&&t instanceof Uint8Array?"uint8array":s.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!s[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,s="";for(n=0;n<(t||"").length;n++)s+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return s},n.findCompression=function(t){for(var e in r)if(r.hasOwnProperty(e)&&r[e].magic===t)return r[e];return null},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e,n){"use strict";var s=t("./stringReader"),r=t("./nodeBufferReader"),o=t("./uint8ArrayReader"),i=t("./utils"),a=t("./signature"),l=t("./zipEntry"),d=t("./support"),c=t("./object");function u(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}u.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,s=this.zip64EndOfCentralSize-44;0<s;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===a.CENTRAL_FILE_HEADER;)(t=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(a.LOCAL_FILE_HEADER),e=!1}catch(t){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=i.getTypeOf(t);"string"!==e||d.uint8array?this.reader="nodebuffer"===e?new r(t):new o(i.transformTo("uint8array",t)):this.reader=new s(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e,n){"use strict";var s=t("./stringReader"),r=t("./utils"),o=t("./compressedObject"),i=t("./object");function a(t,e){this.options=t,this.loadOptions=e}a.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var s=t.index;t.setIndex(e);var r=t.readData(n);return t.setIndex(s),r}},prepareContent:function(t,e,n,s,o){return function(){var t=r.transformTo(s.uncompressInputType,this.getCompressedContent()),e=s.uncompress(t);if(e.length!==o)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=r.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=r.transformTo("string",this.decompressed.getContent()),i.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,s,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),s=t.readString(n),this.extraFields[e]={id:e,length:n,value:s}},handleUTF8:function(){if(this.useUTF8())this.fileName=i.utf8decode(this.fileName),this.fileComment=i.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new s(t.value);return 1!==e.readInt(1)||i.crc32(this.fileName)!==e.readInt(4)?null:i.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new s(t.value);return 1!==e.readInt(1)||i.crc32(this.fileComment)!==e.readInt(4)?null:i.utf8decode(e.readString(t.length-5))}return null}},e.exports=a},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e,n){"use strict";var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=s},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,n){"use strict";var s=t("./zlib/deflate.js"),r=t("./utils/common"),o=t("./utils/strings"),i=t("./zlib/messages"),a=t("./zlib/zstream"),l=function(t){this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(i[n]);e.header&&s.deflateSetHeader(this.strm,e.header)};function d(t,e){var n=new l(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}l.prototype.push=function(t,e){var n,i,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,a.input="string"==typeof t?o.string2buf(t):t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(l),a.next_out=0,a.avail_out=l),1!==(n=s.deflate(a,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;(0===a.avail_out||0===a.avail_in&&4===i)&&("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4!==i||(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=l,n.deflate=d,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,d(t,e)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,n){"use strict";var s=t("./zlib/inflate.js"),r=t("./utils/common"),o=t("./utils/strings"),i=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),d=t("./zlib/gzheader"),c=function(t){this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=s.inflateInit2(this.strm,e.windowBits);if(n!==i.Z_OK)throw new Error(a[n]);this.header=new d,s.inflateGetHeader(this.strm,this.header)};function u(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}c.prototype.push=function(t,e){var n,a,l,d,c,u=this.strm,h=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?i.Z_FINISH:i.Z_NO_FLUSH,u.input="string"==typeof t?o.binstring2buf(t):t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new r.Buf8(h),u.next_out=0,u.avail_out=h),(n=s.inflate(u,i.Z_NO_FLUSH))!==i.Z_STREAM_END&&n!==i.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0===u.avail_out||n===i.Z_STREAM_END||0===u.avail_in&&a===i.Z_FINISH)&&("string"===this.options.to?(l=o.utf8border(u.output,u.next_out),d=u.next_out-l,c=o.buf2string(u.output,l),u.next_out=d,u.avail_out=h-d,d&&r.arraySet(u.output,u.output,l,d,0),this.onData(c)):this.onData(r.shrinkBuf(u.output,u.next_out)))}while(u.avail_in>0&&n!==i.Z_STREAM_END);return n===i.Z_STREAM_END&&(a=i.Z_FINISH),a!==i.Z_FINISH||(n=s.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===i.Z_OK)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=u,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},n.ungzip=u},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,n){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,s,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+s),r);else for(var o=0;o<s;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,s,r,o,i;for(s=0,e=0,n=t.length;e<n;e++)s+=t[e].length;for(i=new Uint8Array(s),r=0,e=0,n=t.length;e<n;e++)o=t[e],i.set(o,r),r+=o.length;return i}},o={arraySet:function(t,e,n,s,r){for(var o=0;o<s;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],28:[function(t,e,n){"use strict";var s=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var i=new s.Buf8(256),a=0;a<256;a++)i[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}i[254]=i[254]=1,n.string2buf=function(t){var e,n,r,o,i,a=t.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new s.Buf8(l),i=0,o=0;i<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|63&n):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|63&n):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new s.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,s,r,o,a=e||t.length,d=new Array(2*a);for(s=0,n=0;n<a;)if((r=t[n++])<128)d[s++]=r;else if((o=i[r])>4)d[s++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<a;)r=r<<6|63&t[n++],o--;o>1?d[s++]=65533:r<65536?d[s++]=r:(r-=65536,d[s++]=55296|r>>10&1023,d[s++]=56320|1023&r)}return l(d,s)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+i[t[n]]>e?n:e}},{"./common":27}],29:[function(t,e,n){"use strict";e.exports=function(t,e,n,s){for(var r=65535&t|0,o=t>>>16&65535|0,i=0;0!==n;){n-=i=n>2e3?2e3:n;do{o=o+(r=r+e[s++]|0)|0}while(--i);r%=65521,o%=65521}return r|o<<16|0}},{}],30:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e,n){"use strict";var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var s=0;s<8;s++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=s,i=r+n;t^=-1;for(var a=r;a<i;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],32:[function(t,e,n){"use strict";var s=t("../utils/common"),r=t("./trees"),o=t("./adler32"),i=t("./crc32"),a=t("./messages");function l(t,e){return t.msg=a[e],e}function d(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function u(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(s.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function h(t,e){r._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,u(t.strm)}function f(t,e){t.pending_buf[t.pending++]=e}function p(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function m(t,e){var n,s,r=t.max_chain_length,o=t.strstart,i=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,d=t.window,c=t.w_mask,u=t.prev,h=t.strstart+258,f=d[o+i-1],p=d[o+i];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(d[(n=e)+i]===p&&d[n+i-1]===f&&d[n]===d[o]&&d[++n]===d[o+1]){o+=2,n++;do{}while(d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&d[++o]===d[++n]&&o<h);if(s=258-(h-o),o=h-258,s>i){if(t.match_start=e,i=s,s>=a)break;f=d[o+i-1],p=d[o+i]}}}while((e=u[e&c])>l&&0!=--r);return i<=t.lookahead?i:t.lookahead}function g(t){var e,n,r,a,l,d,c,u,h,f,p=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){s.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=p?r-p:0}while(--n);e=n=p;do{r=t.prev[--e],t.prev[e]=r>=p?r-p:0}while(--n);a+=p}if(0===t.strm.avail_in)break;if(d=t.strm,c=t.window,u=t.strstart+t.lookahead,h=a,f=void 0,(f=d.avail_in)>h&&(f=h),n=0===f?0:(d.avail_in-=f,s.arraySet(c,d.input,d.next_in,f,u),1===d.state.wrap?d.adler=o(d.adler,c,f,u):2===d.state.wrap&&(d.adler=i(d.adler,c,f,u)),d.next_in+=f,d.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function b(t,e){for(var n,s;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=m(t,n)),t.match_length>=3)if(s=r._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else s=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(s&&(h(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(h(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?1:2}function v(t,e){for(var n,s,o;;){if(t.lookahead<262){if(g(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=m(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,s=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,s&&(h(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((s=r._tr_tally(t,0,t.window[t.strstart-1]))&&h(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(s=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(h(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?1:2}var y,w=function(t,e,n,s,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=s,this.func=r};function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,r._tr_init(e),0):l(t,-2)}function C(t){var e,n=x(t);return 0===n&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=y[e.level].max_lazy,e.good_match=y[e.level].good_length,e.nice_match=y[e.level].nice_length,e.max_chain_length=y[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function T(t,e,n,r,o,i){if(!t)return-2;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>9||8!==n||r<8||r>15||e<0||e>9||i<0||i>4)return l(t,-2);8===r&&(r=9);var d=new _;return t.state=d,d.strm=t,d.wrap=a,d.gzhead=null,d.w_bits=r,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=o+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+3-1)/3),d.window=new s.Buf8(2*d.w_size),d.head=new s.Buf16(d.hash_size),d.prev=new s.Buf16(d.w_size),d.lit_bufsize=1<<o+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new s.Buf8(d.pending_buf_size),d.d_buf=d.lit_bufsize>>1,d.l_buf=3*d.lit_bufsize,d.level=e,d.strategy=i,d.method=n,C(t)}y=[new w(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(g(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+n;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,h(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(h(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(h(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(h(t,!1),t.strm.avail_out),1)})),new w(4,4,8,4,b),new w(4,5,16,8,b),new w(4,6,32,32,b),new w(4,4,16,16,v),new w(8,16,32,32,v),new w(8,16,128,128,v),new w(8,32,128,256,v),new w(32,128,258,1024,v),new w(32,258,258,4096,v)],n.deflateInit=function(t,e){return T(t,e,8,15,8,0)},n.deflateInit2=T,n.deflateReset=C,n.deflateResetKeep=x,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},n.deflate=function(t,e){var n,s,o,a;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||666===s.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(s.strm=t,n=s.last_flush,s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,f(s,31),f(s,139),f(s,8),s.gzhead?(f(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),f(s,255&s.gzhead.time),f(s,s.gzhead.time>>8&255),f(s,s.gzhead.time>>16&255),f(s,s.gzhead.time>>24&255),f(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),f(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(f(s,255&s.gzhead.extra.length),f(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=i(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(f(s,0),f(s,0),f(s,0),f(s,0),f(s,0),f(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),f(s,3),s.status=113);else{var m=8+(s.w_bits-8<<4)<<8;m|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(m|=32),m+=31-m%31,s.status=113,p(s,m),0!==s.strstart&&(p(s,t.adler>>>16),p(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(o=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),u(t),o=s.pending,s.pending!==s.pending_buf_size));)f(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),u(t),o=s.pending,s.pending===s.pending_buf_size)){a=1;break}a=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,f(s,a)}while(0!==a);s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),0===a&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),u(t),o=s.pending,s.pending===s.pending_buf_size)){a=1;break}a=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,f(s,a)}while(0!==a);s.gzhead.hcrc&&s.pending>o&&(t.adler=i(t.adler,s.pending_buf,s.pending-o,o)),0===a&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&u(t),s.pending+2<=s.pending_buf_size&&(f(s,255&t.adler),f(s,t.adler>>8&255),t.adler=0,s.status=113)):s.status=113),0!==s.pending){if(u(t),0===t.avail_out)return s.last_flush=-1,0}else if(0===t.avail_in&&d(e)<=d(n)&&4!==e)return l(t,-5);if(666===s.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==s.lookahead||0!==e&&666!==s.status){var b=2===s.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(g(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(h(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(h(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?1:2}(s,e):3===s.strategy?function(t,e){for(var n,s,o,i,a=t.window;;){if(t.lookahead<=258){if(g(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(s=a[o=t.strstart-1])===a[++o]&&s===a[++o]&&s===a[++o]){i=t.strstart+258;do{}while(s===a[++o]&&s===a[++o]&&s===a[++o]&&s===a[++o]&&s===a[++o]&&s===a[++o]&&s===a[++o]&&s===a[++o]&&o<i);t.match_length=258-(i-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=r._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(h(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(h(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(h(t,!1),0===t.strm.avail_out)?1:2}(s,e):y[s.level].func(s,e);if(3!==b&&4!==b||(s.status=666),1===b||3===b)return 0===t.avail_out&&(s.last_flush=-1),0;if(2===b&&(1===e?r._tr_align(s):5!==e&&(r._tr_stored_block(s,0,0,!1),3===e&&(c(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),u(t),0===t.avail_out))return s.last_flush=-1,0}return 4!==e?0:s.wrap<=0?1:(2===s.wrap?(f(s,255&t.adler),f(s,t.adler>>8&255),f(s,t.adler>>16&255),f(s,t.adler>>24&255),f(s,255&t.total_in),f(s,t.total_in>>8&255),f(s,t.total_in>>16&255),f(s,t.total_in>>24&255)):(p(s,t.adler>>>16),p(s,65535&t.adler)),u(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(t,e,n){"use strict";e.exports=function(t,e){var n,s,r,o,i,a,l,d,c,u,h,f,p,m,g,b,v,y,w,_,x,C,T,I,S;n=t.state,s=t.next_in,I=t.input,r=s+(t.avail_in-5),o=t.next_out,S=t.output,i=o-(e-t.avail_out),a=o+(t.avail_out-257),l=n.dmax,d=n.wsize,c=n.whave,u=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(f+=I[s++]<<p,p+=8,f+=I[s++]<<p,p+=8),y=m[f&b];e:for(;;){if(f>>>=w=y>>>24,p-=w,0===(w=y>>>16&255))S[o++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=m[(65535&y)+(f&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&y,(w&=15)&&(p<w&&(f+=I[s++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=I[s++]<<p,p+=8,f+=I[s++]<<p,p+=8),y=g[f&v];n:for(;;){if(f>>>=w=y>>>24,p-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=g[(65535&y)+(f&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&y,p<(w&=15)&&(f+=I[s++]<<p,(p+=8)<w&&(f+=I[s++]<<p,p+=8)),(x+=f&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=w,p-=w,x>(w=o-i)){if((w=x-w)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(C=0,T=h,0===u){if(C+=d-w,w<_){_-=w;do{S[o++]=h[C++]}while(--w);C=o-x,T=S}}else if(u<w){if(C+=d+u-w,(w-=u)<_){_-=w;do{S[o++]=h[C++]}while(--w);if(C=0,u<_){_-=w=u;do{S[o++]=h[C++]}while(--w);C=o-x,T=S}}}else if(C+=u-w,w<_){_-=w;do{S[o++]=h[C++]}while(--w);C=o-x,T=S}for(;_>2;)S[o++]=T[C++],S[o++]=T[C++],S[o++]=T[C++],_-=3;_&&(S[o++]=T[C++],_>1&&(S[o++]=T[C++]))}else{C=o-x;do{S[o++]=S[C++],S[o++]=S[C++],S[o++]=S[C++],_-=3}while(_>2);_&&(S[o++]=S[C++],_>1&&(S[o++]=S[C++]))}break}}break}}while(s<r&&o<a);s-=_=p>>3,f&=(1<<(p-=_<<3))-1,t.next_in=s,t.next_out=o,t.avail_in=s<r?r-s+5:5-(s-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},{}],35:[function(t,e,n){"use strict";var s=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),i=t("./inffast"),a=t("./inftrees");function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new s.Buf32(852),e.distcode=e.distdyn=new s.Buf32(592),e.sane=1,e.back=-1,0):-2}function u(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function h(t,e){var n,s;return t&&t.state?(s=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==s.window&&s.wbits!==e&&(s.window=null),s.wrap=n,s.wbits=e,u(t))):-2}function f(t,e){var n,s;return t?(s=new d,t.state=s,s.window=null,0!==(n=h(t,e))&&(t.state=null),n):-2}var p,m,g=!0;function b(t){if(g){var e;for(p=new s.Buf32(512),m=new s.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,m,0,t.work,{bits:5}),g=!1}t.lencode=p,t.lenbits=9,t.distcode=m,t.distbits=5}n.inflateReset=u,n.inflateReset2=h,n.inflateResetKeep=c,n.inflateInit=function(t){return f(t,15)},n.inflateInit2=f,n.inflate=function(t,e){var n,d,c,u,h,f,p,m,g,v,y,w,_,x,C,T,I,S,F,D,k,A,P,R,B=0,L=new s.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),h=t.next_out,c=t.output,p=t.avail_out,u=t.next_in,d=t.input,f=t.avail_in,m=n.hold,g=n.bits,v=f,y=p,A=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(2&n.wrap&&35615===m){n.check=0,L[0]=255&m,L[1]=m>>>8&255,n.check=o(n.check,L,2,0),m=0,g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",n.mode=30;break}if(g-=4,k=8+(15&(m>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<k,t.adler=n.check=1,n.mode=512&m?10:12,m=0,g=0;break;case 2:for(;g<16;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(n.flags=m,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=m>>8&1),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=o(n.check,L,2,0)),m=0,g=0,n.mode=3;case 3:for(;g<32;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.head&&(n.head.time=m),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,L[2]=m>>>16&255,L[3]=m>>>24&255,n.check=o(n.check,L,4,0)),m=0,g=0,n.mode=4;case 4:for(;g<16;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.head&&(n.head.xflags=255&m,n.head.os=m>>8),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=o(n.check,L,2,0)),m=0,g=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.length=m,n.head&&(n.head.extra_len=m),512&n.flags&&(L[0]=255&m,L[1]=m>>>8&255,n.check=o(n.check,L,2,0)),m=0,g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=n.length)>f&&(w=f),w&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),s.arraySet(n.head.extra,d,u,w,k)),512&n.flags&&(n.check=o(n.check,d,w,u)),f-=w,u+=w,n.length-=w),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===f)break t;w=0;do{k=d[u+w++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&w<f);if(512&n.flags&&(n.check=o(n.check,d,w,u)),f-=w,u+=w,k)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===f)break t;w=0;do{k=d[u+w++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&w<f);if(512&n.flags&&(n.check=o(n.check,d,w,u)),f-=w,u+=w,k)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(m!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}m=0,g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}t.adler=n.check=l(m),m=0,g=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=h,t.avail_out=p,t.next_in=u,t.avail_in=f,n.hold=m,n.bits=g,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){m>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}switch(n.last=1&m,g-=1,3&(m>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6===e){m>>>=2,g-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}m>>>=2,g-=2;break;case 14:for(m>>>=7&g,g-=7&g;g<32;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&m,m=0,g=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(w=n.length){if(w>f&&(w=f),w>p&&(w=p),0===w)break t;s.arraySet(c,d,u,w,h),f-=w,u+=w,p-=w,h+=w,n.length-=w;break}n.mode=12;break;case 17:for(;g<14;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(n.nlen=257+(31&m),m>>>=5,g-=5,n.ndist=1+(31&m),m>>>=5,g-=5,n.ncode=4+(15&m),m>>>=4,g-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.lens[O[n.have++]]=7&m,m>>>=3,g-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},A=a(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,A){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(B=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=g);){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(I<16)m>>>=C,g-=C,n.lens[n.have++]=I;else{if(16===I){for(R=C+2;g<R;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(m>>>=C,g-=C,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}k=n.lens[n.have-1],w=3+(3&m),m>>>=2,g-=2}else if(17===I){for(R=C+3;g<R;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}g-=C,k=0,w=3+(7&(m>>>=C)),m>>>=3,g-=3}else{for(R=C+7;g<R;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}g-=C,k=0,w=11+(127&(m>>>=C)),m>>>=7,g-=7}if(n.have+w>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=k}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},A=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,A){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},A=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,A){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(f>=6&&p>=258){t.next_out=h,t.avail_out=p,t.next_in=u,t.avail_in=f,n.hold=m,n.bits=g,i(t,y),h=t.next_out,c=t.output,p=t.avail_out,u=t.next_in,d=t.input,f=t.avail_in,m=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=(B=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=g);){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(T&&0==(240&T)){for(S=C,F=T,D=I;T=(B=n.lencode[D+((m&(1<<S+F)-1)>>S)])>>>16&255,I=65535&B,!(S+(C=B>>>24)<=g);){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}m>>>=S,g-=S,n.back+=S}if(m>>>=C,g-=C,n.back+=C,n.length=I,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=12;break}if(64&T){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(R=n.extra;g<R;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.length+=m&(1<<n.extra)-1,m>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(B=n.distcode[m&(1<<n.distbits)-1])>>>16&255,I=65535&B,!((C=B>>>24)<=g);){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(0==(240&T)){for(S=C,F=T,D=I;T=(B=n.distcode[D+((m&(1<<S+F)-1)>>S)])>>>16&255,I=65535&B,!(S+(C=B>>>24)<=g);){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}m>>>=S,g-=S,n.back+=S}if(m>>>=C,g-=C,n.back+=C,64&T){t.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(R=n.extra;g<R;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}n.offset+=m&(1<<n.extra)-1,m>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break t;if(w=y-p,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}w>n.wnext?(w-=n.wnext,_=n.wsize-w):_=n.wnext-w,w>n.length&&(w=n.length),x=n.window}else x=c,_=h-n.offset,w=n.length;w>p&&(w=p),p-=w,n.length-=w;do{c[h++]=x[_++]}while(--w);0===n.length&&(n.mode=21);break;case 26:if(0===p)break t;c[h++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===f)break t;f--,m|=d[u++]<<g,g+=8}if(y-=p,t.total_out+=y,n.total+=y,y&&(t.adler=n.check=n.flags?o(n.check,c,y,h-y):r(n.check,c,y,h-y)),y=p,(n.flags?m:l(m))!==n.check){t.msg="incorrect data check",n.mode=30;break}m=0,g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===f)break t;f--,m+=d[u++]<<g,g+=8}if(m!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}m=0,g=0}n.mode=29;case 29:A=1;break t;case 30:A=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=h,t.avail_out=p,t.next_in=u,t.avail_in=f,n.hold=m,n.bits=g,(n.wsize||y!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&function(t,e,n,r){var o,i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new s.Buf8(i.wsize)),r>=i.wsize?(s.arraySet(i.window,e,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>r&&(o=r),s.arraySet(i.window,e,n-r,o,i.wnext),(r-=o)?(s.arraySet(i.window,e,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}(t,t.output,t.next_out,y-t.avail_out)?(n.mode=31,-4):(v-=t.avail_in,y-=t.avail_out,t.total_in+=v,t.total_out+=y,n.total+=y,n.wrap&&y&&(t.adler=n.check=n.flags?o(n.check,c,y,t.next_out-y):r(n.check,c,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===v&&0===y||4===e)&&0===A&&(A=-5),A)},n.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e,n){"use strict";var s=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,d,c,u,h){var f,p,m,g,b,v,y,w,_,x=h.bits,C=0,T=0,I=0,S=0,F=0,D=0,k=0,A=0,P=0,R=0,B=null,L=0,O=new s.Buf16(16),N=new s.Buf16(16),E=null,z=0;for(C=0;C<=15;C++)O[C]=0;for(T=0;T<l;T++)O[e[n+T]]++;for(F=x,S=15;S>=1&&0===O[S];S--);if(F>S&&(F=S),0===S)return d[c++]=20971520,d[c++]=20971520,h.bits=1,0;for(I=1;I<S&&0===O[I];I++);for(F<I&&(F=I),A=1,C=1;C<=15;C++)if(A<<=1,(A-=O[C])<0)return-1;if(A>0&&(0===t||1!==S))return-1;for(N[1]=0,C=1;C<15;C++)N[C+1]=N[C]+O[C];for(T=0;T<l;T++)0!==e[n+T]&&(u[N[e[n+T]]++]=T);if(0===t?(B=E=u,v=19):1===t?(B=r,L-=257,E=o,z-=257,v=256):(B=i,E=a,v=-1),R=0,T=0,C=I,b=c,D=F,k=0,m=-1,g=(P=1<<F)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){y=C-k,u[T]<v?(w=0,_=u[T]):u[T]>v?(w=E[z+u[T]],_=B[L+u[T]]):(w=96,_=0),f=1<<C-k,I=p=1<<D;do{d[b+(R>>k)+(p-=f)]=y<<24|w<<16|_|0}while(0!==p);for(f=1<<C-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,T++,0==--O[C]){if(C===S)break;C=e[n+u[T]]}if(C>F&&(R&g)!==m){for(0===k&&(k=F),b+=I,A=1<<(D=C-k);D+k<S&&!((A-=O[D+k])<=0);)D++,A<<=1;if(P+=1<<D,1===t&&P>852||2===t&&P>592)return 1;d[m=R&g]=F<<24|D<<16|b-c|0}}return 0!==R&&(d[b+R]=C-k<<24|64<<16|0),h.bits=F,0}},{"../utils/common":27}],37:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,n){"use strict";var s=t("../utils/common");function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],i=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);r(d);var c=new Array(60);r(c);var u=new Array(512);r(u);var h=new Array(256);r(h);var f=new Array(29);r(f);var p=new Array(30);r(p);var m,g,b,v=function(t,e,n,s,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=s,this.max_length=r,this.has_stree=t&&t.length},y=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e};function w(t){return t<256?u[t]:u[256+(t>>>7)]}function _(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function C(t,e,n){x(t,n[2*e],n[2*e+1])}function T(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function I(t,e,n){var s,r,o=new Array(16),i=0;for(s=1;s<=15;s++)o[s]=i=i+n[s-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=T(o[a]++,a))}}function S(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function F(t){t.bi_valid>8?_(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function D(t,e,n,s){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&s[e]<=s[n]}function k(t,e,n){for(var s=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&D(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!D(e,s,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=s}function A(t,e,n){var s,r,a,l,d=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],r=t.pending_buf[t.l_buf+d],d++,0===s?C(t,r,e):(C(t,(a=h[r])+256+1,e),0!==(l=o[a])&&x(t,r-=f[a],l),C(t,a=w(--s),n),0!==(l=i[a])&&x(t,s-=p[a],l))}while(d<t.last_lit);C(t,256,e)}function P(t,e){var n,s,r,o=e.dyn_tree,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,d=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=d=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=i[2*r+1]);for(e.max_code=d,n=t.heap_len>>1;n>=1;n--)k(t,o,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],k(t,o,1),s=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=s,o[2*r]=o[2*n]+o[2*s],t.depth[r]=(t.depth[n]>=t.depth[s]?t.depth[n]:t.depth[s])+1,o[2*n+1]=o[2*s+1]=r,t.heap[1]=r++,k(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,s,r,o,i,a,l=e.dyn_tree,d=e.max_code,c=e.stat_desc.static_tree,u=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=l[2*l[2*(s=t.heap[n])+1]+1]+1)>p&&(o=p,m++),l[2*s+1]=o,s>d||(t.bl_count[o]++,i=0,s>=f&&(i=h[s-f]),a=l[2*s],t.opt_len+=a*(o+i),u&&(t.static_len+=a*(c[2*s+1]+i)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(s=t.bl_count[o];0!==s;)(r=t.heap[--n])>d||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),s--)}}(t,e),I(o,d,t.bl_count)}function R(t,e,n){var s,r,o=-1,i=e[1],a=0,l=7,d=4;for(0===i&&(l=138,d=3),e[2*(n+1)+1]=65535,s=0;s<=n;s++)r=i,i=e[2*(s+1)+1],++a<l&&r===i||(a<d?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===i?(l=138,d=3):r===i?(l=6,d=3):(l=7,d=4))}function B(t,e,n){var s,r,o=-1,i=e[1],a=0,l=7,d=4;for(0===i&&(l=138,d=3),s=0;s<=n;s++)if(r=i,i=e[2*(s+1)+1],!(++a<l&&r===i)){if(a<d)do{C(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(C(t,r,t.bl_tree),a--),C(t,16,t.bl_tree),x(t,a-3,2)):a<=10?(C(t,17,t.bl_tree),x(t,a-3,3)):(C(t,18,t.bl_tree),x(t,a-11,7));a=0,o=r,0===i?(l=138,d=3):r===i?(l=6,d=3):(l=7,d=4)}}var L=!1;function O(t,e,n,r){x(t,0+(r?1:0),3),function(t,e,n,r){F(t),r&&(_(t,n),_(t,~n)),s.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){L||(!function(){var t,e,n,s,r,l=new Array(16);for(n=0,s=0;s<28;s++)for(f[s]=n,t=0;t<1<<o[s];t++)h[n++]=s;for(h[n-1]=s,r=0,s=0;s<16;s++)for(p[s]=r,t=0;t<1<<i[s];t++)u[r++]=s;for(r>>=7;s<30;s++)for(p[s]=r<<7,t=0;t<1<<i[s]-7;t++)u[256+r++]=s;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,l[8]++;for(;t<=255;)d[2*t+1]=9,t++,l[9]++;for(;t<=279;)d[2*t+1]=7,t++,l[7]++;for(;t<=287;)d[2*t+1]=8,t++,l[8]++;for(I(d,287,l),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=T(t,5);m=new v(d,o,257,286,15),g=new v(c,i,0,30,15),b=new v(new Array(0),a,0,19,7)}(),L=!0),t.l_desc=new y(t.dyn_ltree,m),t.d_desc=new y(t.dyn_dtree,g),t.bl_desc=new y(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,S(t)},n._tr_stored_block=O,n._tr_flush_block=function(t,e,n,s){var r,o,i=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),i=function(t){var e;for(R(t,t.dyn_ltree,t.l_desc.max_code),R(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?O(t,e,n,s):4===t.strategy||o===r?(x(t,2+(s?1:0),3),A(t,d,c)):(x(t,4+(s?1:0),3),function(t,e,n,s){var r;for(x(t,e-257,5),x(t,n-1,5),x(t,s-4,4),r=0;r<s;r++)x(t,t.bl_tree[2*l[r]+1],3);B(t,t.dyn_ltree,e-1),B(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,i+1),A(t,t.dyn_ltree,t.dyn_dtree)),S(t),s&&F(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(h[n]+256+1)]++,t.dyn_dtree[2*w(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){x(t,2,3),C(t,256,d),function(t){16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":27}],39:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)})),
/*! DataTables 1.10.21
 * ©2008-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r,o,i,a,l=function(e){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new o(t?oe(this[r.iApiIndex]):this)},this.fnAddData=function(e,n){var r=this.api(!0),o=t.isArray(e)&&(t.isArray(e[0])||t.isPlainObject(e[0]))?r.rows.add(e):r.row.add(e);return(n===s||n)&&r.draw(),o.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],r=n.oScroll;t===s||t?e.draw(!1):""===r.sX&&""===r.sY||Mt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===s||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var r=this.api(!0),o=r.rows(t),i=o.settings()[0],a=i.aoData[o[0][0]];return o.remove(),e&&e.call(this,i,a),(n===s||n)&&r.draw(),a},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,r,o,i){var a=this.api(!0);null===e||e===s?a.search(t,n,r,i):a.column(e).search(t,n,r,i),a.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t!==s){var r=t.nodeName?t.nodeName.toLowerCase():"";return e!==s||"td"==r||"th"==r?n.cell(t,e).data():n.row(t).data()||null}return n.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==s?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();if("TR"==n)return e.row(t).index();if("TD"==n||"TH"==n){var s=e.cell(t).index();return[s.row,s.columnVisible,s.column]}return null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===s||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){var r=this.api(!0).column(t).visible(e);(n===s||n)&&r.columns.adjust().draw()},this.fnSettings=function(){return oe(this[r.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,r,o){var i=this.api(!0);return n===s||null===n?i.row(e).data(t):i.cell(e,n).data(t),(o===s||o)&&i.columns.adjust(),(r===s||r)&&i.draw(),0},this.fnVersionCheck=r.fnVersionCheck;var n=this,i=e===s,a=this.length;for(var d in i&&(e={}),this.oApi=this.internal=r.internal,l.ext.internal)d&&(this[d]=Be(d));return this.each((function(){var r,o=a>1?le({},e,!0):e,d=0,c=this.getAttribute("id"),u=!1,h=l.defaults,f=t(this);if("table"==this.nodeName.toLowerCase()){A(h),P(h.column),F(h,h,!0),F(h.column,h.column,!0),F(h,t.extend(o,f.data()),!0);var p=l.settings;for(d=0,r=p.length;d<r;d++){var m=p[d];if(m.nTable==this||m.nTHead&&m.nTHead.parentNode==this||m.nTFoot&&m.nTFoot.parentNode==this){var g=o.bRetrieve!==s?o.bRetrieve:h.bRetrieve,b=o.bDestroy!==s?o.bDestroy:h.bDestroy;if(i||g)return m.oInstance;if(b){m.oInstance.fnDestroy();break}return void ie(m,0,"Cannot reinitialise DataTable",3)}if(m.sTableId==this.id){p.splice(d,1);break}}null!==c&&""!==c||(c="DataTables_Table_"+l.ext._unique++,this.id=c);var v=t.extend(!0,{},l.models.oSettings,{sDestroyWidth:f[0].style.width,sInstance:c,sTableId:c});v.nTable=this,v.oApi=n.internal,v.oInit=o,p.push(v),v.oInstance=1===n.length?n:f.dataTable(),A(o),D(o.oLanguage),o.aLengthMenu&&!o.iDisplayLength&&(o.iDisplayLength=t.isArray(o.aLengthMenu[0])?o.aLengthMenu[0][0]:o.aLengthMenu[0]),o=le(t.extend(!0,{},h),o),ae(v.oFeatures,o,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),ae(v,o,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),ae(v.oScroll,o,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),ae(v.oLanguage,o,"fnInfoCallback"),ce(v,"aoDrawCallback",o.fnDrawCallback,"user"),ce(v,"aoServerParams",o.fnServerParams,"user"),ce(v,"aoStateSaveParams",o.fnStateSaveParams,"user"),ce(v,"aoStateLoadParams",o.fnStateLoadParams,"user"),ce(v,"aoStateLoaded",o.fnStateLoaded,"user"),ce(v,"aoRowCallback",o.fnRowCallback,"user"),ce(v,"aoRowCreatedCallback",o.fnCreatedRow,"user"),ce(v,"aoHeaderCallback",o.fnHeaderCallback,"user"),ce(v,"aoFooterCallback",o.fnFooterCallback,"user"),ce(v,"aoInitComplete",o.fnInitComplete,"user"),ce(v,"aoPreDrawCallback",o.fnPreDrawCallback,"user"),v.rowIdFn=K(o.rowId),R(v);var y=v.oClasses;if(t.extend(y,l.ext.classes,o.oClasses),f.addClass(y.sTable),v.iInitDisplayStart===s&&(v.iInitDisplayStart=o.iDisplayStart,v._iDisplayStart=o.iDisplayStart),null!==o.iDeferLoading){v.bDeferLoading=!0;var w=t.isArray(o.iDeferLoading);v._iRecordsDisplay=w?o.iDeferLoading[0]:o.iDeferLoading,v._iRecordsTotal=w?o.iDeferLoading[1]:o.iDeferLoading}var _=v.oLanguage;t.extend(!0,_,o.oLanguage),_.sUrl&&(t.ajax({dataType:"json",url:_.sUrl,success:function(e){D(e),F(h.oLanguage,e),t.extend(!0,_,e),Rt(v)},error:function(){Rt(v)}}),u=!0),null===o.asStripeClasses&&(v.asStripeClasses=[y.sStripeOdd,y.sStripeEven]);var x=v.asStripeClasses,C=f.children("tbody").find("tr").eq(0);-1!==t.inArray(!0,t.map(x,(function(t,e){return C.hasClass(t)})))&&(t("tbody tr",this).removeClass(x.join(" ")),v.asDestroyStripes=x.slice());var T,I=[],S=this.getElementsByTagName("thead");if(0!==S.length&&(ct(v.aoHeader,S[0]),I=ut(v)),null===o.aoColumns)for(T=[],d=0,r=I.length;d<r;d++)T.push(null);else T=o.aoColumns;for(d=0,r=T.length;d<r;d++)L(v,I?I[d]:null);if(W(v,o.aoColumnDefs,T,(function(t,e){O(v,t,e)})),C.length){var k=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};t(C[0]).children("th, td").each((function(t,e){var n=v.aoColumns[t];if(n.mData===t){var r=k(e,"sort")||k(e,"order"),o=k(e,"filter")||k(e,"search");null===r&&null===o||(n.mData={_:t+".display",sort:null!==r?t+".@data-"+r:s,type:null!==r?t+".@data-"+r:s,filter:null!==o?t+".@data-"+o:s},O(v,t))}}))}var B=v.oFeatures,N=function(){if(o.aaSorting===s){var e=v.aaSorting;for(d=0,r=e.length;d<r;d++)e[d][1]=v.aoColumns[d].asSorting[0]}ee(v),B.bSort&&ce(v,"aoDrawCallback",(function(){if(v.bSorted){var e=Kt(v),n={};t.each(e,(function(t,e){n[e.src]=e.dir})),ue(v,null,"order",[v,e,n]),Jt(v)}})),ce(v,"aoDrawCallback",(function(){(v.bSorted||"ssp"===pe(v)||B.bDeferRender)&&ee(v)}),"sc");var n=f.children("caption").each((function(){this._captionSide=t(this).css("caption-side")})),i=f.children("thead");0===i.length&&(i=t("<thead/>").appendTo(f)),v.nTHead=i[0];var a=f.children("tbody");0===a.length&&(a=t("<tbody/>").appendTo(f)),v.nTBody=a[0];var l=f.children("tfoot");if(0===l.length&&n.length>0&&(""!==v.oScroll.sX||""!==v.oScroll.sY)&&(l=t("<tfoot/>").appendTo(f)),0===l.length||0===l.children().length?f.addClass(y.sNoFooter):l.length>0&&(v.nTFoot=l[0],ct(v.aoFooter,v.nTFoot)),o.aaData)for(d=0;d<o.aaData.length;d++)U(v,o.aaData[d]);else(v.bDeferLoading||"dom"==pe(v))&&q(v,t(v.nTBody).children("tr"));v.aiDisplay=v.aiDisplayMaster.slice(),v.bInitialised=!0,!1===u&&Rt(v)};o.bStateSave?(B.bStateSave=!0,ce(v,"aoDrawCallback",se,"state_save"),re(v,o,N)):N()}else ie(null,0,"Non-table node initialisation ("+this.nodeName+")",2)})),n=null,this},d={},c=/[\r\n\u2028]/g,u=/<.*?>/g,h=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,f=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),p=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,m=function(t){return!t||!0===t||"-"===t},g=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},b=function(t,e){return d[e]||(d[e]=new RegExp(Ct(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(d[e],"."):t},v=function(t,e,n){var s="string"==typeof t;return!!m(t)||(e&&s&&(t=b(t,e)),n&&s&&(t=t.replace(p,"")),!isNaN(parseFloat(t))&&isFinite(t))},y=function(t,e,n){return!!m(t)||(function(t){return m(t)||"string"==typeof t}(t)&&!!v(T(t),e,n)||null)},w=function(t,e,n){var r=[],o=0,i=t.length;if(n!==s)for(;o<i;o++)t[o]&&t[o][e]&&r.push(t[o][e][n]);else for(;o<i;o++)t[o]&&r.push(t[o][e]);return r},_=function(t,e,n,r){var o=[],i=0,a=e.length;if(r!==s)for(;i<a;i++)t[e[i]][n]&&o.push(t[e[i]][n][r]);else for(;i<a;i++)o.push(t[e[i]][n]);return o},x=function(t,e){var n,r=[];e===s?(e=0,n=t):(n=e,e=t);for(var o=e;o<n;o++)r.push(o);return r},C=function(t){for(var e=[],n=0,s=t.length;n<s;n++)t[n]&&e.push(t[n]);return e},T=function(t){return t.replace(u,"")},I=function(t){if(function(t){if(t.length<2)return!0;for(var e=t.slice().sort(),n=e[0],s=1,r=e.length;s<r;s++){if(e[s]===n)return!1;n=e[s]}return!0}(t))return t.slice();var e,n,s,r=[],o=t.length,i=0;t:for(n=0;n<o;n++){for(e=t[n],s=0;s<i;s++)if(r[s]===e)continue t;r.push(e),i++}return r};function S(e){var n,s,r={};t.each(e,(function(t,o){(n=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(s=t.replace(n[0],n[2].toLowerCase()),r[s]=t,"o"===n[1]&&S(e[t]))})),e._hungarianMap=r}function F(e,n,r){var o;e._hungarianMap||S(e),t.each(n,(function(i,a){(o=e._hungarianMap[i])===s||!r&&n[o]!==s||("o"===o.charAt(0)?(n[o]||(n[o]={}),t.extend(!0,n[o],n[i]),F(e[o],n[o],r)):n[o]=n[i])}))}function D(t){var e=l.defaults.oLanguage,n=e.sDecimal;if(n&&Pe(n),t){var s=t.sZeroRecords;!t.sEmptyTable&&s&&"No data available in table"===e.sEmptyTable&&ae(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&s&&"Loading..."===e.sLoadingRecords&&ae(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands);var r=t.sDecimal;r&&n!==r&&Pe(r)}}l.util={throttle:function(t,e){var n,r,o=e!==s?e:200;return function(){var e=this,i=+new Date,a=arguments;n&&i<n+o?(clearTimeout(r),r=setTimeout((function(){n=s,t.apply(e,a)}),o)):(n=i,t.apply(e,a))}},escapeRegex:function(t){return t.replace(f,"\\$1")}};var k=function(t,e,n){t[e]!==s&&(t[n]=t[e])};function A(t){k(t,"ordering","bSort"),k(t,"orderMulti","bSortMulti"),k(t,"orderClasses","bSortClasses"),k(t,"orderCellsTop","bSortCellsTop"),k(t,"order","aaSorting"),k(t,"orderFixed","aaSortingFixed"),k(t,"paging","bPaginate"),k(t,"pagingType","sPaginationType"),k(t,"pageLength","iDisplayLength"),k(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":"");var e=t.aoSearchCols;if(e)for(var n=0,s=e.length;n<s;n++)e[n]&&F(l.models.oSearch,e[n])}function P(e){k(e,"orderable","bSortable"),k(e,"orderData","aDataSort"),k(e,"orderSequence","asSorting"),k(e,"orderDataType","sortDataType");var n=e.aDataSort;"number"!=typeof n||t.isArray(n)||(e.aDataSort=[n])}function R(n){if(!l.__browser){var s={};l.__browser=s;var r=t("<div/>").css({position:"fixed",top:0,left:-1*t(e).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(t("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(t("<div/>").css({width:"100%",height:10}))).appendTo("body"),o=r.children(),i=o.children();s.barWidth=o[0].offsetWidth-o[0].clientWidth,s.bScrollOversize=100===i[0].offsetWidth&&100!==o[0].clientWidth,s.bScrollbarLeft=1!==Math.round(i.offset().left),s.bBounding=!!r[0].getBoundingClientRect().width,r.remove()}t.extend(n.oBrowser,l.__browser),n.oScroll.iBarWidth=l.__browser.barWidth}function B(t,e,n,r,o,i){var a,l=r,d=!1;for(n!==s&&(a=n,d=!0);l!==o;)t.hasOwnProperty(l)&&(a=d?e(a,t[l],l,t):t[l],d=!0,l+=i);return a}function L(e,s){var r=l.defaults.column,o=e.aoColumns.length,i=t.extend({},l.models.oColumn,r,{nTh:s||n.createElement("th"),sTitle:r.sTitle?r.sTitle:s?s.innerHTML:"",aDataSort:r.aDataSort?r.aDataSort:[o],mData:r.mData?r.mData:o,idx:o});e.aoColumns.push(i);var a=e.aoPreSearchCols;a[o]=t.extend({},l.models.oSearch,a[o]),O(e,o,t(s).data())}function O(e,n,r){var o=e.aoColumns[n],i=e.oClasses,a=t(o.nTh);if(!o.sWidthOrig){o.sWidthOrig=a.attr("width")||null;var d=(a.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);d&&(o.sWidthOrig=d[1])}r!==s&&null!==r&&(P(r),F(l.defaults.column,r,!0),r.mDataProp===s||r.mData||(r.mData=r.mDataProp),r.sType&&(o._sManualType=r.sType),r.className&&!r.sClass&&(r.sClass=r.className),r.sClass&&a.addClass(r.sClass),t.extend(o,r),ae(o,r,"sWidth","sWidthOrig"),r.iDataSort!==s&&(o.aDataSort=[r.iDataSort]),ae(o,r,"aDataSort"));var c=o.mData,u=K(c),h=o.mRender?K(o.mRender):null,f=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};o._bAttrSrc=t.isPlainObject(c)&&(f(c.sort)||f(c.type)||f(c.filter)),o._setter=null,o.fnGetData=function(t,e,n){var r=u(t,e,s,n);return h&&e?h(r,e,t,n):r},o.fnSetData=function(t,e,n){return Y(c)(t,e,n)},"number"!=typeof c&&(e._rowReadObject=!0),e.oFeatures.bSort||(o.bSortable=!1,a.addClass(i.sSortableNone));var p=-1!==t.inArray("asc",o.asSorting),m=-1!==t.inArray("desc",o.asSorting);o.bSortable&&(p||m)?p&&!m?(o.sSortingClass=i.sSortableAsc,o.sSortingClassJUI=i.sSortJUIAscAllowed):!p&&m?(o.sSortingClass=i.sSortableDesc,o.sSortingClassJUI=i.sSortJUIDescAllowed):(o.sSortingClass=i.sSortable,o.sSortingClassJUI=i.sSortJUI):(o.sSortingClass=i.sSortableNone,o.sSortingClassJUI="")}function N(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;qt(t);for(var n=0,s=e.length;n<s;n++)e[n].nTh.style.width=e[n].sWidth}var r=t.oScroll;""===r.sY&&""===r.sX||Mt(t),ue(t,null,"column-sizing",[t])}function E(t,e){var n=j(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function z(e,n){var s=j(e,"bVisible"),r=t.inArray(n,s);return-1!==r?r:null}function H(e){var n=0;return t.each(e.aoColumns,(function(e,s){s.bVisible&&"none"!==t(s.nTh).css("display")&&n++})),n}function j(e,n){var s=[];return t.map(e.aoColumns,(function(t,e){t[n]&&s.push(e)})),s}function M(t){var e,n,r,o,i,a,d,c,u,h=t.aoColumns,f=t.aoData,p=l.ext.type.detect;for(e=0,n=h.length;e<n;e++)if(u=[],!(d=h[e]).sType&&d._sManualType)d.sType=d._sManualType;else if(!d.sType){for(r=0,o=p.length;r<o;r++){for(i=0,a=f.length;i<a&&(u[i]===s&&(u[i]=V(t,i,e,"type")),(c=p[r](u[i],t))||r===p.length-1)&&"html"!==c;i++);if(c){d.sType=c;break}}d.sType||(d.sType="string")}}function W(e,n,r,o){var i,a,l,d,c,u,h,f=e.aoColumns;if(n)for(i=n.length-1;i>=0;i--){var p=(h=n[i]).targets!==s?h.targets:h.aTargets;for(t.isArray(p)||(p=[p]),l=0,d=p.length;l<d;l++)if("number"==typeof p[l]&&p[l]>=0){for(;f.length<=p[l];)L(e);o(p[l],h)}else if("number"==typeof p[l]&&p[l]<0)o(f.length+p[l],h);else if("string"==typeof p[l])for(c=0,u=f.length;c<u;c++)("_all"==p[l]||t(f[c].nTh).hasClass(p[l]))&&o(c,h)}if(r)for(i=0,a=r.length;i<a;i++)o(i,r[i])}function U(e,n,r,o){var i=e.aoData.length,a=t.extend(!0,{},l.models.oRow,{src:r?"dom":"data",idx:i});a._aData=n,e.aoData.push(a);for(var d=e.aoColumns,c=0,u=d.length;c<u;c++)d[c].sType=null;e.aiDisplayMaster.push(i);var h=e.rowIdFn(n);return h!==s&&(e.aIds[h]=a),!r&&e.oFeatures.bDeferRender||st(e,i,r,o),i}function q(e,n){var s;return n instanceof t||(n=t(n)),n.map((function(t,n){return s=nt(e,n),U(e,s.data,n,s.cells)}))}function V(t,e,n,r){var o=t.iDraw,i=t.aoColumns[n],a=t.aoData[e]._aData,l=i.sDefaultContent,d=i.fnGetData(a,r,{settings:t,row:e,col:n});if(d===s)return t.iDrawError!=o&&null===l&&(ie(t,0,"Requested unknown parameter "+("function"==typeof i.mData?"{function}":"'"+i.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=o),l;if(d!==a&&null!==d||null===l||r===s){if("function"==typeof d)return d.call(a)}else d=l;return null===d&&"display"==r?"":d}function X(t,e,n,s){var r=t.aoColumns[n],o=t.aoData[e]._aData;r.fnSetData(o,s,{settings:t,row:e,col:n})}var G=/\[.*?\]$/,$=/\(\)$/;function Z(e){return t.map(e.match(/(\\.|[^\.])+/g)||[""],(function(t){return t.replace(/\\\./g,".")}))}function K(e){if(t.isPlainObject(e)){var n={};return t.each(e,(function(t,e){e&&(n[t]=K(e))})),function(t,e,r,o){var i=n[e]||n._;return i!==s?i(t,e,r,o):t}}if(null===e)return function(t){return t};if("function"==typeof e)return function(t,n,s,r){return e(t,n,s,r)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t,n){return t[e]};var r=function(e,n,o){var i,a,l,d;if(""!==o)for(var c=Z(o),u=0,h=c.length;u<h;u++){if(i=c[u].match(G),a=c[u].match($),i){if(c[u]=c[u].replace(G,""),""!==c[u]&&(e=e[c[u]]),l=[],c.splice(0,u+1),d=c.join("."),t.isArray(e))for(var f=0,p=e.length;f<p;f++)l.push(r(e[f],n,d));var m=i[0].substring(1,i[0].length-1);e=""===m?l:l.join(m);break}if(a)c[u]=c[u].replace($,""),e=e[c[u]]();else{if(null===e||e[c[u]]===s)return s;e=e[c[u]]}}return e};return function(t,n){return r(t,n,e)}}function Y(e){if(t.isPlainObject(e))return Y(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,s){e(t,"set",n,s)};if("string"!=typeof e||-1===e.indexOf(".")&&-1===e.indexOf("[")&&-1===e.indexOf("("))return function(t,n){t[e]=n};var n=function(e,r,o){for(var i,a,l,d,c,u=Z(o),h=u[u.length-1],f=0,p=u.length-1;f<p;f++){if(a=u[f].match(G),l=u[f].match($),a){if(u[f]=u[f].replace(G,""),e[u[f]]=[],(i=u.slice()).splice(0,f+1),c=i.join("."),t.isArray(r))for(var m=0,g=r.length;m<g;m++)n(d={},r[m],c),e[u[f]].push(d);else e[u[f]]=r;return}l&&(u[f]=u[f].replace($,""),e=e[u[f]](r)),null!==e[u[f]]&&e[u[f]]!==s||(e[u[f]]={}),e=e[u[f]]}h.match($)?e=e[h.replace($,"")](r):e[h.replace(G,"")]=r};return function(t,s){return n(t,s,e)}}function J(t){return w(t.aoData,"_aData")}function Q(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function tt(t,e,n){for(var r=-1,o=0,i=t.length;o<i;o++)t[o]==e?r=o:t[o]>e&&t[o]--;-1!=r&&n===s&&t.splice(r,1)}function et(t,e,n,r){var o,i,a=t.aoData[e],l=function(n,s){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=V(t,e,s,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==a.src)){var d=a.anCells;if(d)if(r!==s)l(d[r],r);else for(o=0,i=d.length;o<i;o++)l(d[o],o)}else a._aData=nt(t,a,r,r===s?s:a._aData).data;a._aSortData=null,a._aFilterData=null;var c=t.aoColumns;if(r!==s)c[r].sType=null;else{for(o=0,i=c.length;o<i;o++)c[o].sType=null;rt(t,a)}}function nt(e,n,r,o){var i,a,l,d=[],c=n.firstChild,u=0,h=e.aoColumns,f=e._rowReadObject;o=o!==s?o:f?{}:[];var p=function(t,e){if("string"==typeof t){var n=t.indexOf("@");if(-1!==n){var s=t.substring(n+1);Y(t)(o,e.getAttribute(s))}}},m=function(e){r!==s&&r!==u||(a=h[u],l=t.trim(e.innerHTML),a&&a._bAttrSrc?(Y(a.mData._)(o,l),p(a.mData.sort,e),p(a.mData.type,e),p(a.mData.filter,e)):f?(a._setter||(a._setter=Y(a.mData)),a._setter(o,l)):o[u]=l);u++};if(c)for(;c;)"TD"!=(i=c.nodeName.toUpperCase())&&"TH"!=i||(m(c),d.push(c)),c=c.nextSibling;else for(var g=0,b=(d=n.anCells).length;g<b;g++)m(d[g]);var v=n.firstChild?n:n.nTr;if(v){var y=v.getAttribute("id");y&&Y(e.rowId)(o,y)}return{data:o,cells:d}}function st(e,s,r,o){var i,a,l,d,c,u,h=e.aoData[s],f=h._aData,p=[];if(null===h.nTr){for(i=r||n.createElement("tr"),h.nTr=i,h.anCells=p,i._DT_RowIndex=s,rt(e,h),d=0,c=e.aoColumns.length;d<c;d++)l=e.aoColumns[d],(a=(u=!r)?n.createElement(l.sCellType):o[d])._DT_CellIndex={row:s,column:d},p.push(a),!u&&(r&&!l.mRender&&l.mData===d||t.isPlainObject(l.mData)&&l.mData._===d+".display")||(a.innerHTML=V(e,s,d,"display")),l.sClass&&(a.className+=" "+l.sClass),l.bVisible&&!r?i.appendChild(a):!l.bVisible&&r&&a.parentNode.removeChild(a),l.fnCreatedCell&&l.fnCreatedCell.call(e.oInstance,a,V(e,s,d),f,s,d);ue(e,"aoRowCreatedCallback",null,[i,f,s,p])}h.nTr.setAttribute("role","row")}function rt(e,n){var s=n.nTr,r=n._aData;if(s){var o=e.rowIdFn(r);if(o&&(s.id=o),r.DT_RowClass){var i=r.DT_RowClass.split(" ");n.__rowc=n.__rowc?I(n.__rowc.concat(i)):i,t(s).removeClass(n.__rowc.join(" ")).addClass(r.DT_RowClass)}r.DT_RowAttr&&t(s).attr(r.DT_RowAttr),r.DT_RowData&&t(s).data(r.DT_RowData)}}function ot(e){var n,s,r,o,i,a=e.nTHead,l=e.nTFoot,d=0===t("th, td",a).length,c=e.oClasses,u=e.aoColumns;for(d&&(o=t("<tr/>").appendTo(a)),n=0,s=u.length;n<s;n++)i=u[n],r=t(i.nTh).addClass(i.sClass),d&&r.appendTo(o),e.oFeatures.bSort&&(r.addClass(i.sSortingClass),!1!==i.bSortable&&(r.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),te(e,i.nTh,n))),i.sTitle!=r[0].innerHTML&&r.html(i.sTitle),fe(e,"header")(e,r,i,c);if(d&&ct(e.aoHeader,a),t(a).find(">tr").attr("role","row"),t(a).find(">tr>th, >tr>td").addClass(c.sHeaderTH),t(l).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==l){var h=e.aoFooter[0];for(n=0,s=h.length;n<s;n++)(i=u[n]).nTf=h[n].cell,i.sClass&&t(i.nTf).addClass(i.sClass)}}function it(e,n,r){var o,i,a,l,d,c,u,h,f,p=[],m=[],g=e.aoColumns.length;if(n){for(r===s&&(r=!1),o=0,i=n.length;o<i;o++){for(p[o]=n[o].slice(),p[o].nTr=n[o].nTr,a=g-1;a>=0;a--)e.aoColumns[a].bVisible||r||p[o].splice(a,1);m.push([])}for(o=0,i=p.length;o<i;o++){if(u=p[o].nTr)for(;c=u.firstChild;)u.removeChild(c);for(a=0,l=p[o].length;a<l;a++)if(h=1,f=1,m[o][a]===s){for(u.appendChild(p[o][a].cell),m[o][a]=1;p[o+h]!==s&&p[o][a].cell==p[o+h][a].cell;)m[o+h][a]=1,h++;for(;p[o][a+f]!==s&&p[o][a].cell==p[o][a+f].cell;){for(d=0;d<h;d++)m[o+d][a+f]=1;f++}t(p[o][a].cell).attr("rowspan",h).attr("colspan",f)}}}}function at(e){var n=ue(e,"aoPreDrawCallback","preDraw",[e]);if(-1===t.inArray(!1,n)){var r=[],o=0,i=e.asStripeClasses,a=i.length,l=(e.aoOpenRows.length,e.oLanguage),d=e.iInitDisplayStart,c="ssp"==pe(e),u=e.aiDisplay;e.bDrawing=!0,d!==s&&-1!==d&&(e._iDisplayStart=c?d:d>=e.fnRecordsDisplay()?0:d,e.iInitDisplayStart=-1);var h=e._iDisplayStart,f=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,Ht(e,!1);else if(c){if(!e.bDestroying&&!ft(e))return}else e.iDraw++;if(0!==u.length)for(var p=c?0:h,m=c?e.aoData.length:f,g=p;g<m;g++){var b=u[g],v=e.aoData[b];null===v.nTr&&st(e,b);var y=v.nTr;if(0!==a){var w=i[o%a];v._sRowStripe!=w&&(t(y).removeClass(v._sRowStripe).addClass(w),v._sRowStripe=w)}ue(e,"aoRowCallback",null,[y,v._aData,o,g,b]),r.push(y),o++}else{var _=l.sZeroRecords;1==e.iDraw&&"ajax"==pe(e)?_=l.sLoadingRecords:l.sEmptyTable&&0===e.fnRecordsTotal()&&(_=l.sEmptyTable),r[0]=t("<tr/>",{class:a?i[0]:""}).append(t("<td />",{valign:"top",colSpan:H(e),class:e.oClasses.sRowEmpty}).html(_))[0]}ue(e,"aoHeaderCallback","header",[t(e.nTHead).children("tr")[0],J(e),h,f,u]),ue(e,"aoFooterCallback","footer",[t(e.nTFoot).children("tr")[0],J(e),h,f,u]);var x=t(e.nTBody);x.children().detach(),x.append(t(r)),ue(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}else Ht(e,!1)}function lt(t,e){var n=t.oFeatures,s=n.bSort,r=n.bFilter;s&&Yt(t),r?vt(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,at(t),t._drawHold=!1}function dt(e){var n=e.oClasses,s=t(e.nTable),r=t("<div/>").insertBefore(s),o=e.oFeatures,i=t("<div/>",{id:e.sTableId+"_wrapper",class:n.sWrapper+(e.nTFoot?"":" "+n.sNoFooter)});e.nHolding=r[0],e.nTableWrapper=i[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var a,d,c,u,h,f,p=e.sDom.split(""),m=0;m<p.length;m++){if(a=null,"<"==(d=p[m])){if(c=t("<div/>")[0],"'"==(u=p[m+1])||'"'==u){for(h="",f=2;p[m+f]!=u;)h+=p[m+f],f++;if("H"==h?h=n.sJUIHeader:"F"==h&&(h=n.sJUIFooter),-1!=h.indexOf(".")){var g=h.split(".");c.id=g[0].substr(1,g[0].length-1),c.className=g[1]}else"#"==h.charAt(0)?c.id=h.substr(1,h.length-1):c.className=h;m+=f}i.append(c),i=t(c)}else if(">"==d)i=i.parent();else if("l"==d&&o.bPaginate&&o.bLengthChange)a=Ot(e);else if("f"==d&&o.bFilter)a=bt(e);else if("r"==d&&o.bProcessing)a=zt(e);else if("t"==d)a=jt(e);else if("i"==d&&o.bInfo)a=kt(e);else if("p"==d&&o.bPaginate)a=Nt(e);else if(0!==l.ext.feature.length)for(var b=l.ext.feature,v=0,y=b.length;v<y;v++)if(d==b[v].cFeature){a=b[v].fnInit(e);break}if(a){var w=e.aanFeatures;w[d]||(w[d]=[]),w[d].push(a),i.append(a)}}r.replaceWith(i),e.nHolding=null}function ct(e,n){var s,r,o,i,a,l,d,c,u,h,f=t(n).children("tr"),p=function(t,e,n){for(var s=t[e];s[n];)n++;return n};for(e.splice(0,e.length),o=0,l=f.length;o<l;o++)e.push([]);for(o=0,l=f.length;o<l;o++)for(0,r=(s=f[o]).firstChild;r;){if("TD"==r.nodeName.toUpperCase()||"TH"==r.nodeName.toUpperCase())for(c=(c=1*r.getAttribute("colspan"))&&0!==c&&1!==c?c:1,u=(u=1*r.getAttribute("rowspan"))&&0!==u&&1!==u?u:1,d=p(e,o,0),h=1===c,a=0;a<c;a++)for(i=0;i<u;i++)e[o+i][d+a]={cell:r,unique:h},e[o+i].nTr=s;r=r.nextSibling}}function ut(t,e,n){var s=[];n||(n=t.aoHeader,e&&ct(n=[],e));for(var r=0,o=n.length;r<o;r++)for(var i=0,a=n[r].length;i<a;i++)!n[r][i].unique||s[i]&&t.bSortCellsTop||(s[i]=n[r][i].cell);return s}function ht(e,n,s){if(ue(e,"aoServerParams","serverParams",[n]),n&&t.isArray(n)){var r={},o=/(.*?)\[\]$/;t.each(n,(function(t,e){var n=e.name.match(o);if(n){var s=n[0];r[s]||(r[s]=[]),r[s].push(e.value)}else r[e.name]=e.value})),n=r}var i,a=e.ajax,l=e.oInstance,d=function(t){ue(e,null,"xhr",[e,t,e.jqXHR]),s(t)};if(t.isPlainObject(a)&&a.data){var c="function"==typeof(i=a.data)?i(n,e):i;n="function"==typeof i&&c?c:t.extend(!0,n,c),delete a.data}var u={data:n,success:function(t){var n=t.error||t.sError;n&&ie(e,0,n),e.json=t,d(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(n,s,r){var o=ue(e,null,"xhr",[e,null,e.jqXHR]);-1===t.inArray(!0,o)&&("parsererror"==s?ie(e,0,"Invalid JSON response",1):4===n.readyState&&ie(e,0,"Ajax error",7)),Ht(e,!1)}};e.oAjaxData=n,ue(e,null,"preXhr",[e,n]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,t.map(n,(function(t,e){return{name:e,value:t}})),d,e):e.sAjaxSource||"string"==typeof a?e.jqXHR=t.ajax(t.extend(u,{url:a||e.sAjaxSource})):"function"==typeof a?e.jqXHR=a.call(l,n,d,e):(e.jqXHR=t.ajax(t.extend(u,a)),a.data=i)}function ft(t){return!t.bAjaxDataGet||(t.iDraw++,Ht(t,!0),ht(t,pt(t),(function(e){mt(t,e)})),!1)}function pt(e){var n,s,r,o,i=e.aoColumns,a=i.length,d=e.oFeatures,c=e.oPreviousSearch,u=e.aoPreSearchCols,h=[],f=Kt(e),p=e._iDisplayStart,m=!1!==d.bPaginate?e._iDisplayLength:-1,g=function(t,e){h.push({name:t,value:e})};g("sEcho",e.iDraw),g("iColumns",a),g("sColumns",w(i,"sName").join(",")),g("iDisplayStart",p),g("iDisplayLength",m);var b={draw:e.iDraw,columns:[],order:[],start:p,length:m,search:{value:c.sSearch,regex:c.bRegex}};for(n=0;n<a;n++)r=i[n],o=u[n],s="function"==typeof r.mData?"function":r.mData,b.columns.push({data:s,name:r.sName,searchable:r.bSearchable,orderable:r.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),g("mDataProp_"+n,s),d.bFilter&&(g("sSearch_"+n,o.sSearch),g("bRegex_"+n,o.bRegex),g("bSearchable_"+n,r.bSearchable)),d.bSort&&g("bSortable_"+n,r.bSortable);d.bFilter&&(g("sSearch",c.sSearch),g("bRegex",c.bRegex)),d.bSort&&(t.each(f,(function(t,e){b.order.push({column:e.col,dir:e.dir}),g("iSortCol_"+t,e.col),g("sSortDir_"+t,e.dir)})),g("iSortingCols",f.length));var v=l.ext.legacy.ajax;return null===v?e.sAjaxSource?h:b:v?h:b}function mt(t,e){var n=function(t,n){return e[t]!==s?e[t]:e[n]},r=gt(t,e),o=n("sEcho","draw"),i=n("iTotalRecords","recordsTotal"),a=n("iTotalDisplayRecords","recordsFiltered");if(o!==s){if(1*o<t.iDraw)return;t.iDraw=1*o}Q(t),t._iRecordsTotal=parseInt(i,10),t._iRecordsDisplay=parseInt(a,10);for(var l=0,d=r.length;l<d;l++)U(t,r[l]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,at(t),t._bInitComplete||Bt(t,e),t.bAjaxDataGet=!0,Ht(t,!1)}function gt(e,n){var r=t.isPlainObject(e.ajax)&&e.ajax.dataSrc!==s?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===r?n.aaData||n[r]:""!==r?K(r)(n):n}function bt(e){var s=e.oClasses,r=e.sTableId,o=e.oLanguage,i=e.oPreviousSearch,a=e.aanFeatures,l='<input type="search" class="'+s.sFilterInput+'"/>',d=o.sSearch;d=d.match(/_INPUT_/)?d.replace("_INPUT_",l):d+l;var c=t("<div/>",{id:a.f?null:r+"_filter",class:s.sFilter}).append(t("<label/>").append(d)),u=function(){a.f;var t=this.value?this.value:"";t!=i.sSearch&&(vt(e,{sSearch:t,bRegex:i.bRegex,bSmart:i.bSmart,bCaseInsensitive:i.bCaseInsensitive}),e._iDisplayStart=0,at(e))},h=null!==e.searchDelay?e.searchDelay:"ssp"===pe(e)?400:0,f=t("input",c).val(i.sSearch).attr("placeholder",o.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",h?Vt(u,h):u).on("mouseup",(function(t){setTimeout((function(){u.call(f[0])}),10)})).on("keypress.DT",(function(t){if(13==t.keyCode)return!1})).attr("aria-controls",r);return t(e.nTable).on("search.dt.DT",(function(t,s){if(e===s)try{f[0]!==n.activeElement&&f.val(i.sSearch)}catch(t){}})),c[0]}function vt(t,e,n){var r=t.oPreviousSearch,o=t.aoPreSearchCols,i=function(t){r.sSearch=t.sSearch,r.bRegex=t.bRegex,r.bSmart=t.bSmart,r.bCaseInsensitive=t.bCaseInsensitive},a=function(t){return t.bEscapeRegex!==s?!t.bEscapeRegex:t.bRegex};if(M(t),"ssp"!=pe(t)){_t(t,e.sSearch,n,a(e),e.bSmart,e.bCaseInsensitive),i(e);for(var l=0;l<o.length;l++)wt(t,o[l].sSearch,l,a(o[l]),o[l].bSmart,o[l].bCaseInsensitive);yt(t)}else i(e);t.bFiltered=!0,ue(t,null,"search",[t])}function yt(e){for(var n,s,r=l.ext.search,o=e.aiDisplay,i=0,a=r.length;i<a;i++){for(var d=[],c=0,u=o.length;c<u;c++)s=o[c],n=e.aoData[s],r[i](e,n._aFilterData,s,n._aData,c)&&d.push(s);o.length=0,t.merge(o,d)}}function wt(t,e,n,s,r,o){if(""!==e){for(var i,a=[],l=t.aiDisplay,d=xt(e,s,r,o),c=0;c<l.length;c++)i=t.aoData[l[c]]._aFilterData[n],d.test(i)&&a.push(l[c]);t.aiDisplay=a}}function _t(t,e,n,s,r,o){var i,a,d,c=xt(e,s,r,o),u=t.oPreviousSearch.sSearch,h=t.aiDisplayMaster,f=[];if(0!==l.ext.search.length&&(n=!0),a=St(t),e.length<=0)t.aiDisplay=h.slice();else{for((a||n||s||u.length>e.length||0!==e.indexOf(u)||t.bSorted)&&(t.aiDisplay=h.slice()),i=t.aiDisplay,d=0;d<i.length;d++)c.test(t.aoData[i[d]]._sFilterRow)&&f.push(i[d]);t.aiDisplay=f}}function xt(e,n,s,r){if(e=n?e:Ct(e),s){var o=t.map(e.match(/"[^"]+"|[^ ]+/g)||[""],(function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")}));e="^(?=.*?"+o.join(")(?=.*?")+").*$"}return new RegExp(e,r?"i":"")}var Ct=l.util.escapeRegex,Tt=t("<div>")[0],It=Tt.textContent!==s;function St(t){var e,n,s,r,o,i,a,d,c=t.aoColumns,u=l.ext.type.search,h=!1;for(n=0,r=t.aoData.length;n<r;n++)if(!(d=t.aoData[n])._aFilterData){for(i=[],s=0,o=c.length;s<o;s++)(e=c[s]).bSearchable?(a=V(t,n,s,"filter"),u[e.sType]&&(a=u[e.sType](a)),null===a&&(a=""),"string"!=typeof a&&a.toString&&(a=a.toString())):a="",a.indexOf&&-1!==a.indexOf("&")&&(Tt.innerHTML=a,a=It?Tt.textContent:Tt.innerText),a.replace&&(a=a.replace(/[\r\n\u2028]/g,"")),i.push(a);d._aFilterData=i,d._sFilterRow=i.join("  "),h=!0}return h}function Ft(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function Dt(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function kt(e){var n=e.sTableId,s=e.aanFeatures.i,r=t("<div/>",{class:e.oClasses.sInfo,id:s?null:n+"_info"});return s||(e.aoDrawCallback.push({fn:At,sName:"information"}),r.attr("role","status").attr("aria-live","polite"),t(e.nTable).attr("aria-describedby",n+"_info")),r[0]}function At(e){var n=e.aanFeatures.i;if(0!==n.length){var s=e.oLanguage,r=e._iDisplayStart+1,o=e.fnDisplayEnd(),i=e.fnRecordsTotal(),a=e.fnRecordsDisplay(),l=a?s.sInfo:s.sInfoEmpty;a!==i&&(l+=" "+s.sInfoFiltered),l=Pt(e,l+=s.sInfoPostFix);var d=s.fnInfoCallback;null!==d&&(l=d.call(e.oInstance,e,r,o,i,a,l)),t(n).html(l)}}function Pt(t,e){var n=t.fnFormatNumber,s=t._iDisplayStart+1,r=t._iDisplayLength,o=t.fnRecordsDisplay(),i=-1===r;return e.replace(/_START_/g,n.call(t,s)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,i?1:Math.ceil(s/r))).replace(/_PAGES_/g,n.call(t,i?1:Math.ceil(o/r)))}function Rt(t){var e,n,s,r=t.iInitDisplayStart,o=t.aoColumns,i=t.oFeatures,a=t.bDeferLoading;if(t.bInitialised){for(dt(t),ot(t),it(t,t.aoHeader),it(t,t.aoFooter),Ht(t,!0),i.bAutoWidth&&qt(t),e=0,n=o.length;e<n;e++)(s=o[e]).sWidth&&(s.nTh.style.width=Zt(s.sWidth));ue(t,null,"preInit",[t]),lt(t);var l=pe(t);("ssp"!=l||a)&&("ajax"==l?ht(t,[],(function(n){var s=gt(t,n);for(e=0;e<s.length;e++)U(t,s[e]);t.iInitDisplayStart=r,lt(t),Ht(t,!1),Bt(t,n)})):(Ht(t,!1),Bt(t)))}else setTimeout((function(){Rt(t)}),200)}function Bt(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&N(t),ue(t,null,"plugin-init",[t,e]),ue(t,"aoInitComplete","init",[t,e])}function Lt(t,e){var n=parseInt(e,10);t._iDisplayLength=n,he(t),ue(t,null,"length",[t,n])}function Ot(e){for(var n=e.oClasses,s=e.sTableId,r=e.aLengthMenu,o=t.isArray(r[0]),i=o?r[0]:r,a=o?r[1]:r,l=t("<select/>",{name:s+"_length","aria-controls":s,class:n.sLengthSelect}),d=0,c=i.length;d<c;d++)l[0][d]=new Option("number"==typeof a[d]?e.fnFormatNumber(a[d]):a[d],i[d]);var u=t("<div><label/></div>").addClass(n.sLength);return e.aanFeatures.l||(u[0].id=s+"_length"),u.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",l[0].outerHTML)),t("select",u).val(e._iDisplayLength).on("change.DT",(function(n){Lt(e,t(this).val()),at(e)})),t(e.nTable).on("length.dt.DT",(function(n,s,r){e===s&&t("select",u).val(r)})),u[0]}function Nt(e){var n=e.sPaginationType,s=l.ext.pager[n],r="function"==typeof s,o=function(t){at(t)},i=t("<div/>").addClass(e.oClasses.sPaging+n)[0],a=e.aanFeatures;return r||s.fnInit(e,i,o),a.p||(i.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(t){if(r){var e,n,i=t._iDisplayStart,l=t._iDisplayLength,d=t.fnRecordsDisplay(),c=-1===l,u=c?0:Math.ceil(i/l),h=c?1:Math.ceil(d/l),f=s(u,h);for(e=0,n=a.p.length;e<n;e++)fe(t,"pageButton")(t,a.p[e],e,f,u,h)}else s.fnUpdate(t,o)},sName:"pagination"})),i}function Et(t,e,n){var s=t._iDisplayStart,r=t._iDisplayLength,o=t.fnRecordsDisplay();0===o||-1===r?s=0:"number"==typeof e?(s=e*r)>o&&(s=0):"first"==e?s=0:"previous"==e?(s=r>=0?s-r:0)<0&&(s=0):"next"==e?s+r<o&&(s+=r):"last"==e?s=Math.floor((o-1)/r)*r:ie(t,0,"Unknown paging action: "+e,5);var i=t._iDisplayStart!==s;return t._iDisplayStart=s,i&&(ue(t,null,"page",[t]),n&&at(t)),i}function zt(e){return t("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function Ht(e,n){e.oFeatures.bProcessing&&t(e.aanFeatures.r).css("display",n?"block":"none"),ue(e,null,"processing",[e,n])}function jt(e){var n=t(e.nTable);n.attr("role","grid");var s=e.oScroll;if(""===s.sX&&""===s.sY)return e.nTable;var r=s.sX,o=s.sY,i=e.oClasses,a=n.children("caption"),l=a.length?a[0]._captionSide:null,d=t(n[0].cloneNode(!1)),c=t(n[0].cloneNode(!1)),u=n.children("tfoot"),h="<div/>",f=function(t){return t?Zt(t):null};u.length||(u=null);var p=t(h,{class:i.sScrollWrapper}).append(t(h,{class:i.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:r?f(r):"100%"}).append(t(h,{class:i.sScrollHeadInner}).css({"box-sizing":"content-box",width:s.sXInner||"100%"}).append(d.removeAttr("id").css("margin-left",0).append("top"===l?a:null).append(n.children("thead"))))).append(t(h,{class:i.sScrollBody}).css({position:"relative",overflow:"auto",width:f(r)}).append(n));u&&p.append(t(h,{class:i.sScrollFoot}).css({overflow:"hidden",border:0,width:r?f(r):"100%"}).append(t(h,{class:i.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===l?a:null).append(n.children("tfoot")))));var m=p.children(),g=m[0],b=m[1],v=u?m[2]:null;return r&&t(b).on("scroll.DT",(function(t){var e=this.scrollLeft;g.scrollLeft=e,u&&(v.scrollLeft=e)})),t(b).css("max-height",o),s.bCollapse||t(b).css("height",o),e.nScrollHead=g,e.nScrollBody=b,e.nScrollFoot=v,e.aoDrawCallback.push({fn:Mt,sName:"scrolling"}),p[0]}function Mt(e){var n,r,o,i,a,l,d,c,u,h=e.oScroll,f=h.sX,p=h.sXInner,m=h.sY,g=h.iBarWidth,b=t(e.nScrollHead),v=b[0].style,y=b.children("div"),_=y[0].style,x=y.children("table"),C=e.nScrollBody,T=t(C),I=C.style,S=t(e.nScrollFoot).children("div"),F=S.children("table"),D=t(e.nTHead),k=t(e.nTable),A=k[0],P=A.style,R=e.nTFoot?t(e.nTFoot):null,B=e.oBrowser,L=B.bScrollOversize,O=w(e.aoColumns,"nTh"),z=[],H=[],j=[],M=[],W=function(t){var e=t.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0},U=C.scrollHeight>C.clientHeight;if(e.scrollBarVis!==U&&e.scrollBarVis!==s)return e.scrollBarVis=U,void N(e);e.scrollBarVis=U,k.children("thead, tfoot").remove(),R&&(l=R.clone().prependTo(k),r=R.find("tr"),i=l.find("tr")),a=D.clone().prependTo(k),n=D.find("tr"),o=a.find("tr"),a.find("th, td").removeAttr("tabindex"),f||(I.width="100%",b[0].style.width="100%"),t.each(ut(e,a),(function(t,n){d=E(e,t),n.style.width=e.aoColumns[d].sWidth})),R&&Wt((function(t){t.style.width=""}),i),u=k.outerWidth(),""===f?(P.width="100%",L&&(k.find("tbody").height()>C.offsetHeight||"scroll"==T.css("overflow-y"))&&(P.width=Zt(k.outerWidth()-g)),u=k.outerWidth()):""!==p&&(P.width=Zt(p),u=k.outerWidth()),Wt(W,o),Wt((function(e){j.push(e.innerHTML),z.push(Zt(t(e).css("width")))}),o),Wt((function(e,n){-1!==t.inArray(e,O)&&(e.style.width=z[n])}),n),t(o).height(0),R&&(Wt(W,i),Wt((function(e){M.push(e.innerHTML),H.push(Zt(t(e).css("width")))}),i),Wt((function(t,e){t.style.width=H[e]}),r),t(i).height(0)),Wt((function(t,e){t.innerHTML='<div class="dataTables_sizing">'+j[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=z[e]}),o),R&&Wt((function(t,e){t.innerHTML='<div class="dataTables_sizing">'+M[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=H[e]}),i),k.outerWidth()<u?(c=C.scrollHeight>C.offsetHeight||"scroll"==T.css("overflow-y")?u+g:u,L&&(C.scrollHeight>C.offsetHeight||"scroll"==T.css("overflow-y"))&&(P.width=Zt(c-g)),""!==f&&""===p||ie(e,1,"Possible column misalignment",6)):c="100%",I.width=Zt(c),v.width=Zt(c),R&&(e.nScrollFoot.style.width=Zt(c)),m||L&&(I.height=Zt(A.offsetHeight+g));var q=k.outerWidth();x[0].style.width=Zt(q),_.width=Zt(q);var V=k.height()>C.clientHeight||"scroll"==T.css("overflow-y"),X="padding"+(B.bScrollbarLeft?"Left":"Right");_[X]=V?g+"px":"0px",R&&(F[0].style.width=Zt(q),S[0].style.width=Zt(q),S[0].style[X]=V?g+"px":"0px"),k.children("colgroup").insertBefore(k.children("thead")),T.trigger("scroll"),!e.bSorted&&!e.bFiltered||e._drawHold||(C.scrollTop=0)}function Wt(t,e,n){for(var s,r,o=0,i=0,a=e.length;i<a;){for(s=e[i].firstChild,r=n?n[i].firstChild:null;s;)1===s.nodeType&&(n?t(s,r,o):t(s,o),o++),s=s.nextSibling,r=n?r.nextSibling:null;i++}}var Ut=/<.*?>/g;function qt(n){var s,r,o,i=n.nTable,a=n.aoColumns,l=n.oScroll,d=l.sY,c=l.sX,u=l.sXInner,h=a.length,f=j(n,"bVisible"),p=t("th",n.nTHead),m=i.getAttribute("width"),g=i.parentNode,b=!1,v=n.oBrowser,y=v.bScrollOversize,w=i.style.width;for(w&&-1!==w.indexOf("%")&&(m=w),s=0;s<f.length;s++)null!==(r=a[f[s]]).sWidth&&(r.sWidth=Xt(r.sWidthOrig,g),b=!0);if(y||!b&&!c&&!d&&h==H(n)&&h==p.length)for(s=0;s<h;s++){var _=E(n,s);null!==_&&(a[_].sWidth=Zt(p.eq(s).width()))}else{var x=t(i).clone().css("visibility","hidden").removeAttr("id");x.find("tbody tr").remove();var C=t("<tr/>").appendTo(x.find("tbody"));for(x.find("thead, tfoot").remove(),x.append(t(n.nTHead).clone()).append(t(n.nTFoot).clone()),x.find("tfoot th, tfoot td").css("width",""),p=ut(n,x.find("thead")[0]),s=0;s<f.length;s++)r=a[f[s]],p[s].style.width=null!==r.sWidthOrig&&""!==r.sWidthOrig?Zt(r.sWidthOrig):"",r.sWidthOrig&&c&&t(p[s]).append(t("<div/>").css({width:r.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(s=0;s<f.length;s++)r=a[o=f[s]],t(Gt(n,o)).clone(!1).append(r.sContentPadding).appendTo(C);t("[name]",x).removeAttr("name");var T=t("<div/>").css(c||d?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(x).appendTo(g);c&&u?x.width(u):c?(x.css("width","auto"),x.removeAttr("width"),x.width()<g.clientWidth&&m&&x.width(g.clientWidth)):d?x.width(g.clientWidth):m&&x.width(m);var I=0;for(s=0;s<f.length;s++){var S=t(p[s]),F=S.outerWidth()-S.width(),D=v.bBounding?Math.ceil(p[s].getBoundingClientRect().width):S.outerWidth();I+=D,a[f[s]].sWidth=Zt(D-F)}i.style.width=Zt(I),T.remove()}if(m&&(i.style.width=Zt(m)),(m||c)&&!n._reszEvt){var k=function(){t(e).on("resize.DT-"+n.sInstance,Vt((function(){N(n)})))};y?setTimeout(k,1e3):k(),n._reszEvt=!0}}var Vt=l.util.throttle;function Xt(e,s){if(!e)return 0;var r=t("<div/>").css("width",Zt(e)).appendTo(s||n.body),o=r[0].offsetWidth;return r.remove(),o}function Gt(e,n){var s=$t(e,n);if(s<0)return null;var r=e.aoData[s];return r.nTr?r.anCells[n]:t("<td/>").html(V(e,s,n,"display"))[0]}function $t(t,e){for(var n,s=-1,r=-1,o=0,i=t.aoData.length;o<i;o++)(n=(n=(n=V(t,o,e,"display")+"").replace(Ut,"")).replace(/&nbsp;/g," ")).length>s&&(s=n.length,r=o);return r}function Zt(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Kt(e){var n,r,o,i,a,d,c,u=[],h=e.aoColumns,f=e.aaSortingFixed,p=t.isPlainObject(f),m=[],g=function(e){e.length&&!t.isArray(e[0])?m.push(e):t.merge(m,e)};for(t.isArray(f)&&g(f),p&&f.pre&&g(f.pre),g(e.aaSorting),p&&f.post&&g(f.post),n=0;n<m.length;n++)for(r=0,o=(i=h[c=m[n][0]].aDataSort).length;r<o;r++)d=h[a=i[r]].sType||"string",m[n]._idx===s&&(m[n]._idx=t.inArray(m[n][1],h[a].asSorting)),u.push({src:c,col:a,dir:m[n][1],index:m[n]._idx,type:d,formatter:l.ext.type.order[d+"-pre"]});return u}function Yt(t){var e,n,s,r,o,i=[],a=l.ext.type.order,d=t.aoData,c=(t.aoColumns,0),u=t.aiDisplayMaster;for(M(t),e=0,n=(o=Kt(t)).length;e<n;e++)(r=o[e]).formatter&&c++,ne(t,r.col);if("ssp"!=pe(t)&&0!==o.length){for(e=0,s=u.length;e<s;e++)i[u[e]]=e;c===o.length?u.sort((function(t,e){var n,s,r,a,l,c=o.length,u=d[t]._aSortData,h=d[e]._aSortData;for(r=0;r<c;r++)if(0!==(a=(n=u[(l=o[r]).col])<(s=h[l.col])?-1:n>s?1:0))return"asc"===l.dir?a:-a;return(n=i[t])<(s=i[e])?-1:n>s?1:0})):u.sort((function(t,e){var n,s,r,l,c,u=o.length,h=d[t]._aSortData,f=d[e]._aSortData;for(r=0;r<u;r++)if(n=h[(c=o[r]).col],s=f[c.col],0!==(l=(a[c.type+"-"+c.dir]||a["string-"+c.dir])(n,s)))return l;return(n=i[t])<(s=i[e])?-1:n>s?1:0}))}t.bSorted=!0}function Jt(t){for(var e,n,s=t.aoColumns,r=Kt(t),o=t.oLanguage.oAria,i=0,a=s.length;i<a;i++){var l=s[i],d=l.asSorting,c=l.sTitle.replace(/<.*?>/g,""),u=l.nTh;u.removeAttribute("aria-sort"),l.bSortable?(r.length>0&&r[0].col==i?(u.setAttribute("aria-sort","asc"==r[0].dir?"ascending":"descending"),n=d[r[0].index+1]||d[0]):n=d[0],e=c+("asc"===n?o.sSortAscending:o.sSortDescending)):e=c,u.setAttribute("aria-label",e)}}function Qt(e,n,r,o){var i,a=e.aoColumns[n],l=e.aaSorting,d=a.asSorting,c=function(e,n){var r=e._idx;return r===s&&(r=t.inArray(e[1],d)),r+1<d.length?r+1:n?null:0};if("number"==typeof l[0]&&(l=e.aaSorting=[l]),r&&e.oFeatures.bSortMulti){var u=t.inArray(n,w(l,"0"));-1!==u?(null===(i=c(l[u],!0))&&1===l.length&&(i=0),null===i?l.splice(u,1):(l[u][1]=d[i],l[u]._idx=i)):(l.push([n,d[0],0]),l[l.length-1]._idx=0)}else l.length&&l[0][0]==n?(i=c(l[0]),l.length=1,l[0][1]=d[i],l[0]._idx=i):(l.length=0,l.push([n,d[0]]),l[0]._idx=0);lt(e),"function"==typeof o&&o(e)}function te(t,e,n,s){var r=t.aoColumns[n];de(e,{},(function(e){!1!==r.bSortable&&(t.oFeatures.bProcessing?(Ht(t,!0),setTimeout((function(){Qt(t,n,e.shiftKey,s),"ssp"!==pe(t)&&Ht(t,!1)}),0)):Qt(t,n,e.shiftKey,s))}))}function ee(e){var n,s,r,o=e.aLastSort,i=e.oClasses.sSortColumn,a=Kt(e),l=e.oFeatures;if(l.bSort&&l.bSortClasses){for(n=0,s=o.length;n<s;n++)r=o[n].src,t(w(e.aoData,"anCells",r)).removeClass(i+(n<2?n+1:3));for(n=0,s=a.length;n<s;n++)r=a[n].src,t(w(e.aoData,"anCells",r)).addClass(i+(n<2?n+1:3))}e.aLastSort=a}function ne(t,e){var n,s,r,o=t.aoColumns[e],i=l.ext.order[o.sSortDataType];i&&(n=i.call(t.oInstance,t,e,z(t,e)));for(var a=l.ext.type.order[o.sType+"-pre"],d=0,c=t.aoData.length;d<c;d++)(s=t.aoData[d])._aSortData||(s._aSortData=[]),s._aSortData[e]&&!i||(r=i?n[d]:V(t,d,e,"sort"),s._aSortData[e]=a?a(r):r)}function se(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var n={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:t.extend(!0,[],e.aaSorting),search:Ft(e.oPreviousSearch),columns:t.map(e.aoColumns,(function(t,n){return{visible:t.bVisible,search:Ft(e.aoPreSearchCols[n])}}))};ue(e,"aoStateSaveParams","stateSaveParams",[e,n]),e.oSavedState=n,e.fnStateSaveCallback.call(e.oInstance,e,n)}}function re(e,n,r){var o,i,a=e.aoColumns,l=function(n){if(n&&n.time){var l=ue(e,"aoStateLoadParams","stateLoadParams",[e,n]);if(-1===t.inArray(!1,l)){var d=e.iStateDuration;if(d>0&&n.time<+new Date-1e3*d)r();else if(n.columns&&a.length!==n.columns.length)r();else{if(e.oLoadedState=t.extend(!0,{},n),n.start!==s&&(e._iDisplayStart=n.start,e.iInitDisplayStart=n.start),n.length!==s&&(e._iDisplayLength=n.length),n.order!==s&&(e.aaSorting=[],t.each(n.order,(function(t,n){e.aaSorting.push(n[0]>=a.length?[0,n[1]]:n)}))),n.search!==s&&t.extend(e.oPreviousSearch,Dt(n.search)),n.columns)for(o=0,i=n.columns.length;o<i;o++){var c=n.columns[o];c.visible!==s&&(a[o].bVisible=c.visible),c.search!==s&&t.extend(e.aoPreSearchCols[o],Dt(c.search))}ue(e,"aoStateLoaded","stateLoaded",[e,n]),r()}}else r()}else r()};if(e.oFeatures.bStateSave){var d=e.fnStateLoadCallback.call(e.oInstance,e,l);d!==s&&l(d)}else r()}function oe(e){var n=l.settings,s=t.inArray(e,w(n,"nTable"));return-1!==s?n[s]:null}function ie(t,n,s,r){if(s="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+s,r&&(s+=". For more information about this error, please see http://datatables.net/tn/"+r),n)e.console&&console.log&&console.log(s);else{var o=l.ext,i=o.sErrMode||o.errMode;if(t&&ue(t,null,"error",[t,r,s]),"alert"==i)alert(s);else{if("throw"==i)throw new Error(s);"function"==typeof i&&i(t,r,s)}}}function ae(e,n,r,o){t.isArray(r)?t.each(r,(function(s,r){t.isArray(r)?ae(e,n,r[0],r[1]):ae(e,n,r)})):(o===s&&(o=r),n[r]!==s&&(e[o]=n[r]))}function le(e,n,s){var r;for(var o in n)n.hasOwnProperty(o)&&(r=n[o],t.isPlainObject(r)?(t.isPlainObject(e[o])||(e[o]={}),t.extend(!0,e[o],r)):s&&"data"!==o&&"aaData"!==o&&t.isArray(r)?e[o]=r.slice():e[o]=r);return e}function de(e,n,s){t(e).on("click.DT",n,(function(n){t(e).trigger("blur"),s(n)})).on("keypress.DT",n,(function(t){13===t.which&&(t.preventDefault(),s(t))})).on("selectstart.DT",(function(){return!1}))}function ce(t,e,n,s){n&&t[e].push({fn:n,sName:s})}function ue(e,n,s,r){var o=[];if(n&&(o=t.map(e[n].slice().reverse(),(function(t,n){return t.fn.apply(e.oInstance,r)}))),null!==s){var i=t.Event(s+".dt");t(e.nTable).trigger(i,r),o.push(i.result)}return o}function he(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),s=t._iDisplayLength;e>=n&&(e=n-s),e-=e%s,(-1===s||e<0)&&(e=0),t._iDisplayStart=e}function fe(e,n){var s=e.renderer,r=l.ext.renderer[n];return t.isPlainObject(s)&&s[n]?r[s[n]]||r._:"string"==typeof s&&r[s]||r._}function pe(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}var me=[],ge=Array.prototype;o=function(e,n){if(!(this instanceof o))return new o(e,n);var s=[],r=function(e){var n=function(e){var n,s,r=l.settings,o=t.map(r,(function(t,e){return t.nTable}));return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?-1!==(n=t.inArray(e,o))?[r[n]]:null:e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?s=t(e):e instanceof t&&(s=e),s?s.map((function(e){return-1!==(n=t.inArray(this,o))?r[n]:null})).toArray():void 0):[]}(e);n&&s.push.apply(s,n)};if(t.isArray(e))for(var i=0,a=e.length;i<a;i++)r(e[i]);else r(e);this.context=I(s),n&&t.merge(this,n),this.selector={rows:null,cols:null,opts:null},o.extend(this,this,me)},l.Api=o,t.extend(o.prototype,{any:function(){return 0!==this.count()},concat:ge.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new o(e[t],this[t]):null},filter:function(t){var e=[];if(ge.filter)e=ge.filter.call(this,t,this);else for(var n=0,s=this.length;n<s;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new o(this.context,e)},flatten:function(){var t=[];return new o(this.context,t.concat.apply(t,this.toArray()))},join:ge.join,indexOf:ge.indexOf||function(t,e){for(var n=e||0,s=this.length;n<s;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,r){var i,a,l,d,c,u,h,f,p=[],m=this.context,g=this.selector;for("string"==typeof t&&(r=n,n=e,e=t,t=!1),a=0,l=m.length;a<l;a++){var b=new o(m[a]);if("table"===e)(i=n.call(b,m[a],a))!==s&&p.push(i);else if("columns"===e||"rows"===e)(i=n.call(b,m[a],this[a],a))!==s&&p.push(i);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(h=this[a],"column-rows"===e&&(u=xe(m[a],g.opts)),d=0,c=h.length;d<c;d++)f=h[d],(i="cell"===e?n.call(b,m[a],f.row,f.column,a,d):n.call(b,m[a],f,a,d,u))!==s&&p.push(i)}if(p.length||r){var v=new o(m,t?p.concat.apply([],p):p),y=v.selector;return y.rows=g.rows,y.cols=g.cols,y.opts=g.opts,v}return this},lastIndexOf:ge.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(ge.map)e=ge.map.call(this,t,this);else for(var n=0,s=this.length;n<s;n++)e.push(t.call(this,this[n],n));return new o(this.context,e)},pluck:function(t){return this.map((function(e){return e[t]}))},pop:ge.pop,push:ge.push,reduce:ge.reduce||function(t,e){return B(this,t,e,0,this.length,1)},reduceRight:ge.reduceRight||function(t,e){return B(this,t,e,this.length-1,-1,-1)},reverse:ge.reverse,selector:null,shift:ge.shift,slice:function(){return new o(this.context,this)},sort:ge.sort,splice:ge.splice,toArray:function(){return ge.slice.call(this)},to$:function(){return t(this)},toJQuery:function(){return t(this)},unique:function(){return new o(this.context,I(this))},unshift:ge.unshift}),o.extend=function(t,e,n){if(n.length&&e&&(e instanceof o||e.__dt_wrapper)){var s,r,i,a=function(t,e,n){return function(){var s=e.apply(t,arguments);return o.extend(s,s,n.methodExt),s}};for(s=0,r=n.length;s<r;s++)e[(i=n[s]).name]="function"===i.type?a(t,i.val,i):"object"===i.type?{}:i.val,e[i.name].__dt_wrapper=!0,o.extend(t,e[i.name],i.propExt)}},o.register=i=function(e,n){if(t.isArray(e))for(var s=0,r=e.length;s<r;s++)o.register(e[s],n);else{var i,a,l,d,c=e.split("."),u=me,h=function(t,e){for(var n=0,s=t.length;n<s;n++)if(t[n].name===e)return t[n];return null};for(i=0,a=c.length;i<a;i++){var f=h(u,l=(d=-1!==c[i].indexOf("()"))?c[i].replace("()",""):c[i]);f||(f={name:l,val:{},methodExt:[],propExt:[],type:"object"},u.push(f)),i===a-1?(f.val=n,f.type="function"==typeof n?"function":t.isPlainObject(n)?"object":"other"):u=d?f.methodExt:f.propExt}}},o.registerPlural=a=function(e,n,r){o.register(e,r),o.register(n,(function(){var e=r.apply(this,arguments);return e===this?this:e instanceof o?e.length?t.isArray(e[0])?new o(e.context,e[0]):e[0]:s:e}))};var be=function(e,n){if(t.isArray(e))return t.map(e,(function(t){return be(t,n)}));if("number"==typeof e)return[n[e]];var s=t.map(n,(function(t,e){return t.nTable}));return t(s).filter(e).map((function(e){var r=t.inArray(this,s);return n[r]})).toArray()};i("tables()",(function(t){return t!==s&&null!==t?new o(be(t,this.context)):this})),i("table()",(function(t){var e=this.tables(t),n=e.context;return n.length?new o(n[0]):e})),a("tables().nodes()","table().node()",(function(){return this.iterator("table",(function(t){return t.nTable}),1)})),a("tables().body()","table().body()",(function(){return this.iterator("table",(function(t){return t.nTBody}),1)})),a("tables().header()","table().header()",(function(){return this.iterator("table",(function(t){return t.nTHead}),1)})),a("tables().footer()","table().footer()",(function(){return this.iterator("table",(function(t){return t.nTFoot}),1)})),a("tables().containers()","table().container()",(function(){return this.iterator("table",(function(t){return t.nTableWrapper}),1)})),i("draw()",(function(t){return this.iterator("table",(function(e){"page"===t?at(e):("string"==typeof t&&(t="full-hold"!==t),lt(e,!1===t))}))})),i("page()",(function(t){return t===s?this.page.info().page:this.iterator("table",(function(e){Et(e,t)}))})),i("page.info()",(function(t){if(0===this.context.length)return s;var e=this.context[0],n=e._iDisplayStart,r=e.oFeatures.bPaginate?e._iDisplayLength:-1,o=e.fnRecordsDisplay(),i=-1===r;return{page:i?0:Math.floor(n/r),pages:i?1:Math.ceil(o/r),start:n,end:e.fnDisplayEnd(),length:r,recordsTotal:e.fnRecordsTotal(),recordsDisplay:o,serverSide:"ssp"===pe(e)}})),i("page.len()",(function(t){return t===s?0!==this.context.length?this.context[0]._iDisplayLength:s:this.iterator("table",(function(e){Lt(e,t)}))}));var ve=function(t,e,n){if(n){var s=new o(t);s.one("draw",(function(){n(s.ajax.json())}))}if("ssp"==pe(t))lt(t,e);else{Ht(t,!0);var r=t.jqXHR;r&&4!==r.readyState&&r.abort(),ht(t,[],(function(n){Q(t);for(var s=gt(t,n),r=0,o=s.length;r<o;r++)U(t,s[r]);lt(t,e),Ht(t,!1)}))}};i("ajax.json()",(function(){var t=this.context;if(t.length>0)return t[0].json})),i("ajax.params()",(function(){var t=this.context;if(t.length>0)return t[0].oAjaxData})),i("ajax.reload()",(function(t,e){return this.iterator("table",(function(n){ve(n,!1===e,t)}))})),i("ajax.url()",(function(e){var n=this.context;return e===s?0===n.length?s:(n=n[0]).ajax?t.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource:this.iterator("table",(function(n){t.isPlainObject(n.ajax)?n.ajax.url=e:n.ajax=e}))})),i("ajax.url().load()",(function(t,e){return this.iterator("table",(function(n){ve(n,!1===e,t)}))}));var ye=function(e,n,o,i,a){var l,d,c,u,h,f,p=[],m=typeof n;for(n&&"string"!==m&&"function"!==m&&n.length!==s||(n=[n]),c=0,u=n.length;c<u;c++)for(h=0,f=(d=n[c]&&n[c].split&&!n[c].match(/[\[\(:]/)?n[c].split(","):[n[c]]).length;h<f;h++)(l=o("string"==typeof d[h]?t.trim(d[h]):d[h]))&&l.length&&(p=p.concat(l));var g=r.selector[e];if(g.length)for(c=0,u=g.length;c<u;c++)p=g[c](i,a,p);return I(p)},we=function(e){return e||(e={}),e.filter&&e.search===s&&(e.search=e.filter),t.extend({search:"none",order:"current",page:"all"},e)},_e=function(t){for(var e=0,n=t.length;e<n;e++)if(t[e].length>0)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},xe=function(e,n){var s,r=[],o=e.aiDisplay,i=e.aiDisplayMaster,a=n.search,l=n.order,d=n.page;if("ssp"==pe(e))return"removed"===a?[]:x(0,i.length);if("current"==d)for(u=e._iDisplayStart,h=e.fnDisplayEnd();u<h;u++)r.push(o[u]);else if("current"==l||"applied"==l){if("none"==a)r=i.slice();else if("applied"==a)r=o.slice();else if("removed"==a){for(var c={},u=0,h=o.length;u<h;u++)c[o[u]]=null;r=t.map(i,(function(t){return c.hasOwnProperty(t)?null:t}))}}else if("index"==l||"original"==l)for(u=0,h=e.aoData.length;u<h;u++)("none"==a||-1===(s=t.inArray(u,o))&&"removed"==a||s>=0&&"applied"==a)&&r.push(u);return r};i("rows()",(function(e,n){e===s?e="":t.isPlainObject(e)&&(n=e,e=""),n=we(n);var r=this.iterator("table",(function(r){return function(e,n,r){var o;return ye("row",n,(function(n){var i=g(n),a=e.aoData;if(null!==i&&!r)return[i];if(o||(o=xe(e,r)),null!==i&&-1!==t.inArray(i,o))return[i];if(null===n||n===s||""===n)return o;if("function"==typeof n)return t.map(o,(function(t){var e=a[t];return n(t,e._aData,e.nTr)?t:null}));if(n.nodeName){var l=n._DT_RowIndex,d=n._DT_CellIndex;if(l!==s)return a[l]&&a[l].nTr===n?[l]:[];if(d)return a[d.row]&&a[d.row].nTr===n.parentNode?[d.row]:[];var c=t(n).closest("*[data-dt-row]");return c.length?[c.data("dt-row")]:[]}if("string"==typeof n&&"#"===n.charAt(0)){var u=e.aIds[n.replace(/^#/,"")];if(u!==s)return[u.idx]}var h=C(_(e.aoData,o,"nTr"));return t(h).filter(n).map((function(){return this._DT_RowIndex})).toArray()}),e,r)}(r,e,n)}),1);return r.selector.rows=e,r.selector.opts=n,r})),i("rows().nodes()",(function(){return this.iterator("row",(function(t,e){return t.aoData[e].nTr||s}),1)})),i("rows().data()",(function(){return this.iterator(!0,"rows",(function(t,e){return _(t.aoData,e,"_aData")}),1)})),a("rows().cache()","row().cache()",(function(t){return this.iterator("row",(function(e,n){var s=e.aoData[n];return"search"===t?s._aFilterData:s._aSortData}),1)})),a("rows().invalidate()","row().invalidate()",(function(t){return this.iterator("row",(function(e,n){et(e,n,t)}))})),a("rows().indexes()","row().index()",(function(){return this.iterator("row",(function(t,e){return e}),1)})),a("rows().ids()","row().id()",(function(t){for(var e=[],n=this.context,s=0,r=n.length;s<r;s++)for(var i=0,a=this[s].length;i<a;i++){var l=n[s].rowIdFn(n[s].aoData[this[s][i]]._aData);e.push((!0===t?"#":"")+l)}return new o(n,e)})),a("rows().remove()","row().remove()",(function(){var t=this;return this.iterator("row",(function(e,n,r){var o,i,a,l,d,c,u=e.aoData,h=u[n];for(u.splice(n,1),o=0,i=u.length;o<i;o++)if(c=(d=u[o]).anCells,null!==d.nTr&&(d.nTr._DT_RowIndex=o),null!==c)for(a=0,l=c.length;a<l;a++)c[a]._DT_CellIndex.row=o;tt(e.aiDisplayMaster,n),tt(e.aiDisplay,n),tt(t[r],n,!1),e._iRecordsDisplay>0&&e._iRecordsDisplay--,he(e);var f=e.rowIdFn(h._aData);f!==s&&delete e.aIds[f]})),this.iterator("table",(function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e})),this})),i("rows.add()",(function(e){var n=this.iterator("table",(function(t){var n,s,r,o=[];for(s=0,r=e.length;s<r;s++)(n=e[s]).nodeName&&"TR"===n.nodeName.toUpperCase()?o.push(q(t,n)[0]):o.push(U(t,n));return o}),1),s=this.rows(-1);return s.pop(),t.merge(s,n),s})),i("row()",(function(t,e){return _e(this.rows(t,e))})),i("row().data()",(function(e){var n=this.context;if(e===s)return n.length&&this.length?n[0].aoData[this[0]]._aData:s;var r=n[0].aoData[this[0]];return r._aData=e,t.isArray(e)&&r.nTr&&r.nTr.id&&Y(n[0].rowId)(e,r.nTr.id),et(n[0],this[0],"data"),this})),i("row().node()",(function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null})),i("row.add()",(function(e){e instanceof t&&e.length&&(e=e[0]);var n=this.iterator("table",(function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?q(t,e)[0]:U(t,e)}));return this.row(n[0])}));var Ce=function(t,e){var n=t.context;if(n.length){var r=n[0].aoData[e!==s?e:t[0]];r&&r._details&&(r._details.remove(),r._detailsShow=s,r._details=s)}},Te=function(t,e){var n=t.context;if(n.length&&t.length){var s=n[0].aoData[t[0]];s._details&&(s._detailsShow=e,e?s._details.insertAfter(s.nTr):s._details.detach(),Ie(n[0]))}},Ie=function(t){var e=new o(t),n=t.aoData;e.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),w(n,"_details").length>0&&(e.on("draw.dt.DT_details",(function(s,r){t===r&&e.rows({page:"current"}).eq(0).each((function(t){var e=n[t];e._detailsShow&&e._details.insertAfter(e.nTr)}))})),e.on("column-visibility.dt.DT_details",(function(e,s,r,o){if(t===s)for(var i,a=H(s),l=0,d=n.length;l<d;l++)(i=n[l])._details&&i._details.children("td[colspan]").attr("colspan",a)})),e.on("destroy.dt.DT_details",(function(s,r){if(t===r)for(var o=0,i=n.length;o<i;o++)n[o]._details&&Ce(e,o)})))};i("row().child()",(function(e,n){var r=this.context;return e===s?r.length&&this.length?r[0].aoData[this[0]]._details:s:(!0===e?this.child.show():!1===e?Ce(this):r.length&&this.length&&function(e,n,s,r){var o=[],i=function(n,s){if(t.isArray(n)||n instanceof t)for(var r=0,a=n.length;r<a;r++)i(n[r],s);else if(n.nodeName&&"tr"===n.nodeName.toLowerCase())o.push(n);else{var l=t("<tr><td/></tr>").addClass(s);t("td",l).addClass(s).html(n)[0].colSpan=H(e),o.push(l[0])}};i(s,r),n._details&&n._details.detach(),n._details=t(o),n._detailsShow&&n._details.insertAfter(n.nTr)}(r[0],r[0].aoData[this[0]],e,n),this)})),i(["row().child.show()","row().child().show()"],(function(t){return Te(this,!0),this})),i(["row().child.hide()","row().child().hide()"],(function(){return Te(this,!1),this})),i(["row().child.remove()","row().child().remove()"],(function(){return Ce(this),this})),i("row().child.isShown()",(function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1}));var Se=/^([^:]+):(name|visIdx|visible)$/,Fe=function(t,e,n,s,r){for(var o=[],i=0,a=r.length;i<a;i++)o.push(V(t,r[i],e));return o};i("columns()",(function(e,n){e===s?e="":t.isPlainObject(e)&&(n=e,e=""),n=we(n);var r=this.iterator("table",(function(s){return function(e,n,s){var r=e.aoColumns,o=w(r,"sName"),i=w(r,"nTh");return ye("column",n,(function(n){var a=g(n);if(""===n)return x(r.length);if(null!==a)return[a>=0?a:r.length+a];if("function"==typeof n){var l=xe(e,s);return t.map(r,(function(t,s){return n(s,Fe(e,s,0,0,l),i[s])?s:null}))}var d="string"==typeof n?n.match(Se):"";if(d)switch(d[2]){case"visIdx":case"visible":var c=parseInt(d[1],10);if(c<0){var u=t.map(r,(function(t,e){return t.bVisible?e:null}));return[u[u.length+c]]}return[E(e,c)];case"name":return t.map(o,(function(t,e){return t===d[1]?e:null}));default:return[]}if(n.nodeName&&n._DT_CellIndex)return[n._DT_CellIndex.column];var h=t(i).filter(n).map((function(){return t.inArray(this,i)})).toArray();if(h.length||!n.nodeName)return h;var f=t(n).closest("*[data-dt-column]");return f.length?[f.data("dt-column")]:[]}),e,s)}(s,e,n)}),1);return r.selector.cols=e,r.selector.opts=n,r})),a("columns().header()","column().header()",(function(t,e){return this.iterator("column",(function(t,e){return t.aoColumns[e].nTh}),1)})),a("columns().footer()","column().footer()",(function(t,e){return this.iterator("column",(function(t,e){return t.aoColumns[e].nTf}),1)})),a("columns().data()","column().data()",(function(){return this.iterator("column-rows",Fe,1)})),a("columns().dataSrc()","column().dataSrc()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e].mData}),1)})),a("columns().cache()","column().cache()",(function(t){return this.iterator("column-rows",(function(e,n,s,r,o){return _(e.aoData,o,"search"===t?"_aFilterData":"_aSortData",n)}),1)})),a("columns().nodes()","column().nodes()",(function(){return this.iterator("column-rows",(function(t,e,n,s,r){return _(t.aoData,r,"anCells",e)}),1)})),a("columns().visible()","column().visible()",(function(e,n){var r=this,o=this.iterator("column",(function(n,r){if(e===s)return n.aoColumns[r].bVisible;!function(e,n,r){var o,i,a,l,d=e.aoColumns,c=d[n],u=e.aoData;if(r===s)return c.bVisible;if(c.bVisible!==r){if(r){var h=t.inArray(!0,w(d,"bVisible"),n+1);for(i=0,a=u.length;i<a;i++)l=u[i].nTr,o=u[i].anCells,l&&l.insertBefore(o[n],o[h]||null)}else t(w(e.aoData,"anCells",n)).detach();c.bVisible=r}}(n,r,e)}));return e!==s&&this.iterator("table",(function(o){it(o,o.aoHeader),it(o,o.aoFooter),o.aiDisplay.length||t(o.nTBody).find("td[colspan]").attr("colspan",H(o)),se(o),r.iterator("column",(function(t,s){ue(t,null,"column-visibility",[t,s,e,n])})),(n===s||n)&&r.columns.adjust()})),o})),a("columns().indexes()","column().index()",(function(t){return this.iterator("column",(function(e,n){return"visible"===t?z(e,n):n}),1)})),i("columns.adjust()",(function(){return this.iterator("table",(function(t){N(t)}),1)})),i("column.index()",(function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return E(n,e);if("fromData"===t||"toVisible"===t)return z(n,e)}})),i("column()",(function(t,e){return _e(this.columns(t,e))}));i("cells()",(function(e,n,r){if(t.isPlainObject(e)&&(e.row===s?(r=e,e=null):(r=n,n=null)),t.isPlainObject(n)&&(r=n,n=null),null===n||n===s)return this.iterator("table",(function(n){return function(e,n,r){var o,i,a,l,d,c,u,h=e.aoData,f=xe(e,r),p=C(_(h,f,"anCells")),m=t([].concat.apply([],p)),g=e.aoColumns.length;return ye("cell",n,(function(n){var r="function"==typeof n;if(null===n||n===s||r){for(i=[],a=0,l=f.length;a<l;a++)for(o=f[a],d=0;d<g;d++)c={row:o,column:d},r?(u=h[o],n(c,V(e,o,d),u.anCells?u.anCells[d]:null)&&i.push(c)):i.push(c);return i}if(t.isPlainObject(n))return n.column!==s&&n.row!==s&&-1!==t.inArray(n.row,f)?[n]:[];var p=m.filter(n).map((function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}})).toArray();return p.length||!n.nodeName?p:(u=t(n).closest("*[data-dt-row]")).length?[{row:u.data("dt-row"),column:u.data("dt-column")}]:[]}),e,r)}(n,e,we(r))}));var o,i,a,l,d=r?{page:r.page,order:r.order,search:r.search}:{},c=this.columns(n,d),u=this.rows(e,d),h=this.iterator("table",(function(t,e){var n=[];for(o=0,i=u[e].length;o<i;o++)for(a=0,l=c[e].length;a<l;a++)n.push({row:u[e][o],column:c[e][a]});return n}),1),f=r&&r.selected?this.cells(h,r):h;return t.extend(f.selector,{cols:n,rows:e,opts:r}),f})),a("cells().nodes()","cell().node()",(function(){return this.iterator("cell",(function(t,e,n){var r=t.aoData[e];return r&&r.anCells?r.anCells[n]:s}),1)})),i("cells().data()",(function(){return this.iterator("cell",(function(t,e,n){return V(t,e,n)}),1)})),a("cells().cache()","cell().cache()",(function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",(function(e,n,s){return e.aoData[n][t][s]}),1)})),a("cells().render()","cell().render()",(function(t){return this.iterator("cell",(function(e,n,s){return V(e,n,s,t)}),1)})),a("cells().indexes()","cell().index()",(function(){return this.iterator("cell",(function(t,e,n){return{row:e,column:n,columnVisible:z(t,n)}}),1)})),a("cells().invalidate()","cell().invalidate()",(function(t){return this.iterator("cell",(function(e,n,s){et(e,n,t,s)}))})),i("cell()",(function(t,e,n){return _e(this.cells(t,e,n))})),i("cell().data()",(function(t){var e=this.context,n=this[0];return t===s?e.length&&n.length?V(e[0],n[0].row,n[0].column):s:(X(e[0],n[0].row,n[0].column,t),et(e[0],n[0].row,"data",n[0].column),this)})),i("order()",(function(e,n){var r=this.context;return e===s?0!==r.length?r[0].aaSorting:s:("number"==typeof e?e=[[e,n]]:e.length&&!t.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",(function(t){t.aaSorting=e.slice()})))})),i("order.listener()",(function(t,e,n){return this.iterator("table",(function(s){te(s,t,e,n)}))})),i("order.fixed()",(function(e){if(!e){var n=this.context,r=n.length?n[0].aaSortingFixed:s;return t.isArray(r)?{pre:r}:r}return this.iterator("table",(function(n){n.aaSortingFixed=t.extend(!0,{},e)}))})),i(["columns().order()","column().order()"],(function(e){var n=this;return this.iterator("table",(function(s,r){var o=[];t.each(n[r],(function(t,n){o.push([n,e])})),s.aaSorting=o}))})),i("search()",(function(e,n,r,o){var i=this.context;return e===s?0!==i.length?i[0].oPreviousSearch.sSearch:s:this.iterator("table",(function(s){s.oFeatures.bFilter&&vt(s,t.extend({},s.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===r||r,bCaseInsensitive:null===o||o}),1)}))})),a("columns().search()","column().search()",(function(e,n,r,o){return this.iterator("column",(function(i,a){var l=i.aoPreSearchCols;if(e===s)return l[a].sSearch;i.oFeatures.bFilter&&(t.extend(l[a],{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===r||r,bCaseInsensitive:null===o||o}),vt(i,i.oPreviousSearch,1))}))})),i("state()",(function(){return this.context.length?this.context[0].oSavedState:null})),i("state.clear()",(function(){return this.iterator("table",(function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})}))})),i("state.loaded()",(function(){return this.context.length?this.context[0].oLoadedState:null})),i("state.save()",(function(){return this.iterator("table",(function(t){se(t)}))})),l.versionCheck=l.fnVersionCheck=function(t){for(var e,n,s=l.version.split("."),r=t.split("."),o=0,i=r.length;o<i;o++)if((e=parseInt(s[o],10)||0)!==(n=parseInt(r[o],10)||0))return e>n;return!0},l.isDataTable=l.fnIsDataTable=function(e){var n=t(e).get(0),s=!1;return e instanceof l.Api||(t.each(l.settings,(function(e,r){var o=r.nScrollHead?t("table",r.nScrollHead)[0]:null,i=r.nScrollFoot?t("table",r.nScrollFoot)[0]:null;r.nTable!==n&&o!==n&&i!==n||(s=!0)})),s)},l.tables=l.fnTables=function(e){var n=!1;t.isPlainObject(e)&&(n=e.api,e=e.visible);var s=t.map(l.settings,(function(n){if(!e||e&&t(n.nTable).is(":visible"))return n.nTable}));return n?new o(s):s},l.camelToHungarian=F,i("$()",(function(e,n){var s=this.rows(n).nodes(),r=t(s);return t([].concat(r.filter(e).toArray(),r.find(e).toArray()))})),t.each(["on","one","off"],(function(e,n){i(n+"()",(function(){var e=Array.prototype.slice.call(arguments);e[0]=t.map(e[0].split(/\s/),(function(t){return t.match(/\.dt\b/)?t:t+".dt"})).join(" ");var s=t(this.tables().nodes());return s[n].apply(s,e),this}))})),i("clear()",(function(){return this.iterator("table",(function(t){Q(t)}))})),i("settings()",(function(){return new o(this.context,this.context)})),i("init()",(function(){var t=this.context;return t.length?t[0].oInit:null})),i("data()",(function(){return this.iterator("table",(function(t){return w(t.aoData,"_aData")})).flatten()})),i("destroy()",(function(n){return n=n||!1,this.iterator("table",(function(s){var r,i=s.nTableWrapper.parentNode,a=s.oClasses,d=s.nTable,c=s.nTBody,u=s.nTHead,h=s.nTFoot,f=t(d),p=t(c),m=t(s.nTableWrapper),g=t.map(s.aoData,(function(t){return t.nTr}));s.bDestroying=!0,ue(s,"aoDestroyCallback","destroy",[s]),n||new o(s).columns().visible(!0),m.off(".DT").find(":not(tbody *)").off(".DT"),t(e).off(".DT-"+s.sInstance),d!=u.parentNode&&(f.children("thead").detach(),f.append(u)),h&&d!=h.parentNode&&(f.children("tfoot").detach(),f.append(h)),s.aaSorting=[],s.aaSortingFixed=[],ee(s),t(g).removeClass(s.asStripeClasses.join(" ")),t("th, td",u).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),p.children().detach(),p.append(g);var b=n?"remove":"detach";f[b](),m[b](),!n&&i&&(i.insertBefore(d,s.nTableReinsertBefore),f.css("width",s.sDestroyWidth).removeClass(a.sTable),(r=s.asDestroyStripes.length)&&p.children().each((function(e){t(this).addClass(s.asDestroyStripes[e%r])})));var v=t.inArray(s,l.settings);-1!==v&&l.settings.splice(v,1)}))})),t.each(["column","row","cell"],(function(t,e){i(e+"s().every()",(function(t){var n=this.selector.opts,r=this;return this.iterator(e,(function(o,i,a,l,d){t.call(r[e](i,"cell"===e?a:n,"cell"===e?n:s),i,a,l,d)}))}))})),i("i18n()",(function(e,n,r){var o=this.context[0],i=K(e)(o.oLanguage);return i===s&&(i=n),r!==s&&t.isPlainObject(i)&&(i=i[r]!==s?i[r]:i._),i.replace("%d",r)})),l.version="1.10.21",l.settings=[],l.models={},l.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},l.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},l.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},l.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(t){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:t.extend({},l.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},S(l.defaults),l.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},S(l.defaults.column),l.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:s,oAjaxData:s,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==pe(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==pe(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,s=this.aiDisplay.length,r=this.oFeatures,o=r.bPaginate;return r.bServerSide?!1===o||-1===t?e+s:Math.min(e+t,this._iRecordsDisplay):!o||n>s||-1===t?s:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},l.ext=r={buttons:{},classes:{},build:"dt/jszip-2.5.0/dt-1.10.21/af-2.3.5/b-1.6.2/b-colvis-1.6.2/b-flash-1.6.2/b-html5-1.6.2/b-print-1.6.2/cr-1.5.2/fc-3.3.1/fh-3.1.7/kt-2.5.2/r-2.2.5/rg-1.1.2/rr-1.2.7/sc-2.0.2/sp-1.1.1/sl-1.3.1",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:l.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:l.version},t.extend(r,{afnFiltering:r.search,aTypes:r.type.detect,ofnSearch:r.type.search,oSort:r.type.order,afnSortData:r.order,aoFeatures:r.feature,oApi:r.internal,oStdClasses:r.classes,oPagination:r.pager}),t.extend(l.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var De=l.ext.pager;function ke(t,e){var n=[],s=De.numbers_length,r=Math.floor(s/2);return e<=s?n=x(0,e):t<=r?((n=x(0,s-2)).push("ellipsis"),n.push(e-1)):t>=e-1-r?((n=x(e-(s-2),e)).splice(0,0,"ellipsis"),n.splice(0,0,0)):((n=x(t-r+2,t+r-1)).push("ellipsis"),n.push(e-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}t.extend(De,{simple:function(t,e){return["previous","next"]},full:function(t,e){return["first","previous","next","last"]},numbers:function(t,e){return[ke(t,e)]},simple_numbers:function(t,e){return["previous",ke(t,e),"next"]},full_numbers:function(t,e){return["first","previous",ke(t,e),"next","last"]},first_last_numbers:function(t,e){return["first",ke(t,e),"last"]},_numbers:ke,numbers_length:7}),t.extend(!0,l.ext.renderer,{pageButton:{_:function(e,r,o,i,a,l){var d,c,u,h=e.oClasses,f=e.oLanguage.oPaginate,p=e.oLanguage.oAria.paginate||{},m=0,g=function(n,s){var r,i,u,b,v=h.sPageButtonDisabled,y=function(t){Et(e,t.data.action,!0)};for(r=0,i=s.length;r<i;r++)if(u=s[r],t.isArray(u)){var w=t("<"+(u.DT_el||"div")+"/>").appendTo(n);g(w,u)}else{switch(d=null,c=u,b=e.iTabIndex,u){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":d=f.sFirst,0===a&&(b=-1,c+=" "+v);break;case"previous":d=f.sPrevious,0===a&&(b=-1,c+=" "+v);break;case"next":d=f.sNext,0!==l&&a!==l-1||(b=-1,c+=" "+v);break;case"last":d=f.sLast,a===l-1&&(b=-1,c+=" "+v);break;default:d=u+1,c=a===u?h.sPageButtonActive:""}null!==d&&(de(t("<a>",{class:h.sPageButton+" "+c,"aria-controls":e.sTableId,"aria-label":p[u],"data-dt-idx":m,tabindex:b,id:0===o&&"string"==typeof u?e.sTableId+"_"+u:null}).html(d).appendTo(n),{action:u},y),m++)}};try{u=t(r).find(n.activeElement).data("dt-idx")}catch(t){}g(t(r).empty(),i),u!==s&&t(r).find("[data-dt-idx="+u+"]").trigger("focus")}}}),t.extend(l.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return v(t,n)?"num"+n:null},function(t,e){if(t&&!(t instanceof Date)&&!h.test(t))return null;var n=Date.parse(t);return null!==n&&!isNaN(n)||m(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return v(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return y(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return y(t,n,!0)?"html-num-fmt"+n:null},function(t,e){return m(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),t.extend(l.ext.type.search,{html:function(t){return m(t)?t:"string"==typeof t?t.replace(c," ").replace(u,""):""},string:function(t){return m(t)?t:"string"==typeof t?t.replace(c," "):t}});var Ae=function(t,e,n,s){return 0===t||t&&"-"!==t?(e&&(t=b(t,e)),t.replace&&(n&&(t=t.replace(n,"")),s&&(t=t.replace(s,""))),1*t):-1/0};function Pe(e){t.each({num:function(t){return Ae(t,e)},"num-fmt":function(t){return Ae(t,e,p)},"html-num":function(t){return Ae(t,e,u)},"html-num-fmt":function(t){return Ae(t,e,u,p)}},(function(t,n){r.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(r.type.search[t+e]=r.type.search.html)}))}t.extend(r.type.order,{"date-pre":function(t){var e=Date.parse(t);return isNaN(e)?-1/0:e},"html-pre":function(t){return m(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return m(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Pe(""),t.extend(!0,l.ext.renderer,{header:{_:function(e,n,s,r){t(e.nTable).on("order.dt.DT",(function(t,o,i,a){if(e===o){var l=s.idx;n.removeClass(s.sSortingClass+" "+r.sSortAsc+" "+r.sSortDesc).addClass("asc"==a[l]?r.sSortAsc:"desc"==a[l]?r.sSortDesc:s.sSortingClass)}}))},jqueryui:function(e,n,s,r){t("<div/>").addClass(r.sSortJUIWrapper).append(n.contents()).append(t("<span/>").addClass(r.sSortIcon+" "+s.sSortingClassJUI)).appendTo(n),t(e.nTable).on("order.dt.DT",(function(t,o,i,a){if(e===o){var l=s.idx;n.removeClass(r.sSortAsc+" "+r.sSortDesc).addClass("asc"==a[l]?r.sSortAsc:"desc"==a[l]?r.sSortDesc:s.sSortingClass),n.find("span."+r.sSortIcon).removeClass(r.sSortJUIAsc+" "+r.sSortJUIDesc+" "+r.sSortJUI+" "+r.sSortJUIAscAllowed+" "+r.sSortJUIDescAllowed).addClass("asc"==a[l]?r.sSortJUIAsc:"desc"==a[l]?r.sSortJUIDesc:s.sSortingClassJUI)}}))}}});var Re=function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};function Be(t){return function(){var e=[oe(this[l.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return l.ext.internal[t].apply(this,e)}}return l.render={number:function(t,e,n,s,r){return{display:function(o){if("number"!=typeof o&&"string"!=typeof o)return o;var i=o<0?"-":"",a=parseFloat(o);if(isNaN(a))return Re(o);a=a.toFixed(n),o=Math.abs(a);var l=parseInt(o,10),d=n?e+(o-l).toFixed(n).substring(2):"";return i+(s||"")+l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+d+(r||"")}}},text:function(){return{display:Re,filter:Re}}},t.extend(l.ext.internal,{_fnExternApiFunc:Be,_fnBuildAjax:ht,_fnAjaxUpdate:ft,_fnAjaxParameters:pt,_fnAjaxUpdateDraw:mt,_fnAjaxDataSrc:gt,_fnAddColumn:L,_fnColumnOptions:O,_fnAdjustColumnSizing:N,_fnVisibleToColumnIndex:E,_fnColumnIndexToVisible:z,_fnVisbleColumns:H,_fnGetColumns:j,_fnColumnTypes:M,_fnApplyColumnDefs:W,_fnHungarianMap:S,_fnCamelToHungarian:F,_fnLanguageCompat:D,_fnBrowserDetect:R,_fnAddData:U,_fnAddTr:q,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==s?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,n,s){return t.inArray(s,e.aoData[n].anCells)},_fnGetCellData:V,_fnSetCellData:X,_fnSplitObjNotation:Z,_fnGetObjectDataFn:K,_fnSetObjectDataFn:Y,_fnGetDataMaster:J,_fnClearTable:Q,_fnDeleteIndex:tt,_fnInvalidate:et,_fnGetRowElements:nt,_fnCreateTr:st,_fnBuildHead:ot,_fnDrawHead:it,_fnDraw:at,_fnReDraw:lt,_fnAddOptionsHtml:dt,_fnDetectHeader:ct,_fnGetUniqueThs:ut,_fnFeatureHtmlFilter:bt,_fnFilterComplete:vt,_fnFilterCustom:yt,_fnFilterColumn:wt,_fnFilter:_t,_fnFilterCreateSearch:xt,_fnEscapeRegex:Ct,_fnFilterData:St,_fnFeatureHtmlInfo:kt,_fnUpdateInfo:At,_fnInfoMacros:Pt,_fnInitialise:Rt,_fnInitComplete:Bt,_fnLengthChange:Lt,_fnFeatureHtmlLength:Ot,_fnFeatureHtmlPaginate:Nt,_fnPageChange:Et,_fnFeatureHtmlProcessing:zt,_fnProcessingDisplay:Ht,_fnFeatureHtmlTable:jt,_fnScrollDraw:Mt,_fnApplyToChildren:Wt,_fnCalculateColumnWidths:qt,_fnThrottle:Vt,_fnConvertToWidth:Xt,_fnGetWidestNode:Gt,_fnGetMaxLenString:$t,_fnStringToCss:Zt,_fnSortFlatten:Kt,_fnSort:Yt,_fnSortAria:Jt,_fnSortListener:Qt,_fnSortAttachListener:te,_fnSortingClasses:ee,_fnSortData:ne,_fnSaveState:se,_fnLoadState:re,_fnSettingsFromNode:oe,_fnLog:ie,_fnMap:ae,_fnBindAction:de,_fnCallbackReg:ce,_fnCallbackFire:ue,_fnLengthOverflow:he,_fnRenderer:fe,_fnDataSource:pe,_fnRowAttributes:rt,_fnExtend:le,_fnCalculateEnd:function(){}}),t.fn.dataTable=l,l.$=t,t.fn.dataTableSettings=l.settings,t.fn.dataTableExt=l.ext,t.fn.DataTable=function(e){return t(this).dataTable(e).api()},t.each(l,(function(e,n){t.fn.DataTable[e]=n})),t.fn.dataTable})),
/*! AutoFill 2.3.5
 * ©2008-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=0,i=function(e,n){if(!r.versionCheck||!r.versionCheck("1.10.8"))throw"Warning: AutoFill requires DataTables 1.10.8 or greater";this.c=t.extend(!0,{},r.defaults.autoFill,i.defaults,n),this.s={dt:new r.Api(e),namespace:".autoFill"+o++,scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:!1},this.dom={handle:t('<div class="dt-autofill-handle"/>'),select:{top:t('<div class="dt-autofill-select top"/>'),right:t('<div class="dt-autofill-select right"/>'),bottom:t('<div class="dt-autofill-select bottom"/>'),left:t('<div class="dt-autofill-select left"/>')},background:t('<div class="dt-autofill-background"/>'),list:t('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null},this._constructor()};t.extend(i.prototype,{enabled:function(){return this.s.enabled},enable:function(t){var e=this;return!1===t?this.disable():(this.s.enabled=!0,this._focusListener(),this.dom.handle.on("mousedown",(function(t){return e._mousedown(t),!1})),this)},disable:function(){return this.s.enabled=!1,this._focusListenerRemove(),this},_constructor:function(){var e=this,n=this.s.dt,s=t("div.dataTables_scrollBody",this.s.dt.table().container());n.settings()[0].autoFill=this,s.length&&(this.dom.dtScroll=s,"static"===s.css("position")&&s.css("position","relative")),!1!==this.c.enable&&this.enable(),n.on("destroy.autoFill",(function(){e._focusListenerRemove()}))},_attach:function(e){var n=this.s.dt,s=n.cell(e).index(),r=this.dom.handle,o=this.s.handle;if(s&&-1!==n.columns(this.c.columns).indexes().indexOf(s.column)){this.dom.offsetParent||(this.dom.offsetParent=t(n.table().node()).offsetParent()),o.height&&o.width||(r.appendTo("body"),o.height=r.outerHeight(),o.width=r.outerWidth());var i=this._getPosition(e,this.dom.offsetParent);this.dom.attachedTo=e,r.css({top:i.top+e.offsetHeight-o.height,left:i.left+e.offsetWidth-o.width}).appendTo(this.dom.offsetParent)}else this._detach()},_actionSelector:function(e){var n=this,s=this.s.dt,r=i.actions,o=[];if(t.each(r,(function(t,n){n.available(s,e)&&o.push(t)})),1===o.length&&!1===this.c.alwaysAsk){var a=r[o[0]].execute(s,e);this._update(a,e)}else if(o.length>1){var l=this.dom.list.children("ul").empty();o.push("cancel"),t.each(o,(function(o,a){l.append(t("<li/>").append('<div class="dt-autofill-question">'+r[a].option(s,e)+"<div>").append(t('<div class="dt-autofill-button">').append(t('<button class="'+i.classes.btn+'">'+s.i18n("autoFill.button","&gt;")+"</button>").on("click",(function(){var o=r[a].execute(s,e,t(this).closest("li"));n._update(o,e),n.dom.background.remove(),n.dom.list.remove()})))))})),this.dom.background.appendTo("body"),this.dom.list.appendTo("body"),this.dom.list.css("margin-top",this.dom.list.outerHeight()/2*-1)}},_detach:function(){this.dom.attachedTo=null,this.dom.handle.detach()},_drawSelection:function(e,n){var s=this.s.dt,r=this.s.start,o=t(this.dom.start),i={row:this.c.vertical?s.rows({page:"current"}).nodes().indexOf(e.parentNode):r.row,column:this.c.horizontal?t(e).index():r.column},a=s.column.index("toData",i.column),l=s.row(":eq("+i.row+")",{page:"current"}),d=t(s.cell(l.index(),a).node());if(s.cell(d).any()&&-1!==s.columns(this.c.columns).indexes().indexOf(a)){var c,u,h,f,p,m;this.s.end=i,c=r.row<i.row?o:d,u=r.row<i.row?d:o,h=r.column<i.column?o:d,f=r.column<i.column?d:o,c=this._getPosition(c.get(0)).top,h=this._getPosition(h.get(0)).left,p=this._getPosition(u.get(0)).top+u.outerHeight()-c,m=this._getPosition(f.get(0)).left+f.outerWidth()-h;var g=this.dom.select;g.top.css({top:c,left:h,width:m}),g.left.css({top:c,left:h,height:p}),g.bottom.css({top:c+p,left:h,width:m}),g.right.css({top:c,left:h+m,height:p})}},_editor:function(t){var e=this.s.dt,n=this.c.editor;if(n){for(var r={},o=[],i=n.fields(),a=0,l=t.length;a<l;a++)for(var d=0,c=t[a].length;d<c;d++){var u=t[a][d],h=e.settings()[0].aoColumns[u.index.column],f=h.editField;if(f===s)for(var p=h.mData,m=0,g=i.length;m<g;m++){var b=n.field(i[m]);if(b.dataSrc()===p){f=b.name();break}}if(!f)throw"Could not automatically determine field data. Please see https://datatables.net/tn/11";r[f]||(r[f]={});var v=e.row(u.index.row).id();r[f][v]=u.set,o.push(u.index)}n.bubble(o,!1).multiSet(r).submit()}},_emitEvent:function(e,n){this.s.dt.iterator("table",(function(s,r){t(s.nTable).triggerHandler(e+".dt",n)}))},_focusListener:function(){var e=this,s=this.s.dt,r=this.s.namespace,o=null!==this.c.focus?this.c.focus:s.init().keys||s.settings()[0].keytable?"focus":"hover";"focus"===o?s.on("key-focus.autoFill",(function(t,n,s){e._attach(s.node())})).on("key-blur.autoFill",(function(t,n,s){e._detach()})):"click"===o?(t(s.table().body()).on("click"+r,"td, th",(function(t){e._attach(this)})),t(n.body).on("click"+r,(function(n){t(n.target).parents().filter(s.table().body()).length||e._detach()}))):t(s.table().body()).on("mouseenter"+r,"td, th",(function(t){e._attach(this)})).on("mouseleave"+r,(function(n){t(n.relatedTarget).hasClass("dt-autofill-handle")||e._detach()}))},_focusListenerRemove:function(){var e=this.s.dt;e.off(".autoFill"),t(e.table().body()).off(this.s.namespace),t(n.body).off(this.s.namespace)},_getPosition:function(e,n){var s,r=e,o=0,i=0;n||(n=t(t(this.s.dt.table().node())[0].offsetParent));do{var a=r.offsetTop,l=r.offsetLeft;if(s=t(r.offsetParent),o+=a+1*parseInt(s.css("border-top-width")),i+=l+1*parseInt(s.css("border-left-width")),"body"===r.nodeName.toLowerCase())break;r=s.get(0)}while(s.get(0)!==n.get(0));return{top:o,left:i}},_mousedown:function(s){var r=this,o=this.s.dt;this.dom.start=this.dom.attachedTo,this.s.start={row:o.rows({page:"current"}).nodes().indexOf(t(this.dom.start).parent()[0]),column:t(this.dom.start).index()},t(n.body).on("mousemove.autoFill",(function(t){r._mousemove(t)})).on("mouseup.autoFill",(function(t){r._mouseup(t)}));var i=this.dom.select,a=t(o.table().node()).offsetParent();i.top.appendTo(a),i.left.appendTo(a),i.right.appendTo(a),i.bottom.appendTo(a),this._drawSelection(this.dom.start,s),this.dom.handle.css("display","none");var l=this.dom.dtScroll;this.s.scroll={windowHeight:t(e).height(),windowWidth:t(e).width(),dtTop:l?l.offset().top:null,dtLeft:l?l.offset().left:null,dtHeight:l?l.outerHeight():null,dtWidth:l?l.outerWidth():null}},_mousemove:function(t){this.s.dt;var e=t.target.nodeName.toLowerCase();"td"!==e&&"th"!==e||(this._drawSelection(t.target,t),this._shiftScroll(t))},_mouseup:function(e){t(n.body).off(".autoFill");var r=this,o=this.s.dt,i=this.dom.select;i.top.remove(),i.left.remove(),i.right.remove(),i.bottom.remove(),this.dom.handle.css("display","block");var a=this.s.start,l=this.s.end;if(a.row!==l.row||a.column!==l.column){var d=o.cell(":eq("+a.row+")",a.column+":visible",{page:"current"});if(t("div.DTE",d.node()).length){var c=o.editor();return c.on("submitSuccess.dtaf close.dtaf",(function(){c.off(".dtaf"),setTimeout((function(){r._mouseup(e)}),100)})).on("submitComplete.dtaf preSubmitCancelled.dtaf close.dtaf",(function(){c.off(".dtaf")})),void c.submit()}for(var u=this._range(a.row,l.row),h=this._range(a.column,l.column),f=[],p=o.settings()[0],m=p.aoColumns,g=o.columns(this.c.columns).indexes(),b=0;b<u.length;b++)f.push(t.map(h,(function(t){var e=o.row(":eq("+u[b]+")",{page:"current"}),n=o.cell(e.index(),t+":visible"),r=n.data(),i=n.index(),a=m[i.column].editField;if(a!==s&&(r=p.oApi._fnGetObjectDataFn(a)(o.row(i.row).data())),-1!==g.indexOf(i.column))return{cell:n,data:r,label:n.data(),index:i}})));this._actionSelector(f),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null}},_range:function(t,e){var n,s=[];if(t<=e)for(n=t;n<=e;n++)s.push(n);else for(n=t;n>=e;n--)s.push(n);return s},_shiftScroll:function(t){var e,s,r,o,i=this,a=(this.s.dt,this.s.scroll),l=!1,d=t.pageY-n.body.scrollTop,c=t.pageX-n.body.scrollLeft;d<65?e=-5:d>a.windowHeight-65&&(e=5),c<65?s=-5:c>a.windowWidth-65&&(s=5),null!==a.dtTop&&t.pageY<a.dtTop+65?r=-5:null!==a.dtTop&&t.pageY>a.dtTop+a.dtHeight-65&&(r=5),null!==a.dtLeft&&t.pageX<a.dtLeft+65?o=-5:null!==a.dtLeft&&t.pageX>a.dtLeft+a.dtWidth-65&&(o=5),e||s||r||o?(a.windowVert=e,a.windowHoriz=s,a.dtVert=r,a.dtHoriz=o,l=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&l&&(this.s.scrollInterval=setInterval((function(){if(a.windowVert&&(n.body.scrollTop+=a.windowVert),a.windowHoriz&&(n.body.scrollLeft+=a.windowHoriz),a.dtVert||a.dtHoriz){var t=i.dom.dtScroll[0];a.dtVert&&(t.scrollTop+=a.dtVert),a.dtHoriz&&(t.scrollLeft+=a.dtHoriz)}}),20))},_update:function(t,e){if(!1!==t){var n,s=this.s.dt,r=s.columns(this.c.columns).indexes();if(this._emitEvent("preAutoFill",[s,e]),this._editor(e),null!==this.c.update?this.c.update:!this.c.editor){for(var o=0,i=e.length;o<i;o++)for(var a=0,l=e[o].length;a<l;a++)n=e[o][a],-1!==r.indexOf(n.index.column)&&n.cell.data(n.set);s.draw(!1)}this._emitEvent("autoFill",[s,e])}}}),i.actions={increment:{available:function(t,e){var n=e[0][0].label;return!isNaN(n-parseFloat(n))},option:function(t,e){return t.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(e,n,s){for(var r=1*n[0][0].data,o=1*t("input",s).val(),i=0,a=n.length;i<a;i++)for(var l=0,d=n[i].length;l<d;l++)n[i][l].set=r,r+=o}},fill:{available:function(t,e){return!0},option:function(t,e){return t.i18n("autoFill.fill","Fill all cells with <i>"+e[0][0].label+"</i>")},execute:function(t,e,n){for(var s=e[0][0].data,r=0,o=e.length;r<o;r++)for(var i=0,a=e[r].length;i<a;i++)e[r][i].set=s}},fillHorizontal:{available:function(t,e){return e.length>1&&e[0].length>1},option:function(t,e){return t.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(t,e,n){for(var s=0,r=e.length;s<r;s++)for(var o=0,i=e[s].length;o<i;o++)e[s][o].set=e[s][0].data}},fillVertical:{available:function(t,e){return e.length>1},option:function(t,e){return t.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(t,e,n){for(var s=0,r=e.length;s<r;s++)for(var o=0,i=e[s].length;o<i;o++)e[s][o].set=e[0][o].data}},cancel:{available:function(){return!1},option:function(t){return t.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}},i.version="2.3.5",i.defaults={alwaysAsk:!1,focus:null,columns:"",enable:!0,update:null,editor:null,vertical:!0,horizontal:!0},i.classes={btn:"btn"};var a=t.fn.dataTable.Api;return a.register("autoFill()",(function(){return this})),a.register("autoFill().enabled()",(function(){var t=this.context[0];return!!t.autoFill&&t.autoFill.enabled()})),a.register("autoFill().enable()",(function(t){return this.iterator("table",(function(e){e.autoFill&&e.autoFill.enable(t)}))})),a.register("autoFill().disable()",(function(){return this.iterator("table",(function(t){t.autoFill&&t.autoFill.disable()}))})),t(n).on("preInit.dt.autofill",(function(e,n,s){if("dt"===e.namespace){var o=n.oInit.autoFill,a=r.defaults.autoFill;if(o||a){var l=t.extend({},o,a);!1!==o&&new i(n,l)}}})),r.AutoFill=i,r.AutoFill=i,i})),
/*! Buttons for DataTables 1.6.2
 * ©2016-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=0,i=0,a=r.ext.buttons;function l(e,n,s){t.fn.animate?e.stop().fadeIn(n,s):(e.css("display","block"),s&&s.call(e))}function d(e,n,s){t.fn.animate?e.stop().fadeOut(n,s):(e.css("display","none"),s&&s.call(e))}var c,u=function(e,n){if(!(this instanceof u))return function(t){return new u(t,e).container()};void 0===n&&(n={}),!0===n&&(n={}),t.isArray(n)&&(n={buttons:n}),this.c=t.extend(!0,{},u.defaults,n),n.buttons&&(this.c.buttons=n.buttons),this.s={dt:new r.Api(e),buttons:[],listenKeys:"",namespace:"dtb"+o++},this.dom={container:t("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};t.extend(u.prototype,{action:function(t,e){var n=this._nodeToButton(t);return e===s?n.conf.action:(n.conf.action=e,this)},active:function(e,n){var r=this._nodeToButton(e),o=this.c.dom.button.active,i=t(r.node);return n===s?i.hasClass(o):(i.toggleClass(o,n===s||n),this)},add:function(t,e){var n=this.s.buttons;if("string"==typeof e){for(var r=e.split("-"),o=this.s,i=0,a=r.length-1;i<a;i++)o=o.buttons[1*r[i]];n=o.buttons,e=1*r[r.length-1]}return this._expandButton(n,t,o!==s,e),this._draw(),this},container:function(){return this.dom.container},disable:function(e){var n=this._nodeToButton(e);return t(n.node).addClass(this.c.dom.button.disabled).attr("disabled",!0),this},destroy:function(){t("body").off("keyup."+this.s.namespace);var e,n,s=this.s.buttons.slice();for(e=0,n=s.length;e<n;e++)this.remove(s[e].node);this.dom.container.remove();var r=this.s.dt.settings()[0];for(e=0,n=r.length;e<n;e++)if(r.inst===this){r.splice(e,1);break}return this},enable:function(e,n){if(!1===n)return this.disable(e);var s=this._nodeToButton(e);return t(s.node).removeClass(this.c.dom.button.disabled).removeAttr("disabled"),this},name:function(){return this.c.name},node:function(e){if(!e)return this.dom.container;var n=this._nodeToButton(e);return t(n.node)},processing:function(e,n){var r=this.s.dt,o=this._nodeToButton(e);return n===s?t(o.node).hasClass("processing"):(t(o.node).toggleClass("processing",n),t(r.table().node()).triggerHandler("buttons-processing.dt",[n,r.button(e),r,t(e),o.conf]),this)},remove:function(e){var n=this._nodeToButton(e),s=this._nodeToHost(e),r=this.s.dt;if(n.buttons.length)for(var o=n.buttons.length-1;o>=0;o--)this.remove(n.buttons[o].node);n.conf.destroy&&n.conf.destroy.call(r.button(e),r,t(e),n.conf),this._removeKey(n.conf),t(n.node).remove();var i=t.inArray(n,s);return s.splice(i,1),this},text:function(e,n){var r=this._nodeToButton(e),o=this.c.dom.collection.buttonLiner,i=r.inCollection&&o&&o.tag?o.tag:this.c.dom.buttonLiner.tag,a=this.s.dt,l=t(r.node),d=function(t){return"function"==typeof t?t(a,l,r.conf):t};return n===s?d(r.conf.text):(r.conf.text=n,i?l.children(i).html(d(n)):l.html(d(n)),this)},_constructor:function(){var e=this,s=this.s.dt,r=s.settings()[0],o=this.c.buttons;r._buttons||(r._buttons=[]),r._buttons.push({inst:this,name:this.c.name});for(var i=0,a=o.length;i<a;i++)this.add(o[i]);s.on("destroy",(function(t,n){n===r&&e.destroy()})),t("body").on("keyup."+this.s.namespace,(function(t){if(!n.activeElement||n.activeElement===n.body){var s=String.fromCharCode(t.keyCode).toLowerCase();-1!==e.s.listenKeys.toLowerCase().indexOf(s)&&e._keypress(s,t)}}))},_addKey:function(e){e.key&&(this.s.listenKeys+=t.isPlainObject(e.key)?e.key.key:e.key)},_draw:function(t,e){t||(t=this.dom.container,e=this.s.buttons),t.children().detach();for(var n=0,s=e.length;n<s;n++)t.append(e[n].inserter),t.append(" "),e[n].buttons&&e[n].buttons.length&&this._draw(e[n].collection,e[n].buttons)},_expandButton:function(e,n,r,o){for(var i=this.s.dt,a=t.isArray(n)?n:[n],l=0,d=a.length;l<d;l++){var c=this._resolveExtends(a[l]);if(c)if(t.isArray(c))this._expandButton(e,c,r,o);else{var u=this._buildButton(c,r);u&&(o!==s&&null!==o?(e.splice(o,0,u),o++):e.push(u),u.conf.buttons&&(u.collection=t("<"+this.c.dom.collection.tag+"/>"),u.conf._collection=u.collection,this._expandButton(u.buttons,u.conf.buttons,!0,o)),c.init&&c.init.call(i.button(u.node),i,t(u.node),c))}}},_buildButton:function(e,n){var r=this.c.dom.button,o=this.c.dom.buttonLiner,a=this.c.dom.collection,l=this.s.dt,d=function(t){return"function"==typeof t?t(l,f,e):t};if(n&&a.button&&(r=a.button),n&&a.buttonLiner&&(o=a.buttonLiner),e.available&&!e.available(l,e))return!1;var c=function(e,n,s,r){r.action.call(n.button(s),e,n,s,r),t(n.table().node()).triggerHandler("buttons-action.dt",[n.button(s),n,s,r])},u=e.tag||r.tag,h=e.clickBlurs===s||e.clickBlurs,f=t("<"+u+"/>").addClass(r.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",(function(t){t.preventDefault(),!f.hasClass(r.disabled)&&e.action&&c(t,l,f,e),h&&f.trigger("blur")})).on("keyup.dtb",(function(t){13===t.keyCode&&!f.hasClass(r.disabled)&&e.action&&c(t,l,f,e)}));if("a"===u.toLowerCase()&&f.attr("href","#"),"button"===u.toLowerCase()&&f.attr("type","button"),o.tag){var p=t("<"+o.tag+"/>").html(d(e.text)).addClass(o.className);"a"===o.tag.toLowerCase()&&p.attr("href","#"),f.append(p)}else f.html(d(e.text));!1===e.enabled&&f.addClass(r.disabled),e.className&&f.addClass(e.className),e.titleAttr&&f.attr("title",d(e.titleAttr)),e.attr&&f.attr(e.attr),e.namespace||(e.namespace=".dt-button-"+i++);var m,g=this.c.dom.buttonContainer;return m=g&&g.tag?t("<"+g.tag+"/>").addClass(g.className).append(f):f,this._addKey(e),this.c.buttonCreated&&(m=this.c.buttonCreated(e,m)),{conf:e,node:f.get(0),inserter:m,buttons:[],inCollection:n,collection:null}},_nodeToButton:function(t,e){e||(e=this.s.buttons);for(var n=0,s=e.length;n<s;n++){if(e[n].node===t)return e[n];if(e[n].buttons.length){var r=this._nodeToButton(t,e[n].buttons);if(r)return r}}},_nodeToHost:function(t,e){e||(e=this.s.buttons);for(var n=0,s=e.length;n<s;n++){if(e[n].node===t)return e;if(e[n].buttons.length){var r=this._nodeToHost(t,e[n].buttons);if(r)return r}}},_keypress:function(e,n){if(!n._buttonsHandled){var s=function(s,r){if(s.key)if(s.key===e)n._buttonsHandled=!0,t(r).click();else if(t.isPlainObject(s.key)){if(s.key.key!==e)return;if(s.key.shiftKey&&!n.shiftKey)return;if(s.key.altKey&&!n.altKey)return;if(s.key.ctrlKey&&!n.ctrlKey)return;if(s.key.metaKey&&!n.metaKey)return;n._buttonsHandled=!0,t(r).click()}},r=function(t){for(var e=0,n=t.length;e<n;e++)s(t[e].conf,t[e].node),t[e].buttons.length&&r(t[e].buttons)};r(this.s.buttons)}},_removeKey:function(e){if(e.key){var n=t.isPlainObject(e.key)?e.key.key:e.key,s=this.s.listenKeys.split(""),r=t.inArray(n,s);s.splice(r,1),this.s.listenKeys=s.join("")}},_resolveExtends:function(e){var n,r,o=this.s.dt,i=function(n){for(var r=0;!t.isPlainObject(n)&&!t.isArray(n);){if(n===s)return;if("function"==typeof n){if(!(n=n(o,e)))return!1}else if("string"==typeof n){if(!a[n])throw"Unknown button type: "+n;n=a[n]}if(++r>30)throw"Buttons: Too many iterations"}return t.isArray(n)?n:t.extend({},n)};for(e=i(e);e&&e.extend;){if(!a[e.extend])throw"Cannot extend unknown button type: "+e.extend;var l=i(a[e.extend]);if(t.isArray(l))return l;if(!l)return!1;var d=l.className;e=t.extend({},l,e),d&&e.className!==d&&(e.className=d+" "+e.className);var c=e.postfixButtons;if(c){for(e.buttons||(e.buttons=[]),n=0,r=c.length;n<r;n++)e.buttons.push(c[n]);e.postfixButtons=null}var u=e.prefixButtons;if(u){for(e.buttons||(e.buttons=[]),n=0,r=u.length;n<r;n++)e.buttons.splice(n,0,u[n]);e.prefixButtons=null}e.extend=l.extend}return e},_popover:function(s,r,o){var i=r,a=this.c,c=t.extend({align:"button-left",autoClose:!1,background:!0,backgroundClassName:"dt-button-background",contentClassName:a.dom.collection.className,collectionLayout:"",collectionTitle:"",dropup:!1,fade:400,rightAlignClassName:"dt-button-right",tag:a.dom.collection.tag},o),h=r.node(),f=function(){d(t(".dt-button-collection"),c.fade,(function(){t(this).detach()})),t(i.buttons('[aria-haspopup="true"][aria-expanded="true"]').nodes()).attr("aria-expanded","false"),t("div.dt-button-background").off("click.dtb-collection"),u.background(!1,c.backgroundClassName,c.fade,h),t("body").off(".dtb-collection"),i.off("buttons-action.b-internal")};!1===s&&f();var p=t(i.buttons('[aria-haspopup="true"][aria-expanded="true"]').nodes());p.length&&(h=p.eq(0),f());var m=t("<div/>").addClass("dt-button-collection").addClass(c.collectionLayout).css("display","none");s=t(s).addClass(c.contentClassName).attr("role","menu").appendTo(m),h.attr("aria-expanded","true"),h.parents("body")[0]!==n.body&&(h=n.body.lastChild),c.collectionTitle&&m.prepend('<div class="dt-button-collection-title">'+c.collectionTitle+"</div>"),l(m.insertAfter(h));var g=t(r.table().container()),b=m.css("position");if("dt-container"===c.align&&(h=h.parent(),m.css("width",g.width())),"absolute"===b){var v=h.position();m.css({top:v.top+h.outerHeight(),left:v.left});var y=m.outerHeight(),w=(m.outerWidth(),g.offset().top+g.height()),_=v.top+h.outerHeight()+y-w,x=v.top-y,C=g.offset().top,T=C-x,I=v.top-y-5;(_>T||c.dropup)&&-I<C&&m.css("top",I);var S,F,D=g.offset().left,k=D+g.width(),A=m.offset().left,P=A+m.width(),R=h.offset().left+h.outerWidth(),B=0;if(m.hasClass(c.rightAlignClassName)||"button-right"===c.align){if(D>A+(B=R-P))B+=(S=D-(A+B))>(F=k-(P+B))?F:S}else if(k<P+(B=D-A))B+=(S=D-(A+B))>(F=k-(P+B))?F:S;m.css("left",m.position().left+B)}else{var L=m.height()/2;L>t(e).height()/2&&(L=t(e).height()/2),m.css("marginTop",-1*L)}c.background&&u.background(!0,c.backgroundClassName,c.fade,h),t("div.dt-button-background").on("click.dtb-collection",(function(){})),t("body").on("click.dtb-collection",(function(e){var n=t.fn.addBack?"addBack":"andSelf";t(e.target).parents()[n]().filter(s).length||f()})).on("keyup.dtb-collection",(function(t){27===t.keyCode&&f()})),c.autoClose&&setTimeout((function(){i.on("buttons-action.b-internal",(function(t,e,n,s){s[0]!==h[0]&&f()}))}),0),t(m).trigger("buttons-popover.dt")}}),u.background=function(e,r,o,i){o===s&&(o=400),i||(i=n.body),e?l(t("<div/>").addClass(r).css("display","none").insertAfter(i),o):d(t("div."+r),o,(function(){t(this).removeClass(r).remove()}))},u.instanceSelector=function(e,n){if(e===s||null===e)return t.map(n,(function(t){return t.inst}));var r=[],o=t.map(n,(function(t){return t.name})),i=function(e){if(t.isArray(e))for(var s=0,a=e.length;s<a;s++)i(e[s]);else if("string"==typeof e)if(-1!==e.indexOf(","))i(e.split(","));else{var l=t.inArray(t.trim(e),o);-1!==l&&r.push(n[l].inst)}else"number"==typeof e&&r.push(n[e].inst)};return i(e),r},u.buttonSelector=function(e,n){for(var r=[],o=function(t,e,n){for(var r,i,a=0,l=e.length;a<l;a++)(r=e[a])&&(i=n!==s?n+a:a+"",t.push({node:r.node,name:r.conf.name,idx:i}),r.buttons&&o(t,r.buttons,i+"-"))},i=function(e,n){var a,l,d=[];o(d,n.s.buttons);var c=t.map(d,(function(t){return t.node}));if(t.isArray(e)||e instanceof t)for(a=0,l=e.length;a<l;a++)i(e[a],n);else if(null===e||e===s||"*"===e)for(a=0,l=d.length;a<l;a++)r.push({inst:n,node:d[a].node});else if("number"==typeof e)r.push({inst:n,node:n.s.buttons[e].node});else if("string"==typeof e)if(-1!==e.indexOf(",")){var u=e.split(",");for(a=0,l=u.length;a<l;a++)i(t.trim(u[a]),n)}else if(e.match(/^\d+(\-\d+)*$/)){var h=t.map(d,(function(t){return t.idx}));r.push({inst:n,node:d[t.inArray(e,h)].node})}else if(-1!==e.indexOf(":name")){var f=e.replace(":name","");for(a=0,l=d.length;a<l;a++)d[a].name===f&&r.push({inst:n,node:d[a].node})}else t(c).filter(e).each((function(){r.push({inst:n,node:this})}));else if("object"==typeof e&&e.nodeName){var p=t.inArray(e,c);-1!==p&&r.push({inst:n,node:c[p]})}},a=0,l=e.length;a<l;a++){var d=e[a];i(n,d)}return r},u.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:""},button:{tag:"ActiveXObject"in e?"a":"button",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},u.version="1.6.2",t.extend(a,{collection:{text:function(t){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",init:function(t,e,n){e.attr("aria-expanded",!1)},action:function(t,e,n,s){t.stopPropagation(),s._collection.parents("body").length?this.popover(!1,s):this.popover(s._collection,s)},attr:{"aria-haspopup":!0}},copy:function(t,e){return a.copyHtml5?"copyHtml5":a.copyFlash&&a.copyFlash.available(t,e)?"copyFlash":void 0},csv:function(t,e){return a.csvHtml5&&a.csvHtml5.available(t,e)?"csvHtml5":a.csvFlash&&a.csvFlash.available(t,e)?"csvFlash":void 0},excel:function(t,e){return a.excelHtml5&&a.excelHtml5.available(t,e)?"excelHtml5":a.excelFlash&&a.excelFlash.available(t,e)?"excelFlash":void 0},pdf:function(t,e){return a.pdfHtml5&&a.pdfHtml5.available(t,e)?"pdfHtml5":a.pdfFlash&&a.pdfFlash.available(t,e)?"pdfFlash":void 0},pageLength:function(e){var n=e.settings()[0].aLengthMenu,s=t.isArray(n[0])?n[0]:n,r=t.isArray(n[0])?n[1]:n;return{extend:"collection",text:function(t){return t.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},t.page.len())},className:"buttons-page-length",autoClose:!0,buttons:t.map(s,(function(t,e){return{text:r[e],className:"button-page-length",action:function(e,n){n.page.len(t).draw()},init:function(e,n,s){var r=this,o=function(){r.active(e.page.len()===t)};e.on("length.dt"+s.namespace,o),o()},destroy:function(t,e,n){t.off("length.dt"+n.namespace)}}})),init:function(t,e,n){var s=this;t.on("length.dt"+n.namespace,(function(){s.text(n.text)}))},destroy:function(t,e,n){t.off("length.dt"+n.namespace)}}}}),r.Api.register("buttons()",(function(t,e){e===s&&(e=t,t=s),this.selector.buttonGroup=t;var n=this.iterator(!0,"table",(function(n){if(n._buttons)return u.buttonSelector(u.instanceSelector(t,n._buttons),e)}),!0);return n._groupSelector=t,n})),r.Api.register("button()",(function(t,e){var n=this.buttons(t,e);return n.length>1&&n.splice(1,n.length),n})),r.Api.registerPlural("buttons().active()","button().active()",(function(t){return t===s?this.map((function(t){return t.inst.active(t.node)})):this.each((function(e){e.inst.active(e.node,t)}))})),r.Api.registerPlural("buttons().action()","button().action()",(function(t){return t===s?this.map((function(t){return t.inst.action(t.node)})):this.each((function(e){e.inst.action(e.node,t)}))})),r.Api.register(["buttons().enable()","button().enable()"],(function(t){return this.each((function(e){e.inst.enable(e.node,t)}))})),r.Api.register(["buttons().disable()","button().disable()"],(function(){return this.each((function(t){t.inst.disable(t.node)}))})),r.Api.registerPlural("buttons().nodes()","button().node()",(function(){var e=t();return t(this.each((function(t){e=e.add(t.inst.node(t.node))}))),e})),r.Api.registerPlural("buttons().processing()","button().processing()",(function(t){return t===s?this.map((function(t){return t.inst.processing(t.node)})):this.each((function(e){e.inst.processing(e.node,t)}))})),r.Api.registerPlural("buttons().text()","button().text()",(function(t){return t===s?this.map((function(t){return t.inst.text(t.node)})):this.each((function(e){e.inst.text(e.node,t)}))})),r.Api.registerPlural("buttons().trigger()","button().trigger()",(function(){return this.each((function(t){t.inst.node(t.node).trigger("click")}))})),r.Api.register("button().popover()",(function(t,e){return this.map((function(n){return n.inst._popover(t,this.button(this[0].node),e)}))})),r.Api.register("buttons().containers()",(function(){var e=t(),n=this._groupSelector;return this.iterator(!0,"table",(function(t){if(t._buttons)for(var s=u.instanceSelector(n,t._buttons),r=0,o=s.length;r<o;r++)e=e.add(s[r].container())})),e})),r.Api.register("buttons().container()",(function(){return this.containers().eq(0)})),r.Api.register("button().add()",(function(t,e){var n=this.context;if(n.length){var s=u.instanceSelector(this._groupSelector,n[0]._buttons);s.length&&s[0].add(e,t)}return this.button(this._groupSelector,t)})),r.Api.register("buttons().destroy()",(function(){return this.pluck("inst").unique().each((function(t){t.destroy()})),this})),r.Api.registerPlural("buttons().remove()","buttons().remove()",(function(){return this.each((function(t){t.inst.remove(t.node)})),this})),r.Api.register("buttons.info()",(function(e,n,r){var o=this;return!1===e?(this.off("destroy.btn-info"),d(t("#datatables_buttons_info"),400,(function(){t(this).remove()})),clearTimeout(c),c=null,this):(c&&clearTimeout(c),t("#datatables_buttons_info").length&&t("#datatables_buttons_info").remove(),e=e?"<h2>"+e+"</h2>":"",l(t('<div id="datatables_buttons_info" class="dt-button-info"/>').html(e).append(t("<div/>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body")),r!==s&&0!==r&&(c=setTimeout((function(){o.buttons.info(!1)}),r)),this.on("destroy.btn-info",(function(){o.buttons.info(!1)})),this)})),r.Api.register("buttons.exportData()",(function(t){if(this.context.length)return b(new r.Api(this.context[0]),t)})),r.Api.register("buttons.exportInfo()",(function(t){return t||(t={}),{filename:h(t),title:p(t),messageTop:m(this,t.message||t.messageTop,"top"),messageBottom:m(this,t.messageBottom,"bottom")}}));var h=function(e){var n="*"===e.filename&&"*"!==e.title&&e.title!==s&&null!==e.title&&""!==e.title?e.title:e.filename;if("function"==typeof n&&(n=n()),n===s||null===n)return null;-1!==n.indexOf("*")&&(n=t.trim(n.replace("*",t("head > title").text()))),n=n.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"");var r=f(e.extension);return r||(r=""),n+r},f=function(t){return null===t||t===s?null:"function"==typeof t?t():t},p=function(e){var n=f(e.title);return null===n?null:-1!==n.indexOf("*")?n.replace("*",t("head > title").text()||"Exported data"):n},m=function(e,n,s){var r=f(n);if(null===r)return null;var o=t("caption",e.table().container()).eq(0);return"*"===r?o.css("caption-side")!==s?null:o.length?o.text():"":r},g=t("<textarea/>")[0],b=function(e,n){var r=t.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(t){return o(t)},footer:function(t){return o(t)},body:function(t){return o(t)}},customizeData:null},n),o=function(t){return"string"!=typeof t||(t=(t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).replace(/<!\-\-.*?\-\->/g,""),r.stripHtml&&(t=t.replace(/<[^>]*>/g,"")),r.trim&&(t=t.replace(/^\s+|\s+$/g,"")),r.stripNewlines&&(t=t.replace(/\n/g," ")),r.decodeEntities&&(g.innerHTML=t,t=g.value)),t},i=e.columns(r.columns).indexes().map((function(t){var n=e.column(t).header();return r.format.header(n.innerHTML,t,n)})).toArray(),a=e.table().footer()?e.columns(r.columns).indexes().map((function(t){var n=e.column(t).footer();return r.format.footer(n?n.innerHTML:"",t,n)})).toArray():null,l=t.extend({},r.modifier);e.select&&"function"==typeof e.select.info&&l.selected===s&&e.rows(r.rows,t.extend({selected:!0},l)).any()&&t.extend(l,{selected:!0});for(var d=e.rows(r.rows,l).indexes().toArray(),c=e.cells(d,r.columns),u=c.render(r.orthogonal).toArray(),h=c.nodes().toArray(),f=i.length,p=[],m=0,b=0,v=f>0?u.length/f:0;b<v;b++){for(var y=[f],w=0;w<f;w++)y[w]=r.format.body(u[m],b,w,h[m]),m++;p[b]=y}var _={header:i,footer:a,body:p};return r.customizeData&&r.customizeData(_),_};function v(t,e){var n=new r.Api(t),s=e||(n.init().buttons||r.defaults.buttons);return new u(n,s).container()}return t.fn.dataTable.Buttons=u,t.fn.DataTable.Buttons=u,t(n).on("init.dt plugin-init.dt",(function(t,e){if("dt"===t.namespace){var n=e.oInit.buttons||r.defaults.buttons;n&&!e._buttons&&new u(e,n).container()}})),r.ext.feature.push({fnInit:v,cFeature:"B"}),r.ext.features&&r.ext.features.register("buttons",v),u})),
/*!
 * Column visibility buttons for Buttons and DataTables.
 * 2016 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),n.fn.dataTable.Buttons||require("datatables.net-buttons")(e,n),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable;return t.extend(r.ext.buttons,{colvis:function(t,e){return{extend:"collection",text:function(t){return t.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:e.columns,columnText:e.columnText}]}},columnsToggle:function(t,e){return t.columns(e.columns).indexes().map((function(t){return{extend:"columnToggle",columns:t,columnText:e.columnText}})).toArray()},columnToggle:function(t,e){return{extend:"columnVisibility",columns:e.columns,columnText:e.columnText}},columnsVisibility:function(t,e){return t.columns(e.columns).indexes().map((function(t){return{extend:"columnVisibility",columns:t,visibility:e.visibility,columnText:e.columnText}})).toArray()},columnVisibility:{columns:s,text:function(t,e,n){return n._columnText(t,n)},className:"buttons-columnVisibility",action:function(t,e,n,r){var o=e.columns(r.columns),i=o.visible();o.visible(r.visibility!==s?r.visibility:!(i.length&&i[0]))},init:function(t,e,n){var s=this;e.attr("data-cv-idx",n.columns),t.on("column-visibility.dt"+n.namespace,(function(e,r){r.bDestroying||r.nTable!=t.settings()[0].nTable||s.active(t.column(n.columns).visible())})).on("column-reorder.dt"+n.namespace,(function(e,r,o){1===t.columns(n.columns).count()&&(s.text(n._columnText(t,n)),s.active(t.column(n.columns).visible()))})),this.active(t.column(n.columns).visible())},destroy:function(t,e,n){t.off("column-visibility.dt"+n.namespace).off("column-reorder.dt"+n.namespace)},_columnText:function(t,e){var n=t.column(e.columns).index(),s=t.settings()[0].aoColumns[n].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select>/g,"").replace(/<!\-\-.*?\-\->/g,"").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return e.columnText?e.columnText(t,n,s):s}},colvisRestore:{className:"buttons-colvisRestore",text:function(t){return t.i18n("buttons.colvisRestore","Restore visibility")},init:function(t,e,n){n._visOriginal=t.columns().indexes().map((function(e){return t.column(e).visible()})).toArray()},action:function(t,e,n,s){e.columns().every((function(t){var n=e.colReorder&&e.colReorder.transpose?e.colReorder.transpose(t,"toOriginal"):t;this.visible(s._visOriginal[n])}))}},colvisGroup:{className:"buttons-colvisGroup",action:function(t,e,n,s){e.columns(s.show).visible(!0,!1),e.columns(s.hide).visible(!1,!1),e.columns.adjust()},show:[],hide:[]}}),r.Buttons})),
/*!
 * Flash export buttons for Buttons and DataTables.
 * 2015-2017 SpryMedia Ltd - datatables.net/license
 *
 * ZeroClipbaord - MIT license
 * Copyright (c) 2012 Joseph Huckaby
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),n.fn.dataTable.Buttons||require("datatables.net-buttons")(e,n),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(t){return"string"==typeof t&&(t=n.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){this.className=this.className.replace(new RegExp("\\s*"+t+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},t.hasClass=function(t){return!!this.className.match(new RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,n){var s=this.clients[t];s&&s.receiveEvent(e,n)},log:function(t){console.log("Flash: "+t)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t){var e={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};for(""!==t.style.width&&(e.width=t.style.width.replace("px","")),""!==t.style.height&&(e.height=t.style.height.replace("px",""));t;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e},Client:function(t){this.handlers={},this.id=o.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,o.register(this.id,this),t&&this.glue(t)}};o.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,sheetName:"",glue:function(t,e){this.domElement=o.$(t);var s=99;this.domElement.style.zIndex&&(s=parseInt(this.domElement.style.zIndex,10)+1);var r=o.getDOMObjectPosition(this.domElement);this.div=n.createElement("div");var i=this.div.style;i.position="absolute",i.left="0px",i.top="0px",i.width=r.width+"px",i.height=r.height+"px",i.zIndex=s,void 0!==e&&""!==e&&(this.div.title=e),0!==r.width&&0!==r.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(r.width,r.height).replace(/&/g,"&amp;"))},positionElement:function(){var t=o.getDOMObjectPosition(this.domElement),e=this.div.style;if(e.position="absolute",e.width=t.width+"px",e.height=t.height+"px",0!==t.width&&0!==t.height){this.sized=!0;var n=this.div.childNodes[0];n.width=t.width,n.height=t.height}},getHTML:function(t,e){var n="",s="id="+this.id+"&width="+t+"&height="+e;navigator.userAgent.match(/MSIE/)?n+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+o.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+s+'"/><param name="wmode" value="transparent"/></object>':n+='<embed id="'+this.movieId+'" src="'+o.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+s+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){var e=this;this.domElement&&this.div&&(t(this.div).remove(),this.domElement=null,this.div=null,t.each(o.clients,(function(t,n){n===e&&delete o.clients[t]})))},reposition:function(t){if(t&&(this.domElement=o.$(t),this.domElement||this.hide()),this.domElement&&this.div){var e=o.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=e.left+"px",n.top=e.top+"px"}},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(t){this.clipText+=t,this.ready&&this.movie.appendText(t)},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},setFileName:function(t){this.fileName=t,this.ready&&this.movie.setFileName(t)},setSheetData:function(t){this.ready&&this.movie.setSheetData(JSON.stringify(t))},setAction:function(t){this.action=t,this.ready&&this.movie.setAction(t)},addEventListener:function(t,e){t=t.toString().toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(t,s){var r;switch(t=t.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=n.getElementById(this.movieId),!this.movie)return r=this,void setTimeout((function(){r.receiveEvent("load",null)}),1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return r=this,setTimeout((function(){r.receiveEvent("load",null)}),100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[t])for(var o=0,i=this.handlers[t].length;o<i;o++){var a=this.handlers[t][o];"function"==typeof a?a(this,s):"object"==typeof a&&2==a.length?a[0][a[1]](this,s):"string"==typeof a&&e[a](this,s)}}},o.hasFlash=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==s&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},e.ZeroClipboard_TableTools=o;var i=function(t,e){e.attr("id");e.parents("html").length?t.glue(e[0],""):setTimeout((function(){i(t,e)}),500)},a=function(t,e){var n=e.match(/[\s\S]{1,8192}/g)||[];t.clearText();for(var s=0,r=n.length;s<r;s++)t.appendText(n[s])},l=function(t){return t.newline?t.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},d=function(t,e){for(var n=l(e),r=t.buttons.exportData(e.exportOptions),o=e.fieldBoundary,i=e.fieldSeparator,a=new RegExp(o,"g"),d=e.escapeChar!==s?e.escapeChar:"\\",c=function(t){for(var e="",n=0,s=t.length;n<s;n++)n>0&&(e+=i),e+=o?o+(""+t[n]).replace(a,d+o)+o:t[n];return e},u=e.header?c(r.header)+n:"",h=e.footer&&r.footer?n+c(r.footer):"",f=[],p=0,m=r.body.length;p<m;p++)f.push(c(r.body[p]));return{str:u+f.join(n)+h,rows:f.length}},c={available:function(){return o.hasFlash()},init:function(t,e,n){o.moviePath=r.Buttons.swfPath;var s=new o.Client;s.setHandCursor(!0),s.addEventListener("mouseDown",(function(s){n._fromFlash=!0,t.button(e[0]).trigger(),n._fromFlash=!1})),i(s,e),n._flash=s},destroy:function(t,e,n){n._flash.destroy()},fieldSeparator:",",fieldBoundary:'"',exportOptions:{},title:"*",messageTop:"*",messageBottom:"*",filename:"*",extension:".csv",header:!0,footer:!1};function u(t){for(var e="A".charCodeAt(0),n="Z".charCodeAt(0)-e+1,s="";t>=0;)s=String.fromCharCode(t%n+e)+s,t=Math.floor(t/n)-1;return s}function h(e,n,r){var o=e.createElement(n);return r&&(r.attr&&t(o).attr(r.attr),r.children&&t.each(r.children,(function(t,e){o.appendChild(e)})),null!==r.text&&r.text!==s&&o.appendChild(e.createTextNode(r.text))),o}function f(t,e){var n,r,o,i=t.header[e].length;t.footer&&t.footer[e].length>i&&(i=t.footer[e].length);for(var a=0,l=t.body.length;a<l;a++){var d=t.body[a][e];if(-1!==(o=null!==d&&d!==s?d.toString():"").indexOf("\n")?((r=o.split("\n")).sort((function(t,e){return e.length-t.length})),n=r[0].length):n=o.length,n>i&&(i=n),i>40)return 52}return(i*=1.3)>6?i:6}var p,m="";m=void 0===e.XMLSerializer?new function(){this.serializeToString=function(t){return t.xml}}:new XMLSerializer;var g={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill><patternFill patternType="none" /></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="61"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},b=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(t){return t/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(t){return t/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\([\d,]+\)$/,style:61,fmt:function(t){return-1*t.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(t){return-1*t.replace(/[\(\)]/g,"")}},{match:/^[\d,]+$/,style:63},{match:/^[\d,]+\.\d{2}$/,style:64}];return r.Buttons.swfPath="//cdn.datatables.net/buttons/"+r.Buttons.version+"/swf/flashExport.swf",r.Api.register("buttons.resize()",(function(){t.each(o.clients,(function(t,e){e.domElement!==s&&e.domElement.parentNode&&e.positionElement()}))})),r.ext.buttons.copyFlash=t.extend({},c,{className:"buttons-copy buttons-flash",text:function(t){return t.i18n("buttons.copy","Copy")},action:function(t,e,n,s){if(s._fromFlash){this.processing(!0);var r=s._flash,o=d(e,s),i=e.buttons.exportInfo(s),c=l(s),u=o.str;i.title&&(u=i.title+c+c+u),i.messageTop&&(u=i.messageTop+c+c+u),i.messageBottom&&(u=u+c+c+i.messageBottom),s.customize&&(u=s.customize(u,s,e)),r.setAction("copy"),a(r,u),this.processing(!1),e.buttons.info(e.i18n("buttons.copyTitle","Copy to clipboard"),e.i18n("buttons.copySuccess",{_:"Copied %d rows to clipboard",1:"Copied 1 row to clipboard"},data.rows),3e3)}},fieldSeparator:"\t",fieldBoundary:""}),r.ext.buttons.csvFlash=t.extend({},c,{className:"buttons-csv buttons-flash",text:function(t){return t.i18n("buttons.csv","CSV")},action:function(t,e,n,s){var r=s._flash,o=d(e,s),i=e.buttons.exportInfo(s),l=s.customize?s.customize(o.str,s,e):o.str;r.setAction("csv"),r.setFileName(i.filename),a(r,l)},escapeChar:'"'}),r.ext.buttons.excelFlash=t.extend({},c,{className:"buttons-excel buttons-flash",text:function(t){return t.i18n("buttons.excel","Excel")},action:function(e,n,r,o){this.processing(!0);var i,l,d=o._flash,c=0,v=t.parseXML(g["xl/worksheets/sheet1.xml"]),y=v.getElementsByTagName("sheetData")[0],w={_rels:{".rels":t.parseXML(g["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":t.parseXML(g["xl/_rels/workbook.xml.rels"])},"workbook.xml":t.parseXML(g["xl/workbook.xml"]),"styles.xml":t.parseXML(g["xl/styles.xml"]),worksheets:{"sheet1.xml":v}},"[Content_Types].xml":t.parseXML(g["[Content_Types].xml"])},_=n.buttons.exportData(o.exportOptions),x=function(e){l=h(v,"row",{attr:{r:i=c+1}});for(var n=0,r=e.length;n<r;n++){var a=u(n)+""+i,d=null;if(null===e[n]||e[n]===s||""===e[n]){if(!0!==o.createEmptyCells)continue;e[n]=""}e[n]=t.trim(e[n]);for(var f=0,p=b.length;f<p;f++){var m=b[f];if(e[n].match&&!e[n].match(/^0\d+/)&&e[n].match(m.match)){var g=e[n].replace(/[^\d\.\-]/g,"");m.fmt&&(g=m.fmt(g)),d=h(v,"c",{attr:{r:a,s:m.style},children:[h(v,"v",{text:g})]});break}}if(!d)if("number"==typeof e[n]||e[n].match&&e[n].match(/^-?\d+(\.\d+)?$/)&&!e[n].match(/^0\d+/))d=h(v,"c",{attr:{t:"n",r:a},children:[h(v,"v",{text:e[n]})]});else{var w=e[n].replace?e[n].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):e[n];d=h(v,"c",{attr:{t:"inlineStr",r:a},children:{row:h(v,"is",{children:{row:h(v,"t",{text:w})}})}})}l.appendChild(d)}y.appendChild(l),c++};t("sheets sheet",w.xl["workbook.xml"]).attr("name",function(t){var e="Sheet1";return t.sheetName&&(e=t.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),e}(o)),o.customizeData&&o.customizeData(_);var C=function(e,n){var s=t("mergeCells",v);s[0].appendChild(h(v,"mergeCell",{attr:{ref:"A"+e+":"+u(n)+e}})),s.attr("count",s.attr("count")+1),t("row:eq("+(e-1)+") c",v).attr("s","51")},T=n.buttons.exportInfo(o);T.title&&(x([T.title]),C(c,_.header.length-1)),T.messageTop&&(x([T.messageTop]),C(c,_.header.length-1)),o.header&&(x(_.header),t("row:last c",v).attr("s","2"));for(var I=0,S=_.body.length;I<S;I++)x(_.body[I]);o.footer&&_.footer&&(x(_.footer),t("row:last c",v).attr("s","2")),T.messageBottom&&(x([T.messageBottom]),C(c,_.header.length-1));var F=h(v,"cols");t("worksheet",v).prepend(F);for(var D=0,k=_.header.length;D<k;D++)F.appendChild(h(v,"col",{attr:{min:D+1,max:D+1,width:f(_,D),customWidth:1}}));o.customize&&o.customize(w,o,n),function e(n){p===s&&(p=-1===m.serializeToString(t.parseXML(g["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),t.each(n,(function(s,r){if(t.isPlainObject(r))e(r);else{if(p){var o,i,a=r.childNodes[0],l=[];for(o=a.attributes.length-1;o>=0;o--){var d=a.attributes[o].nodeName,c=a.attributes[o].nodeValue;-1!==d.indexOf(":")&&(l.push({name:d,value:c}),a.removeAttribute(d))}for(o=0,i=l.length;o<i;o++){var u=r.createAttribute(l[o].name.replace(":","_dt_b_namespace_token_"));u.value=l[o].value,a.setAttributeNode(u)}}var h=m.serializeToString(r);p&&(-1===h.indexOf("<?xml")&&(h='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+h),h=h.replace(/_dt_b_namespace_token_/g,":")),h=h.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),n[s]=h}}))}(w),d.setAction("excel"),d.setFileName(T.filename),d.setSheetData(w),a(d,""),this.processing(!1)},extension:".xlsx",createEmptyCells:!1}),r.ext.buttons.pdfFlash=t.extend({},c,{className:"buttons-pdf buttons-flash",text:function(t){return t.i18n("buttons.pdf","PDF")},action:function(t,e,n,s){this.processing(!0);var r=s._flash,o=e.buttons.exportData(s.exportOptions),i=e.buttons.exportInfo(s),l=e.table().node().offsetWidth,d=e.columns(s.columns).indexes().map((function(t){return e.column(t).header().offsetWidth/l}));r.setAction("pdf"),r.setFileName(i.filename),a(r,JSON.stringify({title:i.title||"",messageTop:i.messageTop||"",messageBottom:i.messageBottom||"",colWidth:d.toArray(),orientation:s.orientation,size:s.pageSize,header:s.header?o.header:null,footer:s.footer?o.footer:null,body:o.body})),this.processing(!1)},extension:".pdf",orientation:"portrait",pageSize:"A4",newline:"\n"}),r.Buttons})),
/*!
 * HTML5 export buttons for Buttons and DataTables.
 * 2016 SpryMedia Ltd - datatables.net/license
 *
 * FileSaver.js (1.3.3) - MIT license
 * Copyright © 2016 Eli Grey - http://eligrey.com
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n,s,r){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),n.fn.dataTable.Buttons||require("datatables.net-buttons")(e,n),t(n,e,e.document,s,r)}:t(jQuery,window,document)}((function(t,e,n,s,r,o){"use strict";var i=t.fn.dataTable;function a(){return s||e.JSZip}function l(){return r||e.pdfMake}i.Buttons.pdfMake=function(t){if(!t)return l();r=t},i.Buttons.jszip=function(t){if(!t)return a();s=t};var d=function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in s,i=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},d=function(t){setTimeout((function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},u=function(e,u,h){h||(e=c(e));var f,p=this,m="application/octet-stream"===e.type,g=function(){!function(t,e,n){for(var s=(e=[].concat(e)).length;s--;){var r=t["on"+e[s]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){l(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return f=n().createObjectURL(e),void setTimeout((function(){var t,e;s.href=f,s.download=u,t=s,e=new MouseEvent("click"),t.dispatchEvent(e),g(),d(f),p.readyState=p.DONE}));!function(){if((a||m&&i)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=a?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=o,p.readyState=p.DONE,g()},s.readAsDataURL(e),void(p.readyState=p.INIT)}(f||(f=n().createObjectURL(e)),m)?t.location.href=f:t.open(f,"_blank")||(t.location.href=f);p.readyState=p.DONE,g(),d(f)}()},h=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,n){return new u(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||void 0!==e&&e||this.content);i.fileSave=d;var c=function(t){var e="Sheet1";return t.sheetName&&(e=t.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),e},u=function(t){return t.newline?t.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},h=function(t,e){for(var n=u(e),s=t.buttons.exportData(e.exportOptions),r=e.fieldBoundary,i=e.fieldSeparator,a=new RegExp(r,"g"),l=e.escapeChar!==o?e.escapeChar:"\\",d=function(t){for(var e="",n=0,s=t.length;n<s;n++)n>0&&(e+=i),e+=r?r+(""+t[n]).replace(a,l+r)+r:t[n];return e},c=e.header?d(s.header)+n:"",h=e.footer&&s.footer?n+d(s.footer):"",f=[],p=0,m=s.body.length;p<m;p++)f.push(d(s.body[p]));return{str:c+f.join(n)+h,rows:f.length}},f=function(){if(!(-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Opera")))return!1;var t=navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/);return!!(t&&t.length>1&&1*t[1]<603.1)};function p(t){for(var e="A".charCodeAt(0),n="Z".charCodeAt(0)-e+1,s="";t>=0;)s=String.fromCharCode(t%n+e)+s,t=Math.floor(t/n)-1;return s}try{var m,g=new XMLSerializer}catch(t){}function b(e,n,s){var r=e.createElement(n);return s&&(s.attr&&t(r).attr(s.attr),s.children&&t.each(s.children,(function(t,e){r.appendChild(e)})),null!==s.text&&s.text!==o&&r.appendChild(e.createTextNode(s.text))),r}function v(t,e){var n,s,r,i=t.header[e].length;t.footer&&t.footer[e].length>i&&(i=t.footer[e].length);for(var a=0,l=t.body.length;a<l;a++){var d=t.body[a][e];if(-1!==(r=null!==d&&d!==o?d.toString():"").indexOf("\n")?((s=r.split("\n")).sort((function(t,e){return e.length-t.length})),n=s[0].length):n=r.length,n>i&&(i=n),i>40)return 54}return(i*=1.35)>6?i:6}var y={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><definedNames/></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill><patternFill patternType="none" /></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="68"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="14" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},w=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(t){return t/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(t){return t/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(t){return-1*t.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(t){return-1*t.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64},{match:/^[\d]{4}\-[\d]{2}\-[\d]{2}$/,style:67,fmt:function(t){return Math.round(25569+Date.parse(t)/864e5)}}];return i.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(t){return t.i18n("buttons.copy","Copy")},action:function(e,s,r,o){this.processing(!0);var i=this,a=h(s,o),l=s.buttons.exportInfo(o),d=u(o),c=a.str,f=t("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});l.title&&(c=l.title+d+d+c),l.messageTop&&(c=l.messageTop+d+d+c),l.messageBottom&&(c=c+d+d+l.messageBottom),o.customize&&(c=o.customize(c,o,s));var p=t("<textarea readonly/>").val(c).appendTo(f);if(n.queryCommandSupported("copy")){f.appendTo(s.table().container()),p[0].focus(),p[0].select();try{var m=n.execCommand("copy");if(f.remove(),m)return s.buttons.info(s.i18n("buttons.copyTitle","Copy to clipboard"),s.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},a.rows),2e3),void this.processing(!1)}catch(t){}}var g=t("<span>"+s.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>⌘</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(f);s.buttons.info(s.i18n("buttons.copyTitle","Copy to clipboard"),g,0),p[0].focus(),p[0].select();var b=t(g).closest(".dt-button-info"),v=function(){b.off("click.buttons-copy"),t(n).off(".buttons-copy"),s.buttons.info(!1)};b.on("click.buttons-copy",v),t(n).on("keydown.buttons-copy",(function(t){27===t.keyCode&&(v(),i.processing(!1))})).on("copy.buttons-copy cut.buttons-copy",(function(){v(),i.processing(!1)}))},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},i.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return e.FileReader!==o&&e.Blob},text:function(t){return t.i18n("buttons.csv","CSV")},action:function(t,e,s,r){this.processing(!0);var o=h(e,r).str,i=e.buttons.exportInfo(r),a=r.charset;r.customize&&(o=r.customize(o,r,e)),!1!==a?(a||(a=n.characterSet||n.charset),a&&(a=";charset="+a)):a="",r.bom&&(o="\ufeff"+o),d(new Blob([o],{type:"text/csv"+a}),i.filename,!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},i.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return e.FileReader!==o&&a()!==o&&!f()&&g},text:function(t){return t.i18n("buttons.excel","Excel")},action:function(n,s,r,i){this.processing(!0);var l,u,h,f,_=this,x=0,C=function(e){var n=y[e];return t.parseXML(n)},T=C("xl/worksheets/sheet1.xml"),I=T.getElementsByTagName("sheetData")[0],S={_rels:{".rels":C("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":C("xl/_rels/workbook.xml.rels")},"workbook.xml":C("xl/workbook.xml"),"styles.xml":C("xl/styles.xml"),worksheets:{"sheet1.xml":T}},"[Content_Types].xml":C("[Content_Types].xml")},F=s.buttons.exportData(i.exportOptions),D=function(e){f=b(T,"row",{attr:{r:h=x+1}});for(var n=0,s=e.length;n<s;n++){var r=p(n)+""+h,a=null;if(null===e[n]||e[n]===o||""===e[n]){if(!0!==i.createEmptyCells)continue;e[n]=""}var l=e[n];e[n]=t.trim(e[n]);for(var d=0,c=w.length;d<c;d++){var u=w[d];if(e[n].match&&!e[n].match(/^0\d+/)&&e[n].match(u.match)){var m=e[n].replace(/[^\d\.\-]/g,"");u.fmt&&(m=u.fmt(m)),a=b(T,"c",{attr:{r:r,s:u.style},children:[b(T,"v",{text:m})]});break}}if(!a)if("number"==typeof e[n]||e[n].match&&e[n].match(/^-?\d+(\.\d+)?$/)&&!e[n].match(/^0\d+/))a=b(T,"c",{attr:{t:"n",r:r},children:[b(T,"v",{text:e[n]})]});else{var g=l.replace?l.replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):l;a=b(T,"c",{attr:{t:"inlineStr",r:r},children:{row:b(T,"is",{children:{row:b(T,"t",{text:g,attr:{"xml:space":"preserve"}})}})}})}f.appendChild(a)}I.appendChild(f),x++};i.customizeData&&i.customizeData(F);var k=function(e,n){var s=t("mergeCells",T);s[0].appendChild(b(T,"mergeCell",{attr:{ref:"A"+e+":"+p(n)+e}})),s.attr("count",parseFloat(s.attr("count"))+1),t("row:eq("+(e-1)+") c",T).attr("s","51")},A=s.buttons.exportInfo(i);A.title&&(D([A.title]),k(x,F.header.length-1)),A.messageTop&&(D([A.messageTop]),k(x,F.header.length-1)),i.header&&(D(F.header),t("row:last c",T).attr("s","2")),l=x;for(var P=0,R=F.body.length;P<R;P++)D(F.body[P]);u=x,i.footer&&F.footer&&(D(F.footer),t("row:last c",T).attr("s","2")),A.messageBottom&&(D([A.messageBottom]),k(x,F.header.length-1));var B=b(T,"cols");t("worksheet",T).prepend(B);for(var L=0,O=F.header.length;L<O;L++)B.appendChild(b(T,"col",{attr:{min:L+1,max:L+1,width:v(F,L),customWidth:1}}));var N=S.xl["workbook.xml"];t("sheets sheet",N).attr("name",c(i)),i.autoFilter&&(t("mergeCells",T).before(b(T,"autoFilter",{attr:{ref:"A"+l+":"+p(F.header.length-1)+u}})),t("definedNames",N).append(b(N,"definedName",{attr:{name:"_xlnm._FilterDatabase",localSheetId:"0",hidden:1},text:c(i)+"!$A$"+l+":"+p(F.header.length-1)+u}))),i.customize&&i.customize(S,i,s),0===t("mergeCells",T).children().length&&t("mergeCells",T).remove();var E=new(a()),z={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};!function n(s,r){m===o&&(m=-1===g.serializeToString((new e.DOMParser).parseFromString(y["xl/worksheets/sheet1.xml"],"text/xml")).indexOf("xmlns:r")),t.each(r,(function(e,r){if(t.isPlainObject(r)){n(s.folder(e),r)}else{if(m){var o,i,a=r.childNodes[0],l=[];for(o=a.attributes.length-1;o>=0;o--){var d=a.attributes[o].nodeName,c=a.attributes[o].nodeValue;-1!==d.indexOf(":")&&(l.push({name:d,value:c}),a.removeAttribute(d))}for(o=0,i=l.length;o<i;o++){var u=r.createAttribute(l[o].name.replace(":","_dt_b_namespace_token_"));u.value=l[o].value,a.setAttributeNode(u)}}var h=g.serializeToString(r);m&&(-1===h.indexOf("<?xml")&&(h='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+h),h=(h=h.replace(/_dt_b_namespace_token_/g,":")).replace(/xmlns:NS[\d]+="" NS[\d]+:/g,"")),h=h.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),s.file(e,h)}}))}(E,S),E.generateAsync?E.generateAsync(z).then((function(t){d(t,A.filename),_.processing(!1)})):(d(E.generate(z),A.filename),this.processing(!1))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*",createEmptyCells:!1,autoFilter:!1,sheetName:""},i.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return e.FileReader!==o&&l()},text:function(t){return t.i18n("buttons.pdf","PDF")},action:function(e,n,s,r){this.processing(!0);var i=n.buttons.exportData(r.exportOptions),a=n.buttons.exportInfo(r),d=[];r.header&&d.push(t.map(i.header,(function(t){return{text:"string"==typeof t?t:t+"",style:"tableHeader"}})));for(var c=0,u=i.body.length;c<u;c++)d.push(t.map(i.body[c],(function(t){return null!==t&&t!==o||(t=""),{text:"string"==typeof t?t:t+"",style:c%2?"tableBodyEven":"tableBodyOdd"}})));r.footer&&i.footer&&d.push(t.map(i.footer,(function(t){return{text:"string"==typeof t?t:t+"",style:"tableFooter"}})));var h={pageSize:r.pageSize,pageOrientation:r.orientation,content:[{table:{headerRows:1,body:d},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}};a.messageTop&&h.content.unshift({text:a.messageTop,style:"message",margin:[0,0,0,12]}),a.messageBottom&&h.content.push({text:a.messageBottom,style:"message",margin:[0,0,0,12]}),a.title&&h.content.unshift({text:a.title,style:"title",margin:[0,0,0,12]}),r.customize&&r.customize(h,r,n);var p=l().createPdf(h);"open"!==r.download||f()?p.download(a.filename):p.open(),this.processing(!1)},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,messageTop:"*",messageBottom:"*",customize:null,download:"download"},i.Buttons})),
/*!
 * Print button for Buttons and DataTables.
 * 2016 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),n.fn.dataTable.Buttons||require("datatables.net-buttons")(e,n),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=n.createElement("a"),i=function(t){o.href=t;var e=o.host;return-1===e.indexOf("/")&&0!==o.pathname.indexOf("/")&&(e+="/"),o.protocol+"//"+e+o.pathname+o.search};return r.ext.buttons.print={className:"buttons-print",text:function(t){return t.i18n("buttons.print","Print")},action:function(n,r,o,a){var l=r.buttons.exportData(t.extend({decodeEntities:!1},a.exportOptions)),d=r.buttons.exportInfo(a),c=r.columns(a.exportOptions.columns).flatten().map((function(t){return r.settings()[0].aoColumns[r.column(t).index()].sClass})).toArray(),u=function(t,e){for(var n="<tr>",r=0,o=t.length;r<o;r++){var i=null===t[r]||t[r]===s?"":t[r];n+="<"+e+" "+(c[r]?'class="'+c[r]+'"':"")+">"+i+"</"+e+">"}return n+"</tr>"},h='<table class="'+r.table().node().className+'">';a.header&&(h+="<thead>"+u(l.header,"th")+"</thead>"),h+="<tbody>";for(var f=0,p=l.body.length;f<p;f++)h+=u(l.body[f],"td");h+="</tbody>",a.footer&&l.footer&&(h+="<tfoot>"+u(l.footer,"th")+"</tfoot>"),h+="</table>";var m=e.open("","");m.document.close();var g="<title>"+d.title+"</title>";t("style, link").each((function(){var e;g+=("link"===(e=t(this).clone()[0]).nodeName.toLowerCase()&&(e.href=i(e.href)),e.outerHTML)}));try{m.document.head.innerHTML=g}catch(n){t(m.document.head).html(g)}m.document.body.innerHTML="<h1>"+d.title+"</h1><div>"+(d.messageTop||"")+"</div>"+h+"<div>"+(d.messageBottom||"")+"</div>",t(m.document.body).addClass("dt-print-view"),t("img",m.document.body).each((function(t,e){e.setAttribute("src",i(e.getAttribute("src")))})),a.customize&&a.customize(m,a,r);var b=function(){a.autoPrint&&(m.print(),m.close())};navigator.userAgent.match(/Trident\/\d.\d/)?b():m.setTimeout(b,1e3)},title:"*",messageTop:"*",messageBottom:"*",exportOptions:{},header:!0,footer:!1,autoPrint:!0,customize:null},r.Buttons})),
/*! ColReorder 1.5.2
 * ©2010-2019 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable;function o(t){for(var e=[],n=0,s=t.length;n<s;n++)e[t[n]]=n;return e}function i(t,e,n){var s=t.splice(e,1)[0];t.splice(n,0,s)}function a(t,e,n){for(var s=[],r=0,o=t.childNodes.length;r<o;r++)1==t.childNodes[r].nodeType&&s.push(t.childNodes[r]);var i=s[e];null!==n?t.insertBefore(i,s[n]):t.appendChild(i)}t.fn.dataTableExt.oApi.fnColReorder=function(e,n,r,l,d){var c,u,h,f,p,m,g,b=e.aoColumns.length,v=function(t,e,n){if(t[e]&&"function"!=typeof t[e]){var s=t[e].split("."),r=s.shift();isNaN(1*r)||(t[e]=n[1*r]+"."+s.join("."))}};if(n!=r)if(n<0||n>=b)this.oApi._fnLog(e,1,"ColReorder 'from' index is out of bounds: "+n);else if(r<0||r>=b)this.oApi._fnLog(e,1,"ColReorder 'to' index is out of bounds: "+r);else{var y=[];for(c=0,u=b;c<u;c++)y[c]=c;i(y,n,r);var w=o(y);for(c=0,u=e.aaSorting.length;c<u;c++)e.aaSorting[c][0]=w[e.aaSorting[c][0]];if(null!==e.aaSortingFixed)for(c=0,u=e.aaSortingFixed.length;c<u;c++)e.aaSortingFixed[c][0]=w[e.aaSortingFixed[c][0]];for(c=0,u=b;c<u;c++){for(h=0,f=(g=e.aoColumns[c]).aDataSort.length;h<f;h++)g.aDataSort[h]=w[g.aDataSort[h]];g.idx=w[g.idx]}for(t.each(e.aLastSort,(function(t,n){e.aLastSort[t].src=w[n.src]})),c=0,u=b;c<u;c++)"number"==typeof(g=e.aoColumns[c]).mData?g.mData=w[g.mData]:t.isPlainObject(g.mData)&&(v(g.mData,"_",w),v(g.mData,"filter",w),v(g.mData,"sort",w),v(g.mData,"type",w));if(e.aoColumns[n].bVisible){var _=this.oApi._fnColumnIndexToVisible(e,n),x=null;for(c=r<n?r:r+1;null===x&&c<b;)x=this.oApi._fnColumnIndexToVisible(e,c),c++;for(c=0,u=(m=e.nTHead.getElementsByTagName("tr")).length;c<u;c++)a(m[c],_,x);if(null!==e.nTFoot)for(c=0,u=(m=e.nTFoot.getElementsByTagName("tr")).length;c<u;c++)a(m[c],_,x);for(c=0,u=e.aoData.length;c<u;c++)null!==e.aoData[c].nTr&&a(e.aoData[c].nTr,_,x)}for(i(e.aoColumns,n,r),c=0,u=b;c<u;c++)e.oApi._fnColumnOptions(e,c,{});for(i(e.aoPreSearchCols,n,r),c=0,u=e.aoData.length;c<u;c++){var C=e.aoData[c],T=C.anCells;if(T)for(i(T,n,r),h=0,p=T.length;h<p;h++)T[h]&&T[h]._DT_CellIndex&&(T[h]._DT_CellIndex.column=h);"dom"!==C.src&&t.isArray(C._aData)&&i(C._aData,n,r)}for(c=0,u=e.aoHeader.length;c<u;c++)i(e.aoHeader[c],n,r);if(null!==e.aoFooter)for(c=0,u=e.aoFooter.length;c<u;c++)i(e.aoFooter[c],n,r);for((d||d===s)&&t.fn.dataTable.Api(e).rows().invalidate(),c=0,u=b;c<u;c++)t(e.aoColumns[c].nTh).off(".DT"),this.oApi._fnSortAttachListener(e,e.aoColumns[c].nTh,c);t(e.oInstance).trigger("column-reorder.dt",[e,{from:n,to:r,mapping:w,drop:l,iFrom:n,iTo:r,aiInvertMapping:w}])}};var l=function(e,n){var s=new t.fn.dataTable.Api(e).settings()[0];if(s._colReorder)return s._colReorder;!0===n&&(n={});var r=t.fn.dataTable.camelToHungarian;return r&&(r(l.defaults,l.defaults,!0),r(l.defaults,n||{})),this.s={dt:null,enable:null,init:t.extend(!0,{},l.defaults,n),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.enable=this.s.init.bEnable,this.s.dt=s,this.s.dt._colReorder=this,this._fnConstruct(),this};return t.extend(l.prototype,{fnEnable:function(t){if(!1===t)return fnDisable();this.s.enable=!0},fnDisable:function(){this.s.enable=!1},fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(e,n){var r,i,a=[],l=this.s.dt.aoColumns;if(e===s){for(r=0,i=l.length;r<i;r++)a.push(l[r]._ColReorder_iOrigCol);return a}if(n){var d=this.fnOrder();for(r=0,i=e.length;r<i;r++)a.push(t.inArray(e[r],d));e=a}return this._fnOrderColumns(o(e)),this},fnTranspose:function(e,n){n||(n="toCurrent");var s=this.fnOrder(),r=this.s.dt.aoColumns;return"toCurrent"===n?t.isArray(e)?t.map(e,(function(e){return t.inArray(e,s)})):t.inArray(e,s):t.isArray(e)?t.map(e,(function(t){return r[t]._ColReorder_iOrigCol})):r[e]._ColReorder_iOrigCol},_fnConstruct:function(){var e,n=this,s=this.s.dt.aoColumns.length,r=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),e=0;e<s;e++)e>this.s.fixed-1&&e<s-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",(function(t,e){n._fnStateSave.call(n,e)}),"ColReorder_State");var i=null;if(this.s.init.aiOrder&&(i=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(i=this.s.dt.oLoadedState.ColReorder),i)if(n.s.dt._bInitComplete){var a=o(i);n._fnOrderColumns.call(n,a)}else{var l=!1;t(r).on("draw.dt.colReorder",(function(){if(!n.s.dt._bInitComplete&&!l){l=!0;var t=o(i);n._fnOrderColumns.call(n,t)}}))}else this._fnSetColumnIndexes();t(r).on("destroy.dt.colReorder",(function(){t(r).off("destroy.dt.colReorder draw.dt.colReorder"),t.each(n.s.dt.aoColumns,(function(e,n){t(n.nTh).off(".ColReorder"),t(n.nTh).removeAttr("data-column-index")})),n.s.dt._colReorder=null,n.s=null}))},_fnOrderColumns:function(e){var n=!1;if(e.length==this.s.dt.aoColumns.length){for(var s=0,r=e.length;s<r;s++){var o=t.inArray(s,e);s!=o&&(i(e,o,s),this.s.dt.oInstance.fnColReorder(o,s,!0,!1),n=!0)}this._fnSetColumnIndexes(),n&&(t.fn.dataTable.Api(this.s.dt).rows().invalidate(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}else this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.")},_fnStateSave:function(e){var n,s,r,o=this.s.dt.aoColumns;if(e.ColReorder=[],e.aaSorting){for(n=0;n<e.aaSorting.length;n++)e.aaSorting[n][0]=o[e.aaSorting[n][0]]._ColReorder_iOrigCol;var i=t.extend(!0,[],e.aoSearchCols);for(n=0,s=o.length;n<s;n++)r=o[n]._ColReorder_iOrigCol,e.aoSearchCols[r]=i[n],e.abVisCols[r]=o[n].bVisible,e.ColReorder.push(r)}else if(e.order){for(n=0;n<e.order.length;n++)e.order[n][0]=o[e.order[n][0]]._ColReorder_iOrigCol;var a=t.extend(!0,[],e.columns);for(n=0,s=o.length;n<s;n++)r=o[n]._ColReorder_iOrigCol,e.columns[r]=a[n],e.ColReorder.push(r)}},_fnMouseListener:function(e,n){var s=this;t(n).on("mousedown.ColReorder",(function(t){s.s.enable&&1===t.which&&s._fnMouseDown.call(s,t,n)})).on("touchstart.ColReorder",(function(t){s.s.enable&&s._fnMouseDown.call(s,t,n)}))},_fnMouseDown:function(e,r){var o=this,i=t(e.target).closest("th, td").offset(),a=parseInt(t(r).attr("data-column-index"),10);a!==s&&(this.s.mouse.startX=this._fnCursorPosition(e,"pageX"),this.s.mouse.startY=this._fnCursorPosition(e,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(e,"pageX")-i.left,this.s.mouse.offsetY=this._fnCursorPosition(e,"pageY")-i.top,this.s.mouse.target=this.s.dt.aoColumns[a].nTh,this.s.mouse.targetIndex=a,this.s.mouse.fromIndex=a,this._fnRegions(),t(n).on("mousemove.ColReorder touchmove.ColReorder",(function(t){o._fnMouseMove.call(o,t)})).on("mouseup.ColReorder touchend.ColReorder",(function(t){o._fnMouseUp.call(o,t)})))},_fnMouseMove:function(t){var e,n=this;if(null===this.dom.drag){if(Math.pow(Math.pow(this._fnCursorPosition(t,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(t,"pageY")-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(t,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(t,"pageY")-this.s.mouse.offsetY});for(var s=this.s.mouse.toIndex,r=this._fnCursorPosition(t,"pageX"),o=function(t){for(;t>=0;){if(--t<=0)return null;if(n.s.aoTargets[t+1].x!==n.s.aoTargets[t].x)return n.s.aoTargets[t]}},i=function(){for(var t=0;t<n.s.aoTargets.length-1;t++)if(n.s.aoTargets[t].x!==n.s.aoTargets[t+1].x)return n.s.aoTargets[t]},a=function(){for(var t=n.s.aoTargets.length-1;t>0;t--)if(n.s.aoTargets[t].x!==n.s.aoTargets[t-1].x)return n.s.aoTargets[t]},l=1;l<this.s.aoTargets.length;l++){var d=o(l);d||(d=i());var c=d.x+(this.s.aoTargets[l].x-d.x)/2;if(this._fnIsLtr()){if(r<c){e=d;break}}else if(r>c){e=d;break}}e?(this.dom.pointer.css("left",e.x),this.s.mouse.toIndex=e.to):(this.dom.pointer.css("left",a().x),this.s.mouse.toIndex=a().to),this.s.init.bRealtime&&s!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this._fnRegions())},_fnMouseUp:function(e){t(n).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var e=this.s.dt.aoColumns,n=this._fnIsLtr();this.s.aoTargets.splice(0,this.s.aoTargets.length);var s=t(this.s.dt.nTable).offset().left,r=[];t.each(e,(function(e,o){if(o.bVisible&&"none"!==o.nTh.style.display){var i=t(o.nTh),a=i.offset().left;n&&(a+=i.outerWidth()),r.push({index:e,bound:a}),s=a}else r.push({index:e,bound:s})}));var o=r[0],i=t(e[o.index].nTh).outerWidth();this.s.aoTargets.push({to:0,x:o.bound-i});for(var a=0;a<r.length;a++){var l=r[a],d=l.index;l.index<this.s.mouse.fromIndex&&d++,this.s.aoTargets.push({to:d,x:l.bound})}0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var e=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,n=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,s=n.parentNode,r=s.parentNode,o=r.parentNode,i=t(n).clone();this.dom.drag=t(o.cloneNode(!1)).addClass("DTCR_clonedTable").append(t(r.cloneNode(!1)).append(t(s.cloneNode(!1)).append(i[0]))).css({position:"absolute",top:0,left:0,width:t(n).outerWidth(),height:t(n).outerHeight()}).appendTo("body"),this.dom.pointer=t("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:e?t("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:t(this.s.dt.nTable).offset().top,height:e?t("div.dataTables_scroll",this.s.dt.nTableWrapper).height():t(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){t.each(this.s.dt.aoColumns,(function(e,n){t(n.nTh).attr("data-column-index",e)}))},_fnCursorPosition:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0][e]:t[e]},_fnIsLtr:function(){return"rtl"!==t(this.s.dt.nTable).css("direction")}}),l.defaults={aiOrder:null,bEnable:!0,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},l.version="1.5.2",t.fn.dataTable.ColReorder=l,t.fn.DataTable.ColReorder=l,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.10.8")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;if(t._colReorder)e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second");else{var n=t.oInit,s=n.colReorder||n.oColReorder||{};new l(t,s)}return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),t(n).on("preInit.dt.colReorder",(function(e,n){if("dt"===e.namespace){var s=n.oInit.colReorder,o=r.defaults.colReorder;if(s||o){var i=t.extend({},s,o);!1!==s&&new l(n,i)}}})),t.fn.dataTable.Api.register("colReorder.reset()",(function(){return this.iterator("table",(function(t){t._colReorder.fnReset()}))})),t.fn.dataTable.Api.register("colReorder.order()",(function(t,e){return t?this.iterator("table",(function(n){n._colReorder.fnOrder(t,e)})):this.context.length?this.context[0]._colReorder.fnOrder():null})),t.fn.dataTable.Api.register("colReorder.transpose()",(function(t,e){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(t,e):t})),t.fn.dataTable.Api.register("colReorder.move()",(function(t,e,n,s){return this.context.length&&(this.context[0]._colReorder.s.dt.oInstance.fnColReorder(t,e,n,s),this.context[0]._colReorder._fnSetColumnIndexes()),this})),t.fn.dataTable.Api.register("colReorder.enable()",(function(t){return this.iterator("table",(function(e){e._colReorder&&e._colReorder.fnEnable(t)}))})),t.fn.dataTable.Api.register("colReorder.disable()",(function(){return this.iterator("table",(function(t){t._colReorder&&t._colReorder.fnDisable()}))})),l})),
/*! FixedColumns 3.3.1
 * ©2010-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r,o=t.fn.dataTable,i=function(e,n){var r=this;if(this instanceof i){n!==s&&!0!==n||(n={});var o=t.fn.dataTable.camelToHungarian;o&&(o(i.defaults,i.defaults,!0),o(i.defaults,n));var a=new t.fn.dataTable.Api(e).settings()[0];if(this.s={dt:a,iTableColumns:a.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===t(a.nTable).css("direction")},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},a._oFixedColumns)throw"FixedColumns already initialised on this table";a._oFixedColumns=this,a._bInitComplete?this._fnConstruct(n):a.oApi._fnCallbackReg(a,"aoInitComplete",(function(){r._fnConstruct(n)}),"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};return t.extend(i.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(t){delete t._DTTC_iHeight,t.style.height="auto"},fnSetRowHeight:function(t,e){t.style.height=e+"px"},fnGetPosition:function(e){var n,s=this.s.dt.oInstance;if(t(e).parents(".DTFC_Cloned").length){if("tr"===e.nodeName.toLowerCase())return n=t(e).index(),s.fnGetPosition(t("tr",this.s.dt.nTBody)[n]);var r=t(e).index();return n=t(e.parentNode).index(),[s.fnGetPosition(t("tr",this.s.dt.nTBody)[n]),r,s.oApi._fnVisibleToColumnIndex(this.s.dt,r)]}return s.fnGetPosition(e)},fnToFixedNode:function(e,n){var s;return n<this.s.iLeftColumns?s=t(this.dom.clone.left.body).find("[data-dt-row="+e+"][data-dt-column="+n+"]"):n>=this.s.iRightColumns&&(s=t(this.dom.clone.right.body).find("[data-dt-row="+e+"][data-dt-column="+n+"]")),s&&s.length?s[0]:new t.fn.dataTable.Api(this.s.dt).cell(e,n).node()},_fnConstruct:function(r){var o=this;if("function"==typeof this.s.dt.oInstance.fnVersionCheck&&!0===this.s.dt.oInstance.fnVersionCheck("1.8.0"))if(""!==this.s.dt.oScroll.sX){this.s=t.extend(!0,this.s,i.defaults,r);var a,l=this.s.dt.oClasses;this.dom.grid.dt=t(this.s.dt.nTable).parents("div."+l.sScrollWrapper)[0],this.dom.scroller=t("div."+l.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var d=!1;t(this.s.dt.nTableWrapper).on("mousedown.DTFC",(function(e){0===e.button&&(d=!0,t(n).one("mouseup",(function(){d=!1})))})),t(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",(function(){d||(a="main")})).on("scroll.DTFC",(function(t){!a&&t.originalEvent&&(a="main"),"main"!==a&&"key"!==a||(o.s.iLeftColumns>0&&(o.dom.grid.left.liner.scrollTop=o.dom.scroller.scrollTop),o.s.iRightColumns>0&&(o.dom.grid.right.liner.scrollTop=o.dom.scroller.scrollTop))}));var c="onwheel"in n.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";o.s.iLeftColumns>0&&t(o.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",(function(){d||"key"===a||(a="left")})).on("scroll.DTFC",(function(t){!a&&t.originalEvent&&(a="left"),"left"===a&&(o.dom.scroller.scrollTop=o.dom.grid.left.liner.scrollTop,o.s.iRightColumns>0&&(o.dom.grid.right.liner.scrollTop=o.dom.grid.left.liner.scrollTop))})).on(c,(function(t){a="left";var e="wheel"===t.type?-t.originalEvent.deltaX:t.originalEvent.wheelDeltaX;o.dom.scroller.scrollLeft-=e})),o.s.iRightColumns>0&&t(o.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",(function(){d||"key"===a||(a="right")})).on("scroll.DTFC",(function(t){!a&&t.originalEvent&&(a="right"),"right"===a&&(o.dom.scroller.scrollTop=o.dom.grid.right.liner.scrollTop,o.s.iLeftColumns>0&&(o.dom.grid.left.liner.scrollTop=o.dom.grid.right.liner.scrollTop))})).on(c,(function(t){a="left";var e="wheel"===t.type?-t.originalEvent.deltaX:t.originalEvent.wheelDeltaX;o.dom.scroller.scrollLeft-=e})),t(e).on("resize.DTFC",(function(){o._fnGridLayout.call(o)}));var u=!0,h=t(this.s.dt.nTable);h.on("draw.dt.DTFC",(function(){o._fnColCalc(),o._fnDraw.call(o,u),u=!1})).on("key-focus.dt.DTFC",(function(){a="key"})).on("column-sizing.dt.DTFC",(function(){o._fnColCalc(),o._fnGridLayout(o)})).on("column-visibility.dt.DTFC",(function(t,e,n,r,i){(i===s||i)&&(o._fnColCalc(),o._fnGridLayout(o),o._fnDraw(!0))})).on("select.dt.DTFC deselect.dt.DTFC",(function(t,e,n,s){"dt"===t.namespace&&o._fnDraw(!1)})).on("position.dts.dt.DTFC",(function(e,n){o.dom.grid.left.body&&t(o.dom.grid.left.body).find("table").eq(0).css("top",n),o.dom.grid.right.body&&t(o.dom.grid.right.body).find("table").eq(0).css("top",n)})).on("destroy.dt.DTFC",(function(){h.off(".DTFC"),t(o.dom.scroller).off(".DTFC"),t(e).off(".DTFC"),t(o.s.dt.nTableWrapper).off(".DTFC"),t(o.dom.grid.left.liner).off(".DTFC "+c),t(o.dom.grid.left.wrapper).remove(),t(o.dom.grid.right.liner).off(".DTFC "+c),t(o.dom.grid.right.wrapper).remove()})),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)}else this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else alert("FixedColumns "+i.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation")},_fnColCalc:function(){var e=this,n=0,s=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],t.each(this.s.dt.aoColumns,(function(r,o){var i,a=t(o.nTh);if(a.filter(":visible").length){var l=a.outerWidth();0===e.s.aiOuterWidths.length&&(l+="string"==typeof(i=t(e.s.dt.nTable).css("border-left-width"))&&-1===i.indexOf("px")?1:parseInt(i,10)),e.s.aiOuterWidths.length===e.s.dt.aoColumns.length-1&&(l+="string"==typeof(i=t(e.s.dt.nTable).css("border-right-width"))&&-1===i.indexOf("px")?1:parseInt(i,10)),e.s.aiOuterWidths.push(l),e.s.aiInnerWidths.push(a.width()),r<e.s.iLeftColumns&&(n+=l),e.s.iTableColumns-e.s.iRightColumns<=r&&(s+=l)}else e.s.aiInnerWidths.push(0),e.s.aiOuterWidths.push(0)})),this.s.iLeftWidth=n,this.s.iRightWidth=s},_fnGridSetup:function(){var e,n=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var s=t('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;" aria-hidden="true"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; height:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;" aria-hidden="true"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; height:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],r=s.childNodes[0],o=s.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(s,this.dom.grid.dt),s.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=s,this.s.iLeftColumns>0&&(this.dom.grid.left.wrapper=r,this.dom.grid.left.head=r.childNodes[0],this.dom.grid.left.body=r.childNodes[1],this.dom.grid.left.liner=t("div.DTFC_LeftBodyLiner",s)[0],s.appendChild(r)),this.s.iRightColumns>0&&(this.dom.grid.right.wrapper=o,this.dom.grid.right.head=o.childNodes[0],this.dom.grid.right.body=o.childNodes[1],this.dom.grid.right.liner=t("div.DTFC_RightBodyLiner",s)[0],o.style.right=n.bar+"px",(e=t("div.DTFC_RightHeadBlocker",s)[0]).style.width=n.bar+"px",e.style.right=-n.bar+"px",this.dom.grid.right.headBlock=e,(e=t("div.DTFC_RightFootBlocker",s)[0]).style.width=n.bar+"px",e.style.right=-n.bar+"px",this.dom.grid.right.footBlock=e,s.appendChild(o)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,this.s.iLeftColumns>0&&(this.dom.grid.left.foot=r.childNodes[2]),this.s.iRightColumns>0&&(this.dom.grid.right.foot=o.childNodes[2])),this.s.rtl&&t("div.DTFC_RightHeadBlocker",s).css({left:-n.bar+"px",right:""})},_fnGridLayout:function(){var e,n=this,s=this.dom.grid,r=(t(s.wrapper).width(),this.s.dt.nTable.parentNode.offsetHeight),o=this.s.dt.nTable.parentNode.parentNode.offsetHeight,i=this._fnDTOverflow(),a=this.s.iLeftWidth,l=this.s.iRightWidth,d="rtl"===t(this.dom.body).css("direction"),c=function(e,s){i.bar?n._firefoxScrollError()?t(e).height()>34&&(e.style.width=s+i.bar+"px"):e.style.width=s+i.bar+"px":(e.style.width=s+20+"px",e.style.paddingRight="20px",e.style.boxSizing="border-box")};i.x&&(r-=i.bar),s.wrapper.style.height=o+"px",this.s.iLeftColumns>0&&((e=s.left.wrapper).style.width=a+"px",e.style.height="1px",d?(e.style.left="",e.style.right=0):(e.style.left=0,e.style.right=""),s.left.body.style.height=r+"px",s.left.foot&&(s.left.foot.style.top=(i.x?i.bar:0)+"px"),c(s.left.liner,a),s.left.liner.style.height=r+"px",s.left.liner.style.maxHeight=r+"px"),this.s.iRightColumns>0&&((e=s.right.wrapper).style.width=l+"px",e.style.height="1px",this.s.rtl?(e.style.left=i.y?i.bar+"px":0,e.style.right=""):(e.style.left="",e.style.right=i.y?i.bar+"px":0),s.right.body.style.height=r+"px",s.right.foot&&(s.right.foot.style.top=(i.x?i.bar:0)+"px"),c(s.right.liner,l),s.right.liner.style.height=r+"px",s.right.liner.style.maxHeight=r+"px",s.right.headBlock.style.display=i.y?"block":"none",s.right.footBlock.style.display=i.y?"block":"none")},_fnDTOverflow:function(){var t=this.s.dt.nTable,e=t.parentNode,n={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return t.offsetWidth>e.clientWidth&&(n.x=!0),t.offsetHeight>e.clientHeight&&(n.y=!0),n},_fnDraw:function(e){this._fnGridLayout(),this._fnCloneLeft(e),this._fnCloneRight(e),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),t(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(t){if(!(this.s.iRightColumns<=0)){var e,n=[];for(e=this.s.iTableColumns-this.s.iRightColumns;e<this.s.iTableColumns;e++)this.s.dt.aoColumns[e].bVisible&&n.push(e);this._fnClone(this.dom.clone.right,this.dom.grid.right,n,t)}},_fnCloneLeft:function(t){if(!(this.s.iLeftColumns<=0)){var e,n=[];for(e=0;e<this.s.iLeftColumns;e++)this.s.dt.aoColumns[e].bVisible&&n.push(e);this._fnClone(this.dom.clone.left,this.dom.grid.left,n,t)}},_fnCopyLayout:function(e,n,s){for(var r=[],o=[],i=[],a=0,l=e.length;a<l;a++){var d=[];d.nTr=t(e[a].nTr).clone(s,!1)[0];for(var c=0,u=this.s.iTableColumns;c<u;c++)if(-1!==t.inArray(c,n)){var h=t.inArray(e[a][c].cell,i);if(-1===h){var f=t(e[a][c].cell).clone(s,!1)[0];o.push(f),i.push(e[a][c].cell),d.push({cell:f,unique:e[a][c].unique})}else d.push({cell:o[h],unique:e[a][c].unique})}r.push(d)}return r},_fnClone:function(e,n,r,o){var i,a,l,d,c,u,h,f,p,m,g=this,b=this.s.dt;if(o){for(t(e.header).remove(),e.header=t(this.dom.header).clone(!0,!1)[0],e.header.className+=" DTFC_Cloned",e.header.style.width="100%",n.head.appendChild(e.header),f=this._fnCopyLayout(b.aoHeader,r,!0),(p=t(">thead",e.header)).empty(),i=0,a=f.length;i<a;i++)p[0].appendChild(f[i].nTr);b.oApi._fnDrawHead(b,f,!0)}else for(f=this._fnCopyLayout(b.aoHeader,r,!1),m=[],b.oApi._fnDetectHeader(m,t(">thead",e.header)[0]),i=0,a=f.length;i<a;i++)for(l=0,d=f[i].length;l<d;l++)m[i][l].cell.className=f[i][l].cell.className,t("span.DataTables_sort_icon",m[i][l].cell).each((function(){this.className=t("span.DataTables_sort_icon",f[i][l].cell)[0].className}));this._fnEqualiseHeights("thead",this.dom.header,e.header),"auto"==this.s.sHeightMatch&&t(">tbody>tr",g.dom.body).css("height","auto"),null!==e.body&&(t(e.body).remove(),e.body=null),e.body=t(this.dom.body).clone(!0)[0],e.body.className+=" DTFC_Cloned",e.body.style.paddingBottom=b.oScroll.iBarWidth+"px",e.body.style.marginBottom=2*b.oScroll.iBarWidth+"px",null!==e.body.getAttribute("id")&&e.body.removeAttribute("id"),t(">thead>tr",e.body).empty(),t(">tfoot",e.body).remove();var v=t("tbody",e.body)[0];if(t(v).empty(),b.aiDisplay.length>0){var y=t(">thead>tr",e.body)[0];for(h=0;h<r.length;h++){c=r[h],(u=t(b.aoColumns[c].nTh).clone(!0)[0]).innerHTML="";var w=u.style;w.paddingTop="0",w.paddingBottom="0",w.borderTopWidth="0",w.borderBottomWidth="0",w.height=0,w.width=g.s.aiInnerWidths[c]+"px",y.appendChild(u)}t(">tbody>tr",g.dom.body).each((function(e){var n=!1===g.s.dt.oFeatures.bServerSide?g.s.dt.aiDisplay[g.s.dt._iDisplayStart+e]:e,s=g.s.dt.aoData[n].anCells||t(this).children("td, th"),o=this.cloneNode(!1);for(o.removeAttribute("id"),o.setAttribute("data-dt-row",n),h=0;h<r.length;h++)c=r[h],s.length>0&&((u=t(s[c]).clone(!0,!0)[0]).removeAttribute("id"),u.setAttribute("data-dt-row",n),u.setAttribute("data-dt-column",c),o.appendChild(u));v.appendChild(o)}))}else t(">tbody>tr",g.dom.body).each((function(e){(u=this.cloneNode(!0)).className+=" DTFC_NoData",t("td",u).html(""),v.appendChild(u)}));if(e.body.style.width="100%",e.body.style.margin="0",e.body.style.padding="0",b.oScroller!==s){var _=b.oScroller.dom.force;n.forcer?n.forcer.style.height=_.style.height:(n.forcer=_.cloneNode(!0),n.liner.appendChild(n.forcer))}if(n.liner.appendChild(e.body),this._fnEqualiseHeights("tbody",g.dom.body,e.body),null!==b.nTFoot){if(o){null!==e.footer&&e.footer.parentNode.removeChild(e.footer),e.footer=t(this.dom.footer).clone(!0,!0)[0],e.footer.className+=" DTFC_Cloned",e.footer.style.width="100%",n.foot.appendChild(e.footer),f=this._fnCopyLayout(b.aoFooter,r,!0);var x=t(">tfoot",e.footer);for(x.empty(),i=0,a=f.length;i<a;i++)x[0].appendChild(f[i].nTr);b.oApi._fnDrawHead(b,f,!0)}else{f=this._fnCopyLayout(b.aoFooter,r,!1);var C=[];for(b.oApi._fnDetectHeader(C,t(">tfoot",e.footer)[0]),i=0,a=f.length;i<a;i++)for(l=0,d=f[i].length;l<d;l++)C[i][l].cell.className=f[i][l].cell.className}this._fnEqualiseHeights("tfoot",this.dom.footer,e.footer)}var T=b.oApi._fnGetUniqueThs(b,t(">thead",e.header)[0]);t(T).each((function(t){c=r[t],this.style.width=g.s.aiInnerWidths[c]+"px"})),null!==g.s.dt.nTFoot&&(T=b.oApi._fnGetUniqueThs(b,t(">tfoot",e.footer)[0]),t(T).each((function(t){c=r[t],this.style.width=g.s.aiInnerWidths[c]+"px"})))},_fnGetTrNodes:function(t){for(var e=[],n=0,s=t.childNodes.length;n<s;n++)"TR"==t.childNodes[n].nodeName.toUpperCase()&&e.push(t.childNodes[n]);return e},_fnEqualiseHeights:function(e,n,s){if("none"!=this.s.sHeightMatch||"thead"===e||"tfoot"===e){var r,o,i,a,l,d=n.getElementsByTagName(e)[0],c=s.getElementsByTagName(e)[0],u=t(">"+e+">tr:eq(0)",n).children(":first"),h=(u.outerHeight(),u.height(),this._fnGetTrNodes(d)),f=this._fnGetTrNodes(c),p=[];for(r=0,o=f.length;r<o;r++)a=h[r].offsetHeight,i=(l=f[r].offsetHeight)>a?l:a,"semiauto"==this.s.sHeightMatch&&(h[r]._DTTC_iHeight=i),p.push(i);for(r=0,o=f.length;r<o;r++)f[r].style.height=p[r]+"px",h[r].style.height=p[r]+"px"}},_firefoxScrollError:function(){if(r===s){var e=t("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");r=e[0].clientWidth===e[0].offsetWidth&&0!==this._fnDTOverflow().bar,e.remove()}return r}}),i.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},i.version="3.3.1",o.Api.register("fixedColumns()",(function(){return this})),o.Api.register("fixedColumns().update()",(function(){return this.iterator("table",(function(t){t._oFixedColumns&&t._oFixedColumns.fnUpdate()}))})),o.Api.register("fixedColumns().relayout()",(function(){return this.iterator("table",(function(t){t._oFixedColumns&&t._oFixedColumns.fnRedrawLayout()}))})),o.Api.register("rows().recalcHeight()",(function(){return this.iterator("row",(function(t,e){t._oFixedColumns&&t._oFixedColumns.fnRecalculateHeight(this.row(e).node())}))})),o.Api.register("fixedColumns().rowIndex()",(function(e){return(e=t(e)).parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[e.index()]:this.row(e).index()})),o.Api.register("fixedColumns().cellIndex()",(function(e){if((e=t(e)).parents(".DTFC_Cloned").length){var n,s=e.parent().index(),r=this.rows({page:"current"}).indexes()[s];if(e.parents(".DTFC_LeftWrapper").length)n=e.index();else n=this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+e.index();return{row:r,column:this.column.index("toData",n),columnVisible:n}}return this.cell(e).index()})),o.Api.registerPlural("cells().fixedNodes()","cell().fixedNode()",(function(){return this.iterator("cell",(function(t,e,n){return t._oFixedColumns?t._oFixedColumns.fnToFixedNode(e,n):this.cell(e,n).node()}),1)})),t(n).on("init.dt.fixedColumns",(function(e,n){if("dt"===e.namespace){var s=n.oInit.fixedColumns,r=o.defaults.fixedColumns;if(s||r){var a=t.extend({},s,r);!1!==s&&new i(n,a)}}})),t.fn.dataTable.FixedColumns=i,t.fn.DataTable.FixedColumns=i,i})),
/*! FixedHeader 3.1.7
 * ©2009-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=0,i=function(n,s){if(!(this instanceof i))throw"FixedHeader must be initialised with the 'new' keyword.";!0===s&&(s={}),n=new r.Api(n),this.c=t.extend(!0,{},i.defaults,s),this.s={dt:n,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:t(e).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:n.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+o++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:t(n.table().header()),tbody:t(n.table().body()),tfoot:t(n.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var a=n.settings()[0];if(a._fixedHeader)throw"FixedHeader already initialised on table "+a.nTable.id;a._fixedHeader=this,this._constructor()};return t.extend(i.prototype,{destroy:function(){this.s.dt.off(".dtfc"),t(e).off(this.s.namespace),this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0)},enable:function(t,e){this.s.enable=t,(e||e===s)&&(this._positions(),this._scroll(!0))},enabled:function(){return this.s.enable},headerOffset:function(t){return t!==s&&(this.c.headerOffset=t,this.update()),this.c.headerOffset},footerOffset:function(t){return t!==s&&(this.c.footerOffset=t,this.update()),this.c.footerOffset},update:function(){var e=this.s.dt.table().node();t(e).is(":visible")?this.enable(!0,!1):this.enable(!1,!1),this._positions(),this._scroll(!0)},_constructor:function(){var n=this,s=this.s.dt;t(e).on("scroll"+this.s.namespace,(function(){n._scroll()})).on("resize"+this.s.namespace,r.util.throttle((function(){n.s.position.windowHeight=t(e).height(),n.update()}),50));var o=t(".fh-fixedHeader");!this.c.headerOffset&&o.length&&(this.c.headerOffset=o.outerHeight());var i=t(".fh-fixedFooter");!this.c.footerOffset&&i.length&&(this.c.footerOffset=i.outerHeight()),s.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc",(function(){n.update()})),s.on("destroy.dtfc",(function(){n.destroy()})),this._positions(),this._scroll()},_clone:function(e,n){var s=this.s.dt,r=this.dom[e],o="header"===e?this.dom.thead:this.dom.tfoot;!n&&r.floating?r.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(r.floating&&(r.placeholder.remove(),this._unsize(e),r.floating.children().detach(),r.floating.remove()),r.floating=t(s.table().node().cloneNode(!1)).css("table-layout","fixed").attr("aria-hidden","true").removeAttr("id").append(o).appendTo("body"),r.placeholder=o.clone(!1),r.placeholder.find("*[id]").removeAttr("id"),r.host.prepend(r.placeholder),this._matchWidths(r.placeholder,r.floating))},_matchWidths:function(e,n){var s=function(n){return t(n,e).map((function(){return t(this).width()})).toArray()},r=function(e,s){t(e,n).each((function(e){t(this).css({width:s[e],minWidth:s[e]})}))},o=s("th"),i=s("td");r("th",o),r("td",i)},_unsize:function(e){var n=this.dom[e].floating;n&&("footer"===e||"header"===e&&!this.s.autoWidth)?t("th, td",n).css({width:"",minWidth:""}):n&&"header"===e&&t("th, td",n).css("min-width","")},_horizontal:function(t,e){var n=this.dom[t],s=this.s.position,r=this.s.scrollLeft;n.floating&&r[t]!==e&&(n.floating.css("left",s.left-e),r[t]=e)},_modeChange:function(e,s,r){this.s.dt;var o=this.dom[s],i=this.s.position,a=function(t){o.floating.attr("style",(function(e,n){return(n||"")+"width: "+t+"px !important;"}))},l=this.dom["footer"===s?"tfoot":"thead"],d=t.contains(l[0],n.activeElement)?n.activeElement:null;d&&d.blur(),"in-place"===e?(o.placeholder&&(o.placeholder.remove(),o.placeholder=null),this._unsize(s),"header"===s?o.host.prepend(l):o.host.append(l),o.floating&&(o.floating.remove(),o.floating=null)):"in"===e?(this._clone(s,r),o.floating.addClass("fixedHeader-floating").css("header"===s?"top":"bottom",this.c[s+"Offset"]).css("left",i.left+"px"),a(i.width),"footer"===s&&o.floating.css("top","")):"below"===e?(this._clone(s,r),o.floating.addClass("fixedHeader-locked").css("top",i.tfootTop-i.theadHeight).css("left",i.left+"px"),a(i.width)):"above"===e&&(this._clone(s,r),o.floating.addClass("fixedHeader-locked").css("top",i.tbodyTop).css("left",i.left+"px"),a(i.width)),d&&d!==n.activeElement&&setTimeout((function(){d.focus()}),10),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[s+"Mode"]=e},_positions:function(){var e=this.s.dt.table(),n=this.s.position,s=this.dom,r=t(e.node()),o=r.children("thead"),i=r.children("tfoot"),a=s.tbody;n.visible=r.is(":visible"),n.width=r.outerWidth(),n.left=r.offset().left,n.theadTop=o.offset().top,n.tbodyTop=a.offset().top,n.tbodyHeight=a.outerHeight(),n.theadHeight=n.tbodyTop-n.theadTop,i.length?(n.tfootTop=i.offset().top,n.tfootBottom=n.tfootTop+i.outerHeight(),n.tfootHeight=n.tfootBottom-n.tfootTop):(n.tfootTop=n.tbodyTop+a.outerHeight(),n.tfootBottom=n.tfootTop,n.tfootHeight=n.tfootTop)},_scroll:function(e){var s,r,o=t(n).scrollTop(),i=t(n).scrollLeft(),a=this.s.position;this.c.header&&(s=this.s.enable?!a.visible||o<=a.theadTop-this.c.headerOffset?"in-place":o<=a.tfootTop-a.theadHeight-this.c.headerOffset?"in":"below":"in-place",(e||s!==this.s.headerMode)&&this._modeChange(s,"header",e),this._horizontal("header",i)),this.c.footer&&this.dom.tfoot.length&&(r=this.s.enable?!a.visible||o+a.windowHeight>=a.tfootBottom+this.c.footerOffset?"in-place":a.windowHeight+o>a.tbodyTop+a.tfootHeight+this.c.footerOffset?"in":"above":"in-place",(e||r!==this.s.footerMode)&&this._modeChange(r,"footer",e),this._horizontal("footer",i))}}),i.version="3.1.7",i.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},t.fn.dataTable.FixedHeader=i,t.fn.DataTable.FixedHeader=i,t(n).on("init.dt.dtfh",(function(e,n,s){if("dt"===e.namespace){var o=n.oInit.fixedHeader,a=r.defaults.fixedHeader;if((o||a)&&!n._fixedHeader){var l=t.extend({},a,o);!1!==o&&new i(n,l)}}})),r.Api.register("fixedHeader()",(function(){})),r.Api.register("fixedHeader.adjust()",(function(){return this.iterator("table",(function(t){var e=t._fixedHeader;e&&e.update()}))})),r.Api.register("fixedHeader.enable()",(function(t){return this.iterator("table",(function(e){var n=e._fixedHeader;t=t===s||t,n&&t!==n.enabled()&&n.enable(t)}))})),r.Api.register("fixedHeader.enabled()",(function(){if(this.context.length){var t=this.content[0]._fixedHeader;if(t)return t.enabled()}return!1})),r.Api.register("fixedHeader.disable()",(function(){return this.iterator("table",(function(t){var e=t._fixedHeader;e&&e.enabled()&&e.enable(!1)}))})),t.each(["header","footer"],(function(t,e){r.Api.register("fixedHeader."+e+"Offset()",(function(t){var n=this.context;return t===s?n.length&&n[0]._fixedHeader?n[0]._fixedHeader[e+"Offset"]():s:this.iterator("table",(function(n){var s=n._fixedHeader;s&&s[e+"Offset"](t)}))}))})),i})),
/*! KeyTable 2.5.2
 * ©2009-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=0,i=function(e,n){if(!r.versionCheck||!r.versionCheck("1.10.8"))throw"KeyTable requires DataTables 1.10.8 or newer";this.c=t.extend(!0,{},r.defaults.keyTable,i.defaults,n),this.s={dt:new r.Api(e),enable:!0,focusDraw:!1,waitingForDraw:!1,lastFocus:null,namespace:".keyTable-"+o++,tabInput:null},this.dom={};var s=this.s.dt.settings()[0],a=s.keytable;if(a)return a;s.keytable=this,this._constructor()};return t.extend(i.prototype,{blur:function(){this._blur()},enable:function(t){this.s.enable=t},focus:function(t,e){this._focus(this.s.dt.cell(t,e))},focused:function(t){if(!this.s.lastFocus)return!1;var e=this.s.lastFocus.cell.index();return t.row===e.row&&t.column===e.column},_constructor:function(){this._tabInput();var e=this,s=this.s.dt,r=t(s.table().node()),o=this.s.namespace,i=!1;if("static"===r.css("position")&&r.css("position","relative"),t(s.table().body()).on("click"+o,"th, td",(function(t){if(!1!==e.s.enable){var n=s.cell(this);n.any()&&e._focus(n,null,!1,t)}})),t(n).on("keydown"+o,(function(t){i||e._key(t)})),this.c.blurable&&t(n).on("mousedown"+o,(function(n){t(n.target).parents(".dataTables_filter").length&&e._blur(),t(n.target).parents().filter(s.table().container()).length||t(n.target).parents("div.DTE").length||t(n.target).parents("div.editor-datetime").length||t(n.target).parents().filter(".DTFC_Cloned").length||e._blur()})),this.c.editor){var a=this.c.editor;a.on("open.keyTableMain",(function(t,n,s){"inline"!==n&&e.s.enable&&(e.enable(!1),a.one("close"+o,(function(){e.enable(!0)})))})),this.c.editOnFocus&&s.on("key-focus"+o+" key-refocus"+o,(function(t,n,s,r){e._editor(null,r,!0)})),s.on("key"+o,(function(t,n,s,r,o){e._editor(s,o,!1)})),t(s.table().body()).on("dblclick"+o,"th, td",(function(t){!1!==e.s.enable&&(s.cell(this).any()&&e._editor(null,t,!0))})),a.on("preSubmit",(function(){i=!0})).on("preSubmitCancelled",(function(){i=!1})).on("submitComplete",(function(){i=!1}))}s.settings()[0].oFeatures.bStateSave&&s.on("stateSaveParams"+o,(function(t,n,s){s.keyTable=e.s.lastFocus?e.s.lastFocus.cell.index():null})),s.on("column-visibility"+o,(function(t){e._tabInput()})),s.on("draw"+o,(function(r){if(e._tabInput(),!e.s.focusDraw){var o=e.s.lastFocus;if(o&&o.node&&t(o.node).closest("body")===n.body){var i=e.s.lastFocus.relative,a=s.page.info(),l=i.row+a.start;if(0===a.recordsDisplay)return;l>=a.recordsDisplay&&(l=a.recordsDisplay-1),e._focus(l,i.column,!0,r)}}})),this.c.clipboard&&this._clipboard(),s.on("destroy"+o,(function(){e._blur(!0),s.off(o),t(s.table().body()).off("click"+o,"th, td").off("dblclick"+o,"th, td"),t(n).off("mousedown"+o).off("keydown"+o).off("copy"+o).off("paste"+o)}));var l=s.state.loaded();l&&l.keyTable?s.one("init",(function(){var t=s.cell(l.keyTable);t.any()&&t.focus()})):this.c.focus&&s.cell(this.c.focus).focus()},_blur:function(e){if(this.s.enable&&this.s.lastFocus){var n=this.s.lastFocus.cell;t(n.node()).removeClass(this.c.className),this.s.lastFocus=null,e||(this._updateFixedColumns(n.index().column),this._emitEvent("key-blur",[this.s.dt,n]))}},_clipboard:function(){var s=this.s.dt,r=this,o=this.s.namespace;e.getSelection&&(t(n).on("copy"+o,(function(t){var n=t.originalEvent,s=e.getSelection().toString(),o=r.s.lastFocus;!s&&o&&(n.clipboardData.setData("text/plain",o.cell.render(r.c.clipboardOrthogonal)),n.preventDefault())})),t(n).on("paste"+o,(function(t){var o,i=t.originalEvent,a=r.s.lastFocus,l=n.activeElement,d=r.c.editor;!a||l&&"body"!==l.nodeName.toLowerCase()||(i.preventDefault(),e.clipboardData&&e.clipboardData.getData?o=e.clipboardData.getData("Text"):i.clipboardData&&i.clipboardData.getData&&(o=i.clipboardData.getData("text/plain")),d?d.inline(a.cell.index()).set(d.displayed()[0],o).submit():(a.cell.data(o),s.draw(!1)))})))},_columns:function(){var t=this.s.dt,e=t.columns(this.c.columns).indexes(),n=[];return t.columns(":visible").every((function(t){-1!==e.indexOf(t)&&n.push(t)})),n},_editor:function(e,s,r){if(this.s.lastFocus){var o=this,i=this.s.dt,a=this.c.editor,l=this.s.lastFocus.cell,d=this.s.namespace;if(!(t("div.DTE",l.node()).length||null!==e&&(e>=0&&e<=9||11===e||12===e||e>=14&&e<=31||e>=112&&e<=123||e>=127&&e<=159))){s.stopPropagation(),13===e&&s.preventDefault();var c=function(){a.one("open"+d,(function(){a.off("cancelOpen"+d),r||t("div.DTE_Field_InputControl input, div.DTE_Field_InputControl textarea").select(),i.keys.enable(r?"tab-only":"navigation-only"),i.on("key-blur.editor",(function(t,e,n){a.displayed()&&n.node()===l.node()&&a.submit()})),r&&t(i.table().container()).addClass("dtk-focus-alt"),a.on("preSubmitCancelled"+d,(function(){setTimeout((function(){o._focus(l,null,!1)}),50)})),a.on("submitUnsuccessful"+d,(function(){o._focus(l,null,!1)})),a.one("close",(function(){i.keys.enable(!0),i.off("key-blur.editor"),a.off(d),t(i.table().container()).removeClass("dtk-focus-alt")}))})).one("cancelOpen"+d,(function(){a.off(d)})).inline(l.index())};13===e?(r=!0,t(n).one("keyup",(function(){c()}))):c()}}},_emitEvent:function(e,n){this.s.dt.iterator("table",(function(s,r){t(s.nTable).triggerHandler(e,n)}))},_focus:function(r,o,i,a){var l=this,d=this.s.dt,c=d.page.info(),u=this.s.lastFocus;if(a||(a=null),this.s.enable){if("number"!=typeof r){if(!r.any())return;var h=r.index();if(o=h.column,(r=d.rows({filter:"applied",order:"applied"}).indexes().indexOf(h.row))<0)return;c.serverSide&&(r+=c.start)}if(-1!==c.length&&(r<c.start||r>=c.start+c.length))return this.s.focusDraw=!0,this.s.waitingForDraw=!0,void d.one("draw",(function(){l.s.focusDraw=!1,l.s.waitingForDraw=!1,l._focus(r,o,s,a)})).page(Math.floor(r/c.length)).draw(!1);if(-1!==t.inArray(o,this._columns())){c.serverSide&&(r-=c.start);var f=d.cells(null,o,{search:"applied",order:"applied"}).flatten(),p=d.cell(f[r]);if(u){if(u.node===p.node())return void this._emitEvent("key-refocus",[this.s.dt,p,a||null]);this._blur()}this._removeOtherFocus();var m=t(p.node());if(m.addClass(this.c.className),this._updateFixedColumns(o),i===s||!0===i){this._scroll(t(e),t(n.body),m,"offset");var g=d.table().body().parentNode;if(g!==d.table().header().parentNode){var b=t(g.parentNode);this._scroll(b,b,m,"position")}}this.s.lastFocus={cell:p,node:p.node(),relative:{row:d.rows({page:"current"}).indexes().indexOf(p.index().row),column:p.index().column}},this._emitEvent("key-focus",[this.s.dt,p,a||null]),d.state.save()}}},_key:function(e){if(this.s.waitingForDraw)e.preventDefault();else{var n=this.s.enable,s=!0===n||"navigation-only"===n;if(n&&(!(0===e.keyCode||e.ctrlKey||e.metaKey||e.altKey)||e.ctrlKey&&e.altKey)){var r=this.s.lastFocus;if(r)if(this.s.dt.cell(r.node).any()){var o=this.s.dt,i=!!this.s.dt.settings()[0].oScroll.sY;if(!this.c.keys||-1!==t.inArray(e.keyCode,this.c.keys))switch(e.keyCode){case 9:this._shift(e,e.shiftKey?"left":"right",!0);break;case 27:this.s.blurable&&!0===n&&this._blur();break;case 33:case 34:s&&!i&&(e.preventDefault(),o.page(33===e.keyCode?"previous":"next").draw(!1));break;case 35:case 36:if(s){e.preventDefault();var a=o.cells({page:"current"}).indexes(),l=this._columns();this._focus(o.cell(a[35===e.keyCode?a.length-1:l[0]]),null,!0,e)}break;case 37:s&&this._shift(e,"left");break;case 38:s&&this._shift(e,"up");break;case 39:s&&this._shift(e,"right");break;case 40:s&&this._shift(e,"down");break;case 113:if(this.c.editor){this._editor(null,e,!0);break}default:!0===n&&this._emitEvent("key",[o,e.keyCode,this.s.lastFocus.cell,e])}}else this.s.lastFocus=null}}},_removeOtherFocus:function(){var e=this.s.dt.table().node();t.fn.dataTable.tables({api:!0}).iterator("table",(function(t){this.table().node()!==e&&this.cell.blur()}))},_scroll:function(t,e,n,s){var r=n[s](),o=n.outerHeight(),i=n.outerWidth(),a=e.scrollTop(),l=e.scrollLeft(),d=t.height(),c=t.width();"position"===s&&(r.top+=parseInt(n.closest("table").css("top"),10)),r.top<a&&e.scrollTop(r.top),r.left<l&&e.scrollLeft(r.left),r.top+o>a+d&&o<d&&e.scrollTop(r.top+o-d),r.left+i>l+c&&i<c&&e.scrollLeft(r.left+i-c)},_shift:function(e,n,s){var r=this.s.dt,o=r.page.info(),i=o.recordsDisplay,a=this.s.lastFocus.cell,l=this._columns();if(a){var d=r.rows({filter:"applied",order:"applied"}).indexes().indexOf(a.index().row);o.serverSide&&(d+=o.start);var c=r.columns(l).indexes().indexOf(a.index().column),u=d,h=l[c];"right"===n?c>=l.length-1?(u++,h=l[0]):h=l[c+1]:"left"===n?0===c?(u--,h=l[l.length-1]):h=l[c-1]:"up"===n?u--:"down"===n&&u++,u>=0&&u<i&&-1!==t.inArray(h,l)?(e&&e.preventDefault(),this._focus(u,h,!0,e)):s&&this.c.blurable?this._blur():e&&e.preventDefault()}},_tabInput:function(){var e=this,n=this.s.dt,s=null!==this.c.tabIndex?this.c.tabIndex:n.settings()[0].iTabIndex;if(-1!=s){if(!this.s.tabInput){var r=t('<div><input type="text" tabindex="'+s+'"/></div>').css({position:"absolute",height:1,width:0,overflow:"hidden"});r.children().on("focus",(function(t){var s=n.cell(":eq(0)",e._columns(),{page:"current"});s.any()&&e._focus(s,null,!0,t)})),this.s.tabInput=r}var o=this.s.dt.cell(":eq(0)","0:visible",{page:"current",order:"current"}).node();o&&t(o).prepend(this.s.tabInput)}},_updateFixedColumns:function(t){var e=this.s.dt,n=e.settings()[0];if(n._oFixedColumns){var s=n._oFixedColumns.s.iLeftColumns,r=n.aoColumns.length-n._oFixedColumns.s.iRightColumns;(t<s||t>=r)&&e.fixedColumns().update()}}}),i.defaults={blurable:!0,className:"focus",clipboard:!0,clipboardOrthogonal:"display",columns:"",editor:null,editOnFocus:!1,focus:null,keys:null,tabIndex:null},i.version="2.5.2",t.fn.dataTable.KeyTable=i,t.fn.DataTable.KeyTable=i,r.Api.register("cell.blur()",(function(){return this.iterator("table",(function(t){t.keytable&&t.keytable.blur()}))})),r.Api.register("cell().focus()",(function(){return this.iterator("cell",(function(t,e,n){t.keytable&&t.keytable.focus(e,n)}))})),r.Api.register("keys.disable()",(function(){return this.iterator("table",(function(t){t.keytable&&t.keytable.enable(!1)}))})),r.Api.register("keys.enable()",(function(t){return this.iterator("table",(function(e){e.keytable&&e.keytable.enable(t===s||t)}))})),r.Api.register("keys.move()",(function(t){return this.iterator("table",(function(e){e.keytable&&e.keytable._shift(null,t,!1)}))})),r.ext.selector.cell.push((function(t,e,n){var r=e.focused,o=t.keytable,i=[];if(!o||r===s)return n;for(var a=0,l=n.length;a<l;a++)(!0===r&&o.focused(n[a])||!1===r&&!o.focused(n[a]))&&i.push(n[a]);return i})),t(n).on("preInit.dt.dtk",(function(e,n,s){if("dt"===e.namespace){var o=n.oInit.keys,a=r.defaults.keys;if(o||a){var l=t.extend({},a,o);!1!==o&&new i(n,l)}}})),i})),
/*! Responsive 2.2.5
 * 2014-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=function(e,n){if(!r.versionCheck||!r.versionCheck("1.10.10"))throw"DataTables Responsive requires DataTables 1.10.10 or newer";this.s={dt:new r.Api(e),columns:[],current:[]},this.s.dt.settings()[0].responsive||(n&&"string"==typeof n.details?n.details={type:n.details}:n&&!1===n.details?n.details={type:!1}:n&&!0===n.details&&(n.details={type:"inline"}),this.c=t.extend(!0,{},o.defaults,r.defaults.responsive,n),e.responsive=this,this._constructor())};t.extend(o.prototype,{_constructor:function(){var n=this,s=this.s.dt,o=s.settings()[0],i=t(e).innerWidth();s.settings()[0]._responsive=this,t(e).on("resize.dtr orientationchange.dtr",r.util.throttle((function(){var s=t(e).innerWidth();s!==i&&(n._resize(),i=s)}))),o.oApi._fnCallbackReg(o,"aoRowCreatedCallback",(function(e,r,o){-1!==t.inArray(!1,n.s.current)&&t(">td, >th",e).each((function(e){var r=s.column.index("toData",e);!1===n.s.current[r]&&t(this).css("display","none")}))})),s.on("destroy.dtr",(function(){s.off(".dtr"),t(s.table().body()).off(".dtr"),t(e).off("resize.dtr orientationchange.dtr"),s.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),t.each(n.s.current,(function(t,e){!1===e&&n._setColumnVis(t,!0)}))})),this.c.breakpoints.sort((function(t,e){return t.width<e.width?1:t.width>e.width?-1:0})),this._classLogic(),this._resizeAuto();var a=this.c.details;!1!==a.type&&(n._detailsInit(),s.on("column-visibility.dtr",(function(){n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._timer=null,n._classLogic(),n._resizeAuto(),n._resize(),n._redrawChildren()}),100)})),s.on("draw.dtr",(function(){n._redrawChildren()})),t(s.table().node()).addClass("dtr-"+a.type)),s.on("column-reorder.dtr",(function(t,e,s){n._classLogic(),n._resizeAuto(),n._resize(!0)})),s.on("column-sizing.dtr",(function(){n._resizeAuto(),n._resize()})),s.on("preXhr.dtr",(function(){var t=[];s.rows().every((function(){this.child.isShown()&&t.push(this.id(!0))})),s.one("draw.dtr",(function(){n._resizeAuto(),n._resize(),s.rows(t).every((function(){n._detailsDisplay(this,!1)}))}))})),s.on("draw.dtr",(function(){n._controlClass()})).on("init.dtr",(function(e,r,o){"dt"===e.namespace&&(n._resizeAuto(),n._resize(),t.inArray(!1,n.s.current)&&s.columns.adjust())})),this._resize()},_columnsVisiblity:function(e){var n,s,r=this.s.dt,o=this.s.columns,i=o.map((function(t,e){return{columnIdx:e,priority:t.priority}})).sort((function(t,e){return t.priority!==e.priority?t.priority-e.priority:t.columnIdx-e.columnIdx})),a=t.map(o,(function(n,s){return!1===r.column(s).visible()?"not-visible":(!n.auto||null!==n.minWidth)&&(!0===n.auto?"-":-1!==t.inArray(e,n.includeIn))})),l=0;for(n=0,s=a.length;n<s;n++)!0===a[n]&&(l+=o[n].minWidth);var d=r.settings()[0].oScroll,c=d.sY||d.sX?d.iBarWidth:0,u=r.table().container().offsetWidth-c-l;for(n=0,s=a.length;n<s;n++)o[n].control&&(u-=o[n].minWidth);var h=!1;for(n=0,s=i.length;n<s;n++){var f=i[n].columnIdx;"-"===a[f]&&!o[f].control&&o[f].minWidth&&(h||u-o[f].minWidth<0?(h=!0,a[f]=!1):a[f]=!0,u-=o[f].minWidth)}var p=!1;for(n=0,s=o.length;n<s;n++)if(!o[n].control&&!o[n].never&&!1===a[n]){p=!0;break}for(n=0,s=o.length;n<s;n++)o[n].control&&(a[n]=p),"not-visible"===a[n]&&(a[n]=!1);return-1===t.inArray(!0,a)&&(a[0]=!0),a},_classLogic:function(){var e=this,n=this.c.breakpoints,r=this.s.dt,o=r.columns().eq(0).map((function(t){var e=this.column(t),n=e.header().className,o=r.settings()[0].aoColumns[t].responsivePriority,i=e.header().getAttribute("data-priority");return o===s&&(o=i===s||null===i?1e4:1*i),{className:n,includeIn:[],auto:!1,control:!1,never:!!n.match(/\bnever\b/),priority:o}})),i=function(e,n){var s=o[e].includeIn;-1===t.inArray(n,s)&&s.push(n)},a=function(t,s,r,a){var l,d,c;if(r){if("max-"===r)for(l=e._find(s).width,d=0,c=n.length;d<c;d++)n[d].width<=l&&i(t,n[d].name);else if("min-"===r)for(l=e._find(s).width,d=0,c=n.length;d<c;d++)n[d].width>=l&&i(t,n[d].name);else if("not-"===r)for(d=0,c=n.length;d<c;d++)-1===n[d].name.indexOf(a)&&i(t,n[d].name)}else o[t].includeIn.push(s)};o.each((function(e,s){for(var r=e.className.split(" "),o=!1,i=0,l=r.length;i<l;i++){var d=t.trim(r[i]);if("all"===d)return o=!0,void(e.includeIn=t.map(n,(function(t){return t.name})));if("none"===d||e.never)return void(o=!0);if("control"===d)return o=!0,void(e.control=!0);t.each(n,(function(t,e){var n=e.name.split("-"),r=new RegExp("(min\\-|max\\-|not\\-)?("+n[0]+")(\\-[_a-zA-Z0-9])?"),i=d.match(r);i&&(o=!0,i[2]===n[0]&&i[3]==="-"+n[1]?a(s,e.name,i[1],i[2]+i[3]):i[2]!==n[0]||i[3]||a(s,e.name,i[1],i[2]))}))}o||(e.auto=!0)})),this.s.columns=o},_controlClass:function(){if("inline"===this.c.details.type){var e=this.s.dt,n=this.s.current,s=t.inArray(!0,n);e.cells(null,(function(t){return t!==s}),{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),e.cells(null,s,{page:"current"}).nodes().to$().addClass("dtr-control")}},_detailsDisplay:function(e,n){var s=this,r=this.s.dt,o=this.c.details;if(o&&!1!==o.type){var i=o.display(e,n,(function(){return o.renderer(r,e[0],s._detailsObj(e[0]))}));!0!==i&&!1!==i||t(r.table().node()).triggerHandler("responsive-display.dt",[r,e,i,n])}},_detailsInit:function(){var e=this,n=this.s.dt,r=this.c.details;"inline"===r.type&&(r.target="td.dtr-control, th.dtr-control"),n.on("draw.dtr",(function(){e._tabIndexes()})),e._tabIndexes(),t(n.table().body()).on("keyup.dtr","td, th",(function(e){13===e.keyCode&&t(this).data("dtr-keyboard")&&t(this).click()}));var o=r.target,i="string"==typeof o?o:"td, th";o===s&&null===o||t(n.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",i,(function(s){if(t(n.table().node()).hasClass("collapsed")&&-1!==t.inArray(t(this).closest("tr").get(0),n.rows().nodes().toArray())){if("number"==typeof o){var r=o<0?n.columns().eq(0).length+o:o;if(n.cell(this).index().column!==r)return}var i=n.row(t(this).closest("tr"));"click"===s.type?e._detailsDisplay(i,!1):"mousedown"===s.type?t(this).css("outline","none"):"mouseup"===s.type&&t(this).trigger("blur").css("outline","")}}))},_detailsObj:function(e){var n=this,s=this.s.dt;return t.map(this.s.columns,(function(r,o){if(!r.never&&!r.control){var i=s.settings()[0].aoColumns[o];return{className:i.sClass,columnIndex:o,data:s.cell(e,o).render(n.c.orthogonal),hidden:s.column(o).visible()&&!n.s.current[o],rowIndex:e,title:null!==i.sTitle?i.sTitle:t(s.column(o).header()).text()}}}))},_find:function(t){for(var e=this.c.breakpoints,n=0,s=e.length;n<s;n++)if(e[n].name===t)return e[n]},_redrawChildren:function(){var t=this,e=this.s.dt;e.rows({page:"current"}).iterator("row",(function(n,s){e.row(s);t._detailsDisplay(e.row(s),!0)}))},_resize:function(n){var s,r,o=this,i=this.s.dt,a=t(e).innerWidth(),l=this.c.breakpoints,d=l[0].name,c=this.s.columns,u=this.s.current.slice();for(s=l.length-1;s>=0;s--)if(a<=l[s].width){d=l[s].name;break}var h=this._columnsVisiblity(d);this.s.current=h;var f=!1;for(s=0,r=c.length;s<r;s++)if(!1===h[s]&&!c[s].never&&!c[s].control&&!1==!i.column(s).visible()){f=!0;break}t(i.table().node()).toggleClass("collapsed",f);var p=!1,m=0;i.columns().eq(0).each((function(t,e){!0===h[e]&&m++,(n||h[e]!==u[e])&&(p=!0,o._setColumnVis(t,h[e]))})),p&&(this._redrawChildren(),t(i.table().node()).trigger("responsive-resize.dt",[i,this.s.current]),0===i.page.info().recordsDisplay&&t("td",i.table().body()).eq(0).attr("colspan",m))},_resizeAuto:function(){var e=this.s.dt,n=this.s.columns;if(this.c.auto&&-1!==t.inArray(!0,t.map(n,(function(t){return t.auto})))){t.isEmptyObject(i)||t.each(i,(function(t){var n=t.split("-");a(e,1*n[0],1*n[1])}));e.table().node().offsetWidth,e.columns;var s=e.table().node().cloneNode(!1),r=t(e.table().header().cloneNode(!1)).appendTo(s),o=t(e.table().body()).clone(!1,!1).empty().appendTo(s);s.style.width="auto";var l=e.columns().header().filter((function(t){return e.column(t).visible()})).to$().clone(!1).css("display","table-cell").css("width","auto").css("min-width",0);t(o).append(t(e.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");var d=e.table().footer();if(d){var c=t(d.cloneNode(!1)).appendTo(s),u=e.columns().footer().filter((function(t){return e.column(t).visible()})).to$().clone(!1).css("display","table-cell");t("<tr/>").append(u).appendTo(c)}t("<tr/>").append(l).appendTo(r),"inline"===this.c.details.type&&t(s).addClass("dtr-inline collapsed"),t(s).find("[name]").removeAttr("name"),t(s).css("position","relative");var h=t("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(s);h.insertBefore(e.table().node()),l.each((function(t){var s=e.column.index("fromVisible",t);n[s].minWidth=this.offsetWidth||0})),h.remove()}},_responsiveOnlyHidden:function(){var e=this.s.dt;return t.map(this.s.current,(function(t,n){return!1===e.column(n).visible()||t}))},_setColumnVis:function(e,n){var s=this.s.dt,r=n?"":"none";t(s.column(e).header()).css("display",r),t(s.column(e).footer()).css("display",r),s.column(e).nodes().to$().css("display",r),t.isEmptyObject(i)||s.cells(null,e).indexes().each((function(t){a(s,t.row,t.column)}))},_tabIndexes:function(){var e=this.s.dt,n=e.cells({page:"current"}).nodes().to$(),s=e.settings()[0],r=this.c.details.target;n.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),"number"==typeof r?e.cells(null,r,{page:"current"}).nodes().to$().attr("tabIndex",s.iTabIndex).data("dtr-keyboard",1):("td:first-child, th:first-child"===r&&(r=">td:first-child, >th:first-child"),t(r,e.rows({page:"current"}).nodes()).attr("tabIndex",s.iTabIndex).data("dtr-keyboard",1))}}),o.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}],o.display={childRow:function(e,n,s){return n?t(e.node()).hasClass("parent")?(e.child(s(),"child").show(),!0):void 0:e.child.isShown()?(e.child(!1),t(e.node()).removeClass("parent"),!1):(e.child(s(),"child").show(),t(e.node()).addClass("parent"),!0)},childRowImmediate:function(e,n,s){return!n&&e.child.isShown()||!e.responsive.hasHidden()?(e.child(!1),t(e.node()).removeClass("parent"),!1):(e.child(s(),"child").show(),t(e.node()).addClass("parent"),!0)},modal:function(e){return function(s,r,o){if(r)t("div.dtr-modal-content").empty().append(o());else{var i=function(){a.remove(),t(n).off("keypress.dtr")},a=t('<div class="dtr-modal"/>').append(t('<div class="dtr-modal-display"/>').append(t('<div class="dtr-modal-content"/>').append(o())).append(t('<div class="dtr-modal-close">&times;</div>').click((function(){i()})))).append(t('<div class="dtr-modal-background"/>').click((function(){i()}))).appendTo("body");t(n).on("keyup.dtr",(function(t){27===t.keyCode&&(t.stopPropagation(),i())}))}e&&e.header&&t("div.dtr-modal-content").prepend("<h2>"+e.header(s)+"</h2>")}}};var i={};function a(t,e,n){var r=e+"-"+n;if(i[r]){for(var o=t.cell(e,n).node(),a=i[r][0].parentNode.childNodes,l=[],d=0,c=a.length;d<c;d++)l.push(a[d]);for(var u=0,h=l.length;u<h;u++)o.appendChild(l[u]);i[r]=s}}o.renderer={listHiddenNodes:function(){return function(e,n,s){var r=t('<ul data-dtr-index="'+n+'" class="dtr-details"/>'),o=!1;t.each(s,(function(n,s){if(s.hidden){var a=s.className?'class="'+s.className+'"':"";t("<li "+a+' data-dtr-index="'+s.columnIndex+'" data-dt-row="'+s.rowIndex+'" data-dt-column="'+s.columnIndex+'"><span class="dtr-title">'+s.title+"</span> </li>").append(t('<span class="dtr-data"/>').append(function(t,e,n){var s=e+"-"+n;if(i[s])return i[s];for(var r=[],o=t.cell(e,n).node().childNodes,a=0,l=o.length;a<l;a++)r.push(o[a]);return i[s]=r,r}(e,s.rowIndex,s.columnIndex))).appendTo(r),o=!0}}));return!!o&&r}},listHidden:function(){return function(e,n,s){var r=t.map(s,(function(t){var e=t.className?'class="'+t.className+'"':"";return t.hidden?"<li "+e+' data-dtr-index="'+t.columnIndex+'" data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><span class="dtr-title">'+t.title+'</span> <span class="dtr-data">'+t.data+"</span></li>":""})).join("");return!!r&&t('<ul data-dtr-index="'+n+'" class="dtr-details"/>').append(r)}},tableAll:function(e){return e=t.extend({tableClass:""},e),function(n,s,r){var o=t.map(r,(function(t){return"<tr "+(t.className?'class="'+t.className+'"':"")+' data-dt-row="'+t.rowIndex+'" data-dt-column="'+t.columnIndex+'"><td>'+t.title+":</td> <td>"+t.data+"</td></tr>"})).join("");return t('<table class="'+e.tableClass+' dtr-details" width="100%"/>').append(o)}}},o.defaults={breakpoints:o.breakpoints,auto:!0,details:{display:o.display.childRow,renderer:o.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var l=t.fn.dataTable.Api;return l.register("responsive()",(function(){return this})),l.register("responsive.index()",(function(e){return{column:(e=t(e)).data("dtr-index"),row:e.parent().data("dtr-index")}})),l.register("responsive.rebuild()",(function(){return this.iterator("table",(function(t){t._responsive&&t._responsive._classLogic()}))})),l.register("responsive.recalc()",(function(){return this.iterator("table",(function(t){t._responsive&&(t._responsive._resizeAuto(),t._responsive._resize())}))})),l.register("responsive.hasHidden()",(function(){var e=this.context[0];return!!e._responsive&&-1!==t.inArray(!1,e._responsive._responsiveOnlyHidden())})),l.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",(function(){return this.iterator("column",(function(t,e){return!!t._responsive&&t._responsive._responsiveOnlyHidden()[e]}),1)})),o.version="2.2.5",t.fn.dataTable.Responsive=o,t.fn.DataTable.Responsive=o,t(n).on("preInit.dt.dtr",(function(e,n,s){if("dt"===e.namespace&&(t(n.nTable).hasClass("responsive")||t(n.nTable).hasClass("dt-responsive")||n.oInit.responsive||r.defaults.responsive)){var i=n.oInit.responsive;!1!==i&&new o(n,t.isPlainObject(i)?i:{})}})),o})),
/*! RowGroup 1.1.2
 * ©2017-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=function(e,n){if(!r.versionCheck||!r.versionCheck("1.10.8"))throw"RowGroup requires DataTables 1.10.8 or newer";this.c=t.extend(!0,{},r.defaults.rowGroup,o.defaults,n),this.s={dt:new r.Api(e)},this.dom={};var s=this.s.dt.settings()[0],i=s.rowGroup;if(i)return i;s.rowGroup=this,this._constructor()};return t.extend(o.prototype,{dataSrc:function(e){if(e===s)return this.c.dataSrc;var n=this.s.dt;return this.c.dataSrc=e,t(n.table().node()).triggerHandler("rowgroup-datasrc.dt",[n,e]),this},disable:function(){return this.c.enable=!1,this},enable:function(t){return!1===t?this.disable():(this.c.enable=!0,this)},enabled:function(){return this.c.enable},_constructor:function(){var t=this,e=this.s.dt,n=e.settings()[0];e.on("draw.dtrg",(function(e,s){t.c.enable&&n===s&&t._draw()})),e.on("column-visibility.dt.dtrg responsive-resize.dt.dtrg",(function(){t._adjustColspan()})),e.on("destroy",(function(){e.off(".dtrg")}))},_adjustColspan:function(){t("tr."+this.c.className,this.s.dt.table().body()).find("td:visible").attr("colspan",this._colspan())},_colspan:function(){return this.s.dt.columns().visible().reduce((function(t,e){return t+e}),0)},_draw:function(){var t=this.s.dt,e=this._group(0,t.rows({page:"current"}).indexes());this._groupDisplay(0,e)},_group:function(e,n){for(var o,i=t.isArray(this.c.dataSrc)?this.c.dataSrc:[this.c.dataSrc],a=r.ext.oApi._fnGetObjectDataFn(i[e]),l=this.s.dt,d=[],c=0,u=n.length;c<u;c++){var h,f=n[c];null!==(h=a(l.row(f).data()))&&h!==s||(h=this.c.emptyDataGroup),o!==s&&h===o||(d.push({dataPoint:h,rows:[]}),o=h),d[d.length-1].rows.push(f)}if(i[e+1]!==s)for(c=0,u=d.length;c<u;c++)d[c].children=this._group(e+1,d[c].rows);return d},_groupDisplay:function(t,e){for(var n,s=this.s.dt,r=0,o=e.length;r<o;r++){var i,a=e[r],l=a.dataPoint,d=a.rows;this.c.startRender&&(n=this.c.startRender.call(this,s.rows(d),l,t),(i=this._rowWrap(n,this.c.startClassName,t))&&i.insertBefore(s.row(d[0]).node())),this.c.endRender&&(n=this.c.endRender.call(this,s.rows(d),l,t),(i=this._rowWrap(n,this.c.endClassName,t))&&i.insertAfter(s.row(d[d.length-1]).node())),a.children&&this._groupDisplay(t+1,a.children)}},_rowWrap:function(e,n,r){return null!==e&&""!==e||(e=this.c.emptyDataGroup),e===s||null===e?null:("object"==typeof e&&e.nodeName&&"tr"===e.nodeName.toLowerCase()?t(e):e instanceof t&&e.length&&"tr"===e[0].nodeName.toLowerCase()?e:t("<tr/>").append(t("<td/>").attr("colspan",this._colspan()).append(e))).addClass(this.c.className).addClass(n).addClass("dtrg-level-"+r)}}),o.defaults={className:"dtrg-group",dataSrc:0,emptyDataGroup:"No group",enable:!0,endClassName:"dtrg-end",endRender:null,startClassName:"dtrg-start",startRender:function(t,e){return e}},o.version="1.1.2",t.fn.dataTable.RowGroup=o,t.fn.DataTable.RowGroup=o,r.Api.register("rowGroup()",(function(){return this})),r.Api.register("rowGroup().disable()",(function(){return this.iterator("table",(function(t){t.rowGroup&&t.rowGroup.enable(!1)}))})),r.Api.register("rowGroup().enable()",(function(t){return this.iterator("table",(function(e){e.rowGroup&&e.rowGroup.enable(t===s||t)}))})),r.Api.register("rowGroup().enabled()",(function(){var t=this.context;return!(!t.length||!t[0].rowGroup)&&t[0].rowGroup.enabled()})),r.Api.register("rowGroup().dataSrc()",(function(t){return t===s?this.context[0].rowGroup.dataSrc():this.iterator("table",(function(e){e.rowGroup&&e.rowGroup.dataSrc(t)}))})),t(n).on("preInit.dt.dtrg",(function(e,n,s){if("dt"===e.namespace){var i=n.oInit.rowGroup,a=r.defaults.rowGroup;if(i||a){var l=t.extend({},a,i);!1!==i&&new o(n,l)}}})),o})),
/*! RowReorder 1.2.7
 * 2015-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=function(e,n){if(!r.versionCheck||!r.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=t.extend(!0,{},r.defaults.rowReorder,o.defaults,n),this.s={bodyTop:null,dt:new r.Api(e),getDataFn:r.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:r.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:t("div.dataTables_scrollBody",this.s.dt.table().container())};var s=this.s.dt.settings()[0],i=s.rowreorder;if(i)return i;this.dom.dtScroll.length||(this.dom.dtScroll=t(this.s.dt.table().container(),"tbody")),s.rowreorder=this,this._constructor()};t.extend(o.prototype,{_constructor:function(){var e=this,n=this.s.dt,s=t(n.table().node());"static"===s.css("position")&&s.css("position","relative"),t(n.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,(function(s){if(e.c.enable){if(t(s.target).is(e.c.excludedChildren))return!0;var r=t(this).closest("tr"),o=n.row(r);return o.any()?(e._emitEvent("pre-row-reorder",{node:o.node(),index:o.index()}),e._mouseDown(s,r),!1):void 0}})),n.on("destroy.rowReorder",(function(){t(n.table().container()).off(".rowReorder"),n.off(".rowReorder")}))},_cachePositions:function(){var s=this.s.dt,r=t(s.table().node()).find("thead").outerHeight(),o=t.unique(s.rows({page:"current"}).nodes().toArray()),i=t.map(o,(function(e,n){var s=t(e).position().top-r;return(s+s+t(e).outerHeight())/2}));this.s.middles=i,this.s.bodyTop=t(s.table().body()).offset().top,this.s.windowHeight=t(e).height(),this.s.documentOuterHeight=t(n).outerHeight()},_clone:function(e){var n=this.s.dt,s=t(n.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(e.clone(!1)),r=e.outerWidth(),o=e.outerHeight(),i=e.children().map((function(){return t(this).width()}));s.width(r).height(o).find("tr").children().each((function(t){this.style.width=i[t]+"px"})),s.appendTo("body"),this.dom.clone=s,this.s.domCloneOuterHeight=s.outerHeight()},_clonePosition:function(t){var e,n=this.s.start,s=this._eventToPage(t,"Y")-n.top,r=this._eventToPage(t,"X")-n.left,o=this.c.snapX,i=s+n.offsetTop;e=!0===o?n.offsetLeft:"number"==typeof o?n.offsetLeft+o:r+n.offsetLeft,i<0?i=0:i+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(i=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:i,left:e})},_emitEvent:function(e,n){this.s.dt.iterator("table",(function(s,r){t(s.nTable).triggerHandler(e+".dt",n)}))},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(s,r){var o=this,i=this.s.dt,a=this.s.start,l=r.offset();a.top=this._eventToPage(s,"Y"),a.left=this._eventToPage(s,"X"),a.offsetTop=l.top,a.offsetLeft=l.left,a.nodes=t.unique(i.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(r),this._clonePosition(s),this.dom.target=r,r.addClass("dt-rowReorder-moving"),t(n).on("mouseup.rowReorder touchend.rowReorder",(function(t){o._mouseUp(t)})).on("mousemove.rowReorder touchmove.rowReorder",(function(t){o._mouseMove(t)})),t(e).width()===t(n).width()&&t(n.body).addClass("dt-rowReorder-noOverflow");var d=this.dom.dtScroll;this.s.scroll={windowHeight:t(e).height(),windowWidth:t(e).width(),dtTop:d.length?d.offset().top:null,dtLeft:d.length?d.offset().left:null,dtHeight:d.length?d.outerHeight():null,dtWidth:d.length?d.outerWidth():null}},_mouseMove:function(e){this._clonePosition(e);for(var n=this._eventToPage(e,"Y")-this.s.bodyTop,s=this.s.middles,r=null,o=this.s.dt,i=0,a=s.length;i<a;i++)if(n<s[i]){r=i;break}if(null===r&&(r=s.length),null===this.s.lastInsert||this.s.lastInsert!==r){var l=t.unique(o.rows({page:"current"}).nodes().toArray());r>this.s.lastInsert?this.dom.target.insertAfter(l[r-1]):this.dom.target.insertBefore(l[r]),this._cachePositions(),this.s.lastInsert=r}this._shiftScroll(e)},_mouseUp:function(e){var s,r,o=this,i=this.s.dt,a=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),t(n).off(".rowReorder"),t(n.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;var l=this.s.start.nodes,d=t.unique(i.rows({page:"current"}).nodes().toArray()),c={},u=[],h=[],f=this.s.getDataFn,p=this.s.setDataFn;for(s=0,r=l.length;s<r;s++)if(l[s]!==d[s]){var m=i.row(d[s]).id(),g=i.row(d[s]).data(),b=i.row(l[s]).data();m&&(c[m]=f(b)),u.push({node:d[s],oldData:f(g),newData:f(b),newPosition:s,oldPosition:t.inArray(d[s],l)}),h.push(d[s])}var v=[u,{dataSrc:a,nodes:h,values:c,triggerRow:i.row(this.dom.target),originalEvent:e}];this._emitEvent("row-reorder",v);var y=function(){if(o.c.update){for(s=0,r=u.length;s<r;s++){var t=i.row(u[s].node).data();p(t,u[s].newData),i.columns().every((function(){this.dataSrc()===a&&i.cell(u[s].node,this.index()).invalidate("data")}))}o._emitEvent("row-reordered",v),i.draw(!1)}};this.c.editor?(this.c.enable=!1,this.c.editor.edit(h,!1,t.extend({submit:"changed"},this.c.formOptions)).multiSet(a,c).one("preSubmitCancelled.rowReorder",(function(){o.c.enable=!0,o.c.editor.off(".rowReorder"),i.draw(!1)})).one("submitUnsuccessful.rowReorder",(function(){i.draw(!1)})).one("submitSuccess.rowReorder",(function(){y()})).one("submitComplete",(function(){o.c.enable=!0,o.c.editor.off(".rowReorder")})).submit()):y()},_shiftScroll:function(s){var r,o,i=this,a=(this.s.dt,this.s.scroll),l=!1,d=s.pageY-n.body.scrollTop;d<t(e).scrollTop()+65?r=-5:d>a.windowHeight+t(e).scrollTop()-65&&(r=5),null!==a.dtTop&&s.pageY<a.dtTop+65?o=-5:null!==a.dtTop&&s.pageY>a.dtTop+a.dtHeight-65&&(o=5),r||o?(a.windowVert=r,a.dtVert=o,l=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&l&&(this.s.scrollInterval=setInterval((function(){if(a.windowVert){var e=t(n).scrollTop();if(t(n).scrollTop(e+a.windowVert),e!==t(n).scrollTop()){var s=parseFloat(i.dom.clone.css("top"));i.dom.clone.css("top",s+a.windowVert)}}if(a.dtVert){var r=i.dom.dtScroll[0];a.dtVert&&(r.scrollTop+=a.dtVert)}}),20))}}),o.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0,excludedChildren:"a"};var i=t.fn.dataTable.Api;return i.register("rowReorder()",(function(){return this})),i.register("rowReorder.enable()",(function(t){return t===s&&(t=!0),this.iterator("table",(function(e){e.rowreorder&&(e.rowreorder.c.enable=t)}))})),i.register("rowReorder.disable()",(function(){return this.iterator("table",(function(t){t.rowreorder&&(t.rowreorder.c.enable=!1)}))})),o.version="1.2.6",t.fn.dataTable.RowReorder=o,t.fn.DataTable.RowReorder=o,t(n).on("init.dt.dtr",(function(e,n,s){if("dt"===e.namespace){var i=n.oInit.rowReorder,a=r.defaults.rowReorder;if(i||a){var l=t.extend({},i,a);!1!==i&&new o(n,l)}}})),o})),
/*! Scroller 2.0.2
 * ©2011-2020 SpryMedia Ltd - datatables.net/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable,o=function(e,r){if(this instanceof o){r===s&&(r={});var i=t.fn.dataTable.Api(e);this.s={dt:i.settings()[0],dtApi:i,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:!0,viewportRows:0,stateTO:null,stateSaveThrottle:function(){},drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null,labelFactor:1},topRowFloat:0,scrollDrawDiff:null,loaderVisible:!1,forceReposition:!1,baseRowTop:0,baseScrollTop:0,mousedown:!1,lastScrollTop:0},this.s=t.extend(this.s,o.oDefaults,r),this.s.heights.row=this.s.rowHeight,this.dom={force:n.createElement("div"),label:t('<div class="dts_label">0</div>'),scroller:null,table:null,loader:null},this.s.dt.oScroller||(this.s.dt.oScroller=this,this.construct())}else alert("Scroller warning: Scroller must be initialised with the 'new' keyword.")};t.extend(o.prototype,{measure:function(e){this.s.autoHeight&&this._calcRowHeight();var n=this.s.heights;n.row&&(n.viewport=this._parseHeight(t(this.dom.scroller).css("max-height")),this.s.viewportRows=parseInt(n.viewport/n.row,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer);var r=this.dom.label.outerHeight();n.labelFactor=(n.viewport-r)/n.scroll,(e===s||e)&&this.s.dt.oInstance.fnDraw(!1)},pageInfo:function(){var t=this.s.dt,e=this.dom.scroller.scrollTop,n=t.fnRecordsDisplay(),s=Math.ceil(this.pixelsToRow(e+this.s.heights.viewport,!1,this.s.ani));return{start:Math.floor(this.pixelsToRow(e,!1,this.s.ani)),end:n<s?n-1:s-1}},pixelsToRow:function(t,e,n){var r=t-this.s.baseScrollTop,o=n?(this._domain("physicalToVirtual",this.s.baseScrollTop)+r)/this.s.heights.row:r/this.s.heights.row+this.s.baseRowTop;return e||e===s?parseInt(o,10):o},rowToPixels:function(t,e,n){var r,o=t-this.s.baseRowTop;return n?(r=this._domain("virtualToPhysical",this.s.baseScrollTop),r+=o*this.s.heights.row):(r=this.s.baseScrollTop,r+=o*this.s.heights.row),e||e===s?parseInt(r,10):r},scrollToRow:function(e,n){var r=this,o=!1,i=this.rowToPixels(e),a=e-(this.s.displayBuffer-1)/2*this.s.viewportRows;a<0&&(a=0),(i>this.s.redrawBottom||i<this.s.redrawTop)&&this.s.dt._iDisplayStart!==a&&(o=!0,i=this._domain("virtualToPhysical",e*this.s.heights.row),this.s.redrawTop<i&&i<this.s.redrawBottom&&(this.s.forceReposition=!0,n=!1)),n===s||n?(this.s.ani=o,t(this.dom.scroller).animate({scrollTop:i},(function(){setTimeout((function(){r.s.ani=!1}),250)}))):t(this.dom.scroller).scrollTop(i)},construct:function(){var n=this,s=this.s.dtApi;if(this.s.dt.oFeatures.bPaginate){this.dom.force.style.position="relative",this.dom.force.style.top="0px",this.dom.force.style.left="0px",this.dom.force.style.width="1px",this.dom.scroller=t("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0],this.dom.scroller.appendChild(this.dom.force),this.dom.scroller.style.position="relative",this.dom.table=t(">table",this.dom.scroller)[0],this.dom.table.style.position="absolute",this.dom.table.style.top="0px",this.dom.table.style.left="0px",t(s.table().container()).addClass("dts DTS"),this.s.loadingIndicator&&(this.dom.loader=t('<div class="dataTables_processing dts_loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none"),t(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)),this.dom.label.appendTo(this.dom.scroller),this.s.heights.row&&"auto"!=this.s.heights.row&&(this.s.autoHeight=!1),this.s.ingnoreScroll=!0,t(this.dom.scroller).on("scroll.dt-scroller",(function(t){n._scroll.call(n)})),t(this.dom.scroller).on("touchstart.dt-scroller",(function(){n._scroll.call(n)})),t(this.dom.scroller).on("mousedown.dt-scroller",(function(){n.s.mousedown=!0})).on("mouseup.dt-scroller",(function(){n.s.labelVisible=!1,n.s.mousedown=!1,n.dom.label.css("display","none")})),t(e).on("resize.dt-scroller",(function(){n.measure(!1),n._info()}));var r=!0,o=s.state.loaded();s.on("stateSaveParams.scroller",(function(t,e,s){r?(s.scroller=o.scroller,r=!1):s.scroller={topRow:n.s.topRowFloat,baseScrollTop:n.s.baseScrollTop,baseRowTop:n.s.baseRowTop,scrollTop:n.s.lastScrollTop}})),o&&o.scroller&&(this.s.topRowFloat=o.scroller.topRow,this.s.baseScrollTop=o.scroller.baseScrollTop,this.s.baseRowTop=o.scroller.baseRowTop),this.measure(!1),n.s.stateSaveThrottle=n.s.dt.oApi._fnThrottle((function(){n.s.dtApi.state.save()}),500),s.on("init.scroller",(function(){n.measure(!1),n.s.scrollType="jump",n._draw(),s.on("draw.scroller",(function(){n._draw()}))})),s.on("preDraw.dt.scroller",(function(){n._scrollForce()})),s.on("destroy.scroller",(function(){t(e).off("resize.dt-scroller"),t(n.dom.scroller).off(".dt-scroller"),t(n.s.dt.nTable).off(".scroller"),t(n.s.dt.nTableWrapper).removeClass("DTS"),t("div.DTS_Loading",n.dom.scroller.parentNode).remove(),n.dom.table.style.position="",n.dom.table.style.top="",n.dom.table.style.left=""}))}else this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller")},_calcRowHeight:function(){var e=this.s.dt,n=e.nTable,s=n.cloneNode(!1),r=t("<tbody/>").appendTo(s),o=t('<div class="'+e.oClasses.sWrapper+' DTS"><div class="'+e.oClasses.sScrollWrapper+'"><div class="'+e.oClasses.sScrollBody+'"></div></div></div>');t("tbody tr:lt(4)",n).clone().appendTo(r);var i=t("tr",r).length;if(1===i)r.prepend("<tr><td>&#160;</td></tr>"),r.append("<tr><td>&#160;</td></tr>");else for(;i<3;i++)r.append("<tr><td>&#160;</td></tr>");t("div."+e.oClasses.sScrollBody,o).append(s);var a=this.s.dt.nHolding||n.parentNode;t(a).is(":visible")||(a="body"),o.find("input").removeAttr("name"),o.appendTo(a),this.s.heights.row=t("tr",r).eq(1).outerHeight(),o.remove()},_draw:function(){var e=this,n=this.s.heights,s=this.dom.scroller.scrollTop,r=t(this.s.dt.nTable).height(),o=this.s.dt._iDisplayStart,i=this.s.dt._iDisplayLength,a=this.s.dt.fnRecordsDisplay();this.s.skip=!0,!this.s.dt.bSorted&&!this.s.dt.bFiltered||0!==o||this.s.dt._drawHold||(this.s.topRowFloat=0),s="jump"===this.s.scrollType?this._domain("virtualToPhysical",this.s.topRowFloat*n.row):s,this.s.baseScrollTop=s,this.s.baseRowTop=this.s.topRowFloat;var l=s-(this.s.topRowFloat-o)*n.row;0===o?l=0:o+i>=a&&(l=n.scroll-r),this.dom.table.style.top=l+"px",this.s.tableTop=l,this.s.tableBottom=r+this.s.tableTop;var d=(s-this.s.tableTop)*this.s.boundaryScale;if(this.s.redrawTop=s-d,this.s.redrawBottom=s+d>n.scroll-n.viewport-n.row?n.scroll-n.viewport-n.row:s+d,this.s.skip=!1,this.s.dt.oFeatures.bStateSave&&null!==this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.scroller){var c=!(!this.s.dt.sAjaxSource&&!e.s.dt.ajax||this.s.dt.oFeatures.bServerSide);(c&&2==this.s.dt.iDraw||!c&&1==this.s.dt.iDraw)&&setTimeout((function(){t(e.dom.scroller).scrollTop(e.s.dt.oLoadedState.scroller.scrollTop),setTimeout((function(){e.s.ingnoreScroll=!1}),0)}),0)}else e.s.ingnoreScroll=!1;this.s.dt.oFeatures.bInfo&&setTimeout((function(){e._info.call(e)}),0),this.dom.loader&&this.s.loaderVisible&&(this.dom.loader.css("display","none"),this.s.loaderVisible=!1)},_domain:function(t,e){var n,s=this.s.heights;if(s.virtual===s.scroll)return e;if(e<1e4)return e;if("virtualToPhysical"===t&&e>=s.virtual-1e4)return n=s.virtual-e,s.scroll-n;if("physicalToVirtual"===t&&e>=s.scroll-1e4)return n=s.scroll-e,s.virtual-n;var r=(s.virtual-1e4-1e4)/(s.scroll-1e4-1e4),o=1e4-1e4*r;return"virtualToPhysical"===t?(e-o)/r:r*e+o},_info:function(){if(this.s.dt.oFeatures.bInfo){var e,n=this.s.dt,s=n.oLanguage,r=this.dom.scroller.scrollTop,o=Math.floor(this.pixelsToRow(r,!1,this.s.ani)+1),i=n.fnRecordsTotal(),a=n.fnRecordsDisplay(),l=Math.ceil(this.pixelsToRow(r+this.s.heights.viewport,!1,this.s.ani)),d=a<l?a:l,c=n.fnFormatNumber(o),u=n.fnFormatNumber(d),h=n.fnFormatNumber(i),f=n.fnFormatNumber(a);e=0===n.fnRecordsDisplay()&&n.fnRecordsDisplay()==n.fnRecordsTotal()?s.sInfoEmpty+s.sInfoPostFix:0===n.fnRecordsDisplay()?s.sInfoEmpty+" "+s.sInfoFiltered.replace("_MAX_",h)+s.sInfoPostFix:n.fnRecordsDisplay()==n.fnRecordsTotal()?s.sInfo.replace("_START_",c).replace("_END_",u).replace("_MAX_",h).replace("_TOTAL_",f)+s.sInfoPostFix:s.sInfo.replace("_START_",c).replace("_END_",u).replace("_MAX_",h).replace("_TOTAL_",f)+" "+s.sInfoFiltered.replace("_MAX_",n.fnFormatNumber(n.fnRecordsTotal()))+s.sInfoPostFix;var p=s.fnInfoCallback;p&&(e=p.call(n.oInstance,n,o,d,i,a,e));var m=n.aanFeatures.i;if(void 0!==m)for(var g=0,b=m.length;g<b;g++)t(m[g]).html(e);t(n.nTable).triggerHandler("info.dt")}},_parseHeight:function(n){var s,r=/^([+-]?(?:\d+(?:\.\d+)?|\.\d+))(px|em|rem|vh)$/.exec(n);if(null===r)return 0;var o=parseFloat(r[1]),i=r[2];return"px"===i?s=o:"vh"===i?s=o/100*t(e).height():"rem"===i?s=o*parseFloat(t(":root").css("font-size")):"em"===i&&(s=o*parseFloat(t("body").css("font-size"))),s||0},_scroll:function(){var e,n=this,s=this.s.heights,r=this.dom.scroller.scrollTop;if(!this.s.skip&&!this.s.ingnoreScroll&&r!==this.s.lastScrollTop)if(this.s.dt.bFiltered||this.s.dt.bSorted)this.s.lastScrollTop=0;else{if(this._info(),clearTimeout(this.s.stateTO),this.s.stateTO=setTimeout((function(){n.s.dtApi.state.save()}),250),this.s.scrollType=Math.abs(r-this.s.lastScrollTop)>s.viewport?"jump":"cont",this.s.topRowFloat="cont"===this.s.scrollType?this.pixelsToRow(r,!1,!1):this._domain("physicalToVirtual",r)/s.row,this.s.topRowFloat<0&&(this.s.topRowFloat=0),this.s.forceReposition||r<this.s.redrawTop||r>this.s.redrawBottom){var o=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows);if(e=parseInt(this.s.topRowFloat,10)-o,this.s.forceReposition=!1,e<=0?e=0:e+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?(e=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength)<0&&(e=0):e%2!=0&&e++,this.s.targetTop=e,e!=this.s.dt._iDisplayStart){this.s.tableTop=t(this.s.dt.nTable).offset().top,this.s.tableBottom=t(this.s.dt.nTable).height()+this.s.tableTop;var i=function(){n.s.dt._iDisplayStart=n.s.targetTop,n.s.dt.oApi._fnDraw(n.s.dt)};this.s.dt.oFeatures.bServerSide?(this.s.forceReposition=!0,clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(i,this.s.serverWait)):i(),this.dom.loader&&!this.s.loaderVisible&&(this.dom.loader.css("display","block"),this.s.loaderVisible=!0)}}else this.s.topRowFloat=this.pixelsToRow(r,!1,!0);this.s.lastScrollTop=r,this.s.stateSaveThrottle(),"jump"===this.s.scrollType&&this.s.mousedown&&(this.s.labelVisible=!0),this.s.labelVisible&&this.dom.label.html(this.s.dt.fnFormatNumber(parseInt(this.s.topRowFloat,10)+1)).css("top",r+r*s.labelFactor).css("display","block")}},_scrollForce:function(){var t=this.s.heights;t.virtual=t.row*this.s.dt.fnRecordsDisplay(),t.scroll=t.virtual,t.scroll>1e6&&(t.scroll=1e6),this.dom.force.style.height=t.scroll>this.s.heights.row?t.scroll+"px":this.s.heights.row+"px"}}),o.defaults={boundaryScale:.5,displayBuffer:9,loadingIndicator:!1,rowHeight:"auto",serverWait:200},o.oDefaults=o.defaults,o.version="2.0.2",t(n).on("preInit.dt.dtscroller",(function(e,n){if("dt"===e.namespace){var s=n.oInit.scroller,i=r.defaults.scroller;if(s||i){var a=t.extend({},s,i);!1!==s&&new o(n,a)}}})),t.fn.dataTable.Scroller=o,t.fn.DataTable.Scroller=o;var i=t.fn.dataTable.Api;return i.register("scroller()",(function(){return this})),i.register("scroller().rowToPixels()",(function(t,e,n){var s=this.context;if(s.length&&s[0].oScroller)return s[0].oScroller.rowToPixels(t,e,n)})),i.register("scroller().pixelsToRow()",(function(t,e,n){var s=this.context;if(s.length&&s[0].oScroller)return s[0].oScroller.pixelsToRow(t,e,n)})),i.register(["scroller().scrollToRow()","scroller.toPosition()"],(function(t,e){return this.iterator("table",(function(n){n.oScroller&&n.oScroller.scrollToRow(t,e)})),this})),i.register("row().scrollTo()",(function(t){var e=this;return this.iterator("row",(function(n,s){if(n.oScroller){var r=e.rows({order:"applied",search:"applied"}).indexes().indexOf(s);n.oScroller.scrollToRow(r,t)}})),this})),i.register("scroller.measure()",(function(t){return this.iterator("table",(function(e){e.oScroller&&e.oScroller.measure(t)})),this})),i.register("scroller.page()",(function(){var t=this.context;if(t.length&&t[0].oScroller)return t[0].oScroller.pageInfo()})),o})),
/*! SearchPanes 1.1.1
 * 2019-2020 SpryMedia Ltd - datatables.net/license
 */
function(){"use strict";var t,e;function n(n){t=n,e=n.fn.dataTable}var s,r,o=function(){function n(s,r,o,i,a,l){var d=this;if(void 0===l&&(l=null),!e||!e.versionCheck||!e.versionCheck("1.10.0"))throw new Error("SearchPane requires DataTables 1.10 or newer");if(!e.select)throw new Error("SearchPane requires Select");var c=new e.Api(s);this.classes=t.extend(!0,{},n.classes),this.c=t.extend(!0,{},n.defaults,r),this.customPaneSettings=l,this.s={cascadeRegen:!1,clearing:!1,colOpts:[],deselect:!1,displayed:!1,dt:c,dtPane:void 0,filteringActive:!1,index:o,indexes:[],lastCascade:!1,lastSelect:!1,listSet:!1,name:void 0,redraw:!1,rowData:{arrayFilter:[],arrayOriginal:[],arrayTotals:[],bins:{},binsOriginal:{},binsTotal:{},filterMap:new Map,totalOptions:0},scrollTop:0,searchFunction:void 0,selectPresent:!1,serverSelect:[],serverSelecting:!1,showFiltered:!1,tableLength:null,updating:!1};var u=c.columns().eq(0).toArray().length;this.colExists=this.s.index<u,this.c.layout=i;var h=parseInt(i.split("-")[1],10);this.dom={buttonGroup:t("<div/>").addClass(this.classes.buttonGroup),clear:t('<button type="button">&#215;</button>').addClass(this.classes.dull).addClass(this.classes.paneButton).addClass(this.classes.clearButton),container:t("<div/>").addClass(this.classes.container).addClass(this.classes.layout+(h<10?i:i.split("-")[0]+"-9")),countButton:t('<button type="button"></button>').addClass(this.classes.paneButton).addClass(this.classes.countButton),dtP:t("<table><thead><tr><th>"+(this.colExists?t(c.column(this.colExists?this.s.index:0).header()).text():this.customPaneSettings.header||"Custom Pane")+"</th><th/></tr></thead></table>"),lower:t("<div/>").addClass(this.classes.subRow2).addClass(this.classes.narrowButton),nameButton:t('<button type="button"></button>').addClass(this.classes.paneButton).addClass(this.classes.nameButton),panesContainer:a,searchBox:t("<input/>").addClass(this.classes.paneInputButton).addClass(this.classes.search),searchButton:t('<button type = "button" class="'+this.classes.searchIcon+'"></button>').addClass(this.classes.paneButton),searchCont:t("<div/>").addClass(this.classes.searchCont),searchLabelCont:t("<div/>").addClass(this.classes.searchLabelCont),topRow:t("<div/>").addClass(this.classes.topRow),upper:t("<div/>").addClass(this.classes.subRow1).addClass(this.classes.narrowSearch)},this.s.displayed=!1,c=this.s.dt,this.selections=[],this.s.colOpts=this.colExists?this._getOptions():this._getBonusOptions();var f=this.s.colOpts,p=t('<button type="button">X</button>').addClass(this.classes.paneButton);t(p).text(c.i18n("searchPanes.clearPane","X")),this.dom.container.addClass(f.className),this.dom.container.addClass(null!==this.customPaneSettings&&void 0!==this.customPaneSettings.className?this.customPaneSettings.className:""),void 0!==this.s.colOpts.name?this.s.name=this.s.colOpts.name:null!==this.customPaneSettings&&void 0!==this.customPaneSettings.name?this.s.name=this.customPaneSettings.name:this.s.name=this.colExists?t(c.column(this.s.index).header()).text():this.customPaneSettings.header||"Custom Pane",t(a).append(this.dom.container);var m=c.table(0).node();return this.s.searchFunction=function(e,n,s,r){if(0===d.selections.length)return!0;if(e.nTable!==m)return!0;var o="";return d.colExists&&(o=n[d.s.index],"filter"!==f.orthogonal.filter&&(o=d.s.rowData.filterMap.get(s))instanceof t.fn.dataTable.Api&&(o=o.toArray())),d._search(o,s)},t.fn.dataTable.ext.search.push(this.s.searchFunction),this.c.clear&&t(p).on("click",(function(){d.dom.container.find(d.classes.search).each((function(){t(this).val(""),t(this).trigger("input")})),d.clearPane()})),c.on("draw.dtsp",(function(){d._adjustTopRow()})),c.on("buttons-action",(function(){d._adjustTopRow()})),t(window).on("resize.dtsp",e.util.throttle((function(){d._adjustTopRow()}))),c.on("column-reorder.dtsp",(function(t,e,n){d.s.index=n.mapping[d.s.index]})),this}return n.prototype.clearData=function(){this.s.rowData={arrayFilter:[],arrayOriginal:[],arrayTotals:[],bins:{},binsOriginal:{},binsTotal:{},filterMap:new Map,totalOptions:0}},n.prototype.clearPane=function(){return this.s.dtPane.rows({selected:!0}).deselect(),this.updateTable(),this},n.prototype.destroy=function(){t(this.s.dtPane).off(".dtsp"),t(this.s.dt).off(".dtsp"),t(this.dom.nameButton).off(".dtsp"),t(this.dom.countButton).off(".dtsp"),t(this.dom.clear).off(".dtsp"),t(this.dom.searchButton).off(".dtsp"),t(this.dom.container).remove();for(var e=t.fn.dataTable.ext.search.indexOf(this.s.searchFunction);-1!==e;)t.fn.dataTable.ext.search.splice(e,1),e=t.fn.dataTable.ext.search.indexOf(this.s.searchFunction);void 0!==this.s.dtPane&&this.s.dtPane.destroy(),this.s.listSet=!1},n.prototype.getPaneCount=function(){return void 0!==this.s.dtPane?this.s.dtPane.rows({selected:!0}).data().toArray().length:0},n.prototype.rebuildPane=function(e,n,s,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===s&&(s=null),void 0===r&&(r=!1),this.clearData();var o=[];this.s.serverSelect=[];var i=null;return void 0!==this.s.dtPane&&(r&&(this.s.dt.page.info().serverSide?this.s.serverSelect=this.s.dtPane.rows({selected:!0}).data().toArray():o=this.s.dtPane.rows({selected:!0}).data().toArray()),this.s.dtPane.clear().destroy(),i=t(this.dom.container).prev(),this.destroy(),this.s.dtPane=void 0,t.fn.dataTable.ext.search.push(this.s.searchFunction)),this.dom.container.removeClass(this.classes.hidden),this.s.displayed=!1,this._buildPane(this.s.dt.page.info().serverSide?this.s.serverSelect:o,e,n,s,i),this},n.prototype.removePane=function(){this.s.displayed=!1,t(this.dom.container).hide()},n.prototype.setCascadeRegen=function(t){this.s.cascadeRegen=t},n.prototype.setClear=function(t){this.s.clearing=t},n.prototype.updatePane=function(t){void 0===t&&(t=!1),this.s.updating=!0,this._updateCommon(t),this.s.updating=!1},n.prototype.updateTable=function(){var t=this.s.dtPane.rows({selected:!0}).data().toArray();this.selections=t,this._searchExtras(),(this.c.cascadePanes||this.c.viewTotal)&&this.updatePane()},n.prototype._setListeners=function(){var e,n=this,s=this.s.rowData;return this.s.dtPane.on("select.dtsp",(function(){n.s.dt.page.info().serverSide&&!n.s.updating?n.s.serverSelecting||(n.s.serverSelect=n.s.dtPane.rows({selected:!0}).data().toArray(),n.s.scrollTop=t(n.s.dtPane.table().node()).parent()[0].scrollTop,n.s.selectPresent=!0,n.s.dt.draw(!1)):(clearTimeout(e),t(n.dom.clear).removeClass(n.classes.dull),n.s.selectPresent=!0,n.s.updating||n._makeSelection(),n.s.selectPresent=!1)})),this.s.dtPane.on("deselect.dtsp",(function(){e=setTimeout((function(){n.s.dt.page.info().serverSide&&!n.s.updating?n.s.serverSelecting||(n.s.serverSelect=n.s.dtPane.rows({selected:!0}).data().toArray(),n.s.deselect=!0,n.s.dt.draw(!1)):(n.s.deselect=!0,0===n.s.dtPane.rows({selected:!0}).data().toArray().length&&t(n.dom.clear).addClass(n.classes.dull),n._makeSelection(),n.s.deselect=!1,n.s.dt.state.save())}),50)})),this.s.dt.on("stateSaveParams.dtsp",(function(e,r,o){if(t.isEmptyObject(o))n.s.dtPane.state.clear();else{var i,a,l,d,c=[];void 0!==n.s.dtPane&&(c=n.s.dtPane.rows({selected:!0}).data().map((function(t){return t.filter.toString()})).toArray(),i=t(n.dom.searchBox).val(),a=n.s.dtPane.order(),l=s.binsOriginal,d=s.arrayOriginal),void 0===o.searchPanes&&(o.searchPanes={}),void 0===o.searchPanes.panes&&(o.searchPanes.panes=[]),o.searchPanes.panes.push({arrayFilter:d,bins:l,id:n.s.index,order:a,searchTerm:i,selected:c})}})),this.s.dtPane.on("user-select.dtsp",(function(t,e,n,s,r){r.stopPropagation()})),this.s.dtPane.on("draw.dtsp",(function(){n._adjustTopRow()})),t(this.dom.nameButton).on("click.dtsp",(function(){var t=n.s.dtPane.order()[0][1];n.s.dtPane.order([0,"asc"===t?"desc":"asc"]).draw(),n.s.dt.state.save()})),t(this.dom.countButton).on("click.dtsp",(function(){var t=n.s.dtPane.order()[0][1];n.s.dtPane.order([1,"asc"===t?"desc":"asc"]).draw(),n.s.dt.state.save()})),t(this.dom.clear).on("click.dtsp",(function(){n.dom.container.find("."+n.classes.search).each((function(){t(this).val(""),t(this).trigger("input")})),n.clearPane()})),t(this.dom.searchButton).on("click.dtsp",(function(){t(n.dom.searchBox).focus()})),t(this.dom.searchBox).on("input.dtsp",(function(){n.s.dtPane.search(t(n.dom.searchBox).val()).draw(),n.s.dt.state.save()})),this.s.dt.state.save(),!0},n.prototype._addOption=function(t,n,s,r,o,i){if(Array.isArray(t)||t instanceof e.Api){if(t instanceof e.Api&&(t=t.toArray(),n=n.toArray()),t.length===n.length){for(var a=0;a<t.length;a++)i[t[a]]?i[t[a]]++:(i[t[a]]=1,o.push({display:n[a],filter:t[a],sort:s[a],type:r[a]})),this.s.rowData.totalOptions++;return}throw new Error("display and filter not the same length")}if("string"==typeof this.s.colOpts.orthogonal){if(i[t])return i[t]++,void this.s.rowData.totalOptions++;i[t]=1,o.push({display:n,filter:t,sort:s,type:r}),this.s.rowData.totalOptions++}else o.push({display:n,filter:t,sort:s,type:r})},n.prototype._addRow=function(t,e,n,s,r,o){for(var i,a=0,l=this.s.indexes;a<l.length;a++){var d=l[a];d.filter===e&&(i=d.index)}return void 0===i&&(i=this.s.indexes.length,this.s.indexes.push({filter:e,index:i})),this.s.dtPane.row.add({display:""!==t?t:this.c.emptyMessage,filter:e,index:i,shown:n,sort:""!==r?r:this.c.emptyMessage,total:s,type:o})},n.prototype._adjustTopRow=function(){var e=this.dom.container.find("."+this.classes.subRowsContainer),n=this.dom.container.find(".dtsp-subRow1"),s=this.dom.container.find(".dtsp-subRow2"),r=this.dom.container.find("."+this.classes.topRow);(t(e[0]).width()<252||t(r[0]).width()<252)&&0!==t(e[0]).width()?(t(e[0]).addClass(this.classes.narrow),t(n[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowSearch),t(s[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowButton)):(t(e[0]).removeClass(this.classes.narrow),t(n[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowSearch),t(s[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowButton))},n.prototype._buildPane=function(n,s,r,o,i){var a=this;void 0===n&&(n=[]),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===o&&(o=null),void 0===i&&(i=null),this.selections=[];var l=this.s.dt,d=l.column(this.colExists?this.s.index:0),c=this.s.colOpts,u=this.s.rowData,h=l.i18n("searchPanes.count","{total}"),f=l.i18n("searchPanes.countFiltered","{shown} ({total})"),p=l.state.loaded();if(this.s.listSet&&(p=l.state()),this.colExists){var m=-1;if(p&&p.searchPanes&&p.searchPanes.panes)for(var g=0;g<p.searchPanes.panes.length;g++)if(p.searchPanes.panes[g].id===this.s.index){m=g;break}if((!1===c.show||void 0!==c.show&&!0!==c.show)&&-1===m)return this.dom.container.addClass(this.classes.hidden),this.s.displayed=!1,!1;if(!0!==c.show&&-1===m||(this.s.displayed=!0),this.s.dt.page.info().serverSide){if(null!==r){void 0!==r.tableLength?(this.s.tableLength=r.tableLength,this.s.rowData.totalOptions=this.s.tableLength):(null===this.s.tableLength||l.rows()[0].length>this.s.tableLength)&&(this.s.tableLength=l.rows()[0].length,this.s.rowData.totalOptions=this.s.tableLength);var b=l.column(this.s.index).dataSrc();if(void 0!==r[b])for(var v=0,y=r[b];v<y.length;v++){var w=y[v];this.s.rowData.arrayFilter.push({display:w.label,filter:w.value,sort:w.label,type:w.label}),this.s.rowData.bins[w.value]=this.c.viewTotal||this.c.cascadePanes?w.count:w.total,this.s.rowData.binsTotal[w.value]=w.total}_=Object.keys(u.binsTotal).length,x=this._uniqueRatio(_,this.s.tableLength);if(!1===this.s.displayed&&((void 0===c.show&&null===c.threshold?x>this.c.threshold:x>c.threshold)||!0!==c.show&&_<=1))return this.dom.container.addClass(this.classes.hidden),void(this.s.displayed=!1);this.s.displayed=!0}}else{if(0===u.arrayFilter.length)if(this._populatePane(s),this.s.rowData.totalOptions=0,this._detailsPane(),p&&p.searchPanes&&p.searchPanes.panes){if(-1===m)return this.dom.container.addClass(this.classes.hidden),void(this.s.displayed=!1);u.binsOriginal=p.searchPanes.panes[m].bins,u.arrayOriginal=p.searchPanes.panes[m].arrayFilter}else u.arrayOriginal=u.arrayTotals,u.binsOriginal=u.binsTotal;var _=Object.keys(u.binsOriginal).length,x=this._uniqueRatio(_,l.rows()[0].length);if(!1===this.s.displayed&&((void 0===c.show&&null===c.threshold?x>this.c.threshold:x>c.threshold)||!0!==c.show&&_<=1))return this.dom.container.addClass(this.classes.hidden),void(this.s.displayed=!1);this.c.viewTotal&&0===u.arrayTotals.length?(this.s.rowData.totalOptions=0,this._detailsPane()):u.binsTotal=u.bins,this.dom.container.addClass(this.classes.show),this.s.displayed=!0}}else this.s.displayed=!0;this._displayPane(),this.s.listSet||this.dom.dtP.on("stateLoadParams.dt",(function(e,n,s){t.isEmptyObject(l.state.loaded())&&t.each(s,(function(t,e){delete s[t]}))})),null!==i&&t(this.dom.panesContainer).has(i).length>0?t(this.dom.panesContainer).insertAfter(i):t(this.dom.panesContainer).prepend(this.dom.container);var C=t.fn.dataTable.ext.errMode;t.fn.dataTable.ext.errMode="none";var T=e.Scroller;if(this.s.dtPane=t(this.dom.dtP).DataTable(t.extend(!0,{columnDefs:[{className:"dtsp-nameColumn",data:"display",render:function(t,e,n){if("sort"===e)return n.sort;if("type"===e)return n.type;var s;for(s=(s=(a.s.filteringActive||a.s.showFiltered)&&a.c.viewTotal?f.replace(/{total}/,n.total):h.replace(/{total}/,n.total)).replace(/{shown}/,n.shown);-1!==s.indexOf("{total}");)s=s.replace(/{total}/,n.total);for(;-1!==s.indexOf("{shown}");)s=s.replace(/{shown}/,n.shown);var r='<span class="'+a.classes.pill+'">'+s+"</span>";return(a.c.hideCount||c.hideCount)&&(r=""),a.c.dataLength&&null!==t&&t.length>a.c.dataLength?'<span title="'+t+'" class="'+a.classes.name+'">'+t.substr(0,a.c.dataLength)+"...</span>"+r:'<span class="'+a.classes.name+'">'+t+"</span>"+r},targets:0,type:void 0!==l.settings()[0].aoColumns[this.s.index]?l.settings()[0].aoColumns[this.s.index]._sManualType:null},{className:"dtsp-countColumn "+this.classes.badgePill,data:"total",targets:1,visible:!1}],deferRender:!0,dom:"t",info:!1,paging:!!T,scrollY:"200px",scroller:!!T,select:!0,stateSave:!!l.settings()[0].oFeatures.bStateSave},this.c.dtOpts,void 0!==c?c.dtOpts:{},null!==this.customPaneSettings&&void 0!==this.customPaneSettings.dtOpts?this.customPaneSettings.dtOpts:{})),t(this.dom.dtP).addClass(this.classes.table),t(this.dom.searchBox).attr("placeholder",void 0!==c.header?c.header:this.colExists?l.settings()[0].aoColumns[this.s.index].sTitle:this.customPaneSettings.header||"Custom Pane"),t.fn.dataTable.select.init(this.s.dtPane),t.fn.dataTable.ext.errMode=C,this.colExists){var I=d.search();I=I?I.substr(1,I.length-2).split("|"):[];var S=0;u.arrayFilter.forEach((function(t){""===t.filter&&S++}));g=0;for(var F=u.arrayFilter.length;g<F;g++){for(var D=!1,k=0,A=this.s.serverSelect;k<A.length;k++){A[k].filter===u.arrayFilter[g].filter&&(D=!0)}if(this.s.dt.page.info().serverSide&&(!this.c.cascadePanes||this.c.cascadePanes&&0!==u.bins[u.arrayFilter[g].filter]||this.c.cascadePanes&&null!==o||D)){var P=this._addRow(u.arrayFilter[g].display,u.arrayFilter[g].filter,o?u.binsTotal[u.arrayFilter[g].filter]:u.bins[u.arrayFilter[g].filter],this.c.viewTotal||o?String(u.binsTotal[u.arrayFilter[g].filter]):u.bins[u.arrayFilter[g].filter],u.arrayFilter[g].sort,u.arrayFilter[g].type);void 0!==c.preSelect&&-1!==c.preSelect.indexOf(u.arrayFilter[g].filter)&&P.select();for(var R=0,B=this.s.serverSelect;R<B.length;R++){B[R].filter===u.arrayFilter[g].filter&&(this.s.serverSelecting=!0,P.select(),this.s.serverSelecting=!1)}}else if(this.s.dt.page.info().serverSide||!u.arrayFilter[g]||void 0===u.bins[u.arrayFilter[g].filter]&&this.c.cascadePanes)this.s.dt.page.info().serverSide||this._addRow(this.c.emptyMessage,S,S,this.c.emptyMessage,this.c.emptyMessage,this.c.emptyMessage);else{P=this._addRow(u.arrayFilter[g].display,u.arrayFilter[g].filter,u.bins[u.arrayFilter[g].filter],u.binsTotal[u.arrayFilter[g].filter],u.arrayFilter[g].sort,u.arrayFilter[g].type);void 0!==c.preSelect&&-1!==c.preSelect.indexOf(u.arrayFilter[g].filter)&&P.select()}}}(void 0!==c.options||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options)&&this._getComparisonRows(),e.select.init(this.s.dtPane),this.s.dtPane.draw(),this._adjustTopRow(),this.s.listSet||(this._setListeners(),this.s.listSet=!0);for(var L=0,O=n;L<O.length;L++){var N=O[L];if(void 0!==N)for(var E=0,z=this.s.dtPane.rows().indexes().toArray();E<z.length;E++){P=z[E];void 0!==this.s.dtPane.row(P).data()&&N.filter===this.s.dtPane.row(P).data().filter&&(this.s.dt.page.info().serverSide?(this.s.serverSelecting=!0,this.s.dtPane.row(P).select(),this.s.serverSelecting=!1):this.s.dtPane.row(P).select())}}if(this.s.dt.draw(),p&&p.searchPanes&&p.searchPanes.panes){this.c.cascadePanes||this._reloadSelect(p);for(var H=0,j=p.searchPanes.panes;H<j.length;H++){var M=j[H];M.id===this.s.index&&(t(this.dom.searchBox).val(M.searchTerm),t(this.dom.searchBox).trigger("input"),this.s.dtPane.order(M.order).draw())}}return this.s.dt.state.save(),!0},n.prototype._detailsPane=function(){var t=this,e=this.s.dt;this.s.rowData.arrayTotals=[],this.s.rowData.binsTotal={};var n=this.s.dt.settings()[0];e.rows().every((function(e){t._populatePaneArray(e,t.s.rowData.arrayTotals,n,t.s.rowData.binsTotal)}))},n.prototype._displayPane=function(){var e=this.dom.container,n=this.s.colOpts,s=parseInt(this.c.layout.split("-")[1],10);t(this.dom.topRow).empty(),t(this.dom.dtP).empty(),t(this.dom.topRow).addClass(this.classes.topRow),s>3&&t(this.dom.container).addClass(this.classes.smallGap),t(this.dom.topRow).addClass(this.classes.subRowsContainer),t(this.dom.upper).appendTo(this.dom.topRow),t(this.dom.lower).appendTo(this.dom.topRow),t(this.dom.searchCont).appendTo(this.dom.upper),t(this.dom.buttonGroup).appendTo(this.dom.lower),(!1===this.c.dtOpts.searching||void 0!==n.dtOpts&&!1===n.dtOpts.searching||!this.c.controls||!n.controls||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.dtOpts&&void 0!==this.customPaneSettings.dtOpts.searching&&!this.customPaneSettings.dtOpts.searching)&&t(this.dom.searchBox).attr("disabled","disabled").removeClass(this.classes.paneInputButton).addClass(this.classes.disabledButton),t(this.dom.searchBox).appendTo(this.dom.searchCont),this._searchContSetup(),this.c.clear&&this.c.controls&&n.controls&&t(this.dom.clear).appendTo(this.dom.buttonGroup),this.c.orderable&&n.orderable&&this.c.controls&&n.controls&&t(this.dom.nameButton).appendTo(this.dom.buttonGroup),!this.c.hideCount&&!n.hideCount&&this.c.orderable&&n.orderable&&this.c.controls&&n.controls&&t(this.dom.countButton).appendTo(this.dom.buttonGroup),t(this.dom.topRow).prependTo(this.dom.container),t(e).append(this.dom.dtP),t(e).show()},n.prototype._getBonusOptions=function(){return t.extend(!0,{},n.defaults,{orthogonal:{threshold:null},threshold:null},void 0!==this.c?this.c:{})},n.prototype._getComparisonRows=function(){var t=this.s.colOpts,e=void 0!==t.options?t.options:null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options?this.customPaneSettings.options:void 0;if(void 0!==e){var n=this.s.dt.rows({search:"applied"}).data().toArray(),s=this.s.dt.rows({search:"applied"}),r=this.s.dt.rows().data().toArray(),o=this.s.dt.rows(),i=[];this.s.dtPane.clear();for(var a=0,l=e;a<l.length;a++){var d=l[a],c=""!==d.label?d.label:this.c.emptyMessage,u={display:c,filter:"function"==typeof d.value?d.value:[],shown:0,sort:c,total:0,type:c};if("function"==typeof d.value){for(var h=0;h<n.length;h++)d.value.call(this.s.dt,n[h],s[0][h])&&u.shown++;for(var f=0;f<r.length;f++)d.value.call(this.s.dt,r[f],o[0][f])&&u.total++;"function"!=typeof u.filter&&u.filter.push(d.filter)}(!this.c.cascadePanes||this.c.cascadePanes&&0!==u.shown)&&i.push(this._addRow(u.display,u.filter,u.shown,u.total,u.sort,u.type))}return i}},n.prototype._getOptions=function(){var e=this.s.dt;return t.extend(!0,{},n.defaults,{orthogonal:{threshold:null},threshold:null},e.settings()[0].aoColumns[this.s.index].searchPanes)},n.prototype._makeSelection=function(){this.updateTable(),this.s.updating=!0,this.s.dt.draw(),this.s.updating=!1},n.prototype._populatePane=function(t){void 0===t&&(t=!1);var e=this.s.dt;this.s.rowData.arrayFilter=[],this.s.rowData.bins={};var n=this.s.dt.settings()[0];if(!this.s.dt.page.info().serverSide)for(var s=0,r=(!this.c.cascadePanes&&!this.c.viewTotal||this.s.clearing||t?e.rows().indexes():e.rows({search:"applied"}).indexes()).toArray();s<r.length;s++){var o=r[s];this._populatePaneArray(o,this.s.rowData.arrayFilter,n)}},n.prototype._populatePaneArray=function(t,e,n,s){void 0===s&&(s=this.s.rowData.bins);var r=this.s.colOpts;if("string"==typeof r.orthogonal){var o=n.oApi._fnGetCellData(n,t,this.s.index,r.orthogonal);this.s.rowData.filterMap.set(t,o),this._addOption(o,o,o,o,e,s)}else{var i=n.oApi._fnGetCellData(n,t,this.s.index,r.orthogonal.search);if(this.s.rowData.filterMap.set(t,i),s[i])return s[i]++,void this.s.rowData.totalOptions++;s[i]=1,this._addOption(i,n.oApi._fnGetCellData(n,t,this.s.index,r.orthogonal.display),n.oApi._fnGetCellData(n,t,this.s.index,r.orthogonal.sort),n.oApi._fnGetCellData(n,t,this.s.index,r.orthogonal.type),e,s),this.s.rowData.totalOptions++}},n.prototype._reloadSelect=function(t){if(void 0!==t){for(var e,n=0;n<t.searchPanes.panes.length;n++)if(t.searchPanes.panes[n].id===this.s.index){e=n;break}if(void 0!==e)for(var s=this.s.dtPane,r=s.rows({order:"index"}).data().map((function(t){return null!==t.filter?t.filter.toString():null})).toArray(),o=0,i=t.searchPanes.panes[e].selected;o<i.length;o++){var a=i[o],l=-1;null!==a&&(l=r.indexOf(a.toString())),l>-1&&(s.row(l).select(),this.s.dt.state.save())}}},n.prototype._search=function(t,e){for(var n=this.s.colOpts,s=this.s.dt,r=0,o=this.selections;r<o.length;r++){var i=o[r];if(Array.isArray(t)){if(-1!==t.indexOf(i.filter))return!0}else if("function"==typeof i.filter){if(i.filter.call(s,s.row(e).data(),e)){if("or"===n.combiner)return!0}else if("and"===n.combiner)return!1}else if(t===i.filter)return!0}return"and"===n.combiner},n.prototype._searchContSetup=function(){this.c.controls&&this.s.colOpts.controls&&t(this.dom.searchButton).appendTo(this.dom.searchLabelCont),!1===this.c.dtOpts.searching||!1===this.s.colOpts.dtOpts.searching||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.dtOpts&&void 0!==this.customPaneSettings.dtOpts.searching&&!this.customPaneSettings.dtOpts.searching||t(this.dom.searchLabelCont).appendTo(this.dom.searchCont)},n.prototype._searchExtras=function(){var e=this.s.updating;this.s.updating=!0;var n=this.s.dtPane.rows({selected:!0}).data().pluck("filter").toArray(),s=n.indexOf(this.c.emptyMessage),r=t(this.s.dtPane.table().container());s>-1&&(n[s]=""),n.length>0?r.addClass(this.classes.selected):0===n.length&&r.removeClass(this.classes.selected),this.s.updating=e},n.prototype._uniqueRatio=function(t,e){return e>0&&(this.s.rowData.totalOptions>0&&!this.s.dt.page.info().serverSide||this.s.dt.page.info().serverSide&&this.s.tableLength>0)?t/this.s.rowData.totalOptions:1},n.prototype._updateCommon=function(e){if(void 0===e&&(e=!1),!this.s.dt.page.info().serverSide&&void 0!==this.s.dtPane&&(!this.s.filteringActive||this.c.cascadePanes||!0===e)&&(!0!==this.c.cascadePanes||!0!==this.s.selectPresent)&&(!this.s.lastSelect||!this.s.lastCascade)){var n=this.s.colOpts,s=this.s.dtPane.rows({selected:!0}).data().toArray(),r=t(this.s.dtPane.table().node()).parent()[0].scrollTop,o=this.s.rowData;if(this.s.dtPane.clear(),this.colExists){0===o.arrayFilter.length?this._populatePane():this.c.cascadePanes&&this.s.dt.rows().data().toArray().length===this.s.dt.rows({search:"applied"}).data().toArray().length?(o.arrayFilter=o.arrayOriginal,o.bins=o.binsOriginal):(this.c.viewTotal||this.c.cascadePanes)&&this._populatePane(),this.c.viewTotal?this._detailsPane():o.binsTotal=o.bins,this.c.viewTotal&&!this.c.cascadePanes&&(o.arrayFilter=o.arrayTotals);for(var i=function(t){if(t&&(void 0!==o.bins[t.filter]&&0!==o.bins[t.filter]&&a.c.cascadePanes||!a.c.cascadePanes||a.s.clearing)){var e=a._addRow(t.display,t.filter,a.c.viewTotal?void 0!==o.bins[t.filter]?o.bins[t.filter]:0:o.bins[t.filter],a.c.viewTotal?String(o.binsTotal[t.filter]):o.bins[t.filter],t.sort,t.type),n=s.findIndex((function(e){return e.filter===t.filter}));-1!==n&&(e.select(),s.splice(n,1))}},a=this,l=0,d=o.arrayFilter;l<d.length;l++){i(d[l])}}if(void 0!==n.searchPanes&&void 0!==n.searchPanes.options||void 0!==n.options||null!==this.customPaneSettings&&void 0!==this.customPaneSettings.options)for(var c=function(t){var e=s.findIndex((function(e){if(e.display===t.data().display)return!0}));-1!==e&&(t.select(),s.splice(e,1))},u=0,h=this._getComparisonRows();u<h.length;u++){c(g=h[u])}for(var f=0,p=s;f<p.length;f++){var m=p[f],g=this._addRow(m.display,m.filter,0,this.c.viewTotal?m.total:0,m.filter,m.filter);this.s.updating=!0,g.select(),this.s.updating=!1}this.s.dtPane.draw(),this.s.dtPane.table().node().parentNode.scrollTop=r}},n.version="1.1.0",n.classes={buttonGroup:"dtsp-buttonGroup",buttonSub:"dtsp-buttonSub",clear:"dtsp-clear",clearAll:"dtsp-clearAll",clearButton:"clearButton",container:"dtsp-searchPane",countButton:"dtsp-countButton",disabledButton:"dtsp-disabledButton",dull:"dtsp-dull",hidden:"dtsp-hidden",hide:"dtsp-hide",layout:"dtsp-",name:"dtsp-name",nameButton:"dtsp-nameButton",narrow:"dtsp-narrow",paneButton:"dtsp-paneButton",paneInputButton:"dtsp-paneInputButton",pill:"dtsp-pill",search:"dtsp-search",searchCont:"dtsp-searchCont",searchIcon:"dtsp-searchIcon",searchLabelCont:"dtsp-searchButtonCont",selected:"dtsp-selected",smallGap:"dtsp-smallGap",subRow1:"dtsp-subRow1",subRow2:"dtsp-subRow2",subRowsContainer:"dtsp-subRowsContainer",title:"dtsp-title",topRow:"dtsp-topRow"},n.defaults={cascadePanes:!1,clear:!0,combiner:"or",controls:!0,container:function(t){return t.table().container()},dataLength:30,dtOpts:{},emptyMessage:"<i>No Data</i>",hideCount:!1,layout:"columns-3",name:void 0,orderable:!0,orthogonal:{display:"display",hideCount:!1,search:"filter",show:void 0,sort:"sort",threshold:.6,type:"type"},preSelect:[],threshold:.6,viewTotal:!1},n}();var i,a=function(){function t(e,n,o){var i=this;if(void 0===o&&(o=!1),this.regenerating=!1,!r||!r.versionCheck||!r.versionCheck("1.10.0"))throw new Error("SearchPane requires DataTables 1.10 or newer");if(!r.select)throw new Error("SearchPane requires Select");var a=new r.Api(e);this.classes=s.extend(!0,{},t.classes),this.c=s.extend(!0,{},t.defaults,n),this.dom={clearAll:s('<button type="button">Clear All</button>').addClass(this.classes.clearAll),container:s("<div/>").addClass(this.classes.panes).text(a.i18n("searchPanes.loadMessage","Loading Search Panes...")),emptyMessage:s("<div/>").addClass(this.classes.emptyMessage),options:s("<div/>").addClass(this.classes.container),panes:s("<div/>").addClass(this.classes.container),title:s("<div/>").addClass(this.classes.title),titleRow:s("<div/>").addClass(this.classes.titleRow),wrapper:s("<div/>")},this.s={colOpts:[],dt:a,filterPane:-1,panes:[],selectionList:[],serverData:{},updating:!1},void 0===a.settings()[0]._searchPanes&&(a.on("xhr",(function(t,e,n,s){n.searchPanes&&n.searchPanes.options&&(i.s.serverData=n.searchPanes.options,i.s.serverData.tableLength=n.recordsTotal,(i.c.viewTotal||i.c.cascadePanes)&&i._serverTotals())})),a.settings()[0]._searchPanes=this,this.dom.clearAll.text(a.i18n("searchPanes.clearMessage","Clear All")),this._getState(),this.s.dt.settings()[0]._bInitComplete||o?this._paneDeclare(a,e,n):a.one("preInit.dt",(function(t){i._paneDeclare(a,e,n)})))}return t.prototype.clearSelections=function(){this.dom.container.find(this.classes.search).each((function(){s(this).val(""),s(this).trigger("input")}));for(var t=[],e=0,n=this.s.panes;e<n.length;e++){var r=n[e];void 0!==r.s.dtPane&&t.push(r.clearPane())}return this.s.dt.draw(),t},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),s(this.dom.emptyMessage).remove();var n=[];s(this.dom.panes).empty();for(var r=0,o=this.s.panes;r<o.length;r++){var i=o[r];!1===t||i.s.index===t?(i.clearData(),n.push(i.rebuildPane(void 0!==this.s.selectionList[this.s.selectionList.length-1]&&i.s.index===this.s.selectionList[this.s.selectionList.length-1].index,this.s.dt.page.info().serverSide?this.s.serverData:void 0,null,e)),s(this.dom.panes).append(i.dom.container)):s(this.dom.panes).append(i.dom.container)}return this.c.cascadePanes||this.c.viewTotal?this.redrawPanes(!0):this._updateSelection(),this._updateFilterCount(),this._attachPaneContainer(),this.s.dt.draw(),1===n.length?n[0]:n},t.prototype.redrawPanes=function(t){void 0===t&&(t=!1);var e=this.s.dt;if(!this.s.updating&&!this.s.dt.page.info().serverSide){var n=!0,s=this.s.filterPane;if(e.rows({search:"applied"}).data().toArray().length===e.rows().data().toArray().length)n=!1;else if(this.c.viewTotal)for(var r=0,o=this.s.panes;r<o.length;r++){if(void 0!==(k=o[r]).s.dtPane){var i=k.s.dtPane.rows({selected:!0}).data().toArray().length;if(0===i)for(var a=0,l=this.s.selectionList;a<l.length;a++){var d=l[a];d.index===k.s.index&&0!==d.rows.length&&(i=d.rows.length)}i>0&&-1===s?s=k.s.index:i>0&&(s=null)}}var c=void 0,u=[];if(this.regenerating){C=-1;1===u.length&&(C=u[0].index);for(var h=0,f=this.s.panes;h<f.length;h++){if(void 0!==(k=f[h]).s.dtPane){S=!0;k.s.filteringActive=!0,(-1!==s&&null!==s&&s===k.s.index||!1===n||k.s.index===C)&&(S=!1,k.s.filteringActive=!1),k.updatePane(S?n:S)}}this._updateFilterCount()}else{for(var p=0,m=this.s.panes;p<m.length;p++){if((k=m[p]).s.selectPresent){this.s.selectionList.push({index:k.s.index,rows:k.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1}),e.state.save();break}if(k.s.deselect){c=k.s.index;var g=k.s.dtPane.rows({selected:!0}).data().toArray();g.length>0&&this.s.selectionList.push({index:k.s.index,rows:g,protect:!0})}}if(this.s.selectionList.length>0)for(var b=this.s.selectionList[this.s.selectionList.length-1].index,v=0,y=this.s.panes;v<y.length;v++){(k=y[v]).s.lastSelect=k.s.index===b}for(var w=0;w<this.s.selectionList.length;w++)if(this.s.selectionList[w].index!==c||!0===this.s.selectionList[w].protect){for(var _=!1,x=w+1;x<this.s.selectionList.length;x++)this.s.selectionList[x].index===this.s.selectionList[w].index&&(_=!0);_||(u.push(this.s.selectionList[w]),this.s.selectionList[w].protect=!1)}var C=-1;1===u.length&&(C=u[0].index);for(var T=0,I=this.s.panes;T<I.length;T++){if(void 0!==(k=I[T]).s.dtPane){var S=!0;k.s.filteringActive=!0,(-1!==s&&null!==s&&s===k.s.index||!1===n||k.s.index===C)&&(S=!1,k.s.filteringActive=!1),k.updatePane(!!S&&n)}}if(this._updateFilterCount(),u.length>0&&(u.length<this.s.selectionList.length||t)){this._cascadeRegen(u);b=u[u.length-1].index;for(var F=0,D=this.s.panes;F<D.length;F++){var k;(k=D[F]).s.lastSelect=k.s.index===b}}else if(u.length>0)for(var A=0,P=this.s.panes;A<P.length;A++){var R=P[A];if(void 0!==R.s.dtPane){var S=!0;R.s.filteringActive=!0,(-1!==s&&null!==s&&s===R.s.index||!1===n)&&(S=!1,R.s.filteringActive=!1),R.updatePane(S?n:S)}}}n||(this.s.selectionList=[])}},t.prototype._attach=function(){var t=this;s(this.dom.container).removeClass(this.classes.hide),s(this.dom.titleRow).removeClass(this.classes.hide),s(this.dom.titleRow).remove(),s(this.dom.title).appendTo(this.dom.titleRow),this.c.clear&&(s(this.dom.clearAll).appendTo(this.dom.titleRow),s(this.dom.clearAll).on("click.dtsps",(function(){t.clearSelections()}))),s(this.dom.titleRow).appendTo(this.dom.container);for(var e=0,n=this.s.panes;e<n.length;e++){var r=n[e];s(r.dom.container).appendTo(this.dom.panes)}return s(this.dom.panes).appendTo(this.dom.container),0===s("div."+this.classes.container).length&&s(this.dom.container).prependTo(this.s.dt),this.dom.container},t.prototype._attachExtras=function(){return s(this.dom.container).removeClass(this.classes.hide),s(this.dom.titleRow).removeClass(this.classes.hide),s(this.dom.titleRow).remove(),s(this.dom.title).appendTo(this.dom.titleRow),this.c.clear&&s(this.dom.clearAll).appendTo(this.dom.titleRow),s(this.dom.titleRow).appendTo(this.dom.container),this.dom.container},t.prototype._attachMessage=function(){var t;try{t=this.s.dt.i18n("searchPanes.emptyPanes","No SearchPanes")}catch(e){t=null}return null===t?(s(this.dom.container).addClass(this.classes.hide),void s(this.dom.titleRow).removeClass(this.classes.hide)):(s(this.dom.container).removeClass(this.classes.hide),s(this.dom.titleRow).addClass(this.classes.hide),s(this.dom.emptyMessage).text(t),this.dom.emptyMessage.appendTo(this.dom.container),this.dom.container)},t.prototype._attachPaneContainer=function(){for(var t=0,e=this.s.panes;t<e.length;t++){if(!0===e[t].s.displayed)return this._attach()}return this._attachMessage()},t.prototype._cascadeRegen=function(t){this.regenerating=!0;var e=-1;1===t.length&&(e=t[0].index);for(var n=0,s=this.s.panes;n<s.length;n++){(i=s[n]).setCascadeRegen(!0),i.setClear(!0),(void 0!==i.s.dtPane&&i.s.index===e||void 0!==i.s.dtPane)&&i.clearPane(),i.setClear(!1)}this._makeCascadeSelections(t),this.s.selectionList=t;for(var r=0,o=this.s.panes;r<o.length;r++){var i;(i=o[r]).setCascadeRegen(!1)}this.regenerating=!1},t.prototype._checkMessage=function(){for(var t=0,e=this.s.panes;t<e.length;t++){if(!0===e[t].s.displayed)return}return this._attachMessage()},t.prototype._getState=function(){var t=this.s.dt.state.loaded();t&&t.searchPanes&&void 0!==t.searchPanes.selectionList&&(this.s.selectionList=t.searchPanes.selectionList)},t.prototype._makeCascadeSelections=function(t){for(var e=0;e<t.length;e++)for(var n=function(n){if(n.s.index===t[e].index&&void 0!==n.s.dtPane){e===t.length-1&&(n.s.lastCascade=!0),n.s.dtPane.rows({selected:!0}).data().toArray().length>0&&void 0!==n.s.dtPane&&(n.setClear(!0),n.clearPane(),n.setClear(!1));for(var r=function(t){n.s.dtPane.rows().every((function(e){void 0!==n.s.dtPane.row(e).data()&&void 0!==t&&n.s.dtPane.row(e).data().filter===t.filter&&n.s.dtPane.row(e).select()}))},o=0,i=t[e].rows;o<i.length;o++){r(i[o])}s._updateFilterCount(),n.s.lastCascade=!1}},s=this,r=0,o=this.s.panes;r<o.length;r++){n(o[r])}this.s.dt.state.save()},t.prototype._paneDeclare=function(t,e,n){var s=this;t.columns(this.c.columns.length>0?this.c.columns:void 0).eq(0).each((function(t){s.s.panes.push(new o(e,n,t,s.c.layout,s.dom.panes))}));for(var r=t.columns().eq(0).toArray().length,i=this.c.panes.length,a=0;a<i;a++){var l=r+a;this.s.panes.push(new o(e,n,l,this.c.layout,this.dom.panes,this.c.panes[a]))}if(this.c.order.length>0){var d=this.c.order.map((function(t,e,n){return s._findPane(t)}));this.dom.panes.empty(),this.s.panes=d;for(var c=0,u=this.s.panes;c<u.length;c++){var h=u[c];this.dom.panes.append(h.dom.container)}}this.s.dt.settings()[0]._bInitComplete?this._paneStartup(t):this.s.dt.settings()[0].aoInitComplete.push({fn:function(){s._paneStartup(t)}})},t.prototype._findPane=function(t){for(var e=0,n=this.s.panes;e<n.length;e++){var s=n[e];if(t===s.s.name)return s}},t.prototype._paneStartup=function(t){var e=this;this.s.dt.page.info().recordsTotal<=500?this._startup(t):setTimeout((function(){e._startup(t)}),100)},t.prototype._serverTotals=function(){for(var t=!1,e=!1,n=this.s.dt,r=0,o=this.s.panes;r<o.length;r++){if((_=o[r]).s.selectPresent){this.s.selectionList.push({index:_.s.index,rows:_.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1}),n.state.save(),_.s.selectPresent=!1,t=!0;break}if(_.s.deselect){var i=_.s.dtPane.rows({selected:!0}).data().toArray();i.length>0&&this.s.selectionList.push({index:_.s.index,rows:i,protect:!0}),t=!0,e=!0}}if(t){for(var a=[],l=0;l<this.s.selectionList.length;l++){for(var d=!1,c=l+1;c<this.s.selectionList.length;c++)this.s.selectionList[c].index===this.s.selectionList[l].index&&(d=!0);!d&&this.s.panes[this.s.selectionList[l].index].s.dtPane.rows({selected:!0}).data().toArray().length>0&&a.push(this.s.selectionList[l])}this.s.selectionList=a}else this.s.selectionList=[];var u=-1;if(e&&1===this.s.selectionList.length)for(var h=0,f=this.s.panes;h<f.length;h++){(_=f[h]).s.lastSelect=!1,_.s.deselect=!1,void 0!==_.s.dtPane&&_.s.dtPane.rows({selected:!0}).data().toArray().length>0&&(u=_.s.index)}else if(this.s.selectionList.length>0)for(var p=this.s.selectionList[this.s.selectionList.length-1].index,m=0,g=this.s.panes;m<g.length;m++){(_=g[m]).s.lastSelect=_.s.index===p,_.s.deselect=!1}else if(0===this.s.selectionList.length)for(var b=0,v=this.s.panes;b<v.length;b++){(_=v[b]).s.lastSelect=!1,_.s.deselect=!1}s(this.dom.panes).empty();for(var y=0,w=this.s.panes;y<w.length;y++){var _;(_=w[y]).s.lastSelect?_._setListeners():_.rebuildPane(void 0,this.s.dt.page.info().serverSide?this.s.serverData:void 0,_.s.index===u||null,!0),s(this.dom.panes).append(_.dom.container),void 0!==_.s.dtPane&&(s(_.s.dtPane.table().node()).parent()[0].scrollTop=_.s.scrollTop,s.fn.dataTable.select.init(_.s.dtPane))}},t.prototype._startup=function(t){var e=this;if(s(this.dom.container).text(""),this._attachExtras(),s(this.dom.container).append(this.dom.panes),s(this.dom.panes).empty(),this.c.viewTotal&&!this.c.cascadePanes){var n=this.s.dt.state.loaded();if(null!=n&&void 0!==n.searchPanes&&void 0!==n.searchPanes.panes){for(var r=!1,o=0,i=n.searchPanes.panes;o<i.length;o++){if((g=i[o]).selected.length>0){r=!0;break}}if(r)for(var a=0,l=this.s.panes;a<l.length;a++){(g=l[a]).s.showFiltered=!0}}}for(var d=0,c=this.s.panes;d<c.length;d++){(g=c[d]).rebuildPane(void 0,this.s.dt.page.info().serverSide?this.s.serverData:void 0),s(this.dom.panes).append(g.dom.container)}if(this.c.viewTotal&&!this.c.cascadePanes)for(var u=0,h=this.s.panes;u<h.length;u++){(g=h[u]).updatePane()}if(this._updateFilterCount(),this._checkMessage(),t.on("draw.dtsps",(function(){e._updateFilterCount(),!e.c.cascadePanes&&!e.c.viewTotal||e.s.dt.page.info().serverSide?e._updateSelection():e.redrawPanes(),e.s.filterPane=-1})),this.s.dt.on("stateSaveParams.dtsp",(function(t,n,s){void 0===s.searchPanes&&(s.searchPanes={}),s.searchPanes.selectionList=e.s.selectionList})),this.s.dt.on("xhr",(function(){var t=!1;e.s.dt.page.info().serverSide||e.s.dt.one("draw",(function(){if(!t){t=!0,s(e.dom.panes).empty();for(var n=0,r=e.s.panes;n<r.length;n++){var o=r[n];o.clearData(),o.rebuildPane(void 0!==e.s.selectionList[e.s.selectionList.length-1]&&o.s.index===e.s.selectionList[e.s.selectionList.length-1].index,void 0,void 0,!0),s(e.dom.panes).append(o.dom.container)}e.c.cascadePanes||e.c.viewTotal?e.redrawPanes(e.c.cascadePanes):e._updateSelection(),e._checkMessage()}}))})),void 0!==this.s.selectionList&&this.s.selectionList.length>0)for(var f=this.s.selectionList[this.s.selectionList.length-1].index,p=0,m=this.s.panes;p<m.length;p++){var g;(g=m[p]).s.lastSelect=g.s.index===f}this.s.selectionList.length>0&&this.c.cascadePanes&&this._cascadeRegen(this.s.selectionList),t.columns(this.c.columns.length>0?this.c.columns:void 0).eq(0).each((function(t){if(void 0!==e.s.panes[t]&&void 0!==e.s.panes[t].s.dtPane&&void 0!==e.s.panes[t].s.colOpts.preSelect)for(var n=e.s.panes[t].s.dtPane.rows().data().toArray().length,s=0;s<n;s++)-1!==e.s.panes[t].s.colOpts.preSelect.indexOf(e.s.panes[t].s.dtPane.cell(s,0).data())&&(e.s.panes[t].s.dtPane.row(s).select(),e.s.panes[t].updateTable())})),this._updateFilterCount(),t.on("destroy.dtsps",(function(){for(var n=0,r=e.s.panes;n<r.length;n++){r[n].destroy()}t.off(".dtsps"),s(e.dom.clearAll).off(".dtsps"),s(e.dom.container).remove(),e.clearSelections()})),this.c.clear&&s(this.dom.clearAll).on("click.dtsps",(function(){e.clearSelections()})),this.s.dt.page.info().serverSide?t.on("preXhr.dt",(function(t,n,s){void 0===s.searchPanes&&(s.searchPanes={});for(var r=0,o=e.s.panes;r<o.length;r++){var i=o[r],a=e.s.dt.column(i.s.index).dataSrc();if(void 0===s.searchPanes[a]&&(s.searchPanes[a]={}),void 0!==i.s.dtPane)for(var l=i.s.dtPane.rows({selected:!0}).data().toArray(),d=0;d<l.length;d++)s.searchPanes[a][d]=l[d].display}e.c.viewTotal&&e._prepViewTotal()})):t.on("preXhr.dt",(function(t,n,s){for(var r=0,o=e.s.panes;r<o.length;r++){o[r].clearData()}})),t.settings()[0]._searchPanes=this},t.prototype._prepViewTotal=function(){for(var t=this.s.filterPane,e=!1,n=0,s=this.s.panes;n<s.length;n++){if(void 0!==(a=s[n]).s.dtPane){var r=a.s.dtPane.rows({selected:!0}).data().toArray().length;r>0&&-1===t?(t=a.s.index,e=!0):r>0&&(t=null)}}for(var o=0,i=this.s.panes;o<i.length;o++){var a;void 0!==(a=i[o]).s.dtPane&&(a.s.filteringActive=!0,(-1!==t&&null!==t&&t===a.s.index||!1===e)&&(a.s.filteringActive=!1))}},t.prototype._updateFilterCount=function(){for(var t=0,e=0,n=this.s.panes;e<n.length;e++){var r=n[e];void 0!==r.s.dtPane&&(t+=r.getPaneCount())}var o=this.s.dt.i18n("searchPanes.title","Filters Active - %d",t);s(this.dom.title).text(o),void 0!==this.c.filterChanged&&"function"==typeof this.c.filterChanged&&this.c.filterChanged(t)},t.prototype._updateSelection=function(){this.s.selectionList=[];for(var t=0,e=this.s.panes;t<e.length;t++){var n=e[t];void 0!==n.s.dtPane&&this.s.selectionList.push({index:n.s.index,rows:n.s.dtPane.rows({selected:!0}).data().toArray(),protect:!1})}this.s.dt.state.save()},t.version="1.1.1",t.classes={clear:"dtsp-clear",clearAll:"dtsp-clearAll",container:"dtsp-searchPanes",emptyMessage:"dtsp-emptyMessage",hide:"dtsp-hidden",panes:"dtsp-panesContainer",search:"dtsp-search",title:"dtsp-title",titleRow:"dtsp-titleRow"},t.defaults={cascadePanes:!1,clear:!0,container:function(t){return t.table().container()},columns:[],filterChanged:void 0,layout:"columns-3",order:[],panes:[],viewTotal:!1},t}();
/*! SearchPanes 1.1.1
     * 2019-2020 SpryMedia Ltd - datatables.net/license
     */i=function(t,e,i){var l;n(t),s=l=t,r=l.fn.dataTable;var d=t.fn.dataTable;t.fn.dataTable.SearchPanes=a,t.fn.DataTable.SearchPanes=a,t.fn.dataTable.SearchPane=o,t.fn.DataTable.SearchPane=o,d.Api.register("searchPanes.rebuild()",(function(){return this.iterator("table",(function(){this.searchPanes&&this.searchPanes.rebuild()}))})),d.Api.register("column().paneOptions()",(function(t){return this.iterator("column",(function(e){var n=this.aoColumns[e];n.searchPanes||(n.searchPanes={}),n.searchPanes.values=t,this.searchPanes&&this.searchPanes.rebuild()}))}));var c=t.fn.dataTable.Api.register;function u(t,e){void 0===e&&(e=!1);var n=new d.Api(t),s=n.init().searchPanes||d.defaults.searchPanes;return new a(n,s,e).getNode()}c("searchPanes()",(function(){return this})),c("searchPanes.clearSelections()",(function(){return this.context[0]._searchPanes.clearSelections(),this})),c("searchPanes.rebuildPane()",(function(t,e){return this.context[0]._searchPanes.rebuild(t,e),this})),c("searchPanes.container()",(function(){return this.context[0]._searchPanes.getNode()})),t.fn.dataTable.ext.buttons.searchPanesClear={text:"Clear Panes",action:function(t,e,n,s){e.searchPanes.clearSelections()}},t.fn.dataTable.ext.buttons.searchPanes={action:function(t,e,n,s){t.stopPropagation(),this.popover(s._panes.getNode(),{align:"dt-container"})},config:{},init:function(e,n,s){var r=new t.fn.dataTable.SearchPanes(e,t.extend({filterChanged:function(t){e.button(n).text(e.i18n("searchPanes.collapse",{0:"SearchPanes",_:"SearchPanes (%d)"},t))}},s.config)),o=e.i18n("searchPanes.collapse","SearchPanes",0);e.button(n).text(o),s._panes=r},text:"Search Panes"},t(i).on("preInit.dt.dtsp",(function(t,e,n){"dt"===t.namespace&&(e.oInit.searchPanes||d.defaults.searchPanes)&&(e._searchPanes||u(e,!0))})),d.ext.feature.push({cFeature:"P",fnInit:u}),d.ext.features&&d.ext.features.register("searchPanes",u)},"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(t){return i(t,window,document)})):"object"==typeof exports?module.exports=function(t,e){return t||(t=window),e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),i(e,0,t.document)}:i(window.jQuery,window,document)}(),function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net-dt","datatables.net-searchPanes"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net-dt")(e,n).$),n.fn.dataTable.searchPanes||require("datatables.net-searchpanes")(e,n),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n){"use strict";return t.fn.dataTable.searchPanes})),
/*! Select for DataTables 1.3.1
 * 2015-2019 SpryMedia Ltd - datatables.net/license/mit
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,s){"use strict";var r=t.fn.dataTable;function o(t,e,n){var s,r,o,i=function(e,n){if(e>n){var s=n;n=e,e=s}var r=!1;return t.columns(":visible").indexes().filter((function(t){return t===e&&(r=!0),t===n?(r=!1,!0):r}))},a=function(e,n){var s=t.rows({search:"applied"}).indexes();if(s.indexOf(e)>s.indexOf(n)){var r=n;n=e,e=r}var o=!1;return s.filter((function(t){return t===e&&(o=!0),t===n?(o=!1,!0):o}))};t.cells({selected:!0}).any()||n?(r=i(n.column,e.column),o=a(n.row,e.row)):(r=i(0,e.column),o=a(0,e.row)),s=t.cells(o,r).flatten(),t.cells(e,{selected:!0}).any()?t.cells(s).deselect():t.cells(s).select()}function i(e){var n=e.settings()[0]._select.selector;t(e.table().container()).off("mousedown.dtSelect",n).off("mouseup.dtSelect",n).off("click.dtSelect",n),t("body").off("click.dtSelect"+f(e.table().node()))}function a(n){var s,r=t(n.table().container()),o=n.settings()[0],i=o._select.selector;r.on("mousedown.dtSelect",i,(function(t){(t.shiftKey||t.metaKey||t.ctrlKey)&&r.css("-moz-user-select","none").one("selectstart.dtSelect",i,(function(){return!1})),e.getSelection&&(s=e.getSelection())})).on("mouseup.dtSelect",i,(function(){r.css("-moz-user-select","")})).on("click.dtSelect",i,(function(r){var o,i=n.select.items();if(s){var a=e.getSelection();if((!a.anchorNode||t(a.anchorNode).closest("table")[0]===n.table().node())&&a!==s)return}var d=n.settings()[0],c=t.trim(n.settings()[0].oClasses.sWrapper).replace(/ +/g,".");if(t(r.target).closest("div."+c)[0]==n.table().container()){var u=n.cell(t(r.target).closest("td, th"));if(u.any()){var f=t.Event("user-select.dt");if(l(n,f,[i,u,r]),!f.isDefaultPrevented()){var p=u.index();"row"===i?(o=p.row,h(r,n,d,"row",o)):"column"===i?(o=u.index().column,h(r,n,d,"column",o)):"cell"===i&&(o=u.index(),h(r,n,d,"cell",o)),d._select_lastCell=p}}}})),t("body").on("click.dtSelect"+f(n.table().node()),(function(e){if(o._select.blurable){if(t(e.target).parents().filter(n.table().container()).length)return;if(0===t(e.target).parents("html").length)return;if(t(e.target).parents("div.DTE").length)return;u(o,!0)}}))}function l(e,n,s,r){r&&!e.flatten().length||("string"==typeof n&&(n+=".dt"),s.unshift(e),t(e.table().node()).trigger(n,s))}function d(e){var n=e.settings()[0];if(n._select.info&&n.aanFeatures.i&&"api"!==e.select.style()){var s=e.rows({selected:!0}).flatten().length,r=e.columns({selected:!0}).flatten().length,o=e.cells({selected:!0}).flatten().length,i=function(n,s,r){n.append(t('<span class="select-item"/>').append(e.i18n("select."+s+"s",{_:"%d "+s+"s selected",0:"",1:"1 "+s+" selected"},r)))};t.each(n.aanFeatures.i,(function(e,n){n=t(n);var a=t('<span class="select-info"/>');i(a,"row",s),i(a,"column",r),i(a,"cell",o);var l=n.children("span.select-info");l.length&&l.remove(),""!==a.text()&&n.append(a)}))}}function c(e,n,s,r){var o=e[n+"s"]({search:"applied"}).indexes(),i=t.inArray(r,o),a=t.inArray(s,o);if(e[n+"s"]({selected:!0}).any()||-1!==i){if(i>a){var l=a;a=i,i=l}o.splice(a+1,o.length),o.splice(0,i)}else o.splice(t.inArray(s,o)+1,o.length);e[n](s,{selected:!0}).any()?(o.splice(t.inArray(s,o),1),e[n+"s"](o).deselect()):e[n+"s"](o).select()}function u(t,e){if(e||"single"===t._select.style){var n=new r.Api(t);n.rows({selected:!0}).deselect(),n.columns({selected:!0}).deselect(),n.cells({selected:!0}).deselect()}}function h(t,e,n,s,r){var i=e.select.style(),a=e.select.toggleable(),l=e[s](r,{selected:!0}).any();if(!l||a)if("os"===i)if(t.ctrlKey||t.metaKey)e[s](r).select(!l);else if(t.shiftKey)"cell"===s?o(e,r,n._select_lastCell||null):c(e,s,r,n._select_lastCell?n._select_lastCell[s]:null);else{var d=e[s+"s"]({selected:!0});l&&1===d.flatten().length?e[s](r).deselect():(d.deselect(),e[s](r).select())}else"multi+shift"==i&&t.shiftKey?"cell"===s?o(e,r,n._select_lastCell||null):c(e,s,r,n._select_lastCell?n._select_lastCell[s]:null):e[s](r).select(!l)}function f(t){return t.id.replace(/[^a-zA-Z0-9\-\_]/g,"-")}r.select={},r.select.version="1.3.1",r.select.init=function(e){var n=e.settings()[0],o=n.oInit.select,i=r.defaults.select,a=o===s?i:o,l="row",d="api",c=!1,u=!0,h=!0,f="td, th",p="selected",m=!1;n._select={},!0===a?(d="os",m=!0):"string"==typeof a?(d=a,m=!0):t.isPlainObject(a)&&(a.blurable!==s&&(c=a.blurable),a.toggleable!==s&&(u=a.toggleable),a.info!==s&&(h=a.info),a.items!==s&&(l=a.items),a.style!==s?(d=a.style,m=!0):(d="os",m=!0),a.selector!==s&&(f=a.selector),a.className!==s&&(p=a.className)),e.select.selector(f),e.select.items(l),e.select.style(d),e.select.blurable(c),e.select.toggleable(u),e.select.info(h),n._select.className=p,t.fn.dataTable.ext.order["select-checkbox"]=function(e,n){return this.api().column(n,{order:"index"}).nodes().map((function(n){return"row"===e._select.items?t(n).parent().hasClass(e._select.className):"cell"===e._select.items&&t(n).hasClass(e._select.className)}))},!m&&t(e.table().node()).hasClass("selectable")&&e.select.style("os")},t.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],(function(t,e){r.ext.selector[e.type].push((function(t,n,s){var r,o=n.selected,i=[];if(!0!==o&&!1!==o)return s;for(var a=0,l=s.length;a<l;a++)r=t[e.prop][s[a]],(!0===o&&!0===r._select_selected||!1===o&&!r._select_selected)&&i.push(s[a]);return i}))})),r.ext.selector.cell.push((function(t,e,n){var r,o=e.selected,i=[];if(o===s)return n;for(var a=0,l=n.length;a<l;a++)r=t.aoData[n[a].row],(!0===o&&r._selected_cells&&!0===r._selected_cells[n[a].column]||!1===o&&(!r._selected_cells||!r._selected_cells[n[a].column]))&&i.push(n[a]);return i}));var p=r.Api.register,m=r.Api.registerPlural;function g(t,e){return function(n){return n.i18n("buttons."+t,e)}}function b(t){var e=t._eventNamespace;return"draw.dt.DT"+e+" select.dt.DT"+e+" deselect.dt.DT"+e}p("select()",(function(){return this.iterator("table",(function(t){r.select.init(new r.Api(t))}))})),p("select.blurable()",(function(t){return t===s?this.context[0]._select.blurable:this.iterator("table",(function(e){e._select.blurable=t}))})),p("select.toggleable()",(function(t){return t===s?this.context[0]._select.toggleable:this.iterator("table",(function(e){e._select.toggleable=t}))})),p("select.info()",(function(t){return d===s?this.context[0]._select.info:this.iterator("table",(function(e){e._select.info=t}))})),p("select.items()",(function(t){return t===s?this.context[0]._select.items:this.iterator("table",(function(e){e._select.items=t,l(new r.Api(e),"selectItems",[t])}))})),p("select.style()",(function(e){return e===s?this.context[0]._select.style:this.iterator("table",(function(n){n._select.style=e,n._select_init||function(e){var n=new r.Api(e);e.aoRowCreatedCallback.push({fn:function(n,s,r){var o,i,a=e.aoData[r];for(a._select_selected&&t(n).addClass(e._select.className),o=0,i=e.aoColumns.length;o<i;o++)(e.aoColumns[o]._select_selected||a._selected_cells&&a._selected_cells[o])&&t(a.anCells[o]).addClass(e._select.className)},sName:"select-deferRender"}),n.on("preXhr.dt.dtSelect",(function(){var t=n.rows({selected:!0}).ids(!0).filter((function(t){return t!==s})),e=n.cells({selected:!0}).eq(0).map((function(t){var e=n.row(t.row).id(!0);return e?{row:e,column:t.column}:s})).filter((function(t){return t!==s}));n.one("draw.dt.dtSelect",(function(){n.rows(t).select(),e.any()&&e.each((function(t){n.cells(t.row,t.column).select()}))}))})),n.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",(function(){d(n)})),n.on("destroy.dtSelect",(function(){i(n),n.off(".dtSelect")}))}(n);var o=new r.Api(n);i(o),"api"!==e&&a(o),l(new r.Api(n),"selectStyle",[e])}))})),p("select.selector()",(function(t){return t===s?this.context[0]._select.selector:this.iterator("table",(function(e){i(new r.Api(e)),e._select.selector=t,"api"!==e._select.style&&a(new r.Api(e))}))})),m("rows().select()","row().select()",(function(e){var n=this;return!1===e?this.deselect():(this.iterator("row",(function(e,n){u(e),e.aoData[n]._select_selected=!0,t(e.aoData[n].nTr).addClass(e._select.className)})),this.iterator("table",(function(t,e){l(n,"select",["row",n[e]],!0)})),this)})),m("columns().select()","column().select()",(function(e){var n=this;return!1===e?this.deselect():(this.iterator("column",(function(e,n){u(e),e.aoColumns[n]._select_selected=!0;var s=new r.Api(e).column(n);t(s.header()).addClass(e._select.className),t(s.footer()).addClass(e._select.className),s.nodes().to$().addClass(e._select.className)})),this.iterator("table",(function(t,e){l(n,"select",["column",n[e]],!0)})),this)})),m("cells().select()","cell().select()",(function(e){var n=this;return!1===e?this.deselect():(this.iterator("cell",(function(e,n,r){u(e);var o=e.aoData[n];o._selected_cells===s&&(o._selected_cells=[]),o._selected_cells[r]=!0,o.anCells&&t(o.anCells[r]).addClass(e._select.className)})),this.iterator("table",(function(t,e){l(n,"select",["cell",n[e]],!0)})),this)})),m("rows().deselect()","row().deselect()",(function(){var e=this;return this.iterator("row",(function(e,n){e.aoData[n]._select_selected=!1,t(e.aoData[n].nTr).removeClass(e._select.className)})),this.iterator("table",(function(t,n){l(e,"deselect",["row",e[n]],!0)})),this})),m("columns().deselect()","column().deselect()",(function(){var e=this;return this.iterator("column",(function(e,n){e.aoColumns[n]._select_selected=!1;var s=new r.Api(e),o=s.column(n);t(o.header()).removeClass(e._select.className),t(o.footer()).removeClass(e._select.className),s.cells(null,n).indexes().each((function(n){var s=e.aoData[n.row],r=s._selected_cells;!s.anCells||r&&r[n.column]||t(s.anCells[n.column]).removeClass(e._select.className)}))})),this.iterator("table",(function(t,n){l(e,"deselect",["column",e[n]],!0)})),this})),m("cells().deselect()","cell().deselect()",(function(){var e=this;return this.iterator("cell",(function(e,n,s){var r=e.aoData[n];r._selected_cells[s]=!1,r.anCells&&!e.aoColumns[s]._select_selected&&t(r.anCells[s]).removeClass(e._select.className)})),this.iterator("table",(function(t,n){l(e,"deselect",["cell",e[n]],!0)})),this}));var v=0;return t.extend(r.ext.buttons,{selected:{text:g("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(e,n,s){var r=this;s._eventNamespace=".select"+v++,e.on(b(s),(function(){r.enable(function(e,n){return!(-1===t.inArray("rows",n.limitTo)||!e.rows({selected:!0}).any())||(!(-1===t.inArray("columns",n.limitTo)||!e.columns({selected:!0}).any())||!(-1===t.inArray("cells",n.limitTo)||!e.cells({selected:!0}).any()))}(e,s))})),this.disable()},destroy:function(t,e,n){t.off(n._eventNamespace)}},selectedSingle:{text:g("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(t,e,n){var s=this;n._eventNamespace=".select"+v++,t.on(b(n),(function(){var e=t.rows({selected:!0}).flatten().length+t.columns({selected:!0}).flatten().length+t.cells({selected:!0}).flatten().length;s.enable(1===e)})),this.disable()},destroy:function(t,e,n){t.off(n._eventNamespace)}},selectAll:{text:g("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:g("selectNone","Deselect all"),className:"buttons-select-none",action:function(){u(this.settings()[0],!0)},init:function(t,e,n){var s=this;n._eventNamespace=".select"+v++,t.on(b(n),(function(){var e=t.rows({selected:!0}).flatten().length+t.columns({selected:!0}).flatten().length+t.cells({selected:!0}).flatten().length;s.enable(e>0)})),this.disable()},destroy:function(t,e,n){t.off(n._eventNamespace)}}}),t.each(["Row","Column","Cell"],(function(t,e){var n=e.toLowerCase();r.ext.buttons["select"+e+"s"]={text:g("select"+e+"s","Select "+n+"s"),className:"buttons-select-"+n+"s",action:function(){this.select.items(n)},init:function(t){var e=this;t.on("selectItems.dt.DT",(function(t,s,r){e.active(r===n)}))}}})),t(n).on("preInit.dt.dtSelect",(function(t,e){"dt"===t.namespace&&r.select.init(new r.Api(e))})),r.select}));
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],(function(t){return e(function(){try{return t("moment")}catch(t){}}())})):(t=t||self).Chart=e(t.moment)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(t,e){return t(e={exports:{}}),e.exports}((function(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[e[i]]=i);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var r in a)if(a.hasOwnProperty(r)){if(!("channels"in a[r]))throw new Error("missing channels property: "+r);if(!("labels"in a[r]))throw new Error("missing channel labels property: "+r);if(a[r].labels.length!==a[r].channels)throw new Error("channel and label counts mismatch: "+r);var o=a[r].channels,s=a[r].labels;delete a[r].channels,delete a[r].labels,Object.defineProperty(a[r],"channels",{value:o}),Object.defineProperty(a[r],"labels",{value:s})}a.rgb.hsl=function(t){var e,n,i=t[0]/255,a=t[1]/255,r=t[2]/255,o=Math.min(i,a,r),s=Math.max(i,a,r),l=s-o;return s===o?e=0:i===s?e=(a-r)/l:a===s?e=2+(r-i)/l:r===s&&(e=4+(i-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]},a.rgb.hsv=function(t){var e,n,i,a,r,o=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(o,s,l),d=u-Math.min(o,s,l),h=function(t){return(u-t)/6/d+.5};return 0===d?a=r=0:(r=d/u,e=h(o),n=h(s),i=h(l),o===u?a=i-n:s===u?a=1/3+e-i:l===u&&(a=2/3+n-e),a<0?a+=1:a>1&&(a-=1)),[360*a,100*r,100*u]},a.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[a.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,i))*100,100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},a.rgb.cmyk=function(t){var e,n=t[0]/255,i=t[1]/255,a=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-i,1-a)))/(1-e)||0),100*((1-i-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var i=n[t];if(i)return i;var a,r,o,s=1/0;for(var l in e)if(e.hasOwnProperty(l)){var u=(r=t,o=e[l],Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)+Math.pow(r[2]-o[2],2));u<s&&(s=u,a=l)}return a},a.keyword.rgb=function(t){return e[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),n=e[0],i=e[1],r=e[2];return i/=100,r/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.hsl.rgb=function(t){var e,n,i,a,r,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[r=255*l,r,r];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var u=0;u<3;u++)(i=o+1/3*-(u-1))<0&&i++,i>1&&i--,r=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,a[u]=255*r;return a},a.hsl.hsv=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,a=n,r=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,a*=r<=1?r:2-r,[e,100*(0===i?2*a/(r+a):2*n/(i+n)),(i+n)/2*100]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,a=Math.floor(e)%6,r=e-Math.floor(e),o=255*i*(1-n),s=255*i*(1-n*r),l=255*i*(1-n*(1-r));switch(i*=255,a){case 0:return[i,l,o];case 1:return[s,i,o];case 2:return[o,i,l];case 3:return[o,s,i];case 4:return[l,o,i];case 5:return[i,o,s]}},a.hsv.hsl=function(t){var e,n,i,a=t[0],r=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return i=(2-r)*o,n=r*s,[a,100*(n=(n/=(e=(2-r)*s)<=1?e:2-e)||0),100*(i/=2)]},a.hwb.rgb=function(t){var e,n,i,a,r,o,s,l=t[0]/360,u=t[1]/100,d=t[2]/100,h=u+d;switch(h>1&&(u/=h,d/=h),i=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(i=1-i),a=u+i*((n=1-d)-u),e){default:case 6:case 0:r=n,o=a,s=u;break;case 1:r=a,o=n,s=u;break;case 2:r=u,o=n,s=a;break;case 3:r=u,o=a,s=n;break;case 4:r=a,o=u,s=n;break;case 5:r=n,o=u,s=a}return[255*r,255*o,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a))]},a.xyz.rgb=function(t){var e,n,i,a=t[0]/100,r=t[1]/100,o=t[2]/100;return n=-.9689*a+1.8758*r+.0415*o,i=.0557*a+-.204*r+1.057*o,e=(e=3.2406*a+-1.5372*r+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},a.xyz.lab=function(t){var e=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.lab.xyz=function(t){var e,n,i,a=t[0];e=t[1]/500+(n=(a+16)/116),i=n-t[2]/200;var r=Math.pow(n,3),o=Math.pow(e,3),s=Math.pow(i,3);return n=r>.008856?r:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,[e*=95.047,n*=100,i*=108.883]},a.lab.lch=function(t){var e,n=t[0],i=t[1],a=t[2];return(e=360*Math.atan2(a,i)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(i*i+a*a),e]},a.lch.lab=function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],r=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===r&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],i=t[2];return e===n&&n===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},a.rgb.hcg=function(t){var e,n=t[0]/255,i=t[1]/255,a=t[2]/255,r=Math.max(Math.max(n,i),a),o=Math.min(Math.min(n,i),a),s=r-o;return e=s<=0?0:r===n?(i-a)/s%6:r===i?2+(a-n)/s:4+(n-i)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},a.hsl.hcg=function(t){var e,n=t[1]/100,i=t[2]/100,a=0;return(e=i<.5?2*n*i:2*n*(1-i))<1&&(a=(i-.5*e)/(1-e)),[t[0],100*e,100*a]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=e*n,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],100*i,100*a]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100;if(0===n)return[255*i,255*i,255*i];var a,r=[0,0,0],o=e%1*6,s=o%1,l=1-s;switch(Math.floor(o)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=l,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=l,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=l}return a=(1-n)*i,[255*(n*r[0]+a),255*(n*r[1]+a),255*(n*r[2]+a)]},a.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),i=0;return n>0&&(i=e/n),[t[0],100*i,100*n]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],100*i,100*n]},a.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},a.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],100*i,100*a]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function i(t){var e=function(){for(var t={},e=Object.keys(n),i=e.length,a=0;a<i;a++)t[e[a]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var a=i.pop(),r=Object.keys(n[a]),o=r.length,s=0;s<o;s++){var l=r[s],u=e[l];-1===u.distance&&(u.distance=e[a].distance+1,u.parent=a,i.unshift(l))}return e}function a(t,e){return function(n){return e(t(n))}}function r(t,e){for(var i=[e[t].parent,t],r=n[e[t].parent][t],o=e[t].parent;e[o].parent;)i.unshift(e[o].parent),r=a(n[e[o].parent][o],r),o=e[o].parent;return r.conversion=i,r}n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;var o={};Object.keys(n).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:n[t].channels}),Object.defineProperty(o[t],"labels",{value:n[t].labels});var e=function(t){for(var e=i(t),n={},a=Object.keys(e),o=a.length,s=0;s<o;s++){var l=a[s];null!==e[l].parent&&(n[l]=r(l,e))}return n}(t);Object.keys(e).forEach((function(n){var i=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var i=n.length,a=0;a<i;a++)n[a]=Math.round(n[a]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(i),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(i)}))}));var s=o,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},u={getRgba:d,getHsla:h,getRgb:function(t){var e=d(t);return e&&e.slice(0,3)},getHsl:function(t){var e=h(t);return e&&e.slice(0,3)},getHwb:c,getAlpha:function(t){var e=d(t);return e||(e=h(t))||(e=c(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+v(t[0])+v(t[1])+v(t[2])+(e>=0&&e<1?v(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?f(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:f,percentString:function(t,e){return e<1||t[3]&&t[3]<1?g(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:g,hslString:function(t,e){return e<1||t[3]&&t[3]<1?p(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:p,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return b[t.slice(0,3)]}};function d(t){if(t){var e=[0,0,0],n=1,i=t.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(i){a=(i=i[1])[3];for(var r=0;r<e.length;r++)e[r]=parseInt(i[r]+i[r],16);a&&(n=Math.round(parseInt(a+a,16)/255*100)/100)}else if(i=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(a=i[2],i=i[1],r=0;r<e.length;r++)e[r]=parseInt(i.slice(2*r,2*r+2),16);a&&(n=Math.round(parseInt(a,16)/255*100)/100)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=parseInt(i[r+1]);n=parseFloat(i[4])}else if(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<e.length;r++)e[r]=Math.round(2.55*parseFloat(i[r+1]));n=parseFloat(i[4])}else if(i=t.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(e=l[i[1]]))return}for(r=0;r<e.length;r++)e[r]=m(e[r],0,255);return n=n||0==n?m(n,0,1):1,e[3]=n,e}}function h(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function c(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[m(parseInt(e[1]),0,360),m(parseFloat(e[2]),0,100),m(parseFloat(e[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function f(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function g(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function p(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function m(t,e,n){return Math.min(Math.max(e,t),n)}function v(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var b={};for(var x in l)b[l[x]]=x;var y=function(t){return t instanceof y?t:this instanceof y?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=u.getRgba(t))?this.setValues("rgb",e):(e=u.getHsla(t))?this.setValues("hsl",e):(e=u.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new y(t);var e};y.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return u.hexString(this.values.rgb)},rgbString:function(){return u.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return u.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return u.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return u.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return u.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return u.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return u.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=t,i=void 0===e?.5:e,a=2*i-1,r=this.alpha()-n.alpha(),o=((a*r==-1?a:(a+r)/(1+a*r))+1)/2,s=1-o;return this.rgb(o*this.red()+s*n.red(),o*this.green()+s*n.green(),o*this.blue()+s*n.blue()).alpha(this.alpha()*i+n.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new y,i=this.values,a=n.values;for(var r in i)i.hasOwnProperty(r)&&(t=i[r],"[object Array]"===(e={}.toString.call(t))?a[r]=t.slice(0):"[object Number]"===e?a[r]=t:console.error("unexpected color value:",t));return n}},y.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},y.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},y.prototype.getValues=function(t){for(var e=this.values,n={},i=0;i<t.length;i++)n[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(n.a=e.alpha),n},y.prototype.setValues=function(t,e){var n,i,a=this.values,r=this.spaces,o=this.maxes,l=1;if(this.valid=!0,"alpha"===t)l=e;else if(e.length)a[t]=e.slice(0,t.length),l=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)a[t][n]=e[t.charAt(n)];l=e.a}else if(void 0!==e[r[t][0]]){var u=r[t];for(n=0;n<t.length;n++)a[t][n]=e[u[n]];l=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===l?a.alpha:l)),"alpha"===t)return!1;for(n=0;n<t.length;n++)i=Math.max(0,Math.min(o[t][n],a[t][n])),a[t][n]=Math.round(i);for(var d in r)d!==t&&(a[d]=s[t][d](a[t]));return!0},y.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},y.prototype.setChannel=function(t,e,n){var i=this.values[t];return void 0===n?i[e]:(n===i[e]||(i[e]=n,this.setValues(t,i)),this)},"undefined"!=typeof window&&(window.Color=y);var _,k=y,w={noop:function(){},uid:(_=0,function(){return _++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,n){return w.valueOrDefault(w.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)},each:function(t,e,n,i){var a,r,o;if(w.isArray(t))if(r=t.length,i)for(a=r-1;a>=0;a--)e.call(n,t[a],a);else for(a=0;a<r;a++)e.call(n,t[a],a);else if(w.isObject(t))for(r=(o=Object.keys(t)).length,a=0;a<r;a++)e.call(n,t[o[a]],o[a])},arrayEquals:function(t,e){var n,i,a,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],r=e[n],a instanceof Array&&r instanceof Array){if(!w.arrayEquals(a,r))return!1}else if(a!==r)return!1;return!0},clone:function(t){if(w.isArray(t))return t.map(w.clone);if(w.isObject(t)){for(var e={},n=Object.keys(t),i=n.length,a=0;a<i;++a)e[n[a]]=w.clone(t[n[a]]);return e}return t},_merger:function(t,e,n,i){var a=e[t],r=n[t];w.isObject(a)&&w.isObject(r)?w.merge(a,r,i):e[t]=w.clone(r)},_mergerIf:function(t,e,n){var i=e[t],a=n[t];w.isObject(i)&&w.isObject(a)?w.mergeIf(i,a):e.hasOwnProperty(t)||(e[t]=w.clone(a))},merge:function(t,e,n){var i,a,r,o,s,l=w.isArray(e)?e:[e],u=l.length;if(!w.isObject(t))return t;for(i=(n=n||{}).merger||w._merger,a=0;a<u;++a)if(e=l[a],w.isObject(e))for(s=0,o=(r=Object.keys(e)).length;s<o;++s)i(r[s],t,e,n);return t},mergeIf:function(t,e){return w.merge(t,e,{merger:w._mergerIf})},extend:Object.assign||function(t){return w.merge(t,[].slice.call(arguments,1),{merger:function(t,e,n){e[t]=n[t]}})},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=w.inherits,t&&w.extend(n.prototype,t),n.__super__=e.prototype,n},_deprecated:function(t,e,n,i){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+i+'" instead')}},M=w;w.callCallback=w.callback,w.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},w.getValueOrDefault=w.valueOrDefault,w.getValueAtIndexOrDefault=w.valueAtIndexOrDefault;var S={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.45),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-S.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*S.easeInBounce(2*t):.5*S.easeOutBounce(2*t-1)+.5}},C={effects:S};M.easingEffects=S;var P=Math.PI,A=P/180,D=2*P,T=P/2,I=P/4,F=2*P/3,L={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,i,a,r){if(r){var o=Math.min(r,a/2,i/2),s=e+o,l=n+o,u=e+i-o,d=n+a-o;t.moveTo(e,l),s<u&&l<d?(t.arc(s,l,o,-P,-T),t.arc(u,l,o,-T,0),t.arc(u,d,o,0,T),t.arc(s,d,o,T,P)):s<u?(t.moveTo(s,n),t.arc(u,l,o,-T,T),t.arc(s,l,o,T,P+T)):l<d?(t.arc(s,l,o,-P,0),t.arc(s,d,o,0,P)):t.arc(s,l,o,-P,P),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,i,a)},drawPoint:function(t,e,n,i,a,r){var o,s,l,u,d,h=(r||0)*A;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(o=e.toString())||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,a),t.rotate(h),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(n)||n<=0)){switch(t.beginPath(),e){default:t.arc(i,a,n,0,D),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(h)*n,a-Math.cos(h)*n),h+=F,t.lineTo(i+Math.sin(h)*n,a-Math.cos(h)*n),h+=F,t.lineTo(i+Math.sin(h)*n,a-Math.cos(h)*n),t.closePath();break;case"rectRounded":u=n-(d=.516*n),s=Math.cos(h+I)*u,l=Math.sin(h+I)*u,t.arc(i-s,a-l,d,h-P,h-T),t.arc(i+l,a-s,d,h-T,h),t.arc(i+s,a+l,d,h,h+T),t.arc(i-l,a+s,d,h+T,h+P),t.closePath();break;case"rect":if(!r){u=Math.SQRT1_2*n,t.rect(i-u,a-u,2*u,2*u);break}h+=I;case"rectRot":s=Math.cos(h)*n,l=Math.sin(h)*n,t.moveTo(i-s,a-l),t.lineTo(i+l,a-s),t.lineTo(i+s,a+l),t.lineTo(i-l,a+s),t.closePath();break;case"crossRot":h+=I;case"cross":s=Math.cos(h)*n,l=Math.sin(h)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s);break;case"star":s=Math.cos(h)*n,l=Math.sin(h)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s),h+=I,s=Math.cos(h)*n,l=Math.sin(h)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s);break;case"line":s=Math.cos(h)*n,l=Math.sin(h)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l);break;case"dash":t.moveTo(i,a),t.lineTo(i+Math.cos(h)*n,a+Math.sin(h)*n)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,i){var a=n.steppedLine;if(a){if("middle"===a){var r=(e.x+n.x)/2;t.lineTo(r,i?n.y:e.y),t.lineTo(r,i?e.y:n.y)}else"after"===a&&!i||"after"!==a&&i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}else n.tension?t.bezierCurveTo(i?e.controlPointPreviousX:e.controlPointNextX,i?e.controlPointPreviousY:e.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}},O=L;M.clear=L.clear,M.drawRoundedRectangle=function(t){t.beginPath(),L.roundedRect.apply(L,arguments)};var R={_set:function(t,e){return M.merge(this[t]||(this[t]={}),e)}};R._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var z=R,N=M.valueOrDefault,B={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,i,a;return M.isObject(t)?(e=+t.top||0,n=+t.right||0,i=+t.bottom||0,a=+t.left||0):e=n=i=a=+t||0,{top:e,right:n,bottom:i,left:a,height:e+i,width:a+n}},_parseFont:function(t){var e=z.global,n=N(t.fontSize,e.defaultFontSize),i={family:N(t.fontFamily,e.defaultFontFamily),lineHeight:M.options.toLineHeight(N(t.lineHeight,e.defaultLineHeight),n),size:n,style:N(t.fontStyle,e.defaultFontStyle),weight:null,string:""};return i.string=function(t){return!t||M.isNullOrUndef(t.size)||M.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i},resolve:function(t,e,n,i){var a,r,o,s=!0;for(a=0,r=t.length;a<r;++a)if(void 0!==(o=t[a])&&(void 0!==e&&"function"==typeof o&&(o=o(e),s=!1),void 0!==n&&M.isArray(o)&&(o=o[n],s=!1),void 0!==o))return i&&!s&&(i.cacheable=!1),o}},E={_factorize:function(t){var e,n=[],i=Math.sqrt(t);for(e=1;e<i;e++)t%e==0&&(n.push(e),n.push(t/e));return i===(0|i)&&n.push(i),n.sort((function(t,e){return t-e})).pop(),n},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,n=Math.round(e);return t===Math.pow(10,n)?n:e}},W=E;M.log10=E.log10;var V=M,H=C,j=O,q=B,U=W;V.easing=H,V.canvas=j,V.options=q,V.math=U,V.rtl={getRtlAdapter:function(t,e,n){return t?function(t,e){return{x:function(n){return t+t+e-n},setWidth:function(t){e=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}}(e,n):{x:function(t){return t},setWidth:function(t){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t,e){return t}}},overrideTextDirection:function(t,e){var n,i;"ltr"!==e&&"rtl"!==e||(i=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};var Y=function(t){V.extend(this,t),this.initialize.apply(this,arguments)};V.extend(Y.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=V.extend({},t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,i=e._start,a=e._view;return n&&1!==t?(a||(a=e._view={}),i||(i=e._start={}),function(t,e,n,i){var a,r,o,s,l,u,d,h,c,f=Object.keys(n);for(a=0,r=f.length;a<r;++a)if(u=n[o=f[a]],e.hasOwnProperty(o)||(e[o]=u),(s=e[o])!==u&&"_"!==o[0]){if(t.hasOwnProperty(o)||(t[o]=s),(d=typeof u)==typeof(l=t[o]))if("string"===d){if((h=k(l)).valid&&(c=k(u)).valid){e[o]=c.mix(h,i).rgbString();continue}}else if(V.isFinite(l)&&V.isFinite(u)){e[o]=l+(u-l)*i;continue}e[o]=u}}(i,a,n,t),e):(e._view=V.extend({},n),e._start=null,e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return V.isNumber(this._model.x)&&V.isNumber(this._model.y)}}),Y.extend=V.inherits;var G=Y,X=G.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),K=X;Object.defineProperty(X.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(X.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),z._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:V.noop,onComplete:V.noop}});var Z={animations:[],request:null,addAnimation:function(t,e,n,i){var a,r,o=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=n,i||(t.animating=!0),a=0,r=o.length;a<r;++a)if(o[a].chart===t)return void(o[a]=e);o.push(e),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(t){var e=V.findIndex(this.animations,(function(e){return e.chart===t}));-1!==e&&(this.animations.splice(e,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=V.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var t,e,n,i,a=this.animations,r=0;r<a.length;)e=(t=a[r]).chart,n=t.numSteps,i=Math.floor((Date.now()-t.startTime)/t.duration*n)+1,t.currentStep=Math.min(i,n),V.callback(t.render,[e,t],e),V.callback(t.onAnimationProgress,[t],e),t.currentStep>=n?(V.callback(t.onAnimationComplete,[t],e),e.animating=!1,a.splice(r,1)):++r}},$=V.options.resolve,J=["push","pop","shift","splice","unshift"];function Q(t,e){var n=t._chartjs;if(n){var i=n.listeners,a=i.indexOf(e);-1!==a&&i.splice(a,1),i.length>0||(J.forEach((function(e){delete t[e]})),delete t._chartjs)}}var tt=function(t,e){this.initialize(t,e)};V.extend(tt.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,n=e.scales,i=this.getDataset(),a=e.options.scales;null!==t.xAxisID&&t.xAxisID in n&&!i.xAxisID||(t.xAxisID=i.xAxisID||a.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in n&&!i.yAxisID||(t.yAxisID=i.yAxisID||a.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Q(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,n=this.getMeta(),i=this.getDataset().data||[],a=n.data;for(t=0,e=i.length;t<e;++t)a[t]=a[t]||this.createMetaData(t);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t,e,n=this,i=n.getDataset(),a=i.data||(i.data=[]);n._data!==a&&(n._data&&Q(n._data,n),a&&Object.isExtensible(a)&&(e=n,(t=a)._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),J.forEach((function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),a=i.apply(this,e);return V.each(t._chartjs.listeners,(function(t){"function"==typeof t[n]&&t[n].apply(t,e)})),a}})})))),n._data=a),n.resyncElements()},_configure:function(){this._config=V.merge({},[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,n){"_meta"!==t&&"data"!==t&&V._merger(t,e,n)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:V.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],i=n.length,a=0;a<i;++a)n[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,i=0;for(t.dataset&&t.dataset.draw();i<n;++i)e[i].draw()},getStyle:function(t){var e,n=this.getMeta(),i=n.dataset;return this._configure(),i&&void 0===t?e=this._resolveDatasetElementOptions(i||{}):(t=t||0,e=this._resolveDataElementOptions(n.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var n,i,a,r,o=this,s=o.chart,l=o._config,u=t.custom||{},d=s.options.elements[o.datasetElementType.prototype._type]||{},h=o._datasetElementOptions,c={},f={chart:s,dataset:o.getDataset(),datasetIndex:o.index,hover:e};for(n=0,i=h.length;n<i;++n)a=h[n],r=e?"hover"+a.charAt(0).toUpperCase()+a.slice(1):a,c[a]=$([u[r],l[r],d[r]],f);return c},_resolveDataElementOptions:function(t,e){var n=this,i=t&&t.custom,a=n._cachedDataOpts;if(a&&!i)return a;var r,o,s,l,u=n.chart,d=n._config,h=u.options.elements[n.dataElementType.prototype._type]||{},c=n._dataElementOptions,f={},g={chart:u,dataIndex:e,dataset:n.getDataset(),datasetIndex:n.index},p={cacheable:!i};if(i=i||{},V.isArray(c))for(o=0,s=c.length;o<s;++o)f[l=c[o]]=$([i[l],d[l],h[l]],g,e,p);else for(o=0,s=(r=Object.keys(c)).length;o<s;++o)f[l=r[o]]=$([i[l],d[c[l]],d[l],h[l]],g,e,p);return p.cacheable&&(n._cachedDataOpts=Object.freeze(f)),f},removeHoverStyle:function(t){V.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},a=t._model,r=V.getHoverColor;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=$([i.hoverBackgroundColor,e.hoverBackgroundColor,r(a.backgroundColor)],void 0,n),a.borderColor=$([i.hoverBorderColor,e.hoverBorderColor,r(a.borderColor)],void 0,n),a.borderWidth=$([i.hoverBorderWidth,e.hoverBorderWidth,a.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,n,i,a,r,o=this.getMeta().dataset,s={};if(o){for(r=o._model,a=this._resolveDatasetElementOptions(o,!0),t=0,e=(i=Object.keys(a)).length;t<e;++t)s[n=i[t]]=r[n],r[n]=a[n];o.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,n=t.data.length,i=e.length;i<n?t.data.splice(i,n-i):i>n&&this.insertElements(n,i-n)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){var t=arguments.length;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),tt.extend=V.inherits;var et=tt,nt=2*Math.PI;function it(t,e){var n=e.startAngle,i=e.endAngle,a=e.pixelMargin,r=a/e.outerRadius,o=e.x,s=e.y;t.beginPath(),t.arc(o,s,e.outerRadius,n-r,i+r),e.innerRadius>a?(r=a/e.innerRadius,t.arc(o,s,e.innerRadius-a,i+r,n-r,!0)):t.arc(o,s,a,i+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip()}z._set("global",{elements:{arc:{backgroundColor:z.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var at=G.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var i=V.getAngleFromPoint(n,{x:t,y:e}),a=i.angle,r=i.distance,o=n.startAngle,s=n.endAngle;s<o;)s+=nt;for(;a>s;)a-=nt;for(;a<o;)a+=nt;var l=a>=o&&a<=s,u=r>=n.innerRadius&&r<=n.outerRadius;return l&&u}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t,e=this._chart.ctx,n=this._view,i="inner"===n.borderAlign?.33:0,a={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-i,0),pixelMargin:i,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/nt)};if(e.save(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,a.fullCircles){for(a.endAngle=a.startAngle+nt,e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),t=0;t<a.fullCircles;++t)e.fill();a.endAngle=a.startAngle+n.circumference%nt}e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.fill(),n.borderWidth&&function(t,e,n){var i="inner"===e.borderAlign;i?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),n.fullCircles&&function(t,e,n,i){var a,r=n.endAngle;for(i&&(n.endAngle=n.startAngle+nt,it(t,n),n.endAngle=r,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=nt,n.fullCircles--)),t.beginPath(),t.arc(n.x,n.y,n.innerRadius,n.startAngle+nt,n.startAngle,!0),a=0;a<n.fullCircles;++a)t.stroke();for(t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.startAngle+nt),a=0;a<n.fullCircles;++a)t.stroke()}(t,e,n,i),i&&it(t,n),t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.stroke()}(e,n,a),e.restore()}}),rt=V.valueOrDefault,ot=z.global.defaultColor;z._set("global",{elements:{line:{tension:.4,backgroundColor:ot,borderWidth:3,borderColor:ot,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var st=G.extend({_type:"line",draw:function(){var t,e,n,i=this,a=i._view,r=i._chart.ctx,o=a.spanGaps,s=i._children.slice(),l=z.global,u=l.elements.line,d=-1,h=i._loop;if(s.length){if(i._loop){for(t=0;t<s.length;++t)if(e=V.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),h=o;break}h&&s.push(s[0])}for(r.save(),r.lineCap=a.borderCapStyle||u.borderCapStyle,r.setLineDash&&r.setLineDash(a.borderDash||u.borderDash),r.lineDashOffset=rt(a.borderDashOffset,u.borderDashOffset),r.lineJoin=a.borderJoinStyle||u.borderJoinStyle,r.lineWidth=rt(a.borderWidth,u.borderWidth),r.strokeStyle=a.borderColor||l.defaultColor,r.beginPath(),(n=s[0]._view).skip||(r.moveTo(n.x,n.y),d=0),t=1;t<s.length;++t)n=s[t]._view,e=-1===d?V.previousItem(s,t):s[d],n.skip||(d!==t-1&&!o||-1===d?r.moveTo(n.x,n.y):V.canvas.lineTo(r,e._view,n),d=t);h&&r.closePath(),r.stroke(),r.restore()}}}),lt=V.valueOrDefault,ut=z.global.defaultColor;function dt(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}z._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ut,borderColor:ut,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var ht=G.extend({_type:"point",inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:dt,inXRange:dt,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._chart.ctx,i=e.pointStyle,a=e.rotation,r=e.radius,o=e.x,s=e.y,l=z.global,u=l.defaultColor;e.skip||(void 0===t||V.canvas._isPointInArea(e,t))&&(n.strokeStyle=e.borderColor||u,n.lineWidth=lt(e.borderWidth,l.elements.point.borderWidth),n.fillStyle=e.backgroundColor||u,V.canvas.drawPoint(n,i,r,o,s,a))}}),ct=z.global.defaultColor;function ft(t){return t&&void 0!==t.width}function gt(t){var e,n,i,a,r;return ft(t)?(r=t.width/2,e=t.x-r,n=t.x+r,i=Math.min(t.y,t.base),a=Math.max(t.y,t.base)):(r=t.height/2,e=Math.min(t.x,t.base),n=Math.max(t.x,t.base),i=t.y-r,a=t.y+r),{left:e,top:i,right:n,bottom:a}}function pt(t,e,n){return t===e?n:t===n?e:t}function mt(t,e,n){var i=null===e,a=null===n,r=!(!t||i&&a)&&gt(t);return r&&(i||e>=r.left&&e<=r.right)&&(a||n>=r.top&&n<=r.bottom)}z._set("global",{elements:{rectangle:{backgroundColor:ct,borderColor:ct,borderSkipped:"bottom",borderWidth:0}}});var vt=G.extend({_type:"rectangle",draw:function(){var t=this._chart.ctx,e=this._view,n=function(t){var e=gt(t),n=e.right-e.left,i=e.bottom-e.top,a=function(t,e,n){var i,a,r,o,s=t.borderWidth,l=function(t){var e=t.borderSkipped,n={};return e?(t.horizontal?t.base>t.x&&(e=pt(e,"left","right")):t.base<t.y&&(e=pt(e,"bottom","top")),n[e]=!0,n):n}(t);return V.isObject(s)?(i=+s.top||0,a=+s.right||0,r=+s.bottom||0,o=+s.left||0):i=a=r=o=+s||0,{t:l.top||i<0?0:i>n?n:i,r:l.right||a<0?0:a>e?e:a,b:l.bottom||r<0?0:r>n?n:r,l:l.left||o<0?0:o>e?e:o}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:i-a.t-a.b}}}(e),i=n.outer,a=n.inner;t.fillStyle=e.backgroundColor,t.fillRect(i.x,i.y,i.w,i.h),i.w===a.w&&i.h===a.h||(t.save(),t.beginPath(),t.rect(i.x,i.y,i.w,i.h),t.clip(),t.fillStyle=e.borderColor,t.rect(a.x,a.y,a.w,a.h),t.fill("evenodd"),t.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return mt(this._view,t,e)},inLabelRange:function(t,e){var n=this._view;return ft(n)?mt(n,t,null):mt(n,null,e)},inXRange:function(t){return mt(this._view,t,null)},inYRange:function(t){return mt(this._view,null,t)},getCenterPoint:function(){var t,e,n=this._view;return ft(n)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return ft(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),bt={},xt=at,yt=st,_t=ht,kt=vt;bt.Arc=xt,bt.Line=yt,bt.Point=_t,bt.Rectangle=kt;var wt=V._deprecated,Mt=V.valueOrDefault;z._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),z._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var St=et.extend({dataElementType:bt.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,n=this;et.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0,e=n._getIndexScale().options,wt("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),wt("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),wt("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),wt("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),wt("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,n,i=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,n=i.length;e<n;++e)this.updateElement(i[e],e,t)},updateElement:function(t,e,n){var i=this,a=i.getMeta(),r=i.getDataset(),o=i._resolveDataElementOptions(t,e);t._xScale=i.getScaleForId(a.xAxisID),t._yScale=i.getScaleForId(a.yAxisID),t._datasetIndex=i.index,t._index=e,t._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:r.label,label:i.chart.data.labels[e]},V.isArray(r.data[e])&&(t._model.borderSkipped=null),i._updateElementGeometry(t,e,n,o),t.pivot()},_updateElementGeometry:function(t,e,n,i){var a=this,r=t._model,o=a._getValueScale(),s=o.getBasePixel(),l=o.isHorizontal(),u=a._ruler||a.getRuler(),d=a.calculateBarValuePixels(a.index,e,i),h=a.calculateBarIndexPixels(a.index,e,u,i);r.horizontal=l,r.base=n?s:d.base,r.x=l?n?s:d.head:h.center,r.y=l?h.center:n?s:d.head,r.height=l?h.size:void 0,r.width=l?void 0:h.size},_getStacks:function(t){var e,n,i=this._getIndexScale(),a=i._getMatchingVisibleMetas(this._type),r=i.options.stacked,o=a.length,s=[];for(e=0;e<o&&(n=a[e],(!1===r||-1===s.indexOf(n.stack)||void 0===r&&void 0===n.stack)&&s.push(n.stack),n.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var n=this._getStacks(t),i=void 0!==e?n.indexOf(e):-1;return-1===i?n.length-1:i},getRuler:function(){var t,e,n=this._getIndexScale(),i=[];for(t=0,e=this.getMeta().data.length;t<e;++t)i.push(n.getPixelForValue(null,t,this.index));return{pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(t,e,n){var i,a,r,o,s,l,u,d=this.chart,h=this._getValueScale(),c=h.isHorizontal(),f=d.data.datasets,g=h._getMatchingVisibleMetas(this._type),p=h._parseValue(f[t].data[e]),m=n.minBarLength,v=h.options.stacked,b=this.getMeta().stack,x=void 0===p.start?0:p.max>=0&&p.min>=0?p.min:p.max,y=void 0===p.start?p.end:p.max>=0&&p.min>=0?p.max-p.min:p.min-p.max,_=g.length;if(v||void 0===v&&void 0!==b)for(i=0;i<_&&(a=g[i]).index!==t;++i)a.stack===b&&(r=void 0===(u=h._parseValue(f[a.index].data[e])).start?u.end:u.min>=0&&u.max>=0?u.max:u.min,(p.min<0&&r<0||p.max>=0&&r>0)&&(x+=r));return o=h.getPixelForValue(x),l=(s=h.getPixelForValue(x+y))-o,void 0!==m&&Math.abs(l)<m&&(l=m,s=y>=0&&!c||y<0&&c?o-m:o+m),{size:l,base:o,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,n,i){var a="flex"===i.barThickness?function(t,e,n){var i,a=e.pixels,r=a[t],o=t>0?a[t-1]:null,s=t<a.length-1?a[t+1]:null,l=n.categoryPercentage;return null===o&&(o=r-(null===s?e.end-e.start:s-r)),null===s&&(s=r+r-o),i=r-(r-Math.min(o,s))/2*l,{chunk:Math.abs(s-o)/2*l/e.stackCount,ratio:n.barPercentage,start:i}}(e,n,i):function(t,e,n){var i,a,r=n.barThickness,o=e.stackCount,s=e.pixels[t],l=V.isNullOrUndef(r)?function(t,e){var n,i,a,r,o=t._length;for(a=1,r=e.length;a<r;++a)o=Math.min(o,Math.abs(e[a]-e[a-1]));for(a=0,r=t.getTicks().length;a<r;++a)i=t.getPixelForTick(a),o=a>0?Math.min(o,Math.abs(i-n)):o,n=i;return o}(e.scale,e.pixels):-1;return V.isNullOrUndef(r)?(i=l*n.categoryPercentage,a=n.barPercentage):(i=r*o,a=1),{chunk:i/o,ratio:a,start:s-i/2}}(e,n,i),r=this.getStackIndex(t,this.getMeta().stack),o=a.start+a.chunk*r+a.chunk/2,s=Math.min(Mt(i.maxBarThickness,1/0),a.chunk*a.ratio);return{base:o-s/2,head:o+s/2,center:o,size:s}},draw:function(){var t=this.chart,e=this._getValueScale(),n=this.getMeta().data,i=this.getDataset(),a=n.length,r=0;for(V.canvas.clipArea(t.ctx,t.chartArea);r<a;++r){var o=e._parseValue(i.data[r]);isNaN(o.min)||isNaN(o.max)||n[r].draw()}V.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=this,e=V.extend({},et.prototype._resolveDataElementOptions.apply(t,arguments)),n=t._getIndexScale().options,i=t._getValueScale().options;return e.barPercentage=Mt(n.barPercentage,e.barPercentage),e.barThickness=Mt(n.barThickness,e.barThickness),e.categoryPercentage=Mt(n.categoryPercentage,e.categoryPercentage),e.maxBarThickness=Mt(n.maxBarThickness,e.maxBarThickness),e.minBarLength=Mt(i.minBarLength,e.minBarLength),e}}),Ct=V.valueOrDefault,Pt=V.options.resolve;z._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",i=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+i.r+")"}}}});var At=et.extend({dataElementType:bt.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(t){var e=this,n=e.getMeta().data;V.each(n,(function(n,i){e.updateElement(n,i,t)}))},updateElement:function(t,e,n){var i=this,a=i.getMeta(),r=t.custom||{},o=i.getScaleForId(a.xAxisID),s=i.getScaleForId(a.yAxisID),l=i._resolveDataElementOptions(t,e),u=i.getDataset().data[e],d=i.index,h=n?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof u?u:NaN,e,d),c=n?s.getBasePixel():s.getPixelForValue(u,e,d);t._xScale=o,t._yScale=s,t._options=l,t._datasetIndex=d,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:r.skip||isNaN(h)||isNaN(c),x:h,y:c},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ct(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Ct(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Ct(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(t,e){var n=this,i=n.chart,a=n.getDataset(),r=t.custom||{},o=a.data[e]||{},s=et.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:i,dataIndex:e,dataset:a,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=V.extend({},s)),s.radius=Pt([r.radius,o.r,n._config.radius,i.options.elements.point.radius],l,e),s}}),Dt=V.valueOrDefault,Tt=Math.PI,It=2*Tt,Ft=Tt/2;z._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,n,i,a=document.createElement("ul"),r=t.data,o=r.datasets,s=r.labels;if(a.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return a.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,i){var a=t.getDatasetMeta(0),r=a.controller.getStyle(i);return{text:n,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[i])||a.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,i,a,r=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(a=o.getDatasetMeta(n)).data[r]&&(a.data[r].hidden=!a.data[r].hidden);o.update()}},cutoutPercentage:50,rotation:-Ft,circumference:It,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],i=": "+e.datasets[t.datasetIndex].data[t.index];return V.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}});var Lt=et.extend({dataElementType:bt.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e,n,i,a,r=this,o=r.chart,s=o.chartArea,l=o.options,u=1,d=1,h=0,c=0,f=r.getMeta(),g=f.data,p=l.cutoutPercentage/100||0,m=l.circumference,v=r._getRingWeight(r.index);if(m<It){var b=l.rotation%It,x=(b+=b>=Tt?-It:b<-Tt?It:0)+m,y=Math.cos(b),_=Math.sin(b),k=Math.cos(x),w=Math.sin(x),M=b<=0&&x>=0||x>=It,S=b<=Ft&&x>=Ft||x>=It+Ft,C=b<=-Ft&&x>=-Ft||x>=Tt+Ft,P=b===-Tt||x>=Tt?-1:Math.min(y,y*p,k,k*p),A=C?-1:Math.min(_,_*p,w,w*p),D=M?1:Math.max(y,y*p,k,k*p),T=S?1:Math.max(_,_*p,w,w*p);u=(D-P)/2,d=(T-A)/2,h=-(D+P)/2,c=-(T+A)/2}for(i=0,a=g.length;i<a;++i)g[i]._options=r._resolveDataElementOptions(g[i],i);for(o.borderWidth=r.getMaxBorderWidth(),e=(s.right-s.left-o.borderWidth)/u,n=(s.bottom-s.top-o.borderWidth)/d,o.outerRadius=Math.max(Math.min(e,n)/2,0),o.innerRadius=Math.max(o.outerRadius*p,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(r._getVisibleDatasetWeightTotal()||1),o.offsetX=h*o.outerRadius,o.offsetY=c*o.outerRadius,f.total=r.calculateTotal(),r.outerRadius=o.outerRadius-o.radiusLength*r._getRingWeightOffset(r.index),r.innerRadius=Math.max(r.outerRadius-o.radiusLength*v,0),i=0,a=g.length;i<a;++i)r.updateElement(g[i],i,t)},updateElement:function(t,e,n){var i=this,a=i.chart,r=a.chartArea,o=a.options,s=o.animation,l=(r.left+r.right)/2,u=(r.top+r.bottom)/2,d=o.rotation,h=o.rotation,c=i.getDataset(),f=n&&s.animateRotate||t.hidden?0:i.calculateCircumference(c.data[e])*(o.circumference/It),g=n&&s.animateScale?0:i.innerRadius,p=n&&s.animateScale?0:i.outerRadius,m=t._options||{};V.extend(t,{_datasetIndex:i.index,_index:e,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+a.offsetX,y:u+a.offsetY,startAngle:d,endAngle:h,circumference:f,outerRadius:p,innerRadius:g,label:V.valueAtIndexOrDefault(c.label,e,a.data.labels[e])}});var v=t._model;n&&s.animateRotate||(v.startAngle=0===e?o.rotation:i.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var t,e=this.getDataset(),n=this.getMeta(),i=0;return V.each(n.data,(function(n,a){t=e.data[a],isNaN(t)||n.hidden||(i+=Math.abs(t))})),i},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?It*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,n,i,a,r,o,s,l,u=0,d=this.chart;if(!t)for(e=0,n=d.data.datasets.length;e<n;++e)if(d.isDatasetVisible(e)){t=(i=d.getDatasetMeta(e)).data,e!==this.index&&(r=i.controller);break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)a=t[e],r?(r._configure(),o=r._resolveDataElementOptions(a,e)):o=a._options,"inner"!==o.borderAlign&&(s=o.borderWidth,u=(l=o.hoverBorderWidth)>(u=s>u?s:u)?l:u);return u},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Dt(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Dt(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Dt(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e},_getRingWeight:function(t){return Math.max(Dt(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});z._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),z._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Ot=St.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Rt=V.valueOrDefault,zt=V.options.resolve,Nt=V.canvas._isPointInArea;function Bt(t,e){var n=t&&t.options.ticks||{},i=n.reverse,a=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:a,end:i?a:r}}function Et(t,e,n){var i=n/2,a=Bt(t,i),r=Bt(e,i);return{top:r.end,right:a.end,bottom:r.start,left:a.start}}function Wt(t){var e,n,i,a;return V.isObject(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a}}z._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Vt=et.extend({datasetElementType:bt.Line,dataElementType:bt.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,n,i=this,a=i.getMeta(),r=a.dataset,o=a.data||[],s=i.chart.options,l=i._config,u=i._showLine=Rt(l.showLine,s.showLines);for(i._xScale=i.getScaleForId(a.xAxisID),i._yScale=i.getScaleForId(a.yAxisID),u&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=i._yScale,r._datasetIndex=i.index,r._children=o,r._model=i._resolveDatasetElementOptions(r),r.pivot()),e=0,n=o.length;e<n;++e)i.updateElement(o[e],e,t);for(u&&0!==r._model.tension&&i.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var i,a,r=this,o=r.getMeta(),s=t.custom||{},l=r.getDataset(),u=r.index,d=l.data[e],h=r._xScale,c=r._yScale,f=o.dataset._model,g=r._resolveDataElementOptions(t,e);i=h.getPixelForValue("object"==typeof d?d:NaN,e,u),a=n?c.getBasePixel():r.calculatePointY(d,e,u),t._xScale=h,t._yScale=c,t._options=g,t._datasetIndex=u,t._index=e,t._model={x:i,y:a,skip:s.skip||isNaN(i)||isNaN(a),radius:g.radius,pointStyle:g.pointStyle,rotation:g.rotation,backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,tension:Rt(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:g.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,n=e._config,i=t.custom||{},a=e.chart.options,r=a.elements.line,o=et.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Rt(n.spanGaps,a.spanGaps),o.tension=Rt(n.lineTension,r.tension),o.steppedLine=zt([i.steppedLine,n.steppedLine,r.stepped]),o.clip=Wt(Rt(n.clip,Et(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(t,e,n){var i,a,r,o,s,l,u,d=this.chart,h=this._yScale,c=0,f=0;if(h.options.stacked){for(s=+h.getRightValue(t),u=(l=d._getSortedVisibleDatasetMetas()).length,i=0;i<u&&(r=l[i]).index!==n;++i)a=d.data.datasets[r.index],"line"===r.type&&r.yAxisID===h.id&&((o=+h.getRightValue(a.data[e]))<0?f+=o||0:c+=o||0);return s<0?h.getPixelForValue(f+s):h.getPixelForValue(c+s)}return h.getPixelForValue(t)},updateBezierControlPoints:function(){var t,e,n,i,a=this.chart,r=this.getMeta(),o=r.dataset._model,s=a.chartArea,l=r.data||[];function u(t,e,n){return Math.max(Math.min(t,n),e)}if(o.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===o.cubicInterpolationMode)V.splineCurveMonotone(l);else for(t=0,e=l.length;t<e;++t)n=l[t]._model,i=V.splineCurve(V.previousItem(l,t)._model,n,V.nextItem(l,t)._model,o.tension),n.controlPointPreviousX=i.previous.x,n.controlPointPreviousY=i.previous.y,n.controlPointNextX=i.next.x,n.controlPointNextY=i.next.y;if(a.options.elements.line.capBezierPoints)for(t=0,e=l.length;t<e;++t)n=l[t]._model,Nt(n,s)&&(t>0&&Nt(l[t-1]._model,s)&&(n.controlPointPreviousX=u(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=u(n.controlPointPreviousY,s.top,s.bottom)),t<l.length-1&&Nt(l[t+1]._model,s)&&(n.controlPointNextX=u(n.controlPointNextX,s.left,s.right),n.controlPointNextY=u(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var t,e=this.chart,n=this.getMeta(),i=n.data||[],a=e.chartArea,r=e.canvas,o=0,s=i.length;for(this._showLine&&(t=n.dataset._model.clip,V.canvas.clipArea(e.ctx,{left:!1===t.left?0:a.left-t.left,right:!1===t.right?r.width:a.right+t.right,top:!1===t.top?0:a.top-t.top,bottom:!1===t.bottom?r.height:a.bottom+t.bottom}),n.dataset.draw(),V.canvas.unclipArea(e.ctx));o<s;++o)i[o].draw(a)},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Rt(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Rt(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Rt(n.hoverBorderWidth,n.borderWidth),e.radius=Rt(n.hoverRadius,n.radius)}}),Ht=V.options.resolve;z._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,n,i,a=document.createElement("ul"),r=t.data,o=r.datasets,s=r.labels;if(a.setAttribute("class",t.id+"-legend"),o.length)for(e=0,n=o[0].data.length;e<n;++e)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return a.outerHTML},legend:{labels:{generateLabels:function(t){var e=t.data;return e.labels.length&&e.datasets.length?e.labels.map((function(n,i){var a=t.getDatasetMeta(0),r=a.controller.getStyle(i);return{text:n,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(e.datasets[0].data[i])||a.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,i,a,r=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(a=o.getDatasetMeta(n)).data[r].hidden=!a.data[r].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var jt=et.extend({dataElementType:bt.Arc,linkScales:V.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i,a=this,r=a.getDataset(),o=a.getMeta(),s=a.chart.options.startAngle||0,l=a._starts=[],u=a._angles=[],d=o.data;for(a._updateRadius(),o.count=a.countVisibleElements(),e=0,n=r.data.length;e<n;e++)l[e]=s,i=a._computeAngle(e),u[e]=i,s+=i;for(e=0,n=d.length;e<n;++e)d[e]._options=a._resolveDataElementOptions(d[e],e),a.updateElement(d[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,n=e.chartArea,i=e.options,a=Math.min(n.right-n.left,n.bottom-n.top);e.outerRadius=Math.max(a/2,0),e.innerRadius=Math.max(i.cutoutPercentage?e.outerRadius/100*i.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,n){var i=this,a=i.chart,r=i.getDataset(),o=a.options,s=o.animation,l=a.scale,u=a.data.labels,d=l.xCenter,h=l.yCenter,c=o.startAngle,f=t.hidden?0:l.getDistanceFromCenterForValue(r.data[e]),g=i._starts[e],p=g+(t.hidden?0:i._angles[e]),m=s.animateScale?0:l.getDistanceFromCenterForValue(r.data[e]),v=t._options||{};V.extend(t,{_datasetIndex:i.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:d,y:h,innerRadius:0,outerRadius:n?m:f,startAngle:n&&s.animateRotate?c:g,endAngle:n&&s.animateRotate?c:p,label:V.valueAtIndexOrDefault(u,e,u[e])}}),t.pivot()},countVisibleElements:function(){var t=this.getDataset(),e=this.getMeta(),n=0;return V.each(e.data,(function(e,i){isNaN(t.data[i])||e.hidden||n++})),n},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor,a=V.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=a(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=a(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=a(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(t){var e=this,n=this.getMeta().count,i=e.getDataset(),a=e.getMeta();if(isNaN(i.data[t])||a.data[t].hidden)return 0;var r={chart:e.chart,dataIndex:t,dataset:i,datasetIndex:e.index};return Ht([e.chart.options.elements.arc.angle,2*Math.PI/n],r,t)}});z._set("pie",V.clone(z.doughnut)),z._set("pie",{cutoutPercentage:0});var qt=Lt,Ut=V.valueOrDefault;z._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Yt=et.extend({datasetElementType:bt.Line,dataElementType:bt.Point,linkScales:V.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i=this,a=i.getMeta(),r=a.dataset,o=a.data||[],s=i.chart.scale,l=i._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),r._scale=s,r._datasetIndex=i.index,r._children=o,r._loop=!0,r._model=i._resolveDatasetElementOptions(r),r.pivot(),e=0,n=o.length;e<n;++e)i.updateElement(o[e],e,t);for(i.updateBezierControlPoints(),e=0,n=o.length;e<n;++e)o[e].pivot()},updateElement:function(t,e,n){var i=this,a=t.custom||{},r=i.getDataset(),o=i.chart.scale,s=o.getPointPositionForValue(e,r.data[e]),l=i._resolveDataElementOptions(t,e),u=i.getMeta().dataset._model,d=n?o.xCenter:s.x,h=n?o.yCenter:s.y;t._scale=o,t._options=l,t._datasetIndex=i.index,t._index=e,t._model={x:d,y:h,skip:a.skip||isNaN(d)||isNaN(h),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ut(a.tension,u?u.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,n=t.chart.options,i=et.prototype._resolveDatasetElementOptions.apply(t,arguments);return i.spanGaps=Ut(e.spanGaps,n.spanGaps),i.tension=Ut(e.lineTension,n.elements.line.tension),i},updateBezierControlPoints:function(){var t,e,n,i,a=this.getMeta(),r=this.chart.chartArea,o=a.data||[];function s(t,e,n){return Math.max(Math.min(t,n),e)}for(a.dataset._model.spanGaps&&(o=o.filter((function(t){return!t._model.skip}))),t=0,e=o.length;t<e;++t)n=o[t]._model,i=V.splineCurve(V.previousItem(o,t,!0)._model,n,V.nextItem(o,t,!0)._model,n.tension),n.controlPointPreviousX=s(i.previous.x,r.left,r.right),n.controlPointPreviousY=s(i.previous.y,r.top,r.bottom),n.controlPointNextX=s(i.next.x,r.left,r.right),n.controlPointNextY=s(i.next.y,r.top,r.bottom)},setHoverStyle:function(t){var e=t._model,n=t._options,i=V.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ut(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Ut(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Ut(n.hoverBorderWidth,n.borderWidth),e.radius=Ut(n.hoverRadius,n.radius)}});z._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),z._set("global",{datasets:{scatter:{showLine:!1}}});var Gt={bar:St,bubble:At,doughnut:Lt,horizontalBar:Ot,line:Vt,polarArea:jt,pie:qt,radar:Yt,scatter:Vt};function Xt(t,e){return t.native?{x:t.x,y:t.y}:V.getRelativePosition(t,e)}function Kt(t,e){var n,i,a,r,o,s,l=t._getSortedVisibleDatasetMetas();for(i=0,r=l.length;i<r;++i)for(a=0,o=(n=l[i].data).length;a<o;++a)(s=n[a])._view.skip||e(s)}function Zt(t,e){var n=[];return Kt(t,(function(t){t.inRange(e.x,e.y)&&n.push(t)})),n}function $t(t,e,n,i){var a=Number.POSITIVE_INFINITY,r=[];return Kt(t,(function(t){if(!n||t.inRange(e.x,e.y)){var o=t.getCenterPoint(),s=i(e,o);s<a?(r=[t],a=s):s===a&&r.push(t)}})),r}function Jt(t){var e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){var a=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}function Qt(t,e,n){var i=Xt(e,t);n.axis=n.axis||"x";var a=Jt(n.axis),r=n.intersect?Zt(t,i):$t(t,i,!1,a),o=[];return r.length?(t._getSortedVisibleDatasetMetas().forEach((function(t){var e=t.data[r[0]._index];e&&!e._view.skip&&o.push(e)})),o):[]}var te={modes:{single:function(t,e){var n=Xt(e,t),i=[];return Kt(t,(function(t){if(t.inRange(n.x,n.y))return i.push(t),i})),i.slice(0,1)},label:Qt,index:Qt,dataset:function(t,e,n){var i=Xt(e,t);n.axis=n.axis||"xy";var a=Jt(n.axis),r=n.intersect?Zt(t,i):$t(t,i,!1,a);return r.length>0&&(r=t.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(t,e){return Qt(t,e,{intersect:!1})},point:function(t,e){return Zt(t,Xt(e,t))},nearest:function(t,e,n){var i=Xt(e,t);n.axis=n.axis||"xy";var a=Jt(n.axis);return $t(t,i,n.intersect,a)},x:function(t,e,n){var i=Xt(e,t),a=[],r=!1;return Kt(t,(function(t){t.inXRange(i.x)&&a.push(t),t.inRange(i.x,i.y)&&(r=!0)})),n.intersect&&!r&&(a=[]),a},y:function(t,e,n){var i=Xt(e,t),a=[],r=!1;return Kt(t,(function(t){t.inYRange(i.y)&&a.push(t),t.inRange(i.x,i.y)&&(r=!0)})),n.intersect&&!r&&(a=[]),a}}},ee=V.extend;function ne(t,e){return V.where(t,(function(t){return t.pos===e}))}function ie(t,e){return t.sort((function(t,n){var i=e?n:t,a=e?t:n;return i.weight===a.weight?i.index-a.index:i.weight-a.weight}))}function ae(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function re(t,e,n){var i,a,r=n.box,o=t.maxPadding;if(n.size&&(t[n.pos]-=n.size),n.size=n.horizontal?r.height:r.width,t[n.pos]+=n.size,r.getPadding){var s=r.getPadding();o.top=Math.max(o.top,s.top),o.left=Math.max(o.left,s.left),o.bottom=Math.max(o.bottom,s.bottom),o.right=Math.max(o.right,s.right)}if(i=e.outerWidth-ae(o,t,"left","right"),a=e.outerHeight-ae(o,t,"top","bottom"),i!==t.w||a!==t.h)return t.w=i,t.h=a,n.horizontal?i!==t.w:a!==t.h}function oe(t,e){var n=e.maxPadding;return function(t){var i={left:0,top:0,right:0,bottom:0};return t.forEach((function(t){i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function se(t,e,n){var i,a,r,o,s,l,u=[];for(i=0,a=t.length;i<a;++i)(o=(r=t[i]).box).update(r.width||e.w,r.height||e.h,oe(r.horizontal,e)),re(e,n,r)&&(l=!0,u.length&&(s=!0)),o.fullWidth||u.push(r);return s&&se(u,e,n)||l}function le(t,e,n){var i,a,r,o,s=n.padding,l=e.x,u=e.y;for(i=0,a=t.length;i<a;++i)o=(r=t[i]).box,r.horizontal?(o.left=o.fullWidth?s.left:e.left,o.right=o.fullWidth?n.outerWidth-s.right:e.left+e.w,o.top=u,o.bottom=u+o.height,o.width=o.right-o.left,u=o.bottom):(o.left=l,o.right=l+o.width,o.top=e.top,o.bottom=e.top+e.h,o.height=o.bottom-o.top,l=o.right);e.x=l,e.y=u}z._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ue,de={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var i,a=["fullWidth","position","weight"],r=a.length,o=0;o<r;++o)i=a[o],n.hasOwnProperty(i)&&(e[i]=n[i])},update:function(t,e,n){if(t){var i=t.options.layout||{},a=V.options.toPadding(i.padding),r=e-a.width,o=n-a.height,s=function(t){var e=function(t){var e,n,i,a=[];for(e=0,n=(t||[]).length;e<n;++e)i=t[e],a.push({index:e,box:i,pos:i.position,horizontal:i.isHorizontal(),weight:i.weight});return a}(t),n=ie(ne(e,"left"),!0),i=ie(ne(e,"right")),a=ie(ne(e,"top"),!0),r=ie(ne(e,"bottom"));return{leftAndTop:n.concat(a),rightAndBottom:i.concat(r),chartArea:ne(e,"chartArea"),vertical:n.concat(i),horizontal:a.concat(r)}}(t.boxes),l=s.vertical,u=s.horizontal,d=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:r,vBoxMaxWidth:r/2/l.length,hBoxMaxHeight:o/2}),h=ee({maxPadding:ee({},a),w:r,h:o,x:a.left,y:a.top},a);!function(t,e){var n,i,a;for(n=0,i=t.length;n<i;++n)(a=t[n]).width=a.horizontal?a.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,a.height=a.horizontal&&e.hBoxMaxHeight}(l.concat(u),d),se(l,h,d),se(u,h,d)&&se(l,h,d),function(t){var e=t.maxPadding;function n(n){var i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(h),le(s.leftAndTop,h,d),h.x+=h.w,h.y+=h.h,le(s.rightAndBottom,h,d),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h},V.each(s.chartArea,(function(e){var n=e.box;ee(n,t.chartArea),n.update(h.w,h.h)}))}}},he=(ue=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&ue.default||ue,ce="$chartjs",fe="chartjs-size-monitor",ge="chartjs-render-monitor",pe=["animationstart","webkitAnimationStart"],me={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function ve(t,e){var n=V.getStyle(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}var be=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0};function xe(t,e,n){t.addEventListener(e,n,be)}function ye(t,e,n){t.removeEventListener(e,n,be)}function _e(t,e,n,i,a){return{type:t,chart:e,native:a||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}function ke(t){var e=document.createElement("div");return e.className=t||"",e}var we={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var n=t[ce]||(t[ce]={});if(!n.containsStyles){n.containsStyles=!0,e="/* Chart.js */\n"+e;var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(e)),t.appendChild(i)}}(e.host?e:document.head,he)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(this._ensureLoaded(t),function(t,e){var n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[ce]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===a||""===a){var r=ve(t,"width");void 0!==r&&(t.width=r)}if(null===i||""===i)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var o=ve(t,"height");void 0!==r&&(t.height=o)}}(t,e),n):null},releaseContext:function(t){var e=t.canvas;if(e[ce]){var n=e[ce].initial;["height","width"].forEach((function(t){var i=n[t];V.isNullOrUndef(i)?e.removeAttribute(t):e.setAttribute(t,i)})),V.each(n.style||{},(function(t,n){e.style[n]=t})),e.width=e.width,delete e[ce]}},addEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var a=n[ce]||(n[ce]={});xe(i,e,(a.proxies||(a.proxies={}))[t.id+"_"+e]=function(e){n(function(t,e){var n=me[t.type]||t.type,i=V.getRelativePosition(t,e);return _e(n,e,i.x,i.y,t)}(e,t))})}else!function(t,e,n){var i,a,r,o,s=t[ce]||(t[ce]={}),l=s.resizer=function(t){var e=ke(fe),n=ke(fe+"-expand"),i=ke(fe+"-shrink");n.appendChild(ke()),i.appendChild(ke()),e.appendChild(n),e.appendChild(i),e._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,i.scrollLeft=1e6,i.scrollTop=1e6};var a=function(){e._reset(),t()};return xe(n,"scroll",a.bind(n,"expand")),xe(i,"scroll",a.bind(i,"shrink")),e}((i=function(){if(s.resizer){var i=n.options.maintainAspectRatio&&t.parentNode,a=i?i.clientWidth:0;e(_e("resize",n)),i&&i.clientWidth<a&&n.canvas&&e(_e("resize",n))}},r=!1,o=[],function(){o=Array.prototype.slice.call(arguments),a=a||this,r||(r=!0,V.requestAnimFrame.call(window,(function(){r=!1,i.apply(a,o)})))}));!function(t,e){var n=t[ce]||(t[ce]={}),i=n.renderProxy=function(t){"chartjs-render-animation"===t.animationName&&e()};V.each(pe,(function(e){xe(t,e,i)})),n.reflow=!!t.offsetParent,t.classList.add(ge)}(t,(function(){if(s.resizer){var e=t.parentNode;e&&e!==l.parentNode&&e.insertBefore(l,e.firstChild),l._reset()}}))}(i,n,t)},removeEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var a=((n[ce]||{}).proxies||{})[t.id+"_"+e];a&&ye(i,e,a)}else!function(t){var e=t[ce]||{},n=e.resizer;delete e.resizer,function(t){var e=t[ce]||{},n=e.renderProxy;n&&(V.each(pe,(function(e){ye(t,e,n)})),delete e.renderProxy),t.classList.remove(ge)}(t),n&&n.parentNode&&n.parentNode.removeChild(n)}(i)}};V.addEvent=xe,V.removeEvent=ye;var Me=we._enabled?we:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Se=V.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Me);z._set("global",{plugins:{}});var Ce={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),this._cacheId++},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var i,a,r,o,s,l=this.descriptors(t),u=l.length;for(i=0;i<u;++i)if("function"==typeof(s=(r=(a=l[i]).plugin)[e])&&((o=[t].concat(n||[])).push(a.options),!1===s.apply(r,o)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var n=[],i=[],a=t&&t.config||{},r=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach((function(t){if(-1===n.indexOf(t)){var e=t.id,a=r[e];!1!==a&&(!0===a&&(a=V.clone(z.global.plugins[e])),n.push(t),i.push({plugin:t,options:a||{}}))}})),e.descriptors=i,e.id=this._cacheId,i},_invalidate:function(t){delete t.$plugins}},Pe={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=V.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?V.merge({},[z.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=V.extend(this.defaults[t],e))},addScalesToLayout:function(t){V.each(t.scales,(function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,de.addBox(t,e)}))}},Ae=V.valueOrDefault,De=V.rtl.getRtlAdapter;z._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:V.noop,title:function(t,e){var n="",i=e.labels,a=i?i.length:0;if(t.length>0){var r=t[0];r.label?n=r.label:r.xLabel?n=r.xLabel:a>0&&r.index<a&&(n=i[r.index])}return n},afterTitle:V.noop,beforeBody:V.noop,beforeLabel:V.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),V.isNullOrUndef(t.value)?n+=t.yLabel:n+=t.value,n},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:V.noop,afterBody:V.noop,beforeFooter:V.noop,footer:V.noop,afterFooter:V.noop}}});var Te={average:function(t){if(!t.length)return!1;var e,n,i=0,a=0,r=0;for(e=0,n=t.length;e<n;++e){var o=t[e];if(o&&o.hasValue()){var s=o.tooltipPosition();i+=s.x,a+=s.y,++r}}return{x:i/r,y:a/r}},nearest:function(t,e){var n,i,a,r=e.x,o=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){var l=t[n];if(l&&l.hasValue()){var u=l.getCenterPoint(),d=V.distanceBetweenPoints(e,u);d<s&&(s=d,a=l)}}if(a){var h=a.tooltipPosition();r=h.x,o=h.y}return{x:r,y:o}}};function Ie(t,e){return e&&(V.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fe(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Le(t){var e=z.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Ae(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Ae(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Ae(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Ae(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Ae(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Ae(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Ae(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Ae(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Ae(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function Oe(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function Re(t){return Ie([],Fe(t))}var ze=G.extend({initialize:function(){this._model=Le(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options,n=e.callbacks,i=n.beforeTitle.apply(t,arguments),a=n.title.apply(t,arguments),r=n.afterTitle.apply(t,arguments),o=[];return o=Ie(o,Fe(i)),o=Ie(o,Fe(a)),Ie(o,Fe(r))},getBeforeBody:function(){return Re(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,e){var n=this,i=n._options.callbacks,a=[];return V.each(t,(function(t){var r={before:[],lines:[],after:[]};Ie(r.before,Fe(i.beforeLabel.call(n,t,e))),Ie(r.lines,i.label.call(n,t,e)),Ie(r.after,Fe(i.afterLabel.call(n,t,e))),a.push(r)})),a},getAfterBody:function(){return Re(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,n=e.beforeFooter.apply(t,arguments),i=e.footer.apply(t,arguments),a=e.afterFooter.apply(t,arguments),r=[];return r=Ie(r,Fe(n)),r=Ie(r,Fe(i)),Ie(r,Fe(a))},update:function(t){var e,n,i,a,r,o,s,l,u,d,h=this,c=h._options,f=h._model,g=h._model=Le(c),p=h._active,m=h._data,v={xAlign:f.xAlign,yAlign:f.yAlign},b={x:f.x,y:f.y},x={width:f.width,height:f.height},y={x:f.caretX,y:f.caretY};if(p.length){g.opacity=1;var _=[],k=[];y=Te[c.position].call(h,p,h._eventPosition);var w=[];for(e=0,n=p.length;e<n;++e)w.push((a=void 0,r=void 0,void 0,void 0,l=void 0,u=void 0,d=void 0,a=(i=p[e])._xScale,r=i._yScale||i._scale,o=i._index,s=i._datasetIndex,u=(l=i._chart.getDatasetMeta(s).controller)._getIndexScale(),d=l._getValueScale(),{xLabel:a?a.getLabelForIndex(o,s):"",yLabel:r?r.getLabelForIndex(o,s):"",label:u?""+u.getLabelForIndex(o,s):"",value:d?""+d.getLabelForIndex(o,s):"",index:o,datasetIndex:s,x:i._model.x,y:i._model.y}));c.filter&&(w=w.filter((function(t){return c.filter(t,m)}))),c.itemSort&&(w=w.sort((function(t,e){return c.itemSort(t,e,m)}))),V.each(w,(function(t){_.push(c.callbacks.labelColor.call(h,t,h._chart)),k.push(c.callbacks.labelTextColor.call(h,t,h._chart))})),g.title=h.getTitle(w,m),g.beforeBody=h.getBeforeBody(w,m),g.body=h.getBody(w,m),g.afterBody=h.getAfterBody(w,m),g.footer=h.getFooter(w,m),g.x=y.x,g.y=y.y,g.caretPadding=c.caretPadding,g.labelColors=_,g.labelTextColors=k,g.dataPoints=w,b=function(t,e,n,i){var a=t.x,r=t.y,o=t.caretSize,s=t.caretPadding,l=t.cornerRadius,u=n.xAlign,d=n.yAlign,h=o+s,c=l+s;return"right"===u?a-=e.width:"center"===u&&((a-=e.width/2)+e.width>i.width&&(a=i.width-e.width),a<0&&(a=0)),"top"===d?r+=h:r-="bottom"===d?e.height+h:e.height/2,"center"===d?"left"===u?a+=h:"right"===u&&(a-=h):"left"===u?a-=c:"right"===u&&(a+=c),{x:a,y:r}}(g,x=function(t,e){var n=t._chart.ctx,i=2*e.yPadding,a=0,r=e.body,o=r.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);o+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,u=e.titleFontSize,d=e.bodyFontSize,h=e.footerFontSize;i+=s*u,i+=s?(s-1)*e.titleSpacing:0,i+=s?e.titleMarginBottom:0,i+=o*d,i+=o?(o-1)*e.bodySpacing:0,i+=l?e.footerMarginTop:0,i+=l*h,i+=l?(l-1)*e.footerSpacing:0;var c=0,f=function(t){a=Math.max(a,n.measureText(t).width+c)};return n.font=V.fontString(u,e._titleFontStyle,e._titleFontFamily),V.each(e.title,f),n.font=V.fontString(d,e._bodyFontStyle,e._bodyFontFamily),V.each(e.beforeBody.concat(e.afterBody),f),c=e.displayColors?d+2:0,V.each(r,(function(t){V.each(t.before,f),V.each(t.lines,f),V.each(t.after,f)})),c=0,n.font=V.fontString(h,e._footerFontStyle,e._footerFontFamily),V.each(e.footer,f),{width:a+=2*e.xPadding,height:i}}(this,g),v=function(t,e){var n,i,a,r,o,s=t._model,l=t._chart,u=t._chart.chartArea,d="center",h="center";s.y<e.height?h="top":s.y>l.height-e.height&&(h="bottom");var c=(u.left+u.right)/2,f=(u.top+u.bottom)/2;"center"===h?(n=function(t){return t<=c},i=function(t){return t>c}):(n=function(t){return t<=e.width/2},i=function(t){return t>=l.width-e.width/2}),a=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},r=function(t){return t-e.width-s.caretSize-s.caretPadding<0},o=function(t){return t<=f?"top":"bottom"},n(s.x)?(d="left",a(s.x)&&(d="center",h=o(s.y))):i(s.x)&&(d="right",r(s.x)&&(d="center",h=o(s.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:d,yAlign:g.yAlign?g.yAlign:h}}(this,x),h._chart)}else g.opacity=0;return g.xAlign=v.xAlign,g.yAlign=v.yAlign,g.x=b.x,g.y=b.y,g.width=x.width,g.height=x.height,g.caretX=y.x,g.caretY=y.y,h._model=g,t&&c.custom&&c.custom.call(h,g),h},drawCaret:function(t,e){var n=this._chart.ctx,i=this._view,a=this.getCaretPosition(t,e,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,n){var i,a,r,o,s,l,u=n.caretSize,d=n.cornerRadius,h=n.xAlign,c=n.yAlign,f=t.x,g=t.y,p=e.width,m=e.height;if("center"===c)s=g+m/2,"left"===h?(a=(i=f)-u,r=i,o=s+u,l=s-u):(a=(i=f+p)+u,r=i,o=s-u,l=s+u);else if("left"===h?(i=(a=f+d+u)-u,r=a+u):"right"===h?(i=(a=f+p-d-u)-u,r=a+u):(i=(a=n.caretX)-u,r=a+u),"top"===c)s=(o=g)-u,l=o;else{s=(o=g+m)+u,l=o;var v=r;r=i,i=v}return{x1:i,x2:a,x3:r,y1:o,y2:s,y3:l}},drawTitle:function(t,e,n){var i,a,r,o=e.title,s=o.length;if(s){var l=De(e.rtl,e.x,e.width);for(t.x=Oe(e,e._titleAlign),n.textAlign=l.textAlign(e._titleAlign),n.textBaseline="middle",i=e.titleFontSize,a=e.titleSpacing,n.fillStyle=e.titleFontColor,n.font=V.fontString(i,e._titleFontStyle,e._titleFontFamily),r=0;r<s;++r)n.fillText(o[r],l.x(t.x),t.y+i/2),t.y+=i+a,r+1===s&&(t.y+=e.titleMarginBottom-a)}},drawBody:function(t,e,n){var i,a,r,o,s,l,u,d,h=e.bodyFontSize,c=e.bodySpacing,f=e._bodyAlign,g=e.body,p=e.displayColors,m=0,v=p?Oe(e,"left"):0,b=De(e.rtl,e.x,e.width),x=function(e){n.fillText(e,b.x(t.x+m),t.y+h/2),t.y+=h+c},y=b.textAlign(f);for(n.textAlign=f,n.textBaseline="middle",n.font=V.fontString(h,e._bodyFontStyle,e._bodyFontFamily),t.x=Oe(e,y),n.fillStyle=e.bodyFontColor,V.each(e.beforeBody,x),m=p&&"right"!==y?"center"===f?h/2+1:h+2:0,s=0,u=g.length;s<u;++s){for(i=g[s],a=e.labelTextColors[s],r=e.labelColors[s],n.fillStyle=a,V.each(i.before,x),l=0,d=(o=i.lines).length;l<d;++l){if(p){var _=b.x(v);n.fillStyle=e.legendColorBackground,n.fillRect(b.leftForLtr(_,h),t.y,h,h),n.lineWidth=1,n.strokeStyle=r.borderColor,n.strokeRect(b.leftForLtr(_,h),t.y,h,h),n.fillStyle=r.backgroundColor,n.fillRect(b.leftForLtr(b.xPlus(_,1),h-2),t.y+1,h-2,h-2),n.fillStyle=a}x(o[l])}V.each(i.after,x)}m=0,V.each(e.afterBody,x),t.y-=c},drawFooter:function(t,e,n){var i,a,r=e.footer,o=r.length;if(o){var s=De(e.rtl,e.x,e.width);for(t.x=Oe(e,e._footerAlign),t.y+=e.footerMarginTop,n.textAlign=s.textAlign(e._footerAlign),n.textBaseline="middle",i=e.footerFontSize,n.fillStyle=e.footerFontColor,n.font=V.fontString(i,e._footerFontStyle,e._footerFontFamily),a=0;a<o;++a)n.fillText(r[a],s.x(t.x),t.y+i/2),t.y+=i+e.footerSpacing}},drawBackground:function(t,e,n,i){n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth;var a=e.xAlign,r=e.yAlign,o=t.x,s=t.y,l=i.width,u=i.height,d=e.cornerRadius;n.beginPath(),n.moveTo(o+d,s),"top"===r&&this.drawCaret(t,i),n.lineTo(o+l-d,s),n.quadraticCurveTo(o+l,s,o+l,s+d),"center"===r&&"right"===a&&this.drawCaret(t,i),n.lineTo(o+l,s+u-d),n.quadraticCurveTo(o+l,s+u,o+l-d,s+u),"bottom"===r&&this.drawCaret(t,i),n.lineTo(o+d,s+u),n.quadraticCurveTo(o,s+u,o,s+u-d),"center"===r&&"left"===a&&this.drawCaret(t,i),n.lineTo(o,s+d),n.quadraticCurveTo(o,s,o+d,s),n.closePath(),n.fill(),e.borderWidth>0&&n.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},i={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,r=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&r&&(t.save(),t.globalAlpha=a,this.drawBackground(i,e,t,n),i.y+=e.yPadding,V.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),V.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,n=this,i=n._options;return n._lastActive=n._lastActive||[],"mouseout"===t.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(t,i.mode,i),i.reverse&&n._active.reverse()),(e=!V.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(i.enabled||i.custom)&&(n._eventPosition={x:t.x,y:t.y},n.update(!0),n.pivot())),e}}),Ne=Te,Be=ze;Be.positioners=Ne;var Ee=V.valueOrDefault;function We(){return V.merge({},[].slice.call(arguments),{merger:function(t,e,n,i){if("xAxes"===t||"yAxes"===t){var a,r,o,s=n[t].length;for(e[t]||(e[t]=[]),a=0;a<s;++a)o=n[t][a],r=Ee(o.type,"xAxes"===t?"category":"linear"),a>=e[t].length&&e[t].push({}),!e[t][a].type||o.type&&o.type!==e[t][a].type?V.merge(e[t][a],[Pe.getScaleDefaults(r),o]):V.merge(e[t][a],o)}else V._merger(t,e,n,i)}})}function Ve(){return V.merge({},[].slice.call(arguments),{merger:function(t,e,n,i){var a=e[t]||{},r=n[t];"scales"===t?e[t]=We(a,r):"scale"===t?e[t]=V.merge(a,[Pe.getScaleDefaults(r.type),r]):V._merger(t,e,n,i)}})}function He(t){var e=t.options;V.each(t.scales,(function(e){de.removeBox(t,e)})),e=Ve(z.global,z[t.config.type],e),t.options=t.config.options=e,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=e.tooltips,t.tooltip.initialize()}function je(t,e,n){var i,a=function(t){return t.id===i};do{i=e+n++}while(V.findIndex(t,a)>=0);return i}function qe(t){return"top"===t||"bottom"===t}function Ue(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}z._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Ye=function(t,e){return this.construct(t,e),this};V.extend(Ye.prototype,{construct:function(t,e){var n=this;e=function(t){var e=(t=t||{}).data=t.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],t.options=Ve(z.global,z[t.type],t.options||{}),t}(e);var i=Se.acquireContext(t,e),a=i&&i.canvas,r=a&&a.height,o=a&&a.width;n.id=V.uid(),n.ctx=i,n.canvas=a,n.config=e,n.width=o,n.height=r,n.aspectRatio=r?o/r:null,n.options=e.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Ye.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(t){n.config.data=t}}),i&&a?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return Ce.notify(t,"beforeInit"),V.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),Ce.notify(t,"afterInit"),t},clear:function(){return V.canvas.clear(this),this},stop:function(){return Z.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,i=e.canvas,a=n.maintainAspectRatio&&e.aspectRatio||null,r=Math.max(0,Math.floor(V.getMaximumWidth(i))),o=Math.max(0,Math.floor(a?r/a:V.getMaximumHeight(i)));if((e.width!==r||e.height!==o)&&(i.width=e.width=r,i.height=e.height=o,i.style.width=r+"px",i.style.height=o+"px",V.retinaScale(e,n.devicePixelRatio),!t)){var s={width:r,height:o};Ce.notify(e,"resize",[s]),n.onResize&&n.onResize(e,s),e.stop(),e.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;V.each(e.xAxes,(function(t,n){t.id||(t.id=je(e.xAxes,"x-axis-",n))})),V.each(e.yAxes,(function(t,n){t.id||(t.id=je(e.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var t=this,e=t.options,n=t.scales||{},i=[],a=Object.keys(n).reduce((function(t,e){return t[e]=!1,t}),{});e.scales&&(i=i.concat((e.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category",dposition:"bottom"}})),(e.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear",dposition:"left"}})))),e.scale&&i.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),V.each(i,(function(e){var i=e.options,r=i.id,o=Ee(i.type,e.dtype);qe(i.position)!==qe(e.dposition)&&(i.position=e.dposition),a[r]=!0;var s=null;if(r in n&&n[r].type===o)(s=n[r]).options=i,s.ctx=t.ctx,s.chart=t;else{var l=Pe.getScaleConstructor(o);if(!l)return;s=new l({id:r,type:o,options:i,ctx:t.ctx,chart:t}),n[s.id]=s}s.mergeTicksOptions(),e.isDefault&&(t.scale=s)})),V.each(a,(function(t,e){t||delete n[e]})),t.scales=n,Pe.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,n=this,i=[],a=n.data.datasets;for(t=0,e=a.length;t<e;t++){var r=a[t],o=n.getDatasetMeta(t),s=r.type||n.config.type;if(o.type&&o.type!==s&&(n.destroyDatasetMeta(t),o=n.getDatasetMeta(t)),o.type=s,o.order=r.order||0,o.index=t,o.controller)o.controller.updateIndex(t),o.controller.linkScales();else{var l=Gt[o.type];if(void 0===l)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new l(n,t),i.push(o.controller)}}return i},resetElements:function(){var t=this;V.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t){var e,n,i=this;if(t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]}),He(i),Ce._invalidate(i),!1!==Ce.notify(i,"beforeUpdate")){i.tooltip._data=i.data;var a=i.buildOrUpdateControllers();for(e=0,n=i.data.datasets.length;e<n;e++)i.getDatasetMeta(e).controller.buildOrUpdateElements();i.updateLayout(),i.options.animation&&i.options.animation.duration&&V.each(a,(function(t){t.reset()})),i.updateDatasets(),i.tooltip.initialize(),i.lastActive=[],Ce.notify(i,"afterUpdate"),i._layers.sort(Ue("z","_idx")),i._bufferedRender?i._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:i.render(t)}},updateLayout:function(){var t=this;!1!==Ce.notify(t,"beforeLayout")&&(de.update(this,this.width,this.height),t._layers=[],V.each(t.boxes,(function(e){e._configure&&e._configure(),t._layers.push.apply(t._layers,e._layers())}),t),t._layers.forEach((function(t,e){t._idx=e})),Ce.notify(t,"afterScaleUpdate"),Ce.notify(t,"afterLayout"))},updateDatasets:function(){if(!1!==Ce.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);Ce.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),n={meta:e,index:t};!1!==Ce.notify(this,"beforeDatasetUpdate",[n])&&(e.controller._update(),Ce.notify(this,"afterDatasetUpdate",[n]))},render:function(t){var e=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var n=e.options.animation,i=Ee(t.duration,n&&n.duration),a=t.lazy;if(!1!==Ce.notify(e,"beforeRender")){var r=function(t){Ce.notify(e,"afterRender"),V.callback(n&&n.onComplete,[t],e)};if(n&&i){var o=new K({numSteps:i/16.66,easing:t.easing||n.easing,render:function(t,e){var n=V.easing.effects[e.easing],i=e.currentStep,a=i/e.numSteps;t.draw(n(a),a,i)},onAnimationProgress:n.onProgress,onAnimationComplete:r});Z.addAnimation(e,o,i,a)}else e.draw(),r(new K({numSteps:0,chart:e}));return e}},draw:function(t){var e,n,i=this;if(i.clear(),V.isNullOrUndef(t)&&(t=1),i.transition(t),!(i.width<=0||i.height<=0)&&!1!==Ce.notify(i,"beforeDraw",[t])){for(n=i._layers,e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(i.chartArea);for(i.drawDatasets(t);e<n.length;++e)n[e].draw(i.chartArea);i._drawTooltip(t),Ce.notify(i,"afterDraw",[t])}},transition:function(t){for(var e=0,n=(this.data.datasets||[]).length;e<n;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,n,i=[];for(e=0,n=(this.data.datasets||[]).length;e<n;++e)t&&!this.isDatasetVisible(e)||i.push(this.getDatasetMeta(e));return i.sort(Ue("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,n;if(!1!==Ce.notify(this,"beforeDatasetsDraw",[t])){for(n=(e=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(e[n],t);Ce.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n={meta:t,index:t.index,easingValue:e};!1!==Ce.notify(this,"beforeDatasetDraw",[n])&&(t.controller.draw(e),Ce.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,n={tooltip:e,easingValue:t};!1!==Ce.notify(this,"beforeTooltipDraw",[n])&&(e.draw(),Ce.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(t){return te.modes.single(this,t)},getElementsAtEvent:function(t){return te.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return te.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var i=te.modes[e];return"function"==typeof i?i(this,t,n):[]},getDatasetAtEvent:function(t){return te.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var n=e._meta[this.id];return n||(n=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),n},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],i=n._meta&&n._meta[e];i&&(i.controller.destroy(),delete n._meta[e])},destroy:function(){var t,e,n=this,i=n.canvas;for(n.stop(),t=0,e=n.data.datasets.length;t<e;++t)n.destroyDatasetMeta(t);i&&(n.unbindEvents(),V.canvas.clear(n),Se.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Ce.notify(n,"destroy"),delete Ye.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Be({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var t=this,e=t._listeners={},n=function(){t.eventHandler.apply(t,arguments)};V.each(t.options.events,(function(i){Se.addEventListener(t,i,n),e[i]=n})),t.options.responsive&&(n=function(){t.resize()},Se.addEventListener(t,"resize",n),e.resize=n)},unbindEvents:function(){var t=this,e=t._listeners;e&&(delete t._listeners,V.each(e,(function(e,n){Se.removeEventListener(t,n,e)})))},updateHoverStyle:function(t,e,n){var i,a,r,o=n?"set":"remove";for(a=0,r=t.length;a<r;++a)(i=t[a])&&this.getDatasetMeta(i._datasetIndex).controller[o+"HoverStyle"](i);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==Ce.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var i=e.handleEvent(t);n&&(i=n._start?n.handleEvent(t):i|n.handleEvent(t)),Ce.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):i&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,n=this,i=n.options||{},a=i.hover;return n.lastActive=n.lastActive||[],"mouseout"===t.type?n.active=[]:n.active=n.getElementsAtEventForMode(t,a.mode,a),V.callback(i.onHover||i.hover.onHover,[t.native,n.active],n),"mouseup"!==t.type&&"click"!==t.type||i.onClick&&i.onClick.call(n,t.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,a.mode,!1),n.active.length&&a.mode&&n.updateHoverStyle(n.active,a.mode,!0),e=!V.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,e}}),Ye.instances={};var Ge=Ye;function Xe(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Ke(t){this.options=t||{}}Ye.Controller=Ye,Ye.types={},V.configMerge=Ve,V.scaleMerge=We,V.extend(Ke.prototype,{formats:Xe,parse:Xe,format:Xe,add:Xe,diff:Xe,startOf:Xe,endOf:Xe,_create:function(t){return t}}),Ke.override=function(t){V.extend(Ke.prototype,t)};var Ze={_date:Ke},$e={formatters:{values:function(t){return V.isArray(t)?t:""+t},linear:function(t,e,n){var i=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(i)>1&&t!==Math.floor(t)&&(i=t-Math.floor(t));var a=V.log10(Math.abs(i)),r="";if(0!==t)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var o=V.log10(Math.abs(t)),s=Math.floor(o)-Math.floor(a);s=Math.max(Math.min(s,20),0),r=t.toExponential(s)}else{var l=-1*Math.floor(a);l=Math.max(Math.min(l,20),0),r=t.toFixed(l)}else r="0";return r},logarithmic:function(t,e,n){var i=t/Math.pow(10,Math.floor(V.log10(t)));return 0===t?"0":1===i||2===i||5===i||0===e||e===n.length-1?t.toExponential():""}}},Je=V.isArray,Qe=V.isNullOrUndef,tn=V.valueOrDefault,en=V.valueAtIndexOrDefault;function nn(t,e,n){var i,a=t.getTicks().length,r=Math.min(e,a-1),o=t.getPixelForTick(r),s=t._startPixel,l=t._endPixel;if(!(n&&(i=1===a?Math.max(o-s,l-o):0===e?(t.getPixelForTick(1)-o)/2:(o-t.getPixelForTick(r-1))/2,(o+=r<e?i:-i)<s-1e-6||o>l+1e-6)))return o}function an(t){return t.drawTicks?t.tickMarkLength:0}function rn(t){var e,n;return t.display?(e=V.options._parseFont(t),n=V.options.toPadding(t.padding),e.lineHeight+n.height):0}function on(t,e){return V.extend(V.options._parseFont({fontFamily:tn(e.fontFamily,t.fontFamily),fontSize:tn(e.fontSize,t.fontSize),fontStyle:tn(e.fontStyle,t.fontStyle),lineHeight:tn(e.lineHeight,t.lineHeight)}),{color:V.options.resolve([e.fontColor,t.fontColor,z.global.defaultFontColor])})}function sn(t){var e=on(t,t.minor);return{minor:e,major:t.major.enabled?on(t,t.major):e}}function ln(t){var e,n,i,a=[];for(n=0,i=t.length;n<i;++n)void 0!==(e=t[n])._index&&a.push(e);return a}function un(t,e,n,i){var a,r,o,s,l=tn(n,0),u=Math.min(tn(i,t.length),t.length),d=0;for(e=Math.ceil(e),i&&(e=(a=i-n)/Math.floor(a/e)),s=l;s<0;)d++,s=Math.round(l+d*e);for(r=Math.max(l,0);r<u;r++)o=t[r],r===s?(o._index=r,d++,s=Math.round(l+d*e)):delete o.label}z._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:$e.formatters.values,minor:{},major:{}}});var dn=G.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){V.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var i,a,r,o,s,l=this,u=l.options.ticks,d=u.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=V.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),o=l.buildTicks()||[],(!(o=l.afterBuildTicks(o)||o)||!o.length)&&l.ticks)for(o=[],i=0,a=l.ticks.length;i<a;++i)o.push({value:l.ticks[i],major:!1});return l._ticks=o,s=d<o.length,r=l._convertTicksToLabels(s?function(t,e){for(var n=[],i=t.length/e,a=0,r=t.length;a<r;a+=i)n.push(t[Math.floor(a)]);return n}(o,d):o),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=u.display&&(u.autoSkip||"auto"===u.source)?l._autoSkip(o):o,s&&(r=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=r,l.afterUpdate(),l.minSize},_configure:function(){var t,e,n=this,i=n.options.ticks.reverse;n.isHorizontal()?(t=n.left,e=n.right):(t=n.top,e=n.bottom,i=!i),n._startPixel=t,n._endPixel=e,n._reversePixels=i,n._length=e-t},afterUpdate:function(){V.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){V.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){V.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){V.callback(this.options.beforeDataLimits,[this])},determineDataLimits:V.noop,afterDataLimits:function(){V.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){V.callback(this.options.beforeBuildTicks,[this])},buildTicks:V.noop,afterBuildTicks:function(t){var e=this;return Je(t)&&t.length?V.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=V.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){V.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){V.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){V.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,n,i,a,r,o,s=this,l=s.options,u=l.ticks,d=s.getTicks().length,h=u.minRotation||0,c=u.maxRotation,f=h;!s._isVisible()||!u.display||h>=c||d<=1||!s.isHorizontal()?s.labelRotation=h:(e=(t=s._getLabelSizes()).widest.width,n=t.highest.height-t.highest.offset,i=Math.min(s.maxWidth,s.chart.width-e),e+6>(a=l.offset?s.maxWidth/d:i/(d-1))&&(a=i/(d-(l.offset?.5:1)),r=s.maxHeight-an(l.gridLines)-u.padding-rn(l.scaleLabel),o=Math.sqrt(e*e+n*n),f=V.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/a,1)),Math.asin(Math.min(r/o,1))-Math.asin(n/o))),f=Math.max(h,Math.min(c,f))),s.labelRotation=f)},afterCalculateTickRotation:function(){V.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){V.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},n=t.chart,i=t.options,a=i.ticks,r=i.scaleLabel,o=i.gridLines,s=t._isVisible(),l="bottom"===i.position,u=t.isHorizontal();if(u?e.width=t.maxWidth:s&&(e.width=an(o)+rn(r)),u?s&&(e.height=an(o)+rn(r)):e.height=t.maxHeight,a.display&&s){var d=sn(a),h=t._getLabelSizes(),c=h.first,f=h.last,g=h.widest,p=h.highest,m=.4*d.minor.lineHeight,v=a.padding;if(u){var b=0!==t.labelRotation,x=V.toRadians(t.labelRotation),y=Math.cos(x),_=Math.sin(x),k=_*g.width+y*(p.height-(b?p.offset:0))+(b?0:m);e.height=Math.min(t.maxHeight,e.height+k+v);var w,M,S=t.getPixelForTick(0)-t.left,C=t.right-t.getPixelForTick(t.getTicks().length-1);b?(w=l?y*c.width+_*c.offset:_*(c.height-c.offset),M=l?_*(f.height-f.offset):y*f.width+_*f.offset):(w=c.width/2,M=f.width/2),t.paddingLeft=Math.max((w-S)*t.width/(t.width-S),0)+3,t.paddingRight=Math.max((M-C)*t.width/(t.width-C),0)+3}else{var P=a.mirror?0:g.width+v+m;e.width=Math.min(t.maxWidth,e.width+P),t.paddingTop=c.height/2,t.paddingBottom=f.height/2}}t.handleMargins(),u?(t.width=t._length=n.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){V.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(Qe(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,n,i,a=this;for(a.ticks=t.map((function(t){return t.value})),a.beforeTickToLabelConversion(),e=a.convertTicksToLabels(t)||a.ticks,a.afterTickToLabelConversion(),n=0,i=t.length;n<i;++n)t[n].label=e[n];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=function(t,e,n,i){var a,r,o,s,l,u,d,h,c,f,g,p,m,v=n.length,b=[],x=[],y=[];for(a=0;a<v;++a){if(s=n[a].label,l=n[a].major?e.major:e.minor,t.font=u=l.string,d=i[u]=i[u]||{data:{},gc:[]},h=l.lineHeight,c=f=0,Qe(s)||Je(s)){if(Je(s))for(r=0,o=s.length;r<o;++r)g=s[r],Qe(g)||Je(g)||(c=V.measureText(t,d.data,d.gc,c,g),f+=h)}else c=V.measureText(t,d.data,d.gc,c,s),f=h;b.push(c),x.push(f),y.push(h/2)}function _(t){return{width:b[t]||0,height:x[t]||0,offset:y[t]||0}}return function(t,e){V.each(t,(function(t){var n,i=t.gc,a=i.length/2;if(a>e){for(n=0;n<a;++n)delete t.data[i[n]];i.splice(0,a)}}))}(i,v),p=b.indexOf(Math.max.apply(null,b)),m=x.indexOf(Math.max.apply(null,x)),{first:_(0),last:_(v-1),widest:_(p),highest:_(m)}}(t.ctx,sn(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,n,i,a;return Je(t)?(e=+this.getRightValue(t[0]),n=+this.getRightValue(t[1]),i=Math.min(e,n),a=Math.max(e,n)):(e=void 0,n=t=+this.getRightValue(t),i=t,a=t),{min:i,max:a,start:e,end:n}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:V.noop,getPixelForValue:V.noop,getValueForPixel:V.noop,getPixelForTick:function(t){var e=this.options.offset,n=this._ticks.length,i=1/Math.max(n-(e?0:1),1);return t<0||t>n-1?null:this.getPixelForDecimal(t*i+(e?i/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:t>0&&e>0?t:0},_autoSkip:function(t){var e,n,i,a,r=this.options.ticks,o=this._length,s=r.maxTicksLimit||o/this._tickSize()+1,l=r.major.enabled?function(t){var e,n,i=[];for(e=0,n=t.length;e<n;e++)t[e].major&&i.push(e);return i}(t):[],u=l.length,d=l[0],h=l[u-1];if(u>s)return function(t,e,n){var i,a,r=0,o=e[0];for(n=Math.ceil(n),i=0;i<t.length;i++)a=t[i],i===o?(a._index=i,o=e[++r*n]):delete a.label}(t,l,u/s),ln(t);if(i=function(t,e,n,i){var a,r,o,s,l=function(t){var e,n,i=t.length;if(i<2)return!1;for(n=t[0],e=1;e<i;++e)if(t[e]-t[e-1]!==n)return!1;return n}(t),u=(e.length-1)/i;if(!l)return Math.max(u,1);for(o=0,s=(a=V.math._factorize(l)).length-1;o<s;o++)if((r=a[o])>u)return r;return Math.max(u,1)}(l,t,0,s),u>0){for(e=0,n=u-1;e<n;e++)un(t,i,l[e],l[e+1]);return a=u>1?(h-d)/(u-1):null,un(t,i,V.isNullOrUndef(a)?0:d-a,d),un(t,i,h,V.isNullOrUndef(a)?t.length:h+a),ln(t)}return un(t,i),ln(t)},_tickSize:function(){var t=this.options.ticks,e=V.toRadians(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),a=this._getLabelSizes(),r=t.autoSkipPadding||0,o=a?a.widest.width+r:0,s=a?a.highest.height+r:0;return this.isHorizontal()?s*n>o*i?o/n:s/i:s*i<o*n?s/n:o/i},_isVisible:function(){var t,e,n,i=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(t=0,e=i.data.datasets.length;t<e;++t)if(i.isDatasetVisible(t)&&((n=i.getDatasetMeta(t)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,n,i,a,r,o,s,l,u,d,h,c,f,g,p,m,v,b=this,x=b.chart,y=b.options,_=y.gridLines,k=y.position,w=_.offsetGridLines,M=b.isHorizontal(),S=b._ticksToDraw,C=S.length+(w?1:0),P=an(_),A=[],D=_.drawBorder?en(_.lineWidth,0,0):0,T=D/2,I=V._alignPixel,F=function(t){return I(x,t,D)};for("top"===k?(e=F(b.bottom),s=b.bottom-P,u=e-T,h=F(t.top)+T,f=t.bottom):"bottom"===k?(e=F(b.top),h=t.top,f=F(t.bottom)-T,s=e+T,u=b.top+P):"left"===k?(e=F(b.right),o=b.right-P,l=e-T,d=F(t.left)+T,c=t.right):(e=F(b.left),d=t.left,c=F(t.right)-T,o=e+T,l=b.left+P),n=0;n<C;++n)i=S[n]||{},Qe(i.label)&&n<S.length||(n===b.zeroLineIndex&&y.offset===w?(g=_.zeroLineWidth,p=_.zeroLineColor,m=_.zeroLineBorderDash||[],v=_.zeroLineBorderDashOffset||0):(g=en(_.lineWidth,n,1),p=en(_.color,n,"rgba(0,0,0,0.1)"),m=_.borderDash||[],v=_.borderDashOffset||0),void 0!==(a=nn(b,i._index||n,w))&&(r=I(x,a,g),M?o=l=d=c=r:s=u=h=f=r,A.push({tx1:o,ty1:s,tx2:l,ty2:u,x1:d,y1:h,x2:c,y2:f,width:g,color:p,borderDash:m,borderDashOffset:v})));return A.ticksLength=C,A.borderValue=e,A},_computeLabelItems:function(){var t,e,n,i,a,r,o,s,l,u,d,h,c=this,f=c.options,g=f.ticks,p=f.position,m=g.mirror,v=c.isHorizontal(),b=c._ticksToDraw,x=sn(g),y=g.padding,_=an(f.gridLines),k=-V.toRadians(c.labelRotation),w=[];for("top"===p?(r=c.bottom-_-y,o=k?"left":"center"):"bottom"===p?(r=c.top+_+y,o=k?"right":"center"):"left"===p?(a=c.right-(m?0:_)-y,o=m?"left":"right"):(a=c.left+(m?0:_)+y,o=m?"right":"left"),t=0,e=b.length;t<e;++t)i=(n=b[t]).label,Qe(i)||(s=c.getPixelForTick(n._index||t)+g.labelOffset,u=(l=n.major?x.major:x.minor).lineHeight,d=Je(i)?i.length:1,v?(a=s,h="top"===p?((k?1:.5)-d)*u:(k?0:.5)*u):(r=s,h=(1-d)*u/2),w.push({x:a,y:r,rotation:k,label:i,font:l,textOffset:h,textAlign:o}));return w},_drawGrid:function(t){var e=this,n=e.options.gridLines;if(n.display){var i,a,r,o,s,l=e.ctx,u=e.chart,d=V._alignPixel,h=n.drawBorder?en(n.lineWidth,0,0):0,c=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(r=0,o=c.length;r<o;++r)i=(s=c[r]).width,a=s.color,i&&a&&(l.save(),l.lineWidth=i,l.strokeStyle=a,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(h){var f,g,p,m,v=h,b=en(n.lineWidth,c.ticksLength-1,1),x=c.borderValue;e.isHorizontal()?(f=d(u,e.left,v)-v/2,g=d(u,e.right,b)+b/2,p=m=x):(p=d(u,e.top,v)-v/2,m=d(u,e.bottom,b)+b/2,f=g=x),l.lineWidth=h,l.strokeStyle=en(n.color,0),l.beginPath(),l.moveTo(f,p),l.lineTo(g,m),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,n,i,a,r,o,s,l,u=t.ctx,d=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,i=d.length;e<i;++e){if(o=(r=d[e]).font,u.save(),u.translate(r.x,r.y),u.rotate(r.rotation),u.font=o.string,u.fillStyle=o.color,u.textBaseline="middle",u.textAlign=r.textAlign,s=r.label,l=r.textOffset,Je(s))for(n=0,a=s.length;n<a;++n)u.fillText(""+s[n],0,l),l+=o.lineHeight;else u.fillText(s,0,l);u.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,n=t.options,i=n.scaleLabel;if(i.display){var a,r,o=tn(i.fontColor,z.global.defaultFontColor),s=V.options._parseFont(i),l=V.options.toPadding(i.padding),u=s.lineHeight/2,d=n.position,h=0;if(t.isHorizontal())a=t.left+t.width/2,r="bottom"===d?t.bottom-u-l.bottom:t.top+u+l.top;else{var c="left"===d;a=c?t.left+u+l.top:t.right-u-l.top,r=t.top+t.height/2,h=c?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(a,r),e.rotate(h),e.textAlign="center",e.textBaseline="middle",e.fillStyle=o,e.font=s.string,e.fillText(i.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,n=e.ticks&&e.ticks.z||0,i=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&n!==i&&t.draw===t._draw?[{z:i,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:n,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:n,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(t){var e=this,n=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter((function(i){return(!t||i.type===t)&&(n?i.xAxisID===e.id:i.yAxisID===e.id)}))}});dn.prototype._draw=dn.prototype.draw;var hn=dn,cn=V.isNullOrUndef,fn=hn.extend({determineDataLimits:function(){var t,e=this,n=e._getLabels(),i=e.options.ticks,a=i.min,r=i.max,o=0,s=n.length-1;void 0!==a&&(t=n.indexOf(a))>=0&&(o=t),void 0!==r&&(t=n.indexOf(r))>=0&&(s=t),e.minIndex=o,e.maxIndex=s,e.min=n[o],e.max=n[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,n=this.maxIndex;this.ticks=0===e&&n===t.length-1?t:t.slice(e,n+1)},getLabelForIndex:function(t,e){var n=this.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,n=t.ticks;hn.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),n&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(n.length-(e?0:1),1))},getPixelForValue:function(t,e,n){var i,a,r,o=this;return cn(e)||cn(n)||(t=o.chart.data.datasets[n].data[e]),cn(t)||(i=o.isHorizontal()?t.x:t.y),(void 0!==i||void 0!==t&&isNaN(e))&&(a=o._getLabels(),t=V.valueOrDefault(i,t),e=-1!==(r=a.indexOf(t))?r:e,isNaN(e)&&(e=t)),o.getPixelForDecimal((e-o._startValue)/o._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});fn._defaults={position:"bottom"};var gn=V.noop,pn=V.isNullOrUndef,mn=hn.extend({getRightValue:function(t){return"string"==typeof t?+t:hn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=V.sign(t.min),i=V.sign(t.max);n<0&&i<0?t.max=0:n>0&&i>0&&(t.min=0)}var a=void 0!==e.min||void 0!==e.suggestedMin,r=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),a!==r&&t.min>=t.max&&(a?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,n=e.stepSize,i=e.maxTicksLimit;return n?t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(t=this._computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:gn,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),i={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,precision:e.precision,stepSize:V.valueOrDefault(e.fixedStepSize,e.stepSize)},a=t.ticks=function(t,e){var n,i,a,r,o=[],s=t.stepSize,l=s||1,u=t.maxTicks-1,d=t.min,h=t.max,c=t.precision,f=e.min,g=e.max,p=V.niceNum((g-f)/u/l)*l;if(p<1e-14&&pn(d)&&pn(h))return[f,g];(r=Math.ceil(g/p)-Math.floor(f/p))>u&&(p=V.niceNum(r*p/u/l)*l),s||pn(c)?n=Math.pow(10,V._decimalPlaces(p)):(n=Math.pow(10,c),p=Math.ceil(p*n)/n),i=Math.floor(f/p)*p,a=Math.ceil(g/p)*p,s&&(!pn(d)&&V.almostWhole(d/p,p/1e3)&&(i=d),!pn(h)&&V.almostWhole(h/p,p/1e3)&&(a=h)),r=(a-i)/p,r=V.almostEquals(r,Math.round(r),p/1e3)?Math.round(r):Math.ceil(r),i=Math.round(i*n)/n,a=Math.round(a*n)/n,o.push(pn(d)?i:d);for(var m=1;m<r;++m)o.push(Math.round((i+m*p)*n)/n);return o.push(pn(h)?a:h),o}(i,t);t.handleDirectionalChanges(),t.max=V.max(a),t.min=V.min(a),e.reverse?(a.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),hn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,n=e.getTicks(),i=e.min,a=e.max;hn.prototype._configure.call(e),e.options.offset&&n.length&&(i-=t=(a-i)/Math.max(n.length-1,1)/2,a+=t),e._startValue=i,e._endValue=a,e._valueRange=a-i}}),vn={position:"left",ticks:{callback:$e.formatters.linear}};function bn(t,e,n,i){var a,r,o=t.options,s=function(t,e,n){var i=[n.type,void 0===e&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===t[i]&&(t[i]={pos:[],neg:[]}),t[i]}(e,o.stacked,n),l=s.pos,u=s.neg,d=i.length;for(a=0;a<d;++a)r=t._parseValue(i[a]),isNaN(r.min)||isNaN(r.max)||n.data[a].hidden||(l[a]=l[a]||0,u[a]=u[a]||0,o.relativePoints?l[a]=100:r.min<0||r.max<0?u[a]+=r.min:l[a]+=r.max)}function xn(t,e,n){var i,a,r=n.length;for(i=0;i<r;++i)a=t._parseValue(n[i]),isNaN(a.min)||isNaN(a.max)||e.data[i].hidden||(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}var yn=mn.extend({determineDataLimits:function(){var t,e,n,i,a=this,r=a.options,o=a.chart.data.datasets,s=a._getMatchingVisibleMetas(),l=r.stacked,u={},d=s.length;if(a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<d;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<d;++t)n=o[(e=s[t]).index].data,l?bn(a,u,e,n):xn(a,e,n);V.each(u,(function(t){i=t.pos.concat(t.neg),a.min=Math.min(a.min,V.min(i)),a.max=Math.max(a.max,V.max(i))})),a.min=V.isFinite(a.min)&&!isNaN(a.min)?a.min:0,a.max=V.isFinite(a.max)&&!isNaN(a.max)?a.max:1,a.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=V.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),_n=vn;yn._defaults=_n;var kn=V.valueOrDefault,wn=V.math.log10,Mn={position:"left",ticks:{callback:$e.formatters.logarithmic}};function Sn(t,e){return V.isFinite(t)&&t>=0?t:e}var Cn=hn.extend({determineDataLimits:function(){var t,e,n,i,a,r,o=this,s=o.options,l=o.chart,u=l.data.datasets,d=o.isHorizontal();function h(t){return d?t.xAxisID===o.id:t.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var c=s.stacked;if(void 0===c)for(t=0;t<u.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&h(e)&&void 0!==e.stack){c=!0;break}if(s.stacked||c){var f={};for(t=0;t<u.length;t++){var g=[(e=l.getDatasetMeta(t)).type,void 0===s.stacked&&void 0===e.stack?t:"",e.stack].join(".");if(l.isDatasetVisible(t)&&h(e))for(void 0===f[g]&&(f[g]=[]),a=0,r=(i=u[t].data).length;a<r;a++){var p=f[g];n=o._parseValue(i[a]),isNaN(n.min)||isNaN(n.max)||e.data[a].hidden||n.min<0||n.max<0||(p[a]=p[a]||0,p[a]+=n.max)}}V.each(f,(function(t){if(t.length>0){var e=V.min(t),n=V.max(t);o.min=Math.min(o.min,e),o.max=Math.max(o.max,n)}}))}else for(t=0;t<u.length;t++)if(e=l.getDatasetMeta(t),l.isDatasetVisible(t)&&h(e))for(a=0,r=(i=u[t].data).length;a<r;a++)n=o._parseValue(i[a]),isNaN(n.min)||isNaN(n.max)||e.data[a].hidden||n.min<0||n.max<0||(o.min=Math.min(n.min,o.min),o.max=Math.max(n.max,o.max),0!==n.min&&(o.minNotZero=Math.min(n.min,o.minNotZero)));o.min=V.isFinite(o.min)?o.min:null,o.max=V.isFinite(o.max)?o.max:null,o.minNotZero=V.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=Sn(e.min,t.min),t.max=Sn(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(wn(t.min))-1),t.max=Math.pow(10,Math.floor(wn(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(wn(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(wn(t.min))+1):10),null===t.minNotZero&&(t.min>0?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(wn(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,n=!t.isHorizontal(),i={min:Sn(e.min),max:Sn(e.max)},a=t.ticks=function(t,e){var n,i,a=[],r=kn(t.min,Math.pow(10,Math.floor(wn(e.min)))),o=Math.floor(wn(e.max)),s=Math.ceil(e.max/Math.pow(10,o));0===r?(n=Math.floor(wn(e.minNotZero)),i=Math.floor(e.minNotZero/Math.pow(10,n)),a.push(r),r=i*Math.pow(10,n)):(n=Math.floor(wn(r)),i=Math.floor(r/Math.pow(10,n)));var l=n<0?Math.pow(10,Math.abs(n)):1;do{a.push(r),10==++i&&(i=1,l=++n>=0?1:l),r=Math.round(i*Math.pow(10,n)*l)/l}while(n<o||n===o&&i<s);var u=kn(t.max,r);return a.push(u),a}(i,t);t.max=V.max(a),t.min=V.min(a),e.reverse?(n=!n,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),hn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(wn(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,n=0;hn.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),n=kn(t.options.ticks.fontSize,z.global.defaultFontSize)/t._length),t._startValue=wn(e),t._valueOffset=n,t._valueRange=(wn(t.max)-wn(e))/(1-n)},getPixelForValue:function(t){var e=this,n=0;return(t=+e.getRightValue(t))>e.min&&t>0&&(n=(wn(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(n)},getValueForPixel:function(t){var e=this,n=e.getDecimalForPixel(t);return 0===n&&0===e.min?0:Math.pow(10,e._startValue+(n-e._valueOffset)*e._valueRange)}}),Pn=Mn;Cn._defaults=Pn;var An=V.valueOrDefault,Dn=V.valueAtIndexOrDefault,Tn=V.options.resolve,In={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:$e.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}};function Fn(t){var e=t.ticks;return e.display&&t.display?An(e.fontSize,z.global.defaultFontSize)+2*e.backdropPaddingY:0}function Ln(t,e,n,i,a){return t===i||t===a?{start:e-n/2,end:e+n/2}:t<i||t>a?{start:e-n,end:e}:{start:e,end:e+n}}function On(t){return 0===t||180===t?"center":t<180?"left":"right"}function Rn(t,e,n,i){var a,r,o=n.y+i/2;if(V.isArray(e))for(a=0,r=e.length;a<r;++a)t.fillText(e[a],n.x,o),o+=i;else t.fillText(e,n.x,o)}function zn(t,e,n){90===t||270===t?n.y-=e.h/2:(t>270||t<90)&&(n.y-=e.h)}function Nn(t){return V.isNumber(t)?t:0}var Bn=mn.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=Fn(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var t=this,e=t.chart,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;V.each(e.data.datasets,(function(a,r){if(e.isDatasetVisible(r)){var o=e.getDatasetMeta(r);V.each(a.data,(function(e,a){var r=+t.getRightValue(e);isNaN(r)||o.data[a].hidden||(n=Math.min(r,n),i=Math.max(r,i))}))}})),t.min=n===Number.POSITIVE_INFINITY?0:n,t.max=i===Number.NEGATIVE_INFINITY?0:i,t.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Fn(this.options))},convertTicksToLabels:function(){var t=this;mn.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map((function(){var e=V.callback(t.options.pointLabels.callback,arguments,t);return e||0===e?e:""}))},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,n,i,a=V.options._parseFont(t.options.pointLabels),r={l:0,r:t.width,t:0,b:t.height-t.paddingTop},o={};t.ctx.font=a.string,t._pointLabelSizes=[];var s,l,u,d=t.chart.data.labels.length;for(e=0;e<d;e++){i=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=a.lineHeight,u=t.pointLabels[e],n=V.isArray(u)?{w:V.longestText(s,s.font,u),h:u.length*l}:{w:s.measureText(u).width,h:l},t._pointLabelSizes[e]=n;var h=t.getIndexAngle(e),c=V.toDegrees(h)%360,f=Ln(c,i.x,n.w,0,180),g=Ln(c,i.y,n.h,90,270);f.start<r.l&&(r.l=f.start,o.l=h),f.end>r.r&&(r.r=f.end,o.r=h),g.start<r.t&&(r.t=g.start,o.t=h),g.end>r.b&&(r.b=g.end,o.b=h)}t.setReductions(t.drawingArea,r,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,n){var i=this,a=e.l/Math.sin(n.l),r=Math.max(e.r-i.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),s=-Math.max(e.b-(i.height-i.paddingTop),0)/Math.cos(n.b);a=Nn(a),r=Nn(r),o=Nn(o),s=Nn(s),i.drawingArea=Math.min(Math.floor(t-(a+r)/2),Math.floor(t-(o+s)/2)),i.setCenterPoint(a,r,o,s)},setCenterPoint:function(t,e,n,i){var a=this,r=a.width-e-a.drawingArea,o=t+a.drawingArea,s=n+a.drawingArea,l=a.height-a.paddingTop-i-a.drawingArea;a.xCenter=Math.floor((o+r)/2+a.left),a.yCenter=Math.floor((s+l)/2+a.top+a.paddingTop)},getIndexAngle:function(t){var e=this.chart,n=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(V.isNullOrUndef(t))return NaN;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,n=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},_drawGrid:function(){var t,e,n,i=this,a=i.ctx,r=i.options,o=r.gridLines,s=r.angleLines,l=An(s.lineWidth,o.lineWidth),u=An(s.color,o.color);if(r.pointLabels.display&&function(t){var e=t.ctx,n=t.options,i=n.pointLabels,a=Fn(n),r=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),o=V.options._parseFont(i);e.save(),e.font=o.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;s>=0;s--){var l=0===s?a/2:0,u=t.getPointPosition(s,r+l+5),d=Dn(i.fontColor,s,z.global.defaultFontColor);e.fillStyle=d;var h=t.getIndexAngle(s),c=V.toDegrees(h);e.textAlign=On(c),zn(c,t._pointLabelSizes[s],u),Rn(e,t.pointLabels[s],u,o.lineHeight)}e.restore()}(i),o.display&&V.each(i.ticks,(function(t,n){0!==n&&(e=i.getDistanceFromCenterForValue(i.ticksAsNumbers[n]),function(t,e,n,i){var a,r=t.ctx,o=e.circular,s=t.chart.data.labels.length,l=Dn(e.color,i-1),u=Dn(e.lineWidth,i-1);if((o||s)&&l&&u){if(r.save(),r.strokeStyle=l,r.lineWidth=u,r.setLineDash&&(r.setLineDash(e.borderDash||[]),r.lineDashOffset=e.borderDashOffset||0),r.beginPath(),o)r.arc(t.xCenter,t.yCenter,n,0,2*Math.PI);else{a=t.getPointPosition(0,n),r.moveTo(a.x,a.y);for(var d=1;d<s;d++)a=t.getPointPosition(d,n),r.lineTo(a.x,a.y)}r.closePath(),r.stroke(),r.restore()}}(i,o,e,n))})),s.display&&l&&u){for(a.save(),a.lineWidth=l,a.strokeStyle=u,a.setLineDash&&(a.setLineDash(Tn([s.borderDash,o.borderDash,[]])),a.lineDashOffset=Tn([s.borderDashOffset,o.borderDashOffset,0])),t=i.chart.data.labels.length-1;t>=0;t--)e=i.getDistanceFromCenterForValue(r.ticks.reverse?i.min:i.max),n=i.getPointPosition(t,e),a.beginPath(),a.moveTo(i.xCenter,i.yCenter),a.lineTo(n.x,n.y),a.stroke();a.restore()}},_drawLabels:function(){var t=this,e=t.ctx,n=t.options.ticks;if(n.display){var i,a,r=t.getIndexAngle(0),o=V.options._parseFont(n),s=An(n.fontColor,z.global.defaultFontColor);e.save(),e.font=o.string,e.translate(t.xCenter,t.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",V.each(t.ticks,(function(r,l){(0!==l||n.reverse)&&(i=t.getDistanceFromCenterForValue(t.ticksAsNumbers[l]),n.showLabelBackdrop&&(a=e.measureText(r).width,e.fillStyle=n.backdropColor,e.fillRect(-a/2-n.backdropPaddingX,-i-o.size/2-n.backdropPaddingY,a+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)),e.fillStyle=s,e.fillText(r,0,-i))})),e.restore()}},_drawTitle:V.noop}),En=In;Bn._defaults=En;var Wn=V._deprecated,Vn=V.options.resolve,Hn=V.valueOrDefault,jn=Number.MIN_SAFE_INTEGER||-9007199254740991,qn=Number.MAX_SAFE_INTEGER||9007199254740991,Un={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yn=Object.keys(Un);function Gn(t,e){return t-e}function Xn(t){return V.valueOrDefault(t.time.min,t.ticks.min)}function Kn(t){return V.valueOrDefault(t.time.max,t.ticks.max)}function Zn(t,e,n,i){var a=function(t,e,n){for(var i,a,r,o=0,s=t.length-1;o>=0&&o<=s;){if(a=t[(i=o+s>>1)-1]||null,r=t[i],!a)return{lo:null,hi:r};if(r[e]<n)o=i+1;else{if(!(a[e]>n))return{lo:a,hi:r};s=i-1}}return{lo:r,hi:null}}(t,e,n),r=a.lo?a.hi?a.lo:t[t.length-2]:t[0],o=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=o[e]-r[e],l=s?(n-r[e])/s:0,u=(o[i]-r[i])*l;return r[i]+u}function $n(t,e){var n=t._adapter,i=t.options.time,a=i.parser,r=a||i.format,o=e;return"function"==typeof a&&(o=a(o)),V.isFinite(o)||(o="string"==typeof r?n.parse(o,r):n.parse(o)),null!==o?+o:(a||"function"!=typeof r||(o=r(e),V.isFinite(o)||(o=n.parse(o))),o)}function Jn(t,e){if(V.isNullOrUndef(e))return null;var n=t.options.time,i=$n(t,t.getRightValue(e));return null===i||n.round&&(i=+t._adapter.startOf(i,n.round)),i}function Qn(t,e,n,i){var a,r,o,s=Yn.length;for(a=Yn.indexOf(t);a<s-1;++a)if(o=(r=Un[Yn[a]]).steps?r.steps:qn,r.common&&Math.ceil((n-e)/(o*r.size))<=i)return Yn[a];return Yn[s-1]}function ti(t,e,n){var i,a,r=[],o={},s=e.length;for(i=0;i<s;++i)o[a=e[i]]=i,r.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,i){var a,r,o=t._adapter,s=+o.startOf(e[0].value,i),l=e[e.length-1].value;for(a=s;a<=l;a=+o.add(a,1,i))(r=n[a])>=0&&(e[r].major=!0);return e}(t,r,o,n):r}var ei=hn.extend({initialize:function(){this.mergeTicksOptions(),hn.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,n=e.time||(e.time={}),i=t._adapter=new Ze._date(e.adapters.date);return Wn("time scale",n.format,"time.format","time.parser"),Wn("time scale",n.min,"time.min","ticks.min"),Wn("time scale",n.max,"time.max","ticks.max"),V.mergeIf(n.displayFormats,i.formats()),hn.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),hn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,n,i,a,r,o,s=this,l=s.chart,u=s._adapter,d=s.options,h=d.time.unit||"day",c=qn,f=jn,g=[],p=[],m=[],v=s._getLabels();for(t=0,n=v.length;t<n;++t)m.push(Jn(s,v[t]));for(t=0,n=(l.data.datasets||[]).length;t<n;++t)if(l.isDatasetVisible(t))if(a=l.data.datasets[t].data,V.isObject(a[0]))for(p[t]=[],e=0,i=a.length;e<i;++e)r=Jn(s,a[e]),g.push(r),p[t][e]=r;else p[t]=m.slice(0),o||(g=g.concat(m),o=!0);else p[t]=[];m.length&&(c=Math.min(c,m[0]),f=Math.max(f,m[m.length-1])),g.length&&(g=n>1?function(t){var e,n,i,a={},r=[];for(e=0,n=t.length;e<n;++e)a[i=t[e]]||(a[i]=!0,r.push(i));return r}(g).sort(Gn):g.sort(Gn),c=Math.min(c,g[0]),f=Math.max(f,g[g.length-1])),c=Jn(s,Xn(d))||c,f=Jn(s,Kn(d))||f,c=c===qn?+u.startOf(Date.now(),h):c,f=f===jn?+u.endOf(Date.now(),h)+1:f,s.min=Math.min(c,f),s.max=Math.max(c+1,f),s._table=[],s._timestamps={data:g,datasets:p,labels:m}},buildTicks:function(){var t,e,n,i=this,a=i.min,r=i.max,o=i.options,s=o.ticks,l=o.time,u=i._timestamps,d=[],h=i.getLabelCapacity(a),c=s.source,f=o.distribution;for(u="data"===c||"auto"===c&&"series"===f?u.data:"labels"===c?u.labels:function(t,e,n,i){var a,r=t._adapter,o=t.options,s=o.time,l=s.unit||Qn(s.minUnit,e,n,i),u=Vn([s.stepSize,s.unitStepSize,1]),d="week"===l&&s.isoWeekday,h=e,c=[];if(d&&(h=+r.startOf(h,"isoWeek",d)),h=+r.startOf(h,d?"day":l),r.diff(n,e,l)>1e5*u)throw e+" and "+n+" are too far apart with stepSize of "+u+" "+l;for(a=h;a<n;a=+r.add(a,u,l))c.push(a);return a!==n&&"ticks"!==o.bounds||c.push(a),c}(i,a,r,h),"ticks"===o.bounds&&u.length&&(a=u[0],r=u[u.length-1]),a=Jn(i,Xn(o))||a,r=Jn(i,Kn(o))||r,t=0,e=u.length;t<e;++t)(n=u[t])>=a&&n<=r&&d.push(n);return i.min=a,i.max=r,i._unit=l.unit||(s.autoSkip?Qn(l.minUnit,i.min,i.max,h):function(t,e,n,i,a){var r,o;for(r=Yn.length-1;r>=Yn.indexOf(n);r--)if(o=Yn[r],Un[o].common&&t._adapter.diff(a,i,o)>=e-1)return o;return Yn[n?Yn.indexOf(n):0]}(i,d.length,l.minUnit,i.min,i.max)),i._majorUnit=s.major.enabled&&"year"!==i._unit?function(t){for(var e=Yn.indexOf(t)+1,n=Yn.length;e<n;++e)if(Un[Yn[e]].common)return Yn[e]}(i._unit):void 0,i._table=function(t,e,n,i){if("linear"===i||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var a,r,o,s,l,u=[],d=[e];for(a=0,r=t.length;a<r;++a)(s=t[a])>e&&s<n&&d.push(s);for(d.push(n),a=0,r=d.length;a<r;++a)l=d[a+1],o=d[a-1],s=d[a],void 0!==o&&void 0!==l&&Math.round((l+o)/2)===s||u.push({time:s,pos:a/(r-1)});return u}(i._timestamps.data,a,r,f),i._offsets=function(t,e,n,i,a){var r,o,s=0,l=0;return a.offset&&e.length&&(r=Zn(t,"time",e[0],"pos"),s=1===e.length?1-r:(Zn(t,"time",e[1],"pos")-r)/2,o=Zn(t,"time",e[e.length-1],"pos"),l=1===e.length?o:(o-Zn(t,"time",e[e.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(i._table,d,0,0,o),s.reverse&&d.reverse(),ti(i,d,i._majorUnit)},getLabelForIndex:function(t,e){var n=this,i=n._adapter,a=n.chart.data,r=n.options.time,o=a.labels&&t<a.labels.length?a.labels[t]:"",s=a.datasets[e].data[t];return V.isObject(s)&&(o=n.getRightValue(s)),r.tooltipFormat?i.format($n(n,o),r.tooltipFormat):"string"==typeof o?o:i.format($n(n,o),r.displayFormats.datetime)},tickFormatFunction:function(t,e,n,i){var a=this._adapter,r=this.options,o=r.time.displayFormats,s=o[this._unit],l=this._majorUnit,u=o[l],d=n[e],h=r.ticks,c=l&&u&&d&&d.major,f=a.format(t,i||(c?u:s)),g=c?h.major:h.minor,p=Vn([g.callback,g.userCallback,h.callback,h.userCallback]);return p?p(f,e,n):f},convertTicksToLabels:function(t){var e,n,i=[];for(e=0,n=t.length;e<n;++e)i.push(this.tickFormatFunction(t[e].value,e,t));return i},getPixelForOffset:function(t){var e=this._offsets,n=Zn(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+n)*e.factor)},getPixelForValue:function(t,e,n){var i=null;if(void 0!==e&&void 0!==n&&(i=this._timestamps.datasets[n][e]),null===i&&(i=Jn(this,t)),null!==i)return this.getPixelForOffset(i)},getPixelForTick:function(t){var e=this.getTicks();return t>=0&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end,i=Zn(this._table,"pos",n,"time");return this._adapter._create(i)},_getLabelSize:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,i=V.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(i),r=Math.sin(i),o=Hn(e.fontSize,z.global.defaultFontSize);return{w:n*a+o*r,h:n*r+o*a}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,n=e.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,r=e.tickFormatFunction(t,0,ti(e,[t],e._majorUnit),a),o=e._getLabelSize(r),s=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&s--,s>0?s:1}});ei._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var ni={category:fn,linear:yn,logarithmic:Cn,radialLinear:Bn,time:ei},ii={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ze._date.override("function"==typeof t?{_id:"moment",formats:function(){return ii},parse:function(e,n){return"string"==typeof e&&"string"==typeof n?e=t(e,n):e instanceof t||(e=t(e)),e.isValid()?e.valueOf():null},format:function(e,n){return t(e).format(n)},add:function(e,n,i){return t(e).add(n,i).valueOf()},diff:function(e,n,i){return t(e).diff(t(n),i)},startOf:function(e,n,i){return e=t(e),"isoWeek"===n?e.isoWeekday(i).valueOf():e.startOf(n).valueOf()},endOf:function(e,n){return t(e).endOf(n).valueOf()},_create:function(e){return t(e)}}:{}),z._set("global",{plugins:{filler:{propagate:!0}}});var ai={dataset:function(t){var e=t.fill,n=t.chart,i=n.getDatasetMeta(e),a=i&&n.isDatasetVisible(e)&&i.dataset._children||[],r=a.length||0;return r?function(t,e){return e<r&&a[e]._view||null}:null},boundary:function(t){var e=t.boundary,n=e?e.x:null,i=e?e.y:null;return V.isArray(e)?function(t,n){return e[n]}:function(t){return{x:null===n?t.x:n,y:null===i?t.y:i}}}};function ri(t,e,n){var i,a=t._model||{},r=a.fill;if(void 0===r&&(r=!!a.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(i=parseFloat(r,10),isFinite(i)&&Math.floor(i)===i)return"-"!==r[0]&&"+"!==r[0]||(i=e+i),!(i===e||i<0||i>=n)&&i;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function oi(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,n,i,a,r,o=t.el._scale,s=o.options,l=o.chart.data.labels.length,u=t.fill,d=[];if(!l)return null;for(e=s.ticks.reverse?o.max:o.min,n=s.ticks.reverse?o.min:o.max,i=o.getPointPositionForValue(0,e),a=0;a<l;++a)r="start"===u||"end"===u?o.getPointPositionForValue(a,"start"===u?e:n):o.getBasePosition(a),s.gridLines.circular&&(r.cx=i.x,r.cy=i.y,r.angle=o.getIndexAngle(a)-Math.PI/2),d.push(r);return d}(t):function(t){var e,n=t.el._model||{},i=t.el._scale||{},a=t.fill,r=null;if(isFinite(a))return null;if("start"===a?r=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===a?r=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?r=n.scaleZero:i.getBasePixel&&(r=i.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if(V.isFinite(r))return{x:(e=i.isHorizontal())?r:null,y:e?null:r}}return null}(t)}function si(t,e,n){var i,a=t[e].fill,r=[e];if(!n)return a;for(;!1!==a&&-1===r.indexOf(a);){if(!isFinite(a))return a;if(!(i=t[a]))return!1;if(i.visible)return a;r.push(a),a=i.fill}return!1}function li(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),ai[n](t))}function ui(t){return t&&!t.skip}function di(t,e,n,i,a){var r,o,s,l;if(i&&a){for(t.moveTo(e[0].x,e[0].y),r=1;r<i;++r)V.canvas.lineTo(t,e[r-1],e[r]);if(void 0===n[0].angle)for(t.lineTo(n[a-1].x,n[a-1].y),r=a-1;r>0;--r)V.canvas.lineTo(t,n[r],n[r-1],!0);else for(o=n[0].cx,s=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-o,2)+Math.pow(n[0].y-s,2)),r=a-1;r>0;--r)t.arc(o,s,l,n[r].angle,n[r-1].angle,!0)}}function hi(t,e,n,i,a,r){var o,s,l,u,d,h,c,f,g=e.length,p=i.spanGaps,m=[],v=[],b=0,x=0;for(t.beginPath(),o=0,s=g;o<s;++o)d=n(u=e[l=o%g]._view,l,i),h=ui(u),c=ui(d),r&&void 0===f&&h&&(s=g+(f=o+1)),h&&c?(b=m.push(u),x=v.push(d)):b&&x&&(p?(h&&m.push(u),c&&v.push(d)):(di(t,m,v,b,x),b=x=0,m=[],v=[]));di(t,m,v,b,x),t.closePath(),t.fillStyle=a,t.fill()}var ci={id:"filler",afterDatasetsUpdate:function(t,e){var n,i,a,r,o=(t.data.datasets||[]).length,s=e.propagate,l=[];for(i=0;i<o;++i)r=null,(a=(n=t.getDatasetMeta(i)).dataset)&&a._model&&a instanceof bt.Line&&(r={visible:t.isDatasetVisible(i),fill:ri(a,i,o),chart:t,el:a}),n.$filler=r,l.push(r);for(i=0;i<o;++i)(r=l[i])&&(r.fill=si(l,i,s),r.boundary=oi(r),r.mapper=li(r))},beforeDatasetsDraw:function(t){var e,n,i,a,r,o,s,l=t._getSortedVisibleDatasetMetas(),u=t.ctx;for(n=l.length-1;n>=0;--n)(e=l[n].$filler)&&e.visible&&(a=(i=e.el)._view,r=i._children||[],o=e.mapper,s=a.backgroundColor||z.global.defaultColor,o&&s&&r.length&&(V.canvas.clipArea(u,t.chartArea),hi(u,r,o,a,s,i._loop),V.canvas.unclipArea(u)))}},fi=V.rtl.getRtlAdapter,gi=V.noop,pi=V.valueOrDefault;function mi(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}z._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,i=this.chart,a=i.getDatasetMeta(n);a.hidden=null===a.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data.datasets,n=t.options.legend||{},i=n.labels&&n.labels.usePointStyle;return t._getSortedDatasetMetas().map((function(n){var a=n.controller.getStyle(i?0:void 0);return{text:e[n.index].label,fillStyle:a.backgroundColor,hidden:!t.isDatasetVisible(n.index),lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:a.borderWidth,strokeStyle:a.borderColor,pointStyle:a.pointStyle,rotation:a.rotation,datasetIndex:n.index}}),this)}}},legendCallback:function(t){var e,n,i,a=document.createElement("ul"),r=t.data.datasets;for(a.setAttribute("class",t.id+"-legend"),e=0,n=r.length;e<n;e++)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[e].backgroundColor,r[e].label&&i.appendChild(document.createTextNode(r[e].label));return a.outerHTML}});var vi=G.extend({initialize:function(t){V.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:gi,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:gi,beforeSetDimensions:gi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:gi,beforeBuildLabels:gi,buildLabels:function(){var t=this,e=t.options.labels||{},n=V.callback(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter((function(n){return e.filter(n,t.chart.data)}))),t.options.reverse&&n.reverse(),t.legendItems=n},afterBuildLabels:gi,beforeFit:gi,fit:function(){var t=this,e=t.options,n=e.labels,i=e.display,a=t.ctx,r=V.options._parseFont(n),o=r.size,s=t.legendHitBoxes=[],l=t.minSize,u=t.isHorizontal();if(u?(l.width=t.maxWidth,l.height=i?10:0):(l.width=i?10:0,l.height=t.maxHeight),i){if(a.font=r.string,u){var d=t.lineWidths=[0],h=0;a.textAlign="left",a.textBaseline="middle",V.each(t.legendItems,(function(t,e){var i=mi(n,o)+o/2+a.measureText(t.text).width;(0===e||d[d.length-1]+i+2*n.padding>l.width)&&(h+=o+n.padding,d[d.length-(e>0?0:1)]=0),s[e]={left:0,top:0,width:i,height:o},d[d.length-1]+=i+n.padding})),l.height+=h}else{var c=n.padding,f=t.columnWidths=[],g=t.columnHeights=[],p=n.padding,m=0,v=0;V.each(t.legendItems,(function(t,e){var i=mi(n,o)+o/2+a.measureText(t.text).width;e>0&&v+o+2*c>l.height&&(p+=m+n.padding,f.push(m),g.push(v),m=0,v=0),m=Math.max(m,i),v+=o+c,s[e]={left:0,top:0,width:i,height:o}})),p+=m,f.push(m),g.push(v),l.width+=p}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:gi,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var t=this,e=t.options,n=e.labels,i=z.global,a=i.defaultColor,r=i.elements.line,o=t.height,s=t.columnHeights,l=t.width,u=t.lineWidths;if(e.display){var d,h=fi(e.rtl,t.left,t.minSize.width),c=t.ctx,f=pi(n.fontColor,i.defaultFontColor),g=V.options._parseFont(n),p=g.size;c.textAlign=h.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.strokeStyle=f,c.fillStyle=f,c.font=g.string;var m=mi(n,p),v=t.legendHitBoxes,b=function(t,i){switch(e.align){case"start":return n.padding;case"end":return t-i;default:return(t-i+n.padding)/2}},x=t.isHorizontal();d=x?{x:t.left+b(l,u[0]),y:t.top+n.padding,line:0}:{x:t.left+n.padding,y:t.top+b(o,s[0]),line:0},V.rtl.overrideTextDirection(t.ctx,e.textDirection);var y=p+n.padding;V.each(t.legendItems,(function(e,i){var f=c.measureText(e.text).width,g=m+p/2+f,_=d.x,k=d.y;h.setWidth(t.minSize.width),x?i>0&&_+g+n.padding>t.left+t.minSize.width&&(k=d.y+=y,d.line++,_=d.x=t.left+b(l,u[d.line])):i>0&&k+y>t.top+t.minSize.height&&(_=d.x=_+t.columnWidths[d.line]+n.padding,d.line++,k=d.y=t.top+b(o,s[d.line]));var w=h.x(_);!function(t,e,i){if(!(isNaN(m)||m<=0)){c.save();var o=pi(i.lineWidth,r.borderWidth);if(c.fillStyle=pi(i.fillStyle,a),c.lineCap=pi(i.lineCap,r.borderCapStyle),c.lineDashOffset=pi(i.lineDashOffset,r.borderDashOffset),c.lineJoin=pi(i.lineJoin,r.borderJoinStyle),c.lineWidth=o,c.strokeStyle=pi(i.strokeStyle,a),c.setLineDash&&c.setLineDash(pi(i.lineDash,r.borderDash)),n&&n.usePointStyle){var s=m*Math.SQRT2/2,l=h.xPlus(t,m/2),u=e+p/2;V.canvas.drawPoint(c,i.pointStyle,s,l,u,i.rotation)}else c.fillRect(h.leftForLtr(t,m),e,m,p),0!==o&&c.strokeRect(h.leftForLtr(t,m),e,m,p);c.restore()}}(w,k,e),v[i].left=h.leftForLtr(w,v[i].width),v[i].top=k,function(t,e,n,i){var a=p/2,r=h.xPlus(t,m+a),o=e+a;c.fillText(n.text,r,o),n.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(r,o),c.lineTo(h.xPlus(r,i),o),c.stroke())}(w,k,e,f),x?d.x+=g+n.padding:d.y+=y})),V.rtl.restoreTextDirection(t.ctx,e.textDirection)}},_getLegendItemAt:function(t,e){var n,i,a,r=this;if(t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom)for(a=r.legendHitBoxes,n=0;n<a.length;++n)if(t>=(i=a[n]).left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height)return r.legendItems[n];return null},handleEvent:function(t){var e,n=this,i=n.options,a="mouseup"===t.type?"click":t.type;if("mousemove"===a){if(!i.onHover&&!i.onLeave)return}else{if("click"!==a)return;if(!i.onClick)return}e=n._getLegendItemAt(t.x,t.y),"click"===a?e&&i.onClick&&i.onClick.call(n,t.native,e):(i.onLeave&&e!==n._hoveredItem&&(n._hoveredItem&&i.onLeave.call(n,t.native,n._hoveredItem),n._hoveredItem=e),i.onHover&&e&&i.onHover.call(n,t.native,e))}});function bi(t,e){var n=new vi({ctx:t.ctx,options:e,chart:t});de.configure(t,n,e),de.addBox(t,n),t.legend=n}var xi={id:"legend",_element:vi,beforeInit:function(t){var e=t.options.legend;e&&bi(t,e)},beforeUpdate:function(t){var e=t.options.legend,n=t.legend;e?(V.mergeIf(e,z.global.legend),n?(de.configure(t,n,e),n.options=e):bi(t,e)):n&&(de.removeBox(t,n),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}},yi=V.noop;z._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var _i=G.extend({initialize:function(t){V.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:yi,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:yi,beforeSetDimensions:yi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:yi,beforeBuildLabels:yi,buildLabels:yi,afterBuildLabels:yi,beforeFit:yi,fit:function(){var t,e=this,n=e.options,i=e.minSize={},a=e.isHorizontal();n.display?(t=(V.isArray(n.text)?n.text.length:1)*V.options._parseFont(n).lineHeight+2*n.padding,e.width=i.width=a?e.maxWidth:t,e.height=i.height=a?t:e.maxHeight):e.width=i.width=e.height=i.height=0},afterFit:yi,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=t.options;if(n.display){var i,a,r,o=V.options._parseFont(n),s=o.lineHeight,l=s/2+n.padding,u=0,d=t.top,h=t.left,c=t.bottom,f=t.right;e.fillStyle=V.valueOrDefault(n.fontColor,z.global.defaultFontColor),e.font=o.string,t.isHorizontal()?(a=h+(f-h)/2,r=d+l,i=f-h):(a="left"===n.position?h+l:f-l,r=d+(c-d)/2,i=c-d,u=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(a,r),e.rotate(u),e.textAlign="center",e.textBaseline="middle";var g=n.text;if(V.isArray(g))for(var p=0,m=0;m<g.length;++m)e.fillText(g[m],0,p,i),p+=s;else e.fillText(g,0,0,i);e.restore()}}});function ki(t,e){var n=new _i({ctx:t.ctx,options:e,chart:t});de.configure(t,n,e),de.addBox(t,n),t.titleBlock=n}var wi={},Mi=ci,Si=xi,Ci={id:"title",_element:_i,beforeInit:function(t){var e=t.options.title;e&&ki(t,e)},beforeUpdate:function(t){var e=t.options.title,n=t.titleBlock;e?(V.mergeIf(e,z.global.title),n?(de.configure(t,n,e),n.options=e):ki(t,e)):n&&(de.removeBox(t,n),delete t.titleBlock)}};for(var Pi in wi.filler=Mi,wi.legend=Si,wi.title=Ci,Ge.helpers=V,function(){function t(t,e,n){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function e(t){return null!=t&&"none"!==t}function n(n,i,a){var r=document.defaultView,o=V._getParentNode(n),s=r.getComputedStyle(n)[i],l=r.getComputedStyle(o)[i],u=e(s),d=e(l),h=Number.POSITIVE_INFINITY;return u||d?Math.min(u?t(s,n,a):h,d?t(l,o,a):h):"none"}V.where=function(t,e){if(V.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return V.each(t,(function(t){e(t)&&n.push(t)})),n},V.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var i=0,a=t.length;i<a;++i)if(e.call(n,t[i],i,t))return i;return-1},V.findNextWhere=function(t,e,n){V.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<t.length;i++){var a=t[i];if(e(a))return a}},V.findPreviousWhere=function(t,e,n){V.isNullOrUndef(n)&&(n=t.length);for(var i=n-1;i>=0;i--){var a=t[i];if(e(a))return a}},V.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},V.almostEquals=function(t,e,n){return Math.abs(t-e)<n},V.almostWhole=function(t,e){var n=Math.round(t);return n-e<=t&&n+e>=t},V.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},V.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},V.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},V.toRadians=function(t){return t*(Math.PI/180)},V.toDegrees=function(t){return t*(180/Math.PI)},V._decimalPlaces=function(t){if(V.isFinite(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}},V.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i),r=Math.atan2(i,n);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:a}},V.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},V.aliasPixel=function(t){return t%2==0?0:.5},V._alignPixel=function(t,e,n){var i=t.currentDevicePixelRatio,a=n/2;return Math.round((e-a)*i)/i+a},V.splineCurve=function(t,e,n,i){var a=t.skip?e:t,r=e,o=n.skip?e:n,s=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)),l=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),u=s/(s+l),d=l/(s+l),h=i*(u=isNaN(u)?0:u),c=i*(d=isNaN(d)?0:d);return{previous:{x:r.x-h*(o.x-a.x),y:r.y-h*(o.y-a.y)},next:{x:r.x+c*(o.x-a.x),y:r.y+c*(o.y-a.y)}}},V.EPSILON=Number.EPSILON||1e-14,V.splineCurveMonotone=function(t){var e,n,i,a,r,o,s,l,u,d=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),h=d.length;for(e=0;e<h;++e)if(!(i=d[e]).model.skip){if(n=e>0?d[e-1]:null,(a=e<h-1?d[e+1]:null)&&!a.model.skip){var c=a.model.x-i.model.x;i.deltaK=0!==c?(a.model.y-i.model.y)/c:0}!n||n.model.skip?i.mK=i.deltaK:!a||a.model.skip?i.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(n.deltaK+i.deltaK)/2}for(e=0;e<h-1;++e)i=d[e],a=d[e+1],i.model.skip||a.model.skip||(V.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=a.mK=0:(r=i.mK/i.deltaK,o=a.mK/i.deltaK,(l=Math.pow(r,2)+Math.pow(o,2))<=9||(s=3/Math.sqrt(l),i.mK=r*s*i.deltaK,a.mK=o*s*i.deltaK)));for(e=0;e<h;++e)(i=d[e]).model.skip||(n=e>0?d[e-1]:null,a=e<h-1?d[e+1]:null,n&&!n.model.skip&&(u=(i.model.x-n.model.x)/3,i.model.controlPointPreviousX=i.model.x-u,i.model.controlPointPreviousY=i.model.y-u*i.mK),a&&!a.model.skip&&(u=(a.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+u,i.model.controlPointNextY=i.model.y+u*i.mK))},V.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},V.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},V.niceNum=function(t,e){var n=Math.floor(V.log10(t)),i=t/Math.pow(10,n);return(e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},V.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},V.getRelativePosition=function(t,e){var n,i,a=t.originalEvent||t,r=t.target||t.srcElement,o=r.getBoundingClientRect(),s=a.touches;s&&s.length>0?(n=s[0].clientX,i=s[0].clientY):(n=a.clientX,i=a.clientY);var l=parseFloat(V.getStyle(r,"padding-left")),u=parseFloat(V.getStyle(r,"padding-top")),d=parseFloat(V.getStyle(r,"padding-right")),h=parseFloat(V.getStyle(r,"padding-bottom")),c=o.right-o.left-l-d,f=o.bottom-o.top-u-h;return{x:n=Math.round((n-o.left-l)/c*r.width/e.currentDevicePixelRatio),y:i=Math.round((i-o.top-u)/f*r.height/e.currentDevicePixelRatio)}},V.getConstraintWidth=function(t){return n(t,"max-width","clientWidth")},V.getConstraintHeight=function(t){return n(t,"max-height","clientHeight")},V._calculatePadding=function(t,e,n){return(e=V.getStyle(t,e)).indexOf("%")>-1?n*parseInt(e,10)/100:parseInt(e,10)},V._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},V.getMaximumWidth=function(t){var e=V._getParentNode(t);if(!e)return t.clientWidth;var n=e.clientWidth,i=n-V._calculatePadding(e,"padding-left",n)-V._calculatePadding(e,"padding-right",n),a=V.getConstraintWidth(t);return isNaN(a)?i:Math.min(i,a)},V.getMaximumHeight=function(t){var e=V._getParentNode(t);if(!e)return t.clientHeight;var n=e.clientHeight,i=n-V._calculatePadding(e,"padding-top",n)-V._calculatePadding(e,"padding-bottom",n),a=V.getConstraintHeight(t);return isNaN(a)?i:Math.min(i,a)},V.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},V.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var i=t.canvas,a=t.height,r=t.width;i.height=a*n,i.width=r*n,t.ctx.scale(n,n),i.style.height||i.style.width||(i.style.height=a+"px",i.style.width=r+"px")}},V.fontString=function(t,e,n){return e+" "+t+"px "+n},V.longestText=function(t,e,n,i){var a=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(a=i.data={},r=i.garbageCollect=[],i.font=e),t.font=e;var o,s,l,u,d,h=0,c=n.length;for(o=0;o<c;o++)if(null!=(u=n[o])&&!0!==V.isArray(u))h=V.measureText(t,a,r,h,u);else if(V.isArray(u))for(s=0,l=u.length;s<l;s++)null==(d=u[s])||V.isArray(d)||(h=V.measureText(t,a,r,h,d));var f=r.length/2;if(f>n.length){for(o=0;o<f;o++)delete a[r[o]];r.splice(0,f)}return h},V.measureText=function(t,e,n,i,a){var r=e[a];return r||(r=e[a]=t.measureText(a).width,n.push(a)),r>i&&(i=r),i},V.numberOfLabelLines=function(t){var e=1;return V.each(t,(function(t){V.isArray(t)&&t.length>e&&(e=t.length)})),e},V.color=k?function(t){return t instanceof CanvasGradient&&(t=z.global.defaultColor),k(t)}:function(t){return console.error("Color.js not found!"),t},V.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:V.color(t).saturate(.5).darken(.1).rgbString()}}(),Ge._adapters=Ze,Ge.Animation=K,Ge.animationService=Z,Ge.controllers=Gt,Ge.DatasetController=et,Ge.defaults=z,Ge.Element=G,Ge.elements=bt,Ge.Interaction=te,Ge.layouts=de,Ge.platform=Se,Ge.plugins=Ce,Ge.Scale=hn,Ge.scaleService=Pe,Ge.Ticks=$e,Ge.Tooltip=Be,Ge.helpers.each(ni,(function(t,e){Ge.scaleService.registerScaleType(e,t,t._defaults)})),wi)wi.hasOwnProperty(Pi)&&Ge.plugins.register(wi[Pi]);Ge.platform.initialize();var Ai=Ge;return"undefined"!=typeof window&&(window.Chart=Ge),Ge.Chart=Ge,Ge.Legend=wi.legend._element,Ge.Title=wi.title._element,Ge.pluginService=Ge.plugins,Ge.PluginBase=Ge.Element.extend({}),Ge.canvasHelpers=Ge.helpers.canvas,Ge.layoutService=Ge.layouts,Ge.LinearScaleBase=mn,Ge.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(t){Ge[t]=function(e,n){return new Ge(e,Ge.helpers.merge(n||{},{type:t.charAt(0).toLowerCase()+t.slice(1)}))}})),Ai}));
!function(t,e,n,o){"use strict";function i(t,e){var o,i,a,s=[],r=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=p(t.data.options,e)),o=e.$target||n(t.currentTarget).trigger("blur"),(a=n.fancybox.getInstance())&&a.$trigger&&a.$trigger.is(o)||(e.selector?s=n(e.selector):(i=o.attr("data-fancybox")||"")?s=(s=t.data?t.data.items:[]).length?s.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]'):s=[o],(r=n(s).index(o))<0&&(r=0),(a=n.fancybox.open(s,e,r)).$trigger=o))}if(t.console=t.console||{info:function(t){}},n){if(n.fn.fancybox)return void console.info("fancyBox already initialized");var a={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},s=n(t),r=n(e),c=0,l=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)},d=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)},u=function(){var t,n=e.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in o)if(void 0!==n.style[t])return o[t];return"transitionend"}(),f=function(t){return t&&t.length&&t[0].offsetHeight},p=function(t,e){var o=n.extend(!0,{},t,e);return n.each(e,(function(t,e){n.isArray(e)&&(o[t]=e)})),o},h=function(t){var o,i;return!(!t||t.ownerDocument!==e)&&(n(".fancybox-container").css("pointer-events","none"),o={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2},i=e.elementFromPoint(o.x,o.y)===t,n(".fancybox-container").css("pointer-events",""),i)},g=function(t,e,o){var i=this;i.opts=p({index:o},n.fancybox.defaults),n.isPlainObject(e)&&(i.opts=p(i.opts,e)),n.fancybox.isMobile&&(i.opts=p(i.opts,i.opts.mobile)),i.id=i.opts.id||++c,i.currIndex=parseInt(i.opts.index,10)||0,i.prevIndex=null,i.prevPos=null,i.currPos=0,i.firstRun=!0,i.group=[],i.slides={},i.addContent(t),i.group.length&&i.init()};n.extend(g.prototype,{init:function(){var o,i,a=this,s=a.group[a.currIndex].opts;s.closeExisting&&n.fancybox.close(!0),n("body").addClass("fancybox-active"),!n.fancybox.getInstance()&&!1!==s.hideScrollbar&&!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(t.innerWidth-e.documentElement.clientWidth)+"px;}</style>"),n("body").addClass("compensate-for-scrollbar")),i="",n.each(s.buttons,(function(t,e){i+=s.btnTpl[e]||""})),o=n(a.translate(a,s.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",s.btnTpl.arrowLeft+s.btnTpl.arrowRight))).attr("id","fancybox-container-"+a.id).addClass(s.baseClass).data("FancyBox",a).appendTo(s.parentEl),a.$refs={container:o},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach((function(t){a.$refs[t]=o.find(".fancybox-"+t)})),a.trigger("onInit"),a.activate(),a.jumpTo(a.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,(function(t,e){return void 0===n[e]?t:n[e]}))},addContent:function(t){var e,o=this,i=n.makeArray(t);n.each(i,(function(t,e){var i,a,s,r,c,l={},d={};n.isPlainObject(e)?(l=e,d=e.opts||e):"object"===n.type(e)&&n(e).length?(d=(i=n(e)).data()||{},(d=n.extend(!0,{},d,d.options)).$orig=i,l.src=o.opts.src||d.src||i.attr("href"),l.type||l.src||(l.type="inline",l.src=e)):l={type:"html",src:e+""},l.opts=n.extend(!0,{},o.opts,d),n.isArray(d.buttons)&&(l.opts.buttons=d.buttons),n.fancybox.isMobile&&l.opts.mobile&&(l.opts=p(l.opts,l.opts.mobile)),a=l.type||l.opts.type,r=l.src||"",!a&&r&&((s=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(a="video",l.opts.video.format||(l.opts.video.format="video/"+("ogv"===s[1]?"ogg":s[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?a="image":r.match(/\.(pdf)((\?|#).*)?$/i)?(a="iframe",l=n.extend(!0,l,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===r.charAt(0)&&(a="inline")),a?l.type=a:o.trigger("objectNeedsType",l),l.contentType||(l.contentType=n.inArray(l.type,["html","inline","ajax"])>-1?"html":l.type),l.index=o.group.length,"auto"==l.opts.smallBtn&&(l.opts.smallBtn=n.inArray(l.type,["html","inline","ajax"])>-1),"auto"===l.opts.toolbar&&(l.opts.toolbar=!l.opts.smallBtn),l.$thumb=l.opts.$thumb||null,l.opts.$trigger&&l.index===o.opts.index&&(l.$thumb=l.opts.$trigger.find("img:first"),l.$thumb.length&&(l.opts.$orig=l.opts.$trigger)),l.$thumb&&l.$thumb.length||!l.opts.$orig||(l.$thumb=l.opts.$orig.find("img:first")),l.$thumb&&!l.$thumb.length&&(l.$thumb=null),l.thumb=l.opts.thumb||(l.$thumb?l.$thumb[0].src:null),"function"===n.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(e,[o,l])),"function"===n.type(o.opts.caption)&&(l.opts.caption=o.opts.caption.apply(e,[o,l])),l.opts.caption instanceof n||(l.opts.caption=void 0===l.opts.caption?"":l.opts.caption+""),"ajax"===l.type&&((c=r.split(/\s+/,2)).length>1&&(l.src=c.shift(),l.opts.filter=c.shift())),l.opts.modal&&(l.opts=n.extend(!0,l.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),o.group.push(l)})),Object.keys(o.slides).length&&(o.updateControls(),(e=o.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var e=this;e.removeEvents(),e.$refs.container.on("click.fb-close","[data-fancybox-close]",(function(t){t.stopPropagation(),t.preventDefault(),e.close(t)})).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",(function(t){t.stopPropagation(),t.preventDefault(),e.previous()})).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",(function(t){t.stopPropagation(),t.preventDefault(),e.next()})).on("click.fb","[data-fancybox-zoom]",(function(t){e[e.isScaledDown()?"scaleToActual":"scaleToFit"]()})),s.on("orientationchange.fb resize.fb",(function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(e.requestId&&d(e.requestId),e.requestId=l((function(){e.update(t)}))):(e.current&&"iframe"===e.current.type&&e.$refs.stage.hide(),setTimeout((function(){e.$refs.stage.show(),e.update(t)}),n.fancybox.isMobile?600:250))})),r.on("keydown.fb",(function(t){var o=(n.fancybox?n.fancybox.getInstance():null).current,i=t.keyCode||t.which;if(9!=i)return!o.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||n(t.target).is("input,textarea,video,audio,select")?void 0:8===i||27===i?(t.preventDefault(),void e.close(t)):37===i||38===i?(t.preventDefault(),void e.previous()):39===i||40===i?(t.preventDefault(),void e.next()):void e.trigger("afterKeydown",t,i);o.opts.trapFocus&&e.focus(t)})),e.group[e.currIndex].opts.idleTime&&(e.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",(function(t){e.idleSecondsCounter=0,e.isIdle&&e.showControls(),e.isIdle=!1})),e.idleInterval=t.setInterval((function(){++e.idleSecondsCounter>=e.group[e.currIndex].opts.idleTime&&!e.isDragging&&(e.isIdle=!0,e.idleSecondsCounter=0,e.hideControls())}),1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e){var o,i,a,s,r,c,l,d,u,p=this,h=p.group.length;if(!(p.isDragging||p.isClosing||p.isAnimating&&p.firstRun)){if(t=parseInt(t,10),!(a=p.current?p.current.opts.loop:p.opts.loop)&&(t<0||t>=h))return!1;if(o=p.firstRun=!Object.keys(p.slides).length,r=p.current,p.prevIndex=p.currIndex,p.prevPos=p.currPos,s=p.createSlide(t),h>1&&((a||s.index<h-1)&&p.createSlide(t+1),(a||s.index>0)&&p.createSlide(t-1)),p.current=s,p.currIndex=s.index,p.currPos=s.pos,p.trigger("beforeShow",o),p.updateControls(),s.forcedDuration=void 0,n.isNumeric(e)?s.forcedDuration=e:e=s.opts[o?"animationDuration":"transitionDuration"],e=parseInt(e,10),i=p.isMoved(s),s.$slide.addClass("fancybox-slide--current"),o)return s.opts.animationEffect&&e&&p.$refs.container.css("transition-duration",e+"ms"),p.$refs.container.addClass("fancybox-is-open").trigger("focus"),p.loadSlide(s),void p.preload("image");c=n.fancybox.getTranslate(r.$slide),l=n.fancybox.getTranslate(p.$refs.stage),n.each(p.slides,(function(t,e){n.fancybox.stop(e.$slide,!0)})),r.pos!==s.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(u=c.left-(r.pos*c.width+r.pos*r.opts.gutter),n.each(p.slides,(function(t,o){o.$slide.removeClass("fancybox-animated").removeClass((function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}));var i=o.pos*c.width+o.pos*o.opts.gutter;n.fancybox.setTranslate(o.$slide,{top:0,left:i-l.left+u}),o.pos!==s.pos&&o.$slide.addClass("fancybox-slide--"+(o.pos>s.pos?"next":"previous")),f(o.$slide),n.fancybox.animate(o.$slide,{top:0,left:(o.pos-s.pos)*c.width+(o.pos-s.pos)*o.opts.gutter},e,(function(){o.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===p.currPos&&p.complete()}))}))):e&&s.opts.transitionEffect&&(d="fancybox-animated fancybox-fx-"+s.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>s.pos?"next":"previous")),n.fancybox.animate(r.$slide,d,e,(function(){r.$slide.removeClass(d).removeClass("fancybox-slide--next fancybox-slide--previous")}),!1)),s.isLoaded?p.revealContent(s):p.loadSlide(s),p.preload("image")}},createSlide:function(t){var e,o,i=this;return o=(o=t%i.group.length)<0?i.group.length+o:o,!i.slides[t]&&i.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=n.extend(!0,{},i.group[o],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,o){var i,a,s,r,c,l=this,d=l.current,u=d.$content,f=n.fancybox.getTranslate(d.$slide).width,p=n.fancybox.getTranslate(d.$slide).height,h=d.width,g=d.height;l.isAnimating||l.isMoved()||!u||"image"!=d.type||!d.isLoaded||d.hasError||(l.isAnimating=!0,n.fancybox.stop(u),t=void 0===t?.5*f:t,e=void 0===e?.5*p:e,(i=n.fancybox.getTranslate(u)).top-=n.fancybox.getTranslate(d.$slide).top,i.left-=n.fancybox.getTranslate(d.$slide).left,r=h/i.width,c=g/i.height,a=.5*f-.5*h,s=.5*p-.5*g,h>f&&((a=i.left*r-(t*r-t))>0&&(a=0),a<f-h&&(a=f-h)),g>p&&((s=i.top*c-(e*c-e))>0&&(s=0),s<p-g&&(s=p-g)),l.updateCursor(h,g),n.fancybox.animate(u,{top:s,left:a,scaleX:r,scaleY:c},o||366,(function(){l.isAnimating=!1})),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,o=this,i=o.current,a=i.$content;o.isAnimating||o.isMoved()||!a||"image"!=i.type||!i.isLoaded||i.hasError||(o.isAnimating=!0,n.fancybox.stop(a),e=o.getFitPos(i),o.updateCursor(e.width,e.height),n.fancybox.animate(a,{top:e.top,left:e.left,scaleX:e.width/a.width(),scaleY:e.height/a.height()},t||366,(function(){o.isAnimating=!1})))},getFitPos:function(t){var e,o,i,a,s=t.$content,r=t.$slide,c=t.width||t.opts.width,l=t.height||t.opts.height,d={};return!!(t.isLoaded&&s&&s.length)&&(e=n.fancybox.getTranslate(this.$refs.stage).width,o=n.fancybox.getTranslate(this.$refs.stage).height,e-=parseFloat(r.css("paddingLeft"))+parseFloat(r.css("paddingRight"))+parseFloat(s.css("marginLeft"))+parseFloat(s.css("marginRight")),o-=parseFloat(r.css("paddingTop"))+parseFloat(r.css("paddingBottom"))+parseFloat(s.css("marginTop"))+parseFloat(s.css("marginBottom")),c&&l||(c=e,l=o),(c*=i=Math.min(1,e/c,o/l))>e-.5&&(c=e),(l*=i)>o-.5&&(l=o),"image"===t.type?(d.top=Math.floor(.5*(o-l))+parseFloat(r.css("paddingTop")),d.left=Math.floor(.5*(e-c))+parseFloat(r.css("paddingLeft"))):"video"===t.contentType&&(l>c/(a=t.opts.width&&t.opts.height?c/l:t.opts.ratio||16/9)?l=c/a:c>l*a&&(c=l*a)),d.width=c,d.height=l,d)},update:function(t){var e=this;n.each(e.slides,(function(n,o){e.updateSlide(o,t)}))},updateSlide:function(t,e){var o=this,i=t&&t.$content,a=t.width||t.opts.width,s=t.height||t.opts.height,r=t.$slide;o.adjustCaption(t),i&&(a||s||"video"===t.contentType)&&!t.hasError&&(n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(t)),t.pos===o.currPos&&(o.isAnimating=!1,o.updateCursor())),o.adjustLayout(t),r.length&&(r.trigger("refresh"),t.pos===o.currPos&&o.$refs.toolbar.add(o.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",r.get(0).scrollHeight>r.get(0).clientHeight)),o.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,o=e.current,i=o.$slide;!e.isClosing&&o&&(i.siblings().css({transform:"",opacity:""}),i.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),n.fancybox.animate(i,{top:0,left:0,opacity:1},void 0===t?0:t,(function(){i.css({transform:"",opacity:""}),o.isComplete||e.complete()}),!1))},isMoved:function(t){var e,o,i=t||this.current;return!!i&&(o=n.fancybox.getTranslate(this.$refs.stage),e=n.fancybox.getTranslate(i.$slide),!i.$slide.hasClass("fancybox-animated")&&(Math.abs(e.top-o.top)>.5||Math.abs(e.left-o.left)>.5))},updateCursor:function(t,e){var o,i,a=this,s=a.current,r=a.$refs.container;s&&!a.isClosing&&a.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),i=!!(o=a.canPan(t,e))||a.isZoomable(),r.toggleClass("fancybox-is-zoomable",i),n("[data-fancybox-zoom]").prop("disabled",!i),o?r.addClass("fancybox-can-pan"):i&&("zoom"===s.opts.clickContent||n.isFunction(s.opts.clickContent)&&"zoom"==s.opts.clickContent(s))?r.addClass("fancybox-can-zoomIn"):s.opts.touch&&(s.opts.touch.vertical||a.group.length>1)&&"video"!==s.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this,n=e.current;if(n&&!e.isClosing&&"image"===n.type&&!n.hasError){if(!n.isLoaded)return!0;if((t=e.getFitPos(n))&&(n.width>t.width||n.height>t.height))return!0}return!1},isScaledDown:function(t,e){var o=!1,i=this.current,a=i.$content;return void 0!==t&&void 0!==e?o=t<i.width&&e<i.height:a&&(o=(o=n.fancybox.getTranslate(a)).width<i.width&&o.height<i.height),o},canPan:function(t,e){var o=this.current,i=null,a=!1;return"image"===o.type&&(o.isComplete||t&&e)&&!o.hasError&&(a=this.getFitPos(o),void 0!==t&&void 0!==e?i={width:t,height:e}:o.isComplete&&(i=n.fancybox.getTranslate(o.$content)),i&&a&&(a=Math.abs(i.width-a.width)>1.5||Math.abs(i.height-a.height)>1.5)),a},loadSlide:function(t){var e,o,i,a=this;if(!t.isLoading&&!t.isLoaded){if(t.isLoading=!0,!1===a.trigger("beforeLoad",t))return t.isLoading=!1,!1;switch(e=t.type,(o=t.$slide).off("refresh").trigger("onReset").addClass(t.opts.slideClass),e){case"image":a.setImage(t);break;case"iframe":a.setIframe(t);break;case"html":a.setContent(t,t.src||t.content);break;case"video":a.setContent(t,t.opts.video.tpl.replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.opts.videoFormat||t.opts.video.format||"").replace("{{poster}}",t.thumb||""));break;case"inline":n(t.src).length?a.setContent(t,n(t.src)):a.setError(t);break;case"ajax":a.showLoading(t),i=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&a.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&a.setError(t)}})),o.one("onReset",(function(){i.abort()}));break;default:a.setError(t)}return!0}},setImage:function(t){var o,i=this;setTimeout((function(){var e=t.$image;i.isClosing||!t.isLoading||e&&e.length&&e[0].complete||t.hasError||i.showLoading(t)}),50),i.checkSrcset(t),t.$content=n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(t.$slide.addClass("fancybox-slide--image")),!1!==t.opts.preload&&t.opts.width&&t.opts.height&&t.thumb&&(t.width=t.opts.width,t.height=t.opts.height,(o=e.createElement("img")).onerror=function(){n(this).remove(),t.$ghost=null},o.onload=function(){i.afterLoad(t)},t.$ghost=n(o).addClass("fancybox-image").appendTo(t.$content).attr("src",t.thumb)),i.setBigImage(t)},checkSrcset:function(e){var n,o,i,a,s=e.opts.srcset||e.opts.image.srcset;if(s){i=t.devicePixelRatio||1,a=t.innerWidth*i,(o=s.split(",").map((function(t){var e={};return t.trim().split(/\s+/).forEach((function(t,n){var o=parseInt(t.substring(0,t.length-1),10);if(0===n)return e.url=t;o&&(e.value=o,e.postfix=t[t.length-1])})),e}))).sort((function(t,e){return t.value-e.value}));for(var r=0;r<o.length;r++){var c=o[r];if("w"===c.postfix&&c.value>=a||"x"===c.postfix&&c.value>=i){n=c;break}}!n&&o.length&&(n=o[o.length-1]),n&&(e.src=n.url,e.width&&e.height&&"w"==n.postfix&&(e.height=e.width/e.height*n.value,e.width=n.value),e.opts.srcset=s)}},setBigImage:function(t){var o=this,i=e.createElement("img"),a=n(i);t.$image=a.one("error",(function(){o.setError(t)})).one("load",(function(){var e;t.$ghost||(o.resolveImageSlideSize(t,this.naturalWidth,this.naturalHeight),o.afterLoad(t)),o.isClosing||(t.opts.srcset&&((e=t.opts.sizes)&&"auto"!==e||(e=(t.width/t.height>1&&s.width()/s.height()>1?"100":Math.round(t.width/t.height*100))+"vw"),a.attr("sizes",e).attr("srcset",t.opts.srcset)),t.$ghost&&setTimeout((function(){t.$ghost&&!o.isClosing&&t.$ghost.hide()}),Math.min(300,Math.max(1e3,t.height/1600))),o.hideLoading(t))})).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(i.complete||"complete"==i.readyState)&&a.naturalWidth&&a.naturalHeight?a.trigger("load"):i.error&&a.trigger("error")},resolveImageSlideSize:function(t,e,n){var o=parseInt(t.opts.width,10),i=parseInt(t.opts.height,10);t.width=e,t.height=n,o>0&&(t.width=o,t.height=Math.floor(o*n/e)),i>0&&(t.width=Math.floor(i*e/n),t.height=i)},setIframe:function(t){var e,o=this,i=t.opts.iframe,a=t.$slide;t.$content=n('<div class="fancybox-content'+(i.preload?" fancybox-is-hidden":"")+'"></div>').css(i.css).appendTo(a),a.addClass("fancybox-slide--"+t.contentType),t.$iframe=e=n(i.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(i.attr).appendTo(t.$content),i.preload?(o.showLoading(t),e.on("load.fb error.fb",(function(e){this.isReady=1,t.$slide.trigger("refresh"),o.afterLoad(t)})),a.on("refresh.fb",(function(){var n,o=t.$content,s=i.css.width,r=i.css.height;if(1===e[0].isReady){try{n=e.contents().find("body")}catch(t){}n&&n.length&&n.children().length&&(a.css("overflow","visible"),o.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===s&&(s=Math.ceil(Math.max(n[0].clientWidth,n.outerWidth(!0)))),o.css("width",s||"").css("max-width",""),void 0===r&&(r=Math.ceil(Math.max(n[0].clientHeight,n.outerHeight(!0)))),o.css("height",r||""),a.css("overflow","auto")),o.removeClass("fancybox-is-hidden")}}))):o.afterLoad(t),e.attr("src",t.src),a.one("onReset",(function(){try{n(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}n(this).off("refresh.fb").empty(),t.isLoaded=!1,t.isRevealed=!1}))},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$content&&n.fancybox.stop(t.$content),t.$slide.empty(),function(t){return t&&t.hasOwnProperty&&t instanceof n}(e)&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=n("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents()),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",(function(){n(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1,t.isRevealed=!1)})),n(e).appendTo(t.$slide),n(e).is("video,audio")&&(n(e).addClass("fancybox-video"),n(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||n(e).attr("width"),t.opts.height=t.opts.height||n(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),o.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){var e=this;(t=t||e.current)&&!t.$spinner&&(t.$spinner=n(e.translate(e,e.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){(t=t||this.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",(function(t){return 2==t.button&&t.preventDefault(),!0})),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.adjustCaption(t),e.adjustLayout(t),t.pos===e.currPos&&e.updateCursor(),e.revealContent(t))},adjustCaption:function(t){var e,n=this,o=t||n.current,i=o.opts.caption,a=o.opts.preventCaptionOverlap,s=n.$refs.caption,r=!1;s.toggleClass("fancybox-caption--separate",a),a&&i&&i.length&&(o.pos!==n.currPos?((e=s.clone().appendTo(s.parent())).children().eq(0).empty().html(i),r=e.outerHeight(!0),e.empty().remove()):n.$caption&&(r=n.$caption.outerHeight(!0)),o.$slide.css("padding-bottom",r||""))},adjustLayout:function(t){var e,n,o,i,a=t||this.current;a.isLoaded&&!0!==a.opts.disableLayoutFix&&(a.$content.css("margin-bottom",""),a.$content.outerHeight()>a.$slide.height()+.5&&(o=a.$slide[0].style["padding-bottom"],i=a.$slide.css("padding-bottom"),parseFloat(i)>0&&(e=a.$slide[0].scrollHeight,a.$slide.css("padding-bottom",0),Math.abs(e-a.$slide[0].scrollHeight)<1&&(n=i),a.$slide.css("padding-bottom",o))),a.$content.css("margin-bottom",n))},revealContent:function(t){var e,o,i,a,s=this,r=t.$slide,c=!1,l=!1,d=s.isMoved(t),u=t.isRevealed;return t.isRevealed=!0,e=t.opts[s.firstRun?"animationEffect":"transitionEffect"],i=t.opts[s.firstRun?"animationDuration":"transitionDuration"],i=parseInt(void 0===t.forcedDuration?i:t.forcedDuration,10),!d&&t.pos===s.currPos&&i||(e=!1),"zoom"===e&&(t.pos===s.currPos&&i&&"image"===t.type&&!t.hasError&&(l=s.getThumbPos(t))?c=s.getFitPos(t):e="fade"),"zoom"===e?(s.isAnimating=!0,c.scaleX=c.width/l.width,c.scaleY=c.height/l.height,"auto"==(a=t.opts.zoomOpacity)&&(a=Math.abs(t.width/t.height-l.width/l.height)>.1),a&&(l.opacity=.1,c.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),f(t.$content),void n.fancybox.animate(t.$content,c,i,(function(){s.isAnimating=!1,s.complete()}))):(s.updateSlide(t),e?(n.fancybox.stop(r),o="fancybox-slide--"+(t.pos>=s.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,r.addClass(o).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),f(r),"image"!==t.type&&t.$content.hide().show(0),void n.fancybox.animate(r,"fancybox-slide--current",i,(function(){r.removeClass(o).css({transform:"",opacity:""}),t.pos===s.currPos&&s.complete()}),!0)):(t.$content.removeClass("fancybox-is-hidden"),u||!d||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===s.currPos&&s.complete())))},getThumbPos:function(t){var e,o,i,a,s,r=!1,c=t.$thumb;return!(!c||!h(c[0]))&&(e=n.fancybox.getTranslate(c),o=parseFloat(c.css("border-top-width")||0),i=parseFloat(c.css("border-right-width")||0),a=parseFloat(c.css("border-bottom-width")||0),s=parseFloat(c.css("border-left-width")||0),r={top:e.top+o,left:e.left+s,width:e.width-i-s,height:e.height-o-a,scaleX:1,scaleY:1},e.width>0&&e.height>0&&r)},complete:function(){var t,e=this,o=e.current,i={};!e.isMoved()&&o.isLoaded&&(o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),e.preload("inline"),f(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(e.slides,(function(t,o){o.pos>=e.currPos-1&&o.pos<=e.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())})),e.slides=i),e.isAnimating=!1,e.updateCursor(),e.trigger("afterShow"),o.opts.video.autoStart&&o.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",(function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),e.next()})),o.opts.autoFocus&&"html"===o.contentType&&((t=o.$content.find("input[autofocus]:enabled:visible:first")).length?t.trigger("focus"):e.focus(null,!0)),o.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,n,o=this;o.group.length<2||(n=o.slides[o.currPos+1],(e=o.slides[o.currPos-1])&&e.type===t&&o.loadSlide(e),n&&n.type===t&&o.loadSlide(n))},focus:function(t,o){var i,a,s=this,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");s.isClosing||((i=(i=!t&&s.current&&s.current.isComplete?s.current.$slide.find("*:visible"+(o?":not(.fancybox-close-small)":"")):s.$refs.container.find("*:visible")).filter(r).filter((function(){return"hidden"!==n(this).css("visibility")&&!n(this).hasClass("disabled")}))).length?(a=i.index(e.activeElement),t&&t.shiftKey?(a<0||0==a)&&(t.preventDefault(),i.eq(i.length-1).trigger("focus")):(a<0||a==i.length-1)&&(t&&t.preventDefault(),i.eq(0).trigger("focus"))):s.$refs.container.trigger("focus"))},activate:function(){var t=this;n(".fancybox-container").each((function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)})),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,i,a,s,r,c,d,u=this,p=u.current,h=function(){u.cleanUp(t)};return!(u.isClosing||(u.isClosing=!0,!1===u.trigger("beforeClose",t)?(u.isClosing=!1,l((function(){u.update()})),1):(u.removeEvents(),a=p.$content,o=p.opts.animationEffect,i=n.isNumeric(e)?e:o?p.opts.animationDuration:0,p.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?n.fancybox.stop(p.$slide):o=!1,p.$slide.siblings().trigger("onReset").remove(),i&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",i+"ms"),u.hideLoading(p),u.hideControls(!0),u.updateCursor(),"zoom"!==o||a&&i&&"image"===p.type&&!u.isMoved()&&!p.hasError&&(d=u.getThumbPos(p))||(o="fade"),"zoom"===o?(n.fancybox.stop(a),s=n.fancybox.getTranslate(a),c={top:s.top,left:s.left,scaleX:s.width/d.width,scaleY:s.height/d.height,width:d.width,height:d.height},r=p.opts.zoomOpacity,"auto"==r&&(r=Math.abs(p.width/p.height-d.width/d.height)>.1),r&&(d.opacity=0),n.fancybox.setTranslate(a,c),f(a),n.fancybox.animate(a,d,i,h),0):(o&&i?n.fancybox.animate(p.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+o,i,h):!0===t?setTimeout(h,i):h(),0))))},cleanUp:function(e){var o,i,a,s=this,r=s.current.opts.$orig;s.current.$slide.trigger("onReset"),s.$refs.container.empty().remove(),s.trigger("afterClose",e),s.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=s.$trigger),r&&r.length&&(i=t.scrollX,a=t.scrollY,r.trigger("focus"),n("html, body").scrollTop(a).scrollLeft(i))),s.current=null,(o=n.fancybox.getInstance())?o.activate():(n("body").removeClass("fancybox-active compensate-for-scrollbar"),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,i=Array.prototype.slice.call(arguments,1),a=this,s=e&&e.opts?e:a.current;if(s?i.unshift(s):s=a,i.unshift(a),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,i)),!1===o)return o;"afterClose"!==t&&a.$refs?a.$refs.container.trigger(t+".fb",i):r.trigger(t+".fb",i)},updateControls:function(){var t=this,o=t.current,i=o.index,a=t.$refs.container,s=t.$refs.caption,r=o.opts.caption;o.$slide.trigger("refresh"),r&&r.length?(t.$caption=s,s.children().eq(0).html(r)):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),a.find("[data-fancybox-count]").html(t.group.length),a.find("[data-fancybox-index]").html(i+1),a.find("[data-fancybox-prev]").prop("disabled",!o.opts.loop&&i<=0),a.find("[data-fancybox-next]").prop("disabled",!o.opts.loop&&i>=t.group.length-1),"image"===o.type?a.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",o.opts.image.src||o.src).show():o.opts.toolbar&&a.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),n(e.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=["infobar","toolbar","nav"];!t&&this.current.opts.preventCaptionOverlap||e.push("caption"),this.$refs.container.removeClass(e.map((function(t){return"fancybox-show-"+t})).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.hasHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-caption",!!t.$caption).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.5.7",defaults:a,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof g&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new g(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n)&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;return!(!t||!t.length)&&{top:(e=t[0].getBoundingClientRect()).top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))}},setTranslate:function(t,e){var n="",o={};if(t&&e)return void 0===e.left&&void 0===e.top||(n=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),void 0!==e.scaleX&&void 0!==e.scaleY?n+=" scale("+e.scaleX+", "+e.scaleY+")":void 0!==e.scaleX&&(n+=" scaleX("+e.scaleX+")"),n.length&&(o.transform=n),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.width&&(o.width=e.width),void 0!==e.height&&(o.height=e.height),t.css(o)},animate:function(t,e,o,i,a){var s,r=this;n.isFunction(o)&&(i=o,o=null),r.stop(t),s=r.getTranslate(t),t.on(u,(function(c){(!c||!c.originalEvent||t.is(c.originalEvent.target)&&"z-index"!=c.originalEvent.propertyName)&&(r.stop(t),n.isNumeric(o)&&t.css("transition-duration",""),n.isPlainObject(e)?void 0!==e.scaleX&&void 0!==e.scaleY&&r.setTranslate(t,{top:e.top,left:e.left,width:s.width*e.scaleX,height:s.height*e.scaleY,scaleX:1,scaleY:1}):!0!==a&&t.removeClass(e),n.isFunction(i)&&i(c))})),n.isNumeric(o)&&t.css("transition-duration",o+"ms"),n.isPlainObject(e)?(void 0!==e.scaleX&&void 0!==e.scaleY&&(delete e.width,delete e.height,t.parent().hasClass("fancybox-slide--image")&&t.parent().addClass("fancybox-is-scaling")),n.fancybox.setTranslate(t,e)):t.addClass(e),t.data("timer",setTimeout((function(){t.trigger(u)}),o+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(u),t.off(u).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},n.fn.fancybox=function(t){var e;return(e=(t=t||{}).selector||!1)?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},r.on("click.fb-start","[data-fancybox]",i),r.on("click.fb-start","[data-fancybox-trigger]",(function(t){n('[data-fancybox="'+n(this).attr("data-fancybox-trigger")+'"]').eq(n(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:n(this)})})),function(){var t=null;r.on("mousedown mouseup focus blur",".fancybox-button",(function(e){switch(e.type){case"mousedown":t=n(this);break;case"mouseup":t=null;break;case"focusin":n(".fancybox-button").removeClass("fancybox-focus"),n(this).is(t)||n(this).is("[disabled]")||n(this).addClass("fancybox-focus");break;case"focusout":n(".fancybox-button").removeClass("fancybox-focus")}}))}()}}(window,document,jQuery),function(t){"use strict";var e={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},n=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,(function(t,n){e=e.replace("$"+t,n||"")})),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e};t(document).on("objectNeedsType.fb",(function(o,i,a){var s,r,c,l,d,u,f,p=a.src||"",h=!1;s=t.extend(!0,{},e,a.opts.media),t.each(s,(function(e,o){if(c=p.match(o.matcher)){if(h=o.type,f=e,u={},o.paramPlace&&c[o.paramPlace]){"?"==(d=c[o.paramPlace])[0]&&(d=d.substring(1)),d=d.split("&");for(var i=0;i<d.length;++i){var s=d[i].split("=",2);2==s.length&&(u[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,a.opts[e],u),p="function"===t.type(o.url)?o.url.call(this,c,l,a):n(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,a):n(o.thumb,c),"youtube"===e?p=p.replace(/&t=((\d+)m)?(\d+)s/,(function(t,e,n,o){return"&start="+((n?60*parseInt(n,10):0)+parseInt(o,10))})):"vimeo"===e&&(p=p.replace("&%23","#")),!1}})),h?(a.opts.thumb||a.opts.$thumb&&a.opts.$thumb.length||(a.opts.thumb=r),"iframe"===h&&(a.opts=t.extend(!0,a.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),t.extend(a,{type:h,src:p,origSrc:a.src,contentSource:f,contentType:"image"===h?"image":"gmap_place"==f||"gmap_search"==f?"map":"video"})):p&&(a.type=a.opts.defaultType)}));var o={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,n=this;this[t].loaded?setTimeout((function(){n.done(t)})):this[t].loading||(this[t].loading=!0,(e=document.createElement("script")).type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){n[t].loaded=!0,n.done(t)}:e.onload=function(){n[t].loaded=!0,n.done(t)},document.body.appendChild(e))},done:function(e){var n,o;"youtube"===e&&delete window.onYouTubeIframeAPIReady,(n=t.fancybox.getInstance())&&(o=n.current.$content.find("iframe"),"youtube"===e&&void 0!==YT&&YT?new YT.Player(o.attr("id"),{events:{onStateChange:function(t){0==t.data&&n.next()}}}):"vimeo"===e&&void 0!==Vimeo&&Vimeo&&new Vimeo.Player(o).on("ended",(function(){n.next()})))}};t(document).on({"afterShow.fb":function(t,e,n){e.group.length>1&&("youtube"===n.contentSource||"vimeo"===n.contentSource)&&o.load(n.contentSource)}})}(jQuery),function(t,e,n){"use strict";var o=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)},i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)},a=function(e){var n=[];for(var o in e=(e=e.originalEvent||e||t.e).touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e])e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,i=o.length;e<i;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],i=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,a=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return i||a},l=function(t){for(var e=!1;!(e=c(t.get(0)))&&((t=t.parent()).length&&!t.hasClass("fancybox-stage")&&!t.is("body")););return e},d=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};d.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),n(e).off(".fb.touch"),t.requestId&&(i(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},d.prototype.ontouchstart=function(o){var i=this,c=n(o.target),d=i.instance,u=d.current,f=u.$slide,p=u.$content,h="touchstart"==o.type;if(h&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&f.length&&c.length&&!r(c)&&!r(c.parent())&&(c.is("img")||!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left))){if(!u||d.isAnimating||u.$slide.hasClass("fancybox-animated"))return o.stopPropagation(),void o.preventDefault();i.realPoints=i.startPoints=a(o),i.startPoints.length&&(u.touch&&o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=c,i.$content=p,i.opts=u.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.canPan=d.canPan(),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(f[0].clientWidth),i.canvasHeight=Math.round(f[0].clientHeight),i.contentLastPos=null,i.contentStartPos=n.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=n.fancybox.getTranslate(f),i.stagePos=n.fancybox.getTranslate(d.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,n(e).off(".fb.touch").on(h?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(h?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&e.addEventListener("scroll",i.onscroll,!0),((i.opts||i.canPan)&&(c.is(i.$stage)||i.$stage.find(c).length)||(c.is(".fancybox-image")&&o.preventDefault(),n.fancybox.isMobile&&c.parents(".fancybox-caption").length))&&(i.isScrollable=l(c)||l(c.parent()),n.fancybox.isMobile&&i.isScrollable||o.preventDefault(),(1===i.startPoints.length||u.hasError)&&(i.canPan?(n.fancybox.stop(i.$content),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-is-grabbing")),2===i.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=s(i.startPoints[0],i.startPoints[1]))))}},d.prototype.onscroll=function(t){this.isScrolling=!0,e.removeEventListener("scroll",this.onscroll,!0)},d.prototype.ontouchmove=function(t){var e=this;return void 0!==t.originalEvent.buttons&&0===t.originalEvent.buttons?void e.ontouchend(t):e.isScrolling?void(e.canTap=!1):(e.newPoints=a(t),void((e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},d.prototype.onSwipe=function(e){var a,s=this,r=s.instance,c=s.isSwiping,l=s.sliderStartPos.left||0;if(!0!==c)"x"==c&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?l+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?l-=Math.pow(-s.distanceX,.8):l+=s.distanceX),s.sliderLastPos={top:"x"==c?0:s.sliderStartPos.top+s.distanceY,left:l},s.requestId&&(i(s.requestId),s.requestId=null),s.requestId=o((function(){s.sliderLastPos&&(n.each(s.instance.slides,(function(t,e){var o=e.pos-s.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+o*s.canvasWidth+o*e.opts.gutter})})),s.$container.addClass("fancybox-is-sliding"))}));else if(Math.abs(s.distance)>10){if(s.canTap=!1,r.group.length<2&&s.opts.vertical?s.isSwiping="y":r.isDragging||!1===s.opts.vertical||"auto"===s.opts.vertical&&n(t).width()>800?s.isSwiping="x":(a=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=a>45&&a<135?"y":"x"),"y"===s.isSwiping&&n.fancybox.isMobile&&s.isScrollable)return void(s.isScrolling=!0);r.isDragging=s.isSwiping,s.startPoints=s.newPoints,n.each(r.slides,(function(t,e){var o,i;n.fancybox.stop(e.$slide),o=n.fancybox.getTranslate(e.$slide),i=n.fancybox.getTranslate(r.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass((function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")})),e.pos===r.current.pos&&(s.sliderStartPos.top=o.top-i.top,s.sliderStartPos.left=o.left-i.left),n.fancybox.setTranslate(e.$slide,{top:o.top-i.top,left:o.left-i.left})})),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},d.prototype.onPan=function(){var t=this;s(t.newPoints[0],t.realPoints[0])<(n.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&i(t.requestId),t.requestId=o((function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)})))},d.prototype.limitMovement=function(){var t,e,n,o,i,a,s=this,r=s.canvasWidth,c=s.canvasHeight,l=s.distanceX,d=s.distanceY,u=s.contentStartPos,f=u.left,p=u.top,h=u.width,g=u.height;return i=h>r?f+l:f,a=p+d,t=Math.max(0,.5*r-.5*h),e=Math.max(0,.5*c-.5*g),n=Math.min(r-h,.5*r-.5*h),o=Math.min(c-g,.5*c-.5*g),l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<n&&(i=n+1-Math.pow(n-f-l,.8)||0),d>0&&a>e&&(a=e-1+Math.pow(-e+p+d,.8)||0),d<0&&a<o&&(a=o+1-Math.pow(o-p-d,.8)||0),{top:a,left:i}},d.prototype.limitPosition=function(t,e,n,o){var i=this.canvasWidth,a=this.canvasHeight;return n>i?t=(t=t>0?0:t)<i-n?i-n:t:t=Math.max(0,i/2-n/2),o>a?e=(e=e>0?0:e)<a-o?a-o:e:e=Math.max(0,a/2-o/2),{top:e,left:t}},d.prototype.onZoom=function(){var e=this,a=e.contentStartPos,r=a.width,c=a.height,l=a.left,d=a.top,u=s(e.newPoints[0],e.newPoints[1])/e.startDistanceBetweenFingers,f=Math.floor(r*u),p=Math.floor(c*u),h=(r-f)*e.percentageOfImageAtPinchPointX,g=(c-p)*e.percentageOfImageAtPinchPointY,b=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),m=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),v=b-e.centerPointStartX,y={top:d+(g+(m-e.centerPointStartY)),left:l+(h+v),scaleX:u,scaleY:u};e.canTap=!1,e.newWidth=f,e.newHeight=p,e.contentLastPos=y,e.requestId&&i(e.requestId),e.requestId=o((function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)}))},d.prototype.ontouchend=function(t){var o=this,s=o.isSwiping,r=o.isPanning,c=o.isZooming,l=o.isScrolling;if(o.endPoints=a(t),o.dMs=Math.max((new Date).getTime()-o.startTime,1),o.$container.removeClass("fancybox-is-grabbing"),n(e).off(".fb.touch"),e.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap)return o.onTap(t);o.speed=100,o.velocityX=o.distanceX/o.dMs*.5,o.velocityY=o.distanceY/o.dMs*.5,r?o.endPanning():c?o.endZooming():o.endSwiping(s,l)},d.prototype.endSwiping=function(t,e){var o=this,i=!1,a=o.instance.group.length,s=Math.abs(o.distanceX),r="x"==t&&a>1&&(o.dMs>130&&s>10||s>50);o.sliderLastPos=null,"y"==t&&!e&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,250)):r&&o.distanceX>0?i=o.instance.previous(300):r&&o.distanceX<0&&(i=o.instance.next(300)),!1!==i||"x"!=t&&"y"!=t||o.instance.centerSlide(200),o.$container.removeClass("fancybox-is-sliding")},d.prototype.endPanning=function(){var t,e,o,i=this;i.contentLastPos&&(!1===i.opts.momentum||i.dMs>350?(t=i.contentLastPos.left,e=i.contentLastPos.top):(t=i.contentLastPos.left+500*i.velocityX,e=i.contentLastPos.top+500*i.velocityY),(o=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height)).width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,366))},d.prototype.endZooming=function(){var t,e,o,i,a=this,s=a.instance.current,r=a.newWidth,c=a.newHeight;a.contentLastPos&&(t=a.contentLastPos.left,i={top:e=a.contentLastPos.top,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(a.$content,i),r<a.canvasWidth&&c<a.canvasHeight?a.instance.scaleToFit(150):r>s.width||c>s.height?a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150):(o=a.limitPosition(t,e,r,c),n.fancybox.animate(a.$content,o,150)))},d.prototype.onTap=function(e){var o,i=this,s=n(e.target),r=i.instance,c=r.current,l=e&&a(e)||i.startPoints,d=l[0]?l[0].x-n(t).scrollLeft()-i.stagePos.left:0,u=l[0]?l[0].y-n(t).scrollTop()-i.stagePos.top:0,f=function(t){var o=c.opts[t];if(n.isFunction(o)&&(o=o.apply(r,[c,e])),o)switch(o){case"close":r.close(i.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(i.startEvent);break;case"zoom":"image"==c.type&&(c.isLoaded||c.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(d,u):r.group.length<2&&r.close(i.startEvent))}};if((!e.originalEvent||2!=e.originalEvent.button)&&(s.is("img")||!(d>s[0].clientWidth+s.offset().left))){if(s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(s.is(".fancybox-slide"))o="Slide";else{if(!r.current.$content||!r.current.$content.find(s).addBack().filter(s).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(d-i.tapX)>50||Math.abs(u-i.tapY)>50)return this;f("dblclick"+o)}else i.tapX=d,i.tapY=u,c.opts["dblclick"+o]&&c.opts["dblclick"+o]!==c.opts["click"+o]?i.tapped=setTimeout((function(){i.tapped=null,r.isAnimating||f("click"+o)}),500):f("click"+o);return this}},n(e).on("onActivate.fb",(function(t,e){e&&!e.Guestures&&(e.Guestures=new d(e))})).on("beforeClose.fb",(function(t,e){e&&e.Guestures&&e.Guestures.destroy()}))}(window,document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,n=t.instance,o=n.group[n.currIndex].opts.slideShow;t.$button=n.$refs.toolbar.find("[data-fancybox-play]").on("click",(function(){t.toggle()})),n.group.length<2||!o?t.$button.hide():o.progress&&(t.$progress=e('<div class="fancybox-progress"></div>').appendTo(n.$refs.inner))},set:function(t){var n=this,o=n.instance,i=o.current;i&&(!0===t||i.opts.loop||o.currIndex<o.group.length-1)?n.isActive&&"video"!==i.contentType&&(n.$progress&&e.fancybox.animate(n.$progress.show(),{scaleX:1},i.opts.slideShow.speed),n.timer=setTimeout((function(){o.current.opts.loop||o.current.index!=o.group.length-1?o.next():o.jumpTo(0)}),i.opts.slideShow.speed)):(n.stop(),o.idleSecondsCounter=0,o.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null,t.$progress&&t.$progress.removeAttr("style").hide()},start:function(){var t=this,e=t.instance.current;e&&(t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.isActive=!0,e.isComplete&&t.set(!0),t.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1,t.instance.trigger("onSlideShowChange",!1),t.$progress&&t.$progress.removeAttr("style").hide()},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var i=e&&e.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,a,s){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(a.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",(function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())}))}(document,jQuery),function(t,e){"use strict";var n=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n={},o=0;o<e.length;o++){var i=e[o];if(i&&i[1]in t){for(var a=0;a<i.length;a++)n[e[0][a]]=i[a];return n}}return!1}();if(n){var o={request:function(e){(e=e||t.documentElement)[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on(n.fullscreenchange,(function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.isAnimating=!1,n.update(!0,!0,0),n.isComplete||n.complete()),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t),n.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))}))}e(t).on({"onInit.fb":function(t,e){n?e&&e.group[e.currIndex].opts.fullScreen?(e.$refs.container.on("click.fb-fullscreen","[data-fancybox-fullscreen]",(function(t){t.stopPropagation(),t.preventDefault(),o.toggle()})),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&o.request(),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide():e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove()},"afterKeydown.fb":function(t,e,n,o,i){e&&e.FullScreen&&70===i&&(o.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&o.exit()}})}(document,jQuery),function(t,e){"use strict";var n="fancybox-thumbs";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var o=function(t){this.init(t)};e.extend(o.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,n=t.group,o=0;e.instance=t,e.opts=n[t.currIndex].opts.thumbs,t.Thumbs=e,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var i=0,a=n.length;i<a&&(n[i].thumb&&o++,!(o>1));i++);o>1&&e.opts?(e.$button.removeAttr("style").on("click",(function(){e.toggle()})),e.isActive=!0):e.$button.hide()},create:function(){var t,o=this,i=o.instance,a=o.opts.parentEl,s=[];o.$grid||(o.$grid=e('<div class="'+n+" "+n+"-"+o.opts.axis+'"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)),o.$grid.on("click","a",(function(){i.jumpTo(e(this).attr("data-index"))}))),o.$list||(o.$list=e('<div class="'+n+'__list">').appendTo(o.$grid)),e.each(i.group,(function(e,n){(t=n.thumb)||"image"!==n.type||(t=n.src),s.push('<a href="javascript:;" tabindex="0" data-index="'+e+'"'+(t&&t.length?' style="background-image:url('+t+')"':'class="fancybox-thumbs-missing"')+"></a>")})),o.$list[0].innerHTML=s.join(""),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"),10)+i.group.length*o.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,n,o=this,i=o.$list,a=o.$grid;o.instance.current&&(n=(e=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active")).position(),"y"===o.opts.axis&&(n.top<0||n.top>i.height()-e.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+n.top},t):"x"===o.opts.axis&&(n.left<a.scrollLeft()||n.left>a.scrollLeft()+(a.width()-e.outerWidth()))&&i.parent().stop().animate({scrollLeft:n.left},t))},update:function(){var t=this;t.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),t.isVisible?(t.$grid||t.create(),t.instance.trigger("onThumbsShow"),t.focus(0)):t.$grid&&t.instance.trigger("onThumbsHide"),t.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var n;e&&!e.Thumbs&&((n=new o(e)).isActive&&!0===n.opts.autoStart&&n.show())},"beforeShow.fb":function(t,e,n,o){var i=e&&e.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,i){var a=e&&e.Thumbs;a&&a.isActive&&71===i&&(o.preventDefault(),a.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&!1!==n.opts.hideOnClose&&n.$grid.hide()}})}(document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",(function(){var t,n,o=e.fancybox.getInstance(),i=o.current||null;i&&("function"===e.type(i.opts.share.url)&&(t=i.opts.share.url.apply(i,[o,i])),n=i.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===i.type?encodeURIComponent(i.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,(function(t){return e[t]}))}(t)).replace(/\{\{descr\}\}/g,o.$caption?encodeURIComponent(o.$caption.text()):""),e.fancybox.open({src:o.translate(o,n),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){o.$refs.container.one("beforeClose.fb",(function(){t.close(null,0)})),e.$content.find(".fancybox-share__button").click((function(){return window.open(this.href,"Share","width=550, height=450"),!1}))},mobile:{autoFocus:!1}}}))}))}(document,jQuery),function(t,e,n){"use strict";function o(){var e=t.location.hash.substr(1),n=e.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])&&parseInt(n.pop(-1),10)||1;return{hash:e,index:o<1?1:o,gallery:n.join("-")}}function i(t){""!==t.gallery&&n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function a(t){var e,n;return!!t&&(""!==(n=(e=t.current?t.current.opts:t.opts).hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&n)}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}))}),n((function(){!1!==n.fancybox.defaults.hash&&(n(e).on({"onInit.fb":function(t,e){var n,i;!1!==e.group[e.currIndex].opts.hash&&(n=o(),(i=a(e))&&n.gallery&&i==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i,s){var r;i&&!1!==i.opts.hash&&(r=a(o))&&(o.currentHash=r+(o.group.length>1?"-"+(i.index+1):""),t.location.hash!=="#"+o.currentHash&&(s&&!o.origHash&&(o.origHash=t.location.hash),o.hashTimer&&clearTimeout(o.hashTimer),o.hashTimer=setTimeout((function(){"replaceState"in t.history?(t.history[s?"pushState":"replaceState"]({},e.title,t.location.pathname+t.location.search+"#"+o.currentHash),s&&(o.hasCreatedHistory=!0)):t.location.hash=o.currentHash,o.hashTimer=null}),300)))},"beforeClose.fb":function(n,o,i){i&&!1!==i.opts.hash&&(clearTimeout(o.hashTimer),o.currentHash&&o.hasCreatedHistory?t.history.back():o.currentHash&&("replaceState"in t.history?t.history.replaceState({},e.title,t.location.pathname+t.location.search+(o.origHash||"")):t.location.hash=o.origHash),o.currentHash=null)}}),n(t).on("hashchange.fb",(function(){var t=o(),e=null;n.each(n(".fancybox-container").get().reverse(),(function(t,o){var i=n(o).data("FancyBox");if(i&&i.currentHash)return e=i,!1})),e?e.currentHash===t.gallery+"-"+t.index||1===t.index&&e.currentHash==t.gallery||(e.currentHash=null,e.close()):""!==t.gallery&&i(t)})),setTimeout((function(){n.fancybox.getInstance()||i(o())}),50))}))}(window,document,jQuery),function(t,e){"use strict";var n=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,o){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",(function(t){var o=e.current,i=(new Date).getTime();e.group.length<2||!1===o.opts.wheel||"auto"===o.opts.wheel&&"image"!==o.type||(t.preventDefault(),t.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-n<250||(n=i,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))}))}})}(document,jQuery);
/*! js-cookie v3.0.0-rc.0 | MIT */
!function(e,t){var r,n;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,r=e.Cookies,(n=e.Cookies=t()).noConflict=function(){return e.Cookies=r,n})}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var t={read:function(e){return e.replace(/%3B/g,";")},write:function(e){return e.replace(/;/g,"%3B")}};return function r(n,i){function o(r,o,u){if("undefined"!=typeof document){"number"==typeof(u=e({},i,u)).expires&&(u.expires=new Date(Date.now()+864e5*u.expires)),u.expires&&(u.expires=u.expires.toUTCString()),r=t.write(r).replace(/=/g,"%3D"),o=n.write(String(o),r);var c="";for(var f in u)u[f]&&(c+="; "+f,!0!==u[f]&&(c+="="+u[f].split(";")[0]));return document.cookie=r+"="+o+c}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],i={},o=0;o<r.length;o++){var u=r[o].split("="),c=u.slice(1).join("="),f=t.read(u[0]).replace(/%3D/g,"=");if(i[f]=n.read(c,f),e===f)break}return e?i[e]:i}},remove:function(t,r){o(t,"",e({},r,{expires:-1}))},withAttributes:function(t){return r(this.converter,e({},this.attributes,t))},withConverter:function(t){return r(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}(t,{path:"/"})}));
!function(t,e,i,s){function n(e,i){this.settings=null,this.options=t.extend({},n.Defaults,i),this.$element=t(e),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},t.each(["onResize","onThrottledResize"],t.proxy((function(e,i){this._handlers[i]=t.proxy(this[i],this)}),this)),t.each(n.Plugins,t.proxy((function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)}),this)),t.each(n.Workers,t.proxy((function(e,i){this._pipe.push({filter:i.filter,run:t.proxy(i.run,this)})}),this)),this.setup(),this.initialize()}n.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:e,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},n.Width={Default:"default",Inner:"inner",Outer:"outer"},n.Type={Event:"event",State:"state"},n.Plugins={},n.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",i=!this.settings.autoWidth,s=this.settings.rtl,n={width:"auto","margin-left":s?e:"","margin-right":s?"":e};!i&&this.$stage.children().css(n),t.css=n}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,s=this._items.length,n=!this.settings.autoWidth,o=[];for(t.items={merge:!1,width:e};s--;)i=this._mergers[s],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,t.items.merge=i>1||t.items.merge,o[s]=n?e*i:this._items[s].width();this._widths=o}},{filter:["items","settings"],run:function(){var e=[],i=this._items,s=this.settings,n=Math.max(2*s.items,4),o=2*Math.ceil(i.length/2),r=s.loop&&i.length?s.rewind?n:Math.max(n,o):0,a="",h="";for(r/=2;r>0;)e.push(this.normalize(e.length/2,!0)),a+=i[e[e.length-1]][0].outerHTML,e.push(this.normalize(i.length-1-(e.length-1)/2,!0)),h=i[e[e.length-1]][0].outerHTML+h,r-=1;this._clones=e,t(a).addClass("cloned").appendTo(this.$stage),t(h).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t=this.settings.rtl?1:-1,e=this._clones.length+this._items.length,i=-1,s=0,n=0,o=[];++i<e;)s=o[i-1]||0,n=this._widths[this.relative(i)]+this.settings.margin,o.push(s+n*t);this._coordinates=o}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,i={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,i=!this.settings.autoWidth,s=this.$stage.children();if(i&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],s.eq(e).css(t.css);else i&&(t.css.width=t.items.width,s.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var t,e,i,s,n=this.settings.rtl?1:-1,o=2*this.settings.stagePadding,r=this.coordinates(this.current())+o,a=r+this.width()*n,h=[];for(i=0,s=this._coordinates.length;i<s;i++)t=this._coordinates[i-1]||0,e=Math.abs(this._coordinates[i])+o*n,(this.op(t,"<=",r)&&this.op(t,">",a)||this.op(e,"<",r)&&this.op(e,">",a))&&h.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+h.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],n.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=t("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(t("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},n.prototype.initializeItems=function(){var e=this.$element.find(".owl-item");if(e.length)return this._items=e.get().map((function(e){return t(e)})),this._mergers=this._items.map((function(){return 1})),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},n.prototype.initialize=function(){var t,e,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:s,i=this.$element.children(e).width(),t.length&&i<=0&&this.preloadAutoWidthImages(t));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},n.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},n.prototype.setup=function(){var e=this.viewport(),i=this.options.responsive,s=-1,n=null;i?(t.each(i,(function(t){t<=e&&t>s&&(s=Number(t))})),"function"==typeof(n=t.extend({},this.options,i[s])).stagePadding&&(n.stagePadding=n.stagePadding()),delete n.responsive,n.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+s))):n=t.extend({},this.options),this.trigger("change",{property:{name:"settings",value:n}}),this._breakpoint=s,this.settings=n,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},n.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},n.prototype.prepare=function(e){var i=this.trigger("prepare",{content:e});return i.data||(i.data=t("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(e)),this.trigger("prepared",{content:i.data}),i.data},n.prototype.update=function(){for(var e=0,i=this._pipe.length,s=t.proxy((function(t){return this[t]}),this._invalidated),n={};e<i;)(this._invalidated.all||t.grep(this._pipe[e].filter,s).length>0)&&this._pipe[e].run(n),e++;this._invalidated={},!this.is("valid")&&this.enter("valid")},n.prototype.width=function(t){switch(t=t||n.Width.Default){case n.Width.Inner:case n.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},n.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},n.prototype.onThrottledResize=function(){e.clearTimeout(this.resizeTimer),this.resizeTimer=e.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},n.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},n.prototype.registerEventHandlers=function(){t.support.transition&&this.$stage.on(t.support.transition.end+".owl.core",t.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(e,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",(function(){return!1}))),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",t.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",t.proxy(this.onDragEnd,this)))},n.prototype.onDragStart=function(e){var s=null;3!==e.which&&(t.support.transform?s={x:(s=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===s.length?12:4],y:s[16===s.length?13:5]}:(s=this.$stage.position(),s={x:this.settings.rtl?s.left+this.$stage.width()-this.width()+this.settings.margin:s.left,y:s.top}),this.is("animating")&&(t.support.transform?this.animate(s.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===e.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=t(e.target),this._drag.stage.start=s,this._drag.stage.current=s,this._drag.pointer=this.pointer(e),t(i).on("mouseup.owl.core touchend.owl.core",t.proxy(this.onDragEnd,this)),t(i).one("mousemove.owl.core touchmove.owl.core",t.proxy((function(e){var s=this.difference(this._drag.pointer,this.pointer(e));t(i).on("mousemove.owl.core touchmove.owl.core",t.proxy(this.onDragMove,this)),Math.abs(s.x)<Math.abs(s.y)&&this.is("valid")||(e.preventDefault(),this.enter("dragging"),this.trigger("drag"))}),this)))},n.prototype.onDragMove=function(t){var e=null,i=null,s=null,n=this.difference(this._drag.pointer,this.pointer(t)),o=this.difference(this._drag.stage.start,n);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(e=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-e,o.x=((o.x-e)%i+i)%i+e):(e=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),s=this.settings.pullDrag?-1*n.x/5:0,o.x=Math.max(Math.min(o.x,e+s),i+s)),this._drag.stage.current=o,this.animate(o.x))},n.prototype.onDragEnd=function(e){var s=this.difference(this._drag.pointer,this.pointer(e)),n=this._drag.stage.current,o=s.x>0^this.settings.rtl?"left":"right";t(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==s.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(n.x,0!==s.x?o:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=o,(Math.abs(s.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",(function(){return!1}))),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},n.prototype.closest=function(e,i){var n=-1,o=this.width(),r=this.coordinates();return this.settings.freeDrag||t.each(r,t.proxy((function(t,a){return"left"===i&&e>a-30&&e<a+30?n=t:"right"===i&&e>a-o-30&&e<a-o+30?n=t+1:this.op(e,"<",a)&&this.op(e,">",r[t+1]!==s?r[t+1]:a-o)&&(n="left"===i?t+1:t),-1===n}),this)),this.settings.loop||(this.op(e,">",r[this.minimum()])?n=e=this.minimum():this.op(e,"<",r[this.maximum()])&&(n=e=this.maximum())),n},n.prototype.animate=function(e){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),t.support.transform3d&&t.support.transition?this.$stage.css({transform:"translate3d("+e+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:e+"px"},this.speed(),this.settings.fallbackEasing,t.proxy(this.onTransitionEnd,this)):this.$stage.css({left:e+"px"})},n.prototype.is=function(t){return this._states.current[t]&&this._states.current[t]>0},n.prototype.current=function(t){if(t===s)return this._current;if(0===this._items.length)return s;if(t=this.normalize(t),this._current!==t){var e=this.trigger("change",{property:{name:"position",value:t}});e.data!==s&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},n.prototype.invalidate=function(e){return"string"===t.type(e)&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),t.map(this._invalidated,(function(t,e){return e}))},n.prototype.reset=function(t){(t=this.normalize(t))!==s&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},n.prototype.normalize=function(t,e){var i=this._items.length,n=e?0:this._clones.length;return!this.isNumeric(t)||i<1?t=s:(t<0||t>=i+n)&&(t=((t-n/2)%i+i)%i+n/2),t},n.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},n.prototype.maximum=function(t){var e,i,s,n=this.settings,o=this._coordinates.length;if(n.loop)o=this._clones.length/2+this._items.length-1;else if(n.autoWidth||n.merge){if(e=this._items.length)for(i=this._items[--e].width(),s=this.$element.width();e--&&!((i+=this._items[e].width()+this.settings.margin)>s););o=e+1}else o=n.center?this._items.length-1:this._items.length-n.items;return t&&(o-=this._clones.length/2),Math.max(o,0)},n.prototype.minimum=function(t){return t?0:this._clones.length/2},n.prototype.items=function(t){return t===s?this._items.slice():(t=this.normalize(t,!0),this._items[t])},n.prototype.mergers=function(t){return t===s?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},n.prototype.clones=function(e){var i=this._clones.length/2,n=i+this._items.length,o=function(t){return t%2==0?n+t/2:i-(t+1)/2};return e===s?t.map(this._clones,(function(t,e){return o(e)})):t.map(this._clones,(function(t,i){return t===e?o(i):null}))},n.prototype.speed=function(t){return t!==s&&(this._speed=t),this._speed},n.prototype.coordinates=function(e){var i,n=1,o=e-1;return e===s?t.map(this._coordinates,t.proxy((function(t,e){return this.coordinates(e)}),this)):(this.settings.center?(this.settings.rtl&&(n=-1,o=e+1),i=this._coordinates[e],i+=(this.width()-i+(this._coordinates[o]||0))/2*n):i=this._coordinates[o]||0,i=Math.ceil(i))},n.prototype.duration=function(t,e,i){return 0===i?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(i||this.settings.smartSpeed)},n.prototype.to=function(t,e){var i=this.current(),s=null,n=t-this.relative(i),o=(n>0)-(n<0),r=this._items.length,a=this.minimum(),h=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(n)>r/2&&(n+=-1*o*r),(s=(((t=i+n)-a)%r+r)%r+a)!==t&&s-n<=h&&s-n>0&&(i=s-n,t=s,this.reset(i))):this.settings.rewind?t=(t%(h+=1)+h)%h:t=Math.max(a,Math.min(h,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},n.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},n.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},n.prototype.onTransitionEnd=function(t){if(t!==s&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},n.prototype.viewport=function(){var s;return this.options.responsiveBaseElement!==e?s=t(this.options.responsiveBaseElement).width():e.innerWidth?s=e.innerWidth:i.documentElement&&i.documentElement.clientWidth?s=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),s},n.prototype.replace=function(e){this.$stage.empty(),this._items=[],e&&(e=e instanceof jQuery?e:t(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter((function(){return 1===this.nodeType})).each(t.proxy((function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)}),this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},n.prototype.add=function(e,i){var n=this.relative(this._current);i=i===s?this._items.length:this.normalize(i,!0),e=e instanceof jQuery?e:t(e),this.trigger("add",{content:e,position:i}),e=this.prepare(e),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(e),0!==this._items.length&&this._items[i-1].after(e),this._items.push(e),this._mergers.push(1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(e),this._items.splice(i,0,e),this._mergers.splice(i,0,1*e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:e,position:i})},n.prototype.remove=function(t){(t=this.normalize(t,!0))!==s&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},n.prototype.preloadAutoWidthImages=function(e){e.each(t.proxy((function(e,i){this.enter("pre-loading"),i=t(i),t(new Image).one("load",t.proxy((function(t){i.attr("src",t.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()}),this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))}),this))},n.prototype.destroy=function(){for(var s in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),t(i).off(".owl.core"),!1!==this.settings.responsive&&(e.clearTimeout(this.resizeTimer),this.off(e,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[s].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},n.prototype.op=function(t,e,i){var s=this.settings.rtl;switch(e){case"<":return s?t>i:t<i;case">":return s?t<i:t>i;case">=":return s?t<=i:t>=i;case"<=":return s?t>=i:t<=i}},n.prototype.on=function(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&t.attachEvent("on"+e,i)},n.prototype.off=function(t,e,i,s){t.removeEventListener?t.removeEventListener(e,i,s):t.detachEvent&&t.detachEvent("on"+e,i)},n.prototype.trigger=function(e,i,s,o,r){var a={item:{count:this._items.length,index:this.current()}},h=t.camelCase(t.grep(["on",e,s],(function(t){return t})).join("-").toLowerCase()),l=t.Event([e,"owl",s||"carousel"].join(".").toLowerCase(),t.extend({relatedTarget:this},a,i));return this._supress[e]||(t.each(this._plugins,(function(t,e){e.onTrigger&&e.onTrigger(l)})),this.register({type:n.Type.Event,name:e}),this.$element.trigger(l),this.settings&&"function"==typeof this.settings[h]&&this.settings[h].call(this,l)),l},n.prototype.enter=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy((function(t,e){this._states.current[e]===s&&(this._states.current[e]=0),this._states.current[e]++}),this))},n.prototype.leave=function(e){t.each([e].concat(this._states.tags[e]||[]),t.proxy((function(t,e){this._states.current[e]--}),this))},n.prototype.register=function(e){if(e.type===n.Type.Event){if(t.event.special[e.name]||(t.event.special[e.name]={}),!t.event.special[e.name].owl){var i=t.event.special[e.name]._default;t.event.special[e.name]._default=function(t){return!i||!i.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&t.namespace.indexOf("owl")>-1:i.apply(this,arguments)},t.event.special[e.name].owl=!0}}else e.type===n.Type.State&&(this._states.tags[e.name]?this._states.tags[e.name]=this._states.tags[e.name].concat(e.tags):this._states.tags[e.name]=e.tags,this._states.tags[e.name]=t.grep(this._states.tags[e.name],t.proxy((function(i,s){return t.inArray(i,this._states.tags[e.name])===s}),this)))},n.prototype.suppress=function(e){t.each(e,t.proxy((function(t,e){this._supress[e]=!0}),this))},n.prototype.release=function(e){t.each(e,t.proxy((function(t,e){delete this._supress[e]}),this))},n.prototype.pointer=function(t){var i={x:null,y:null};return(t=(t=t.originalEvent||t||e.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},n.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},n.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},t.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each((function(){var s=t(this),o=s.data("owl.carousel");o||(o=new n(this,"object"==typeof e&&e),s.data("owl.carousel",o),t.each(["next","prev","to","destroy","refresh","replace","add","remove"],(function(e,i){o.register({type:n.Type.Event,name:i}),o.$element.on(i+".owl.carousel.core",t.proxy((function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([i]),o[i].apply(this,[].slice.call(arguments,1)),this.release([i]))}),o))}))),"string"==typeof e&&"_"!==e.charAt(0)&&o[e].apply(o,i)}))},t.fn.owlCarousel.Constructor=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(e){this._core=e,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoRefresh:!0,autoRefreshInterval:500},n.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=e.setInterval(t.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},n.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},n.prototype.destroy=function(){var t,i;for(t in e.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoRefresh=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":t.proxy((function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type)){var i=this._core.settings,s=i.center&&Math.ceil(i.items/2)||i.items,n=i.center&&-1*s||0,o=(e.property&&void 0!==e.property.value?e.property.value:this._core.current())+n,r=this._core.clones().length,a=t.proxy((function(t,e){this.load(e)}),this);for(i.lazyLoadEager>0&&(s+=i.lazyLoadEager,i.loop&&(o-=i.lazyLoadEager,s++));n++<s;)this.load(r/2+this._core.relative(o)),r&&t.each(this._core.clones(this._core.relative(o)),a),o++}}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={lazyLoad:!1,lazyLoadEager:0},n.prototype.load=function(i){var s=this._core.$stage.children().eq(i),n=s&&s.find(".owl-lazy");!n||t.inArray(s.get(0),this._loaded)>-1||(n.each(t.proxy((function(i,s){var n,o=t(s),r=e.devicePixelRatio>1&&o.attr("data-src-retina")||o.attr("data-src")||o.attr("data-srcset");this._core.trigger("load",{element:o,url:r},"lazy"),o.is("img")?o.one("load.owl.lazy",t.proxy((function(){o.css("opacity",1),this._core.trigger("loaded",{element:o,url:r},"lazy")}),this)).attr("src",r):o.is("source")?o.one("load.owl.lazy",t.proxy((function(){this._core.trigger("loaded",{element:o,url:r},"lazy")}),this)).attr("srcset",r):((n=new Image).onload=t.proxy((function(){o.css({"background-image":'url("'+r+'")',opacity:"1"}),this._core.trigger("loaded",{element:o,url:r},"lazy")}),this),n.src=r)}),this)),this._loaded.push(s.get(0)))},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Lazy=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(i){this._core=i,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.autoHeight&&this.update()}),this),"changed.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()}),this),"loaded.owl.lazy":t.proxy((function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var s=this;t(e).on("load",(function(){s._core.settings.autoHeight&&s.update()})),t(e).resize((function(){s._core.settings.autoHeight&&(null!=s._intervalId&&clearTimeout(s._intervalId),s._intervalId=setTimeout((function(){s.update()}),250))}))};n.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},n.prototype.update=function(){var e=this._core._current,i=e+this._core.settings.items,s=this._core.settings.lazyLoad,n=this._core.$stage.children().toArray().slice(e,i),o=[],r=0;t.each(n,(function(e,i){o.push(t(i).height())})),(r=Math.max.apply(null,o))<=1&&s&&this._previousHeight&&(r=this._previousHeight),this._previousHeight=r,this._core.$stage.parent().height(r).addClass(this._core.settings.autoHeightClass)},n.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(e){this._core=e,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":t.proxy((function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})}),this),"resize.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()}),this),"refreshed.owl.carousel":t.proxy((function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()}),this),"changed.owl.carousel":t.proxy((function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()}),this),"prepared.owl.carousel":t.proxy((function(e){if(e.namespace){var i=t(e.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,t(e.content)))}}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",t.proxy((function(t){this.play(t)}),this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var i=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",s=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),n=t.attr("data-width")||this._core.settings.videoWidth,o=t.attr("data-height")||this._core.settings.videoHeight,r=t.attr("href");if(!r)throw new Error("Missing video URL.");if((s=r.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(s[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(s[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}s=s[6],this._videos[r]={type:i,id:s,width:n,height:o},e.attr("data-video",r),this.thumbnail(t,this._videos[r])},n.prototype.thumbnail=function(e,i){var s,n,o=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",r=e.find("img"),a="src",h="",l=this._core.settings,c=function(i){'<div class="owl-video-play-icon"></div>',s=l.lazyLoad?t("<div/>",{class:"owl-video-tn "+h,srcType:i}):t("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),e.after(s),e.after('<div class="owl-video-play-icon"></div>')};if(e.wrap(t("<div/>",{class:"owl-video-wrapper",style:o})),this._core.settings.lazyLoad&&(a="data-src",h="owl-lazy"),r.length)return c(r.attr(a)),r.remove(),!1;"youtube"===i.type?(n="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",c(n)):"vimeo"===i.type?t.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){n=t[0].thumbnail_large,c(n)}}):"vzaar"===i.type&&t.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){n=t.framegrab_url,c(n)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(e){var i,s=t(e.target).closest("."+this._core.settings.itemClass),n=this._videos[s.attr("data-video")],o=n.width||"100%",r=n.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),s=this._core.items(this._core.relative(s.index())),this._core.reset(s.index()),(i=t('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",r),i.attr("width",o),"youtube"===n.type?i.attr("src","//www.youtube.com/embed/"+n.id+"?autoplay=1&rel=0&v="+n.id):"vimeo"===n.type?i.attr("src","//player.vimeo.com/video/"+n.id+"?autoplay=1"):"vzaar"===n.type&&i.attr("src","//view.vzaar.com/"+n.id+"/player?autoplay=true"),t(i).wrap('<div class="owl-video-frame" />').insertAfter(s.find(".owl-video")),this._playing=s.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&t(e).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(e){this.core=e,this.core.options=t.extend({},n.Defaults,this.core.options),this.swapping=!0,this.previous=s,this.next=s,this.handlers={"change.owl.carousel":t.proxy((function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)}),this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":t.proxy((function(t){t.namespace&&(this.swapping="translated"==t.type)}),this),"translate.owl.carousel":t.proxy((function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()}),this)},this.core.$element.on(this.handlers)};n.Defaults={animateOut:!1,animateIn:!1},n.prototype.swap=function(){if(1===this.core.settings.items&&t.support.animation&&t.support.transition){this.core.speed(0);var e,i=t.proxy(this.clear,this),s=this.core.$stage.children().eq(this.previous),n=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,r=this.core.settings.animateOut;this.core.current()!==this.previous&&(r&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),s.one(t.support.animation.end,i).css({left:e+"px"}).addClass("animated owl-animated-out").addClass(r)),o&&n.one(t.support.animation.end,i).addClass("animated owl-animated-in").addClass(o))}},n.prototype.clear=function(e){t(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},n.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.Animate=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){var n=function(e){this._core=e,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":t.proxy((function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)}),this),"initialized.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.autoplay&&this.play()}),this),"play.owl.autoplay":t.proxy((function(t,e,i){t.namespace&&this.play(e,i)}),this),"stop.owl.autoplay":t.proxy((function(t){t.namespace&&this.stop()}),this),"mouseover.owl.autoplay":t.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"mouseleave.owl.autoplay":t.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()}),this),"touchstart.owl.core":t.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"touchend.owl.core":t.proxy((function(){this._core.settings.autoplayHoverPause&&this.play()}),this)},this._core.$element.on(this._handlers),this._core.options=t.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(s){this._call=e.setTimeout(t.proxy(this._next,this,s),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(s||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(i,s){var n;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,n=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):e.clearTimeout(this._call),this._time+=this.read()%i-n,this._timeout=i,this._call=e.setTimeout(t.proxy(this._next,this,s),i-n)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,e.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,e.clearTimeout(this._call))},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){"use strict";var n=function(e){this._core=e,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":t.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+t(e.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")}),this),"added.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())}),this),"remove.owl.carousel":t.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)}),this),"changed.owl.carousel":t.proxy((function(t){t.namespace&&"position"==t.property.name&&this.draw()}),this),"initialized.owl.carousel":t.proxy((function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))}),this),"refreshed.owl.carousel":t.proxy((function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers)};n.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},n.prototype.initialize=function(){var e,i=this._core.settings;for(e in this._controls.$relative=(i.navContainer?t(i.navContainer):t("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=t("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",t.proxy((function(t){this.prev(i.navSpeed)}),this)),this._controls.$next=t("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",t.proxy((function(t){this.next(i.navSpeed)}),this)),i.dotsData||(this._templates=[t('<button role="button">').addClass(i.dotClass).append(t("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?t(i.dotsContainer):t("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",t.proxy((function(e){var s=t(e.target).parent().is(this._controls.$absolute)?t(e.target).index():t(e.target).parent().index();e.preventDefault(),this.to(s,i.dotsSpeed)}),this)),this._overrides)this._core[e]=t.proxy(this[e],this)},n.prototype.destroy=function(){var t,e,i,s,n;for(t in n=this._core.settings,this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&n.navContainer?this._controls[e].html(""):this._controls[e].remove();for(s in this.overides)this._core[s]=this._overrides[s];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},n.prototype.update=function(){var t,e,i=this._core.clones().length/2,s=i+this._core.items().length,n=this._core.maximum(!0),o=this._core.settings,r=o.center||o.autoWidth||o.dotsData?1:o.dotsEach||o.items;if("page"!==o.slideBy&&(o.slideBy=Math.min(o.slideBy,o.items)),o.dots||"page"==o.slideBy)for(this._pages=[],t=i,e=0,0;t<s;t++){if(e>=r||0===e){if(this._pages.push({start:Math.min(n,t-i),end:t-i+r-1}),Math.min(n,t-i)===n)break;e=0}e+=this._core.mergers(this._core.relative(t))}},n.prototype.draw=function(){var e,i=this._core.settings,s=this._core.items().length<=i.items,n=this._core.relative(this._core.current()),o=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||s),i.nav&&(this._controls.$previous.toggleClass("disabled",!o&&n<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!o&&n>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||s),i.dots&&(e=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==e?this._controls.$absolute.html(this._templates.join("")):e>0?this._controls.$absolute.append(new Array(e+1).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(t.inArray(this.current(),this._pages)).addClass("active"))},n.prototype.onTrigger=function(e){var i=this._core.settings;e.page={index:t.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},n.prototype.current=function(){var e=this._core.relative(this._core.current());return t.grep(this._pages,t.proxy((function(t,i){return t.start<=e&&t.end>=e}),this)).pop()},n.prototype.getPosition=function(e){var i,s,n=this._core.settings;return"page"==n.slideBy?(i=t.inArray(this.current(),this._pages),s=this._pages.length,e?++i:--i,i=this._pages[(i%s+s)%s].start):(i=this._core.relative(this._core.current()),s=this._core.items().length,e?i+=n.slideBy:i-=n.slideBy),i},n.prototype.next=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},n.prototype.prev=function(e){t.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},n.prototype.to=function(e,i,s){var n;!s&&this._pages.length?(n=this._pages.length,t.proxy(this._overrides.to,this._core)(this._pages[(e%n+n)%n].start,i)):t.proxy(this._overrides.to,this._core)(e,i)},t.fn.owlCarousel.Constructor.Plugins.Navigation=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){"use strict";var n=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":t.proxy((function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&t(e).trigger("hashchange.owl.navigation")}),this),"prepared.owl.carousel":t.proxy((function(e){if(e.namespace){var i=t(e.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=e.content}}),this),"changed.owl.carousel":t.proxy((function(i){if(i.namespace&&"position"===i.property.name){var s=this._core.items(this._core.relative(this._core.current())),n=t.map(this._hashes,(function(t,e){return t===s?e:null})).join();if(!n||e.location.hash.slice(1)===n)return;e.location.hash=n}}),this)},this._core.options=t.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers),t(e).on("hashchange.owl.navigation",t.proxy((function(t){var i=e.location.hash.substring(1),s=this._core.$stage.children(),n=this._hashes[i]&&s.index(this._hashes[i]);void 0!==n&&n!==this._core.current()&&this._core.to(this._core.relative(n),!1,!0)}),this))};n.Defaults={URLhashListener:!1},n.prototype.destroy=function(){var i,s;for(i in t(e).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(s in Object.getOwnPropertyNames(this))"function"!=typeof this[s]&&(this[s]=null)},t.fn.owlCarousel.Constructor.Plugins.Hash=n}(window.Zepto||window.jQuery,window,document),function(t,e,i,s){function n(e,i){var s=!1,n=e.charAt(0).toUpperCase()+e.slice(1);return t.each((e+" "+a.join(n+" ")+n).split(" "),(function(t,e){if(void 0!==r[e])return s=!i||e,!1})),s}function o(t){return n(t,!0)}var r=t("<support>").get(0).style,a="Webkit Moz O ms".split(" "),h={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},l=function(){return!!n("transform")},c=function(){return!!n("perspective")},p=function(){return!!n("animation")};(function(){return!!n("transition")})()&&(t.support.transition=new String(o("transition")),t.support.transition.end=h.transition.end[t.support.transition]),p()&&(t.support.animation=new String(o("animation")),t.support.animation.end=h.animation.end[t.support.animation]),l()&&(t.support.transform=new String(o("transform")),t.support.transform3d=c())}(window.Zepto||window.jQuery,window,document);
!function(e){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},r=function(e){return function(){return e}},o=function(e){return e};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},k=r(!1),T=r(!0),S=function(){return E},E=(a=function(e){return e.isNone()},c={fold:function(e,t){return e()},is:k,isSome:k,isNone:T,getOr:s=function(e){return e},getOrThunk:u=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:s,orThunk:u,map:S,each:t,bind:S,exists:k,forall:T,filter:S,equals:a,equals_:a,toArray:function(){return[]},toString:r("none()")},Object.freeze&&Object.freeze(c),c),_=function(e){var t=r(e),n=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:T,isNone:k,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return _(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:E},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(k,(function(t){return n(e,t)}))}};return i},N={some:_,none:S,from:function(e){return null==e?E:_(e)}},R=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},O=R("string"),A=R("object"),P=R("array"),D=R("null"),M=R("boolean"),B=R("function"),I=R("number"),L=Array.prototype.slice,H=Array.prototype.indexOf,F=Array.prototype.push,z=function(e,t){return H.call(e,t)},W=function(e,t){return-1<z(e,t)},U=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},j=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},V=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},$=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}},q=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Y=function(e,t,n){return V(e,(function(e){n=t(n,e)})),n},X=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return N.some(o)}return N.none()},G=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return N.some(n);return N.none()},K=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!P(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);F.apply(t,e[n])}return t}(j(e,t))},J=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Z=function(e,t){return q(e,(function(e){return!W(t,e)}))},Q=function(e){return 0===e.length?N.none():N.some(e[0])},ee=function(e){return 0===e.length?N.none():N.some(e[e.length-1])},te=B(Array.from)?Array.from:function(e){return L.call(e)},ne=void 0!==e.window?e.window:Function("return this;")(),re=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:ne,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},oe=function(){return re("URL")},ie=function(e){return oe().createObjectURL(e)},ae=function(e){oe().revokeObjectURL(e)},ue=e.navigator,se=ue.userAgent,ce=function(t){return"matchMedia"in e.window&&e.matchMedia(t).matches};v=/Android/.test(se),f=(f=!(l=/WebKit/.test(se))&&/MSIE/gi.test(se)&&/Explorer/gi.test(ue.appName))&&/MSIE (\w+)\./.exec(se)[1],d=-1!==se.indexOf("Trident/")&&(-1!==se.indexOf("rv:")||-1!==ue.appName.indexOf("Netscape"))&&11,m=-1!==se.indexOf("Edge/")&&!f&&!d&&12,f=f||d||m,h=!l&&!d&&/Gecko/.test(se),g=-1!==se.indexOf("Mac"),p=/(iPad|iPhone)/.test(se),b="FormData"in e.window&&"FileReader"in e.window&&"URL"in e.window&&!!ie,y=ce("only screen and (max-device-width: 480px)")&&(v||p),x=ce("only screen and (min-width: 800px)")&&(v||p),w=-1!==se.indexOf("Windows Phone"),m&&(l=!1);var le,fe={opera:!1,webkit:l,ie:f,gecko:h,mac:g,iOS:p,android:v,contentEditable:!p||b||534<=parseInt(se.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==f,range:e.window.getSelection&&"Range"in e.window,documentMode:f&&!m?e.document.documentMode||7:10,fileApi:b,ceFalse:!1===f||8<f,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===f||11<f,desktop:!y&&!x,windowsPhone:w},de=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,e(i,this),e(a,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e){var t=this;null!==this._state?r((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function i(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void c(e(n,t),e(i,this),e(a,this))}this._state=!0,this._value=t,u.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function c(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(e){if(r)return;r=!0,n(e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n((function(n,i){o.call(r,new s(e,t,n,i))}))},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n((function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}e[i]=a,0==--r&&t(e)}catch(e){n(e)}}for(var i=0;i<e.length;i++)o(i,e[i])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},n}(),me=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},he=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},ge=function(e,t){var n,r;return(r=function(){var r=arguments;clearTimeout(n),n=me((function(){e.apply(this,r)}),t)}).stop=function(){clearTimeout(n)},r},pe={requestAnimationFrame:function(t,n){le?le.then(t):le=new de((function(t){n||(n=e.document.body),function(t,n){var r,o=e.window.requestAnimationFrame,i=["ms","moz","webkit"];for(r=0;r<i.length&&!o;r++)o=e.window[i[r]+"RequestAnimationFrame"];o||(o=function(t){e.window.setTimeout(t,0)}),o(t,n)}(t,n)})).then(t)},setTimeout:me,setInterval:he,setEditorTimeout:function(e,t,n){return me((function(){e.removed||t()}),n)},setEditorInterval:function(e,t,n){var r;return r=he((function(){e.removed?clearInterval(r):t()}),n)},debounce:ge,throttle:ge,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},ve=/^(?:mouse|contextmenu)|click/,be={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},ye=function(){return!1},xe=function(){return!0},we=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ce=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ke=function(t,n){var r,o,i=n||{};for(r in t)be[r]||(i[r]=t[r]);if(i.target||(i.target=i.srcElement||e.document),fe.experimentalShadowDom&&(i.target=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&0<n.length)return n[0]}return t}(t,i.target)),t&&ve.test(t.type)&&void 0===t.pageX&&void 0!==t.clientX){var a=i.target.ownerDocument||e.document,u=a.documentElement,s=a.body;i.pageX=t.clientX+(u&&u.scrollLeft||s&&s.scrollLeft||0)-(u&&u.clientLeft||s&&s.clientLeft||0),i.pageY=t.clientY+(u&&u.scrollTop||s&&s.scrollTop||0)-(u&&u.clientTop||s&&s.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=xe,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=xe,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},!(i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=xe,i.stopPropagation()})==((o=i).isDefaultPrevented===xe||o.isDefaultPrevented===ye)&&(i.isDefaultPrevented=ye,i.isPropagationStopped=ye,i.isImmediatePropagationStopped=ye),void 0===i.metaKey&&(i.metaKey=!1),i},Te=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var i=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(o))},u=function(){i()&&(Ce(r,"readystatechange",u),a())},s=function(){try{r.documentElement.doScroll("left")}catch(e){return void pe.setTimeout(s)}a()};!r.addEventListener||fe.ie&&fe.ie<11?(we(r,"readystatechange",u),r.documentElement.doScroll&&e.self===e.top&&s()):i()?a():we(e,"DOMContentLoaded",a),we(e,"load",a)}},Se=function(){var t,n,r,o,i,a=this,u={};n="mce-data-"+(+new Date).toString(32),o="onmouseenter"in e.document.documentElement,r="onfocusin"in e.document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},t=1,a.domLoaded=!1,a.events=u;var s=function(e,t){var n,r,o,i,a=u[t];if(n=a&&a[e.type])for(r=0,o=n.length;r<o;r++)if((i=n[r])&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};a.bind=function(c,l,f,d){var m,h,g,p,v,b,y,x=e.window,w=function(e){s(ke(e||x.event),m)};if(c&&3!==c.nodeType&&8!==c.nodeType){for(c[n]?m=c[n]:(m=t++,c[n]=m,u[m]={}),d=d||c,g=(l=l.split(" ")).length;g--;)b=w,v=y=!1,"DOMContentLoaded"===(p=l[g])&&(p="ready"),a.domLoaded&&"ready"===p&&"complete"===c.readyState?f.call(d,ke({type:p})):(o||(v=i[p])&&(b=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=ke(e||x.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,m))}),r||"focusin"!==p&&"focusout"!==p||(y=!0,v="focusin"===p?"focus":"blur",b=function(e){(e=ke(e||x.event)).type="focus"===e.type?"focusin":"focusout",s(e,m)}),(h=u[m][p])?"ready"===p&&a.domLoaded?f({type:p}):h.push({func:f,scope:d}):(u[m][p]=h=[{func:f,scope:d}],h.fakeName=v,h.capture=y,h.nativeHandler=b,"ready"===p?Te(c,b,a):we(c,v||p,b,y)));return c=h=0,f}},a.unbind=function(e,t,r){var o,i,s,c,l,f;if(!e||3===e.nodeType||8===e.nodeType)return a;if(o=e[n]){if(f=u[o],t){for(s=(t=t.split(" ")).length;s--;)if(i=f[l=t[s]]){if(r)for(c=i.length;c--;)if(i[c].func===r){var d=i.nativeHandler,m=i.fakeName,h=i.capture;(i=i.slice(0,c).concat(i.slice(c+1))).nativeHandler=d,i.fakeName=m,i.capture=h,f[l]=i}r&&0!==i.length||(delete f[l],Ce(e,i.fakeName||l,i.nativeHandler,i.capture))}}else{for(l in f)i=f[l],Ce(e,i.fakeName||l,i.nativeHandler,i.capture);f={}}for(l in f)return a;delete u[o];try{delete e[n]}catch(t){e[n]=null}}return a},a.fire=function(e,t,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return a;for((r=ke(null,r)).type=t,r.target=e;(o=e[n])&&s(r,o),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!r.isPropagationStopped(););return a},a.clean=function(e){var t,r,o=a.unbind;if(!e||3===e.nodeType||8===e.nodeType)return a;if(e[n]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),t=(r=e.getElementsByTagName("*")).length;t--;)(e=r[t])[n]&&o(e);return a},a.destroy=function(){u={}},a.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};(Se.Event=new Se).bind(e.window,"ready",(function(){}));var Ee,_e,Ne,Re,Oe,Ae,Pe,De,Me,Be,Ie,Le,He,Fe,ze,We,Ue,je,Ve="sizzle"+-new Date,$e=e.window.document,qe=0,Ye=0,Xe=Et(),Ge=Et(),Ke=Et(),Je=function(e,t){return e===t&&(Ie=!0),0},Ze="undefined",Qe={}.hasOwnProperty,et=[],tt=et.pop,nt=et.push,rt=et.push,ot=et.slice,it=et.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},at="[\\x20\\t\\r\\n\\f]",ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st="\\["+at+"*("+ut+")(?:"+at+"*([*^$|!~]?=)"+at+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ut+"))|)"+at+"*\\]",ct=":("+ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+at+"+|((?:^|[^\\\\])(?:\\\\.)*)"+at+"+$","g"),ft=new RegExp("^"+at+"*,"+at+"*"),dt=new RegExp("^"+at+"*([>+~]|"+at+")"+at+"*"),mt=new RegExp("="+at+"*([^\\]'\"]*?)"+at+"*\\]","g"),ht=new RegExp(ct),gt=new RegExp("^"+ut+"$"),pt={ID:new RegExp("^#("+ut+")"),CLASS:new RegExp("^\\.("+ut+")"),TAG:new RegExp("^("+ut+"|[*])"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+ct),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+at+"*(even|odd|(([+-]|)(\\d*)n|)"+at+"*(?:([+-]|)"+at+"*(\\d+)|))"+at+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+at+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+at+"*((?:-\\d)?\\d*)"+at+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/[+~]/,Ct=/'|\\/g,kt=new RegExp("\\\\([\\da-f]{1,6}"+at+"?|("+at+")|.)","ig"),Tt=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{rt.apply(et=ot.call($e.childNodes),$e.childNodes),et[$e.childNodes.length].nodeType}catch(e){rt={apply:et.length?function(e,t){nt.apply(e,ot.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var St=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,m;if((t?t.ownerDocument||t:$e)!==He&&Le(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=(t=t||He).nodeType)&&9!==u)return[];if(ze&&!r){if(o=xt.exec(e))if(a=o[1]){if(9===u){if(!(i=t.getElementById(a))||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&je(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return rt.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&_e.getElementsByClassName)return rt.apply(n,t.getElementsByClassName(a)),n}if(_e.qsa&&(!We||!We.test(e))){if(f=l=Ve,d=t,m=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(c=Ae(e),(l=t.getAttribute("id"))?f=l.replace(Ct,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",s=c.length;s--;)c[s]=f+Mt(c[s]);d=wt.test(e)&&Pt(t.parentNode)||t,m=c.join(",")}if(m)try{return rt.apply(n,d.querySelectorAll(m)),n}catch(e){}finally{l||t.removeAttribute("id")}}}return De(e.replace(lt,"$1"),t,n,r)};function Et(){var e=[];return function t(n,r){return e.push(n+" ")>Ne.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function _t(e){return e[Ve]=!0,e}function Nt(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function Rt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function Ot(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function At(e){return _t((function(t){return t=+t,_t((function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))}))}))}function Pt(e){return e&&typeof e.getElementsByTagName!==Ze&&e}for(Ee in _e=St.support={},Oe=St.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Le=St.setDocument=function(e){var t,n=e?e.ownerDocument||e:$e,r=n.defaultView;return n!==He&&9===n.nodeType&&n.documentElement?(Fe=(He=n).documentElement,ze=!Oe(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",(function(){Le()}),!1):r.attachEvent&&r.attachEvent("onunload",(function(){Le()}))),_e.attributes=!0,_e.getElementsByTagName=!0,_e.getElementsByClassName=yt.test(n.getElementsByClassName),_e.getById=!0,Ne.find.ID=function(e,t){if(typeof t.getElementById!==Ze&&ze){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Ne.filter.ID=function(e){var t=e.replace(kt,Tt);return function(e){return e.getAttribute("id")===t}},Ne.find.TAG=_e.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Ze)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},Ne.find.CLASS=_e.getElementsByClassName&&function(e,t){if(ze)return t.getElementsByClassName(e)},Ue=[],We=[],_e.disconnectedMatch=!0,We=We.length&&new RegExp(We.join("|")),Ue=Ue.length&&new RegExp(Ue.join("|")),t=yt.test(Fe.compareDocumentPosition),je=t||yt.test(Fe.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Je=t?function(e,t){if(e===t)return Ie=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!_e.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===$e&&je($e,e)?-1:t===n||t.ownerDocument===$e&&je($e,t)?1:Be?it.call(Be,e)-it.call(Be,t):0:4&r?-1:1)}:function(e,t){if(e===t)return Ie=!0,0;var r,o=0,i=e.parentNode,a=t.parentNode,u=[e],s=[t];if(!i||!a)return e===n?-1:t===n?1:i?-1:a?1:Be?it.call(Be,e)-it.call(Be,t):0;if(i===a)return Nt(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;u[o]===s[o];)o++;return o?Nt(u[o],s[o]):u[o]===$e?-1:s[o]===$e?1:0},n):He},St.matches=function(e,t){return St(e,null,null,t)},St.matchesSelector=function(e,t){if((e.ownerDocument||e)!==He&&Le(e),t=t.replace(mt,"='$1']"),_e.matchesSelector&&ze&&(!Ue||!Ue.test(t))&&(!We||!We.test(t)))try{var n=(void 0).call(e,t);if(n||_e.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<St(t,He,null,[e]).length},St.contains=function(e,t){return(e.ownerDocument||e)!==He&&Le(e),je(e,t)},St.attr=function(e,t){(e.ownerDocument||e)!==He&&Le(e);var n=Ne.attrHandle[t.toLowerCase()],r=n&&Qe.call(Ne.attrHandle,t.toLowerCase())?n(e,t,!ze):void 0;return void 0!==r?r:_e.attributes||!ze?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},St.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},St.uniqueSort=function(e){var t,n=[],r=0,o=0;if(Ie=!_e.detectDuplicates,Be=!_e.sortStable&&e.slice(0),e.sort(Je),Ie){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return Be=null,e},Re=St.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Re(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=Re(t);return n},(Ne=St.selectors={cacheLength:50,createPseudo:_t,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(kt,Tt),e[3]=(e[3]||e[4]||e[5]||"").replace(kt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||St.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&St.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=Ae(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(kt,Tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Xe[e+" "];return t||(t=new RegExp("(^|"+at+")"+e+"("+at+"|$)"))&&Xe(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Ze&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=St.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,s){var c,l,f,d,m,h,g=i!==a?"nextSibling":"previousSibling",p=t.parentNode,v=u&&t.nodeName.toLowerCase(),b=!s&&!u;if(p){if(i){for(;g;){for(f=t;f=f[g];)if(u?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?p.firstChild:p.lastChild],a&&b){for(m=(c=(l=p[Ve]||(p[Ve]={}))[e]||[])[0]===qe&&c[1],d=c[0]===qe&&c[2],f=m&&p.childNodes[m];f=++m&&f&&f[g]||(d=m=0)||h.pop();)if(1===f.nodeType&&++d&&f===t){l[e]=[qe,m,d];break}}else if(b&&(c=(t[Ve]||(t[Ve]={}))[e])&&c[0]===qe)d=c[1];else for(;(f=++m&&f&&f[g]||(d=m=0)||h.pop())&&((u?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(b&&((f[Ve]||(f[Ve]={}))[e]=[qe,d]),f!==t)););return(d-=o)===r||d%r==0&&0<=d/r}}},PSEUDO:function(e,t){var n,r=Ne.pseudos[e]||Ne.setFilters[e.toLowerCase()]||St.error("unsupported pseudo: "+e);return r[Ve]?r(t):1<r.length?(n=[e,e,"",t],Ne.setFilters.hasOwnProperty(e.toLowerCase())?_t((function(e,n){for(var o,i=r(e,t),a=i.length;a--;)e[o=it.call(e,i[a])]=!(n[o]=i[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:_t((function(e){var t=[],n=[],r=Pe(e.replace(lt,"$1"));return r[Ve]?_t((function(e,t,n,o){for(var i,a=r(e,null,o,[]),u=e.length;u--;)(i=a[u])&&(e[u]=!(t[u]=i))})):function(e,o,i){return t[0]=e,r(t,null,i,n),!n.pop()}})),has:_t((function(e){return function(t){return 0<St(e,t).length}})),contains:_t((function(e){return e=e.replace(kt,Tt),function(t){return-1<(t.textContent||t.innerText||Re(t)).indexOf(e)}})),lang:_t((function(e){return gt.test(e||"")||St.error("unsupported lang: "+e),e=e.replace(kt,Tt).toLowerCase(),function(t){var n;do{if(n=ze?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.window.location&&e.window.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Fe},focus:function(e){return e===He.activeElement&&(!He.hasFocus||He.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Ne.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:At((function(){return[0]})),last:At((function(e,t){return[t-1]})),eq:At((function(e,t,n){return[n<0?n+t:n]})),even:At((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:At((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:At((function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e})),gt:At((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=Ne.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Ne.pseudos[Ee]=Rt(Ee);for(Ee in{submit:!0,reset:!0})Ne.pseudos[Ee]=Ot(Ee);function Dt(){}function Mt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Bt(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=Ye++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var u,s,c=[qe,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if((u=(s=t[Ve]||(t[Ve]={}))[r])&&u[0]===qe&&u[1]===i)return c[2]=u[2];if((s[r]=c)[2]=e(t,n,a))return!0}}}function It(e){return 1<e.length?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function Lt(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(u)));return a}function Ht(e,t,n,r,o,i){return r&&!r[Ve]&&(r=Ht(r)),o&&!o[Ve]&&(o=Ht(o,i)),_t((function(i,a,u,s){var c,l,f,d=[],m=[],h=a.length,g=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)St(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),p=!e||!i&&t?g:Lt(g,d,e,u,s),v=n?o||(i?e:h||r)?[]:a:p;if(n&&n(p,v,u,s),r)for(c=Lt(v,m),r(c,[],u,s),l=c.length;l--;)(f=c[l])&&(v[m[l]]=!(p[m[l]]=f));if(i){if(o||e){if(o){for(c=[],l=v.length;l--;)(f=v[l])&&c.push(p[l]=f);o(null,v=[],c,s)}for(l=v.length;l--;)(f=v[l])&&-1<(c=o?it.call(i,f):d[l])&&(i[c]=!(a[c]=f))}}else v=Lt(v===a?v.splice(h,v.length):v),o?o(null,a,v,s):rt.apply(a,v)}))}function Ft(e){for(var t,n,r,o=e.length,i=Ne.relative[e[0].type],a=i||Ne.relative[" "],u=i?1:0,s=Bt((function(e){return e===t}),a,!0),c=Bt((function(e){return-1<it.call(t,e)}),a,!0),l=[function(e,n,r){return!i&&(r||n!==Me)||((t=n).nodeType?s(e,n,r):c(e,n,r))}];u<o;u++)if(n=Ne.relative[e[u].type])l=[Bt(It(l),n)];else{if((n=Ne.filter[e[u].type].apply(null,e[u].matches))[Ve]){for(r=++u;r<o&&!Ne.relative[e[r].type];r++);return Ht(1<u&&It(l),1<u&&Mt(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(lt,"$1"),n,u<r&&Ft(e.slice(u,r)),r<o&&Ft(e=e.slice(r)),r<o&&Mt(e))}l.push(n)}return It(l)}Dt.prototype=Ne.filters=Ne.pseudos,Ne.setFilters=new Dt,Ae=St.tokenize=function(e,t){var n,r,o,i,a,u,s,c=Ge[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=Ne.preFilter;a;){for(i in n&&!(r=ft.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=dt.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(lt," ")}),a=a.slice(n.length)),Ne.filter)!(r=pt[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?St.error(e):Ge(e,u).slice(0)},Pe=St.compile=function(e,t){var n,r,o,i,a,u,s=[],c=[],l=Ke[e+" "];if(!l){for(t||(t=Ae(e)),n=t.length;n--;)(l=Ft(t[n]))[Ve]?s.push(l):c.push(l);(l=Ke(e,(r=c,i=0<(o=s).length,a=0<r.length,u=function(e,t,n,u,s){var c,l,f,d=0,m="0",h=e&&[],g=[],p=Me,v=e||a&&Ne.find.TAG("*",s),b=qe+=null==p?1:Math.random()||.1,y=v.length;for(s&&(Me=t!==He&&t);m!==y&&null!=(c=v[m]);m++){if(a&&c){for(l=0;f=r[l++];)if(f(c,t,n)){u.push(c);break}s&&(qe=b)}i&&((c=!f&&c)&&d--,e&&h.push(c))}if(d+=m,i&&m!==d){for(l=0;f=o[l++];)f(h,g,t,n);if(e){if(0<d)for(;m--;)h[m]||g[m]||(g[m]=tt.call(u));g=Lt(g)}rt.apply(u,g),s&&!e&&0<g.length&&1<d+o.length&&St.uniqueSort(u)}return s&&(qe=b,Me=p),h},i?_t(u):u))).selector=e}return l},De=St.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&Ae(e=c.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(a=i[0]).type&&_e.getById&&9===t.nodeType&&ze&&Ne.relative[i[1].type]){if(!(t=(Ne.find.ID(a.matches[0].replace(kt,Tt),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=pt.needsContext.test(e)?0:i.length;o--&&(a=i[o],!Ne.relative[u=a.type]);)if((s=Ne.find[u])&&(r=s(a.matches[0].replace(kt,Tt),wt.test(i[0].type)&&Pt(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&Mt(i)))return rt.apply(n,r),n;break}}return(c||Pe(e,l))(r,t,!ze,n,wt.test(e)&&Pt(t.parentNode)||t),n},_e.sortStable=Ve.split("").sort(Je).join("")===Ve,_e.detectDuplicates=!!Ie,Le(),_e.sortDetached=!0;var zt=Array.isArray,Wt=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},Ut=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},jt={isArray:zt,toArray:function(e){var t,n,r=e;if(!zt(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:Wt,map:function(e,t){var n=[];return Wt(e,(function(r,o){n.push(t(r,o,e))})),n},filter:function(e,t){var n=[];return Wt(e,(function(r,o){t&&!t(r,o,e)||n.push(r)})),n},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},findIndex:Ut,find:function(e,t,n){var r=Ut(e,t,n);return-1!==r?e[r]:void 0},last:function(e){return e[e.length-1]}},Vt=/^\s*|\s*$/g,$t=function(e){return null==e?"":(""+e).replace(Vt,"")},qt=function(e,t){return t?!("array"!==t||!jt.isArray(e))||typeof e===t:void 0!==e},Yt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),jt.each(e,(function(e,o){if(!1===t.call(r,e,o,n))return!1;Yt(e,t,n,r)})))},Xt={trim:$t,isArray:jt.isArray,is:qt,toArray:jt.toArray,makeMap:function(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:jt.each,map:jt.map,grep:jt.filter,inArray:jt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u,s=arguments;for(n=1,r=s.length;n<r;n++)for(o in t=s[n])t.hasOwnProperty(o)&&void 0!==(u=t[o])&&(e[o]=u);return e},create:function(e,t,n){var r,o,i,a,u,s=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=s.createNS(e[3].replace(/\.\w+$/,""),n))[i]){if("static"===e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},c=1),o[i]=t[i],s.extend(o[i].prototype,t),e[5]&&(r=s.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],u=o[i],o[i]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],u.apply(this,arguments)},o[i].prototype[i]=o[i],s.each(r,(function(e,t){o[i].prototype[t]=r[t]})),s.each(t,(function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==i&&(o[i].prototype[t]=e)}))),s.each(t.static,(function(e,t){o[i][t]=e}))}},walk:Yt,createNS:function(t,n){var r,o;for(n=n||e.window,t=t.split("."),r=0;r<t.length;r++)n[o=t[r]]||(n[o]={}),n=n[o];return n},resolve:function(t,n){var r,o;for(n=n||e.window,r=0,o=(t=t.split(".")).length;r<o&&(n=n[t[r]]);r++);return n},explode:function(e,t){return!e||qt(e,"array")?e:jt.map(e.split(t||","),$t)},_addCacheSuffix:function(e){var t=fe.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Gt=e.document,Kt=Array.prototype.push,Jt=Array.prototype.slice,Zt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Qt=Se.Event,en=Xt.makeMap("children,contents,next,prev"),tn=function(e){return void 0!==e},nn=function(e){return"string"==typeof e},rn=function(e,t){var n,r,o;for(o=(t=t||Gt).createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n},on=function(e,t,n,r){var o;if(nn(t))t=rn(t,yn(e[0]));else if(t.length&&!t.nodeType){if(t=hn.makeArray(t),r)for(o=t.length-1;0<=o;o--)on(e,t[o],n,r);else for(o=0;o<t.length;o++)on(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},an=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},un=function(e,t,n){var r,o;return t=hn(t)[0],e.each((function(){var e=this;n&&r===e.parentNode||(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e)),o.appendChild(e)})),e},sn=Xt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),cn=Xt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),ln={for:"htmlFor",class:"className",readonly:"readOnly"},fn={float:"cssFloat"},dn={},mn={},hn=function(e,t){return new hn.fn.init(e,t)},gn=/^\s*|\s*$/g,pn=function(e){return null==e?"":(""+e).replace(gn,"")},vn=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},bn=function(e,t){var n=[];return vn(e,(function(e,r){t(r,e)&&n.push(r)})),n},yn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Gt};hn.fn=hn.prototype={constructor:hn,selector:"",context:null,length:0,init:function(t,n){var r,o,i=this;if(!t)return i;if(t.nodeType)return i.context=i[0]=t,i.length=1,i;if(n&&n.nodeType)i.context=n;else{if(n)return hn(t).attr(n);i.context=n=e.document}if(nn(t)){if(!(r="<"===(i.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:Zt.exec(t)))return hn(n).find(t);if(r[1])for(o=rn(t,yn(n)).firstChild;o;)Kt.call(i,o),o=o.nextSibling;else{if(!(o=yn(n).getElementById(r[2])))return i;if(o.id!==r[2])return i.find(t);i.length=1,i[0]=o}}else this.add(t,!1);return i},toArray:function(){return Xt.toArray(this)},add:function(e,t){var n,r,o=this;if(nn(e))return o.add(hn(e));if(!1!==t)for(n=hn.unique(o.toArray().concat(hn.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else Kt.apply(o,hn.makeArray(e));return o},attr:function(e,t){var n,r=this;if("object"==typeof e)vn(e,(function(e,t){r.attr(e,t)}));else{if(!tn(t)){if(r[0]&&1===r[0].nodeType){if((n=dn[e])&&n.get)return n.get(r[0],e);if(cn[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each((function(){var n;if(1===this.nodeType){if((n=dn[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}}))}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=ln[e]||e))vn(e,(function(e,t){n.prop(e,t)}));else{if(!tn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each((function(){1===this.nodeType&&(this[e]=t)}))}return n},css:function(e,t){var n,r,o=this,i=function(e){return e.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()}))},a=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e}))};if("object"==typeof e)vn(e,(function(e,t){o.css(e,t)}));else if(tn(t))e=i(e),"number"!=typeof t||sn[e]||(t=t.toString()+"px"),o.each((function(){var n=this.style;if((r=mn[e])&&r.set)r.set(this,t);else{try{this.style[fn[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}}));else{if(n=o[0],(r=mn[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[i(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return o},remove:function(){for(var e,t=this.length;t--;)e=this[t],Qt.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(tn(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){hn(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(tn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return on(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)}))},prepend:function(){return on(this,arguments,(function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)}),!0)},before:function(){return this[0]&&this[0].parentNode?on(this,arguments,(function(e){this.parentNode.insertBefore(e,this)})):this},after:function(){return this[0]&&this[0].parentNode?on(this,arguments,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}),!0):this},appendTo:function(e){return hn(e).append(this),this},prependTo:function(e){return hn(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return un(this,e)},wrapAll:function(e){return un(this,e,!0)},wrapInner:function(e){return this.each((function(){hn(this).contents().wrapAll(e)})),this},unwrap:function(){return this.parent().each((function(){hn(this).replaceWith(this.childNodes)}))},clone:function(){var e=[];return this.each((function(){e.push(this.cloneNode(!0))})),hn(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e||(-1!==e.indexOf(" ")?vn(e.split(" "),(function(){n.toggleClass(this,t)})):n.each((function(n,r){var o,i;(i=an(r,e))!==t&&(o=r.className,i?r.className=pn((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}))),n},hasClass:function(e){return an(this[0],e)},each:function(e){return vn(this,e)},on:function(e,t){return this.each((function(){Qt.bind(this,e,t)}))},off:function(e,t){return this.each((function(){Qt.unbind(this,e,t)}))},trigger:function(e){return this.each((function(){"object"==typeof e?Qt.fire(this,e.type,e):Qt.fire(this,e)}))},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new hn(Jt.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)hn.find(e,this[t],r);return hn(r)},filter:function(e){return hn("function"==typeof e?bn(this.toArray(),(function(t,n){return e(n,t)})):hn.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof hn&&(e=e[0]),this.each((function(n,r){for(;r;){if("string"==typeof e&&hn(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}})),hn(t)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(i=(o=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:Kt,sort:[].sort,splice:[].splice},Xt.extend(hn,{extend:Xt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Xt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Xt.isArray,each:vn,trim:pn,grep:bn,find:St,expr:St.selectors,unique:St.uniqueSort,text:St.getText,contains:St.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?hn.find.matchesSelector(t[0],e)?[t[0]]:[]:hn.find.matches(e,t)}});var xn=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof hn&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&hn(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},wn=function(e,t,n,r){var o=[];for(r instanceof hn&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&hn(e).is(r))break}o.push(e)}return o},Cn=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};vn({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return xn(e,"parentNode")},next:function(e){return Cn(e,"nextSibling",1)},prev:function(e){return Cn(e,"previousSibling",1)},children:function(e){return wn(e.firstChild,"nextSibling",1)},contents:function(e){return Xt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},(function(e,t){hn.fn[e]=function(n){var r=[];return this.each((function(){var e=t.call(r,this,n,r);e&&(hn.isArray(e)?r.push.apply(r,e):r.push(e))})),1<this.length&&(en[e]||(r=hn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=hn(r),n?r.filter(n):r}})),vn({parentsUntil:function(e,t){return xn(e,"parentNode",t)},nextUntil:function(e,t){return wn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return wn(e,"previousSibling",1,t).slice(1)}},(function(e,t){hn.fn[e]=function(n,r){var o=[];return this.each((function(){var e=t.call(o,this,n,o);e&&(hn.isArray(e)?o.push.apply(o,e):o.push(e))})),1<this.length&&(o=hn.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=hn(o),r?o.filter(r):o}})),hn.fn.is=function(e){return!!e&&0<this.filter(e).length},hn.fn.init.prototype=hn.fn,hn.overrideDefaults=function(e){var t,n=function(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return hn.extend(n,this),n};var kn=function(e,t,n){vn(n,(function(n,r){e[n]=e[n]||{},e[n][t]=r}))};fe.ie&&fe.ie<8&&(kn(dn,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?void 0:t},size:function(e){var t=e.size;return 20===t?void 0:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?void 0:t}}),kn(dn,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),fe.ie&&fe.ie<9&&(fn.float="styleFloat",kn(mn,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),hn.attrHooks=dn,hn.cssHooks=mn;var Tn,Sn,En,_n,Nn,Rn,On=function(){return An(0,0)},An=function(e,t){return{major:e,minor:t}},Pn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?On():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return An(r(1),r(2))}(e,n)},Dn=On,Mn="Firefox",Bn=function(e,t){return function(){return t===e}},In=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Bn("Edge",t),isChrome:Bn("Chrome",t),isIE:Bn("IE",t),isOpera:Bn("Opera",t),isFirefox:Bn(Mn,t),isSafari:Bn("Safari",t)}},Ln=function(){return In({current:void 0,version:Dn()})},Hn=In,Fn=(r("Edge"),r("Chrome"),r("IE"),r("Opera"),r(Mn),r("Safari"),"Windows"),zn="Android",Wn="Solaris",Un="FreeBSD",jn=function(e,t){return function(){return t===e}},Vn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:jn(Fn,t),isiOS:jn("iOS",t),isAndroid:jn(zn,t),isOSX:jn("OSX",t),isLinux:jn("Linux",t),isSolaris:jn(Wn,t),isFreeBSD:jn(Un,t)}},$n=function(){return Vn({current:void 0,version:Dn()})},qn=Vn,Yn=(r(Fn),r("iOS"),r(zn),r("Linux"),r("OSX"),r(Wn),r(Un),function(e,t){var n=String(t).toLowerCase();return X(e,(function(e){return e.search(n)}))}),Xn=function(e,t){return-1!==e.indexOf(t)},Gn=function(e){return e.replace(/^\s+|\s+$/g,"")},Kn=function(e){return e.replace(/\s+$/g,"")},Jn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zn=function(e){return function(t){return Xn(t,e)}},Qn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Xn(e,"edge/")&&Xn(e,"chrome")&&Xn(e,"safari")&&Xn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Jn],search:function(e){return Xn(e,"chrome")&&!Xn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Xn(e,"msie")||Xn(e,"trident")}},{name:"Opera",versionRegexes:[Jn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zn("firefox")},{name:"Safari",versionRegexes:[Jn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Xn(e,"safari")||Xn(e,"mobile/"))&&Xn(e,"applewebkit")}}],er=[{name:"Windows",search:Zn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Xn(e,"iphone")||Xn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Zn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zn("linux"),versionRegexes:[]},{name:"Solaris",search:Zn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zn("freebsd"),versionRegexes:[]}],tr={browsers:r(Qn),oses:r(er)},nr=function(e){var t,n,o,i,a,u,s,c,l,f,d,m=tr.browsers(),h=tr.oses(),g=function(e,t){return Yn(e,t).map((function(e){var n=Pn(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(Ln,Hn),p=function(e,t){return Yn(e,t).map((function(e){var n=Pn(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold($n,qn);return{browser:g,os:p,deviceType:(n=g,o=e,i=(t=p).isiOS()&&!0===/ipad/i.test(o),a=t.isiOS()&&!i,u=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=i||u||s&&!0===/mobile/i.test(o),l=t.isiOS()||t.isAndroid(),f=l&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:r(i),isiPhone:r(a),isTablet:r(c),isPhone:r(f),isTouch:r(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r(d)})}},rr={detect:(Tn=function(){var t=e.navigator.userAgent;return nr(t)},En=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return En||(En=!0,Sn=Tn.apply(null,e)),Sn})},or=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:r(e)}},ir=function(t,n){var r=(n||e.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return or(r.childNodes[0])},ar=function(t,n){var r=(n||e.document).createElement(t);return or(r)},ur=function(t,n){var r=(n||e.document).createTextNode(t);return or(r)},sr=or,cr=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),lr=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),fr=e.Node.TEXT_NODE,dr=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(e){return e.dom().nodeName.toLowerCase()}),mr=function(e){return function(t){return t.dom().nodeType===e}},hr=mr(lr),gr=mr(fr),pr=Object.keys,vr=Object.hasOwnProperty,br=function(e,t){for(var n=pr(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},yr=function(e,t){var n={},r={};return br(e,(function(e,o){(t(e,o)?n:r)[o]=e})),{t:n,f:r}},xr=function(e,t){return vr.call(e,t)},wr=function(e){return void 0!==e.style&&B(e.style.getPropertyValue)},Cr=function(t,n,r){if(!(O(r)||M(r)||I(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},kr=function(e,t,n){Cr(e.dom(),t,n)},Tr=function(e,t){var n=e.dom();br(t,(function(e,t){Cr(n,t,e)}))},Sr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Er=function(e,t){e.dom().removeAttribute(t)},_r=function(t,n){var r,o,i=t.dom(),a=e.window.getComputedStyle(i).getPropertyValue(n),u=""!==a||void 0!==(o=gr(r=t)?r.dom().parentNode:r.dom())&&null!==o&&o.ownerDocument.body.contains(o)?a:Nr(i,n);return null===u?void 0:u},Nr=function(e,t){return wr(e)?e.style.getPropertyValue(t):""},Rr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return V(e,(function(e,n){o[e]=r(t[n])})),o}},Or=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},Ar=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,re("Node").DOCUMENT_POSITION_CONTAINED_BY)},Pr=lr,Dr=cr,Mr=function(e,t){var n=e.dom();if(n.nodeType!==Pr)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Br=function(e){return e.nodeType!==Pr&&e.nodeType!==Dr||0===e.childElementCount},Ir=function(e,t){return e.dom()===t.dom()},Lr=rr.detect().browser.isIE()?function(e,t){return Ar(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Hr=function(e){return sr(e.dom().ownerDocument)},Fr=function(e){return sr(e.dom().ownerDocument.defaultView)},zr=function(e){return N.from(e.dom().parentNode).map(sr)},Wr=function(e){return N.from(e.dom().previousSibling).map(sr)},Ur=function(e){return N.from(e.dom().nextSibling).map(sr)},jr=function(e){return t=Or(e,Wr),(n=L.call(t,0)).reverse(),n;var t,n},Vr=function(e){return Or(e,Ur)},$r=function(e){return j(e.dom().childNodes,sr)},qr=function(e,t){var n=e.dom().childNodes;return N.from(n[t]).map(sr)},Yr=function(e){return qr(e,0)},Xr=function(e){return qr(e,e.dom().childNodes.length-1)},Gr=(Rr("element","offset"),rr.detect().browser),Kr=function(e){return X(e,hr)},Jr=function(e,t,n){var r,o,i,a=0,u=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===_r(sr(e),"position"))return{x:a=(o=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:u=o.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)a+=r.offsetLeft||0,u+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)a-=r.scrollLeft||0,u-=r.scrollTop||0,r=r.parentNode;u+=(i=sr(t),Gr.isFirefox()&&"table"===dr(i)?Kr($r(i)).filter((function(e){return"caption"===dr(e)})).bind((function(e){return Kr(Vr(e)).map((function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=r?-o:0}))})).getOr(0):0)}return{x:a,y:u}},Zr={},Qr={exports:Zr};_n=void 0,Nn=Zr,Rn=Qr,function(e){"object"==typeof Nn&&void 0!==Rn?Rn.exports=e():"function"==typeof _n&&_n.amd?_n([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var c,l=[],f=!1,d=-1;function m(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!f){var e=s(m);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||f||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}u(t.promise,r)}else(1===e._state?u:s)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}var r,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new l(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}catch(e){n(e)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,o((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}));var eo=Qr.exports.boltExport,to=function(t){var n=N.none(),r=[],o=function(e){i()?a(e):r.push(e)},i=function(){return n.isSome()},a=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(e){n=N.some(e),function(e){V(e,a)}(r),r=[]})),{get:o,map:function(e){return to((function(t){o((function(n){t(e(n))}))}))},isReady:i}},no={nu:to,pure:function(e){return to((function(t){t(e)}))}},ro=function(t){e.setTimeout((function(){throw t}),0)},oo=function(e){var t=function(t){e().then(t,ro)};return{map:function(t){return oo((function(){return e().then(t)}))},bind:function(t){return oo((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return oo((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return no.nu(t)},toCached:function(){var t=null;return oo((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},io=function(e){return oo((function(){return new eo(e)}))},ao=function(e){return function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):V(e,(function(o,i){var a;o.get((a=i,function(o){n[a]=o,++r>=e.length&&t(n)}))}))}))}(e,io)},uo=function(e){return{is:function(t){return e===t},isValue:T,isError:k,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(t){return uo(e)},orThunk:function(t){return uo(e)},fold:function(t,n){return n(e)},map:function(t){return uo(t(e))},mapError:function(t){return uo(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return N.some(e)}}},so=function(e){return{is:k,isValue:k,isError:T,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return so(e)},mapError:function(t){return so(t(e))},each:t,bind:function(t){return so(e)},exists:k,forall:T,toOption:N.none}},co={value:uo,error:so,fromOption:function(e,t){return e.fold((function(){return so(t)}),uo)}};function lo(e,t){var n=e,r=function(e,n,r,o){var i,a;if(e){if(!o&&e[n])return e[n];if(e!==t){if(i=e[r])return i;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(i=a[r])return i}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,o){var i,a,u;if(e){if(i=e.previousSibling,t&&i===t)return;if(i){if(!o)for(u=i[n];u;u=u[n])if(!u[n])return u;return i}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var fo,mo,ho,go=function(e){var t;return function(n){return(t=t||function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(e,r(!0))).hasOwnProperty(dr(n))}},po=go(["h1","h2","h3","h4","h5","h6"]),vo=go(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),bo=function(e){return hr(e)&&!vo(e)},yo=function(e){return hr(e)&&"br"===dr(e)},xo=go(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),wo=go(["ul","ol","dl"]),Co=go(["li","dd","dt"]),ko=go(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),To=go(["thead","tbody","tfoot"]),So=go(["td","th"]),Eo=go(["pre","script","textarea","style"]),_o=function(e){return function(t){return!!t&&t.nodeType===e}},No=_o(1),Ro=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},Oo=function(e){return function(t){if(No(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Ao=_o(3),Po=_o(8),Do=_o(9),Mo=_o(11),Bo=Ro("br"),Io=Oo("true"),Lo=Oo("false"),Ho={isText:Ao,isElement:No,isComment:Po,isDocument:Do,isDocumentFragment:Mo,isBr:Bo,isContentEditableTrue:Io,isContentEditableFalse:Lo,isRestrictedNode:function(e){return!!e&&!Object.getPrototypeOf(e)},matchNodeNames:Ro,hasPropValue:function(e,t){return function(n){return No(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return No(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return No(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(No(t))for(r=0;r<n.length;r++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[r])return!0}return!1}},isBogus:function(e){return No(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return No(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return No(e)&&"TABLE"===e.tagName}},Fo=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},zo=function(e,t){var n,r=t.childNodes;if(!Ho.isElement(t)||!Fo(t)){for(n=r.length-1;0<=n;n--)zo(e,r[n]);if(!1===Ho.isDocument(t)){if(Ho.isText(t)&&0<t.nodeValue.length){var o=Xt.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||0<o)return;if(0===o&&(a=(i=t).previousSibling&&"SPAN"===i.previousSibling.nodeName,u=i.nextSibling&&"SPAN"===i.nextSibling.nodeName,a&&u))return}else if(Ho.isElement(t)&&(1===(r=t.childNodes).length&&Fo(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||ko(sr(t))))return;e.remove(t)}var i,a,u;return t}},Wo={trimNode:zo},Uo=Xt.makeMap,jo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$o=/[<>&\"\']/g,qo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Yo={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};mo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ho={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Xo=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),mo[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}};fo=Xo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Go=function(e,t){return e.replace(t?jo:Vo,(function(e){return mo[e]||e}))},Ko=function(e,t){return e.replace(t?jo:Vo,(function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":mo[e]||"&#"+e.charCodeAt(0)+";"}))},Jo=function(e,t,n){return n=n||fo,e.replace(t?jo:Vo,(function(e){return mo[e]||n[e]||e}))},Zo={encodeRaw:Go,encodeAllRaw:function(e){return(""+e).replace($o,(function(e){return mo[e]||e}))},encodeNumeric:Ko,encodeNamed:Jo,getEncodeFunc:function(e,t){var n=Xo(t)||fo,r=Uo(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?jo:Vo,(function(e){return void 0!==mo[e]?mo[e]:void 0!==n[e]?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:r.named?t?function(e,t){return Jo(e,t,n)}:Jo:r.numeric?Ko:Go},decode:function(e){return e.replace(qo,(function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Yo[t]||String.fromCharCode(t):ho[e]||fo[e]||(n=e,(r=ar("div").dom()).innerHTML=n,r.textContent||r.innerText||n);var n,r}))}},Qo={},ei={},ti=Xt.makeMap,ni=Xt.each,ri=Xt.extend,oi=Xt.explode,ii=Xt.inArray,ai=function(e,t){return(e=Xt.trim(e))?e.split(t||" "):[]},ui=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),ni(e,(function(e,r){n[r]=n[r.toUpperCase()]="map"===t?ti(e,/[, ]/):oi(e,/[, ]/)}))),n};function si(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,h={},g={},p=[],v={},b={},y=function(t,n,r){var o=e[t];return o?o=ti(o,/[, ]/,ti(o.toUpperCase(),/[, ]/)):(o=Qo[t])||(o=ti(n," ",ti(n.toUpperCase()," ")),o=ri(o,r),Qo[t]=o),o};r=function(e){var t,n,r,o,i,a,u={},s=function(e,n,r){var o,i,a,s=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};for(n=n||"","string"==typeof(r=r||[])&&(r=ai(r)),o=(e=ai(e)).length;o--;)a={attributes:s(i=ai([t,n].join(" "))),attributesOrder:i,children:s(r,ei)},u[e[o]]=a},c=function(e,t){var n,r,o,i;for(n=(e=ai(e)).length,t=ai(t);n--;)for(r=u[e[n]],o=0,i=t.length;o<i;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])};return Qo[e]?Qo[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),ni(ai(a),(function(e){s(e,"",r)})),n=[n,i="center dir isindex noframes"].join(" "),o=[n,r].join(" "),ni(ai(i),(function(e){s(e,"",o)}))),o=o||[n,r].join(" "),s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),s("address dt dd div caption","",o),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),s("blockquote","cite",o),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",o),s("dl","","dt dd"),s("a","href target rel media hreflang type",r),s("q","cite",r),s("ins del","cite datetime",o),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",o),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),s("param","name value"),s("map","name",[o,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",o),s("th","colspan rowspan headers scope abbr",o),s("form","accept-charset action autocomplete enctype method name novalidate target",o),s("fieldset","disabled form name",[o,"legend"].join(" ")),s("label","form for",r),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:r),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[o,"li"].join(" ")),s("noscript","",o),"html4"!==e&&(s("wbr"),s("ruby","",[r,"rt rp"].join(" ")),s("figcaption","",o),s("mark rt rp summary bdi","",r),s("canvas","width height",o),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[r,"option"].join(" ")),s("article section nav aside main header footer","",o),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[o,"figcaption"].join(" ")),s("time","datetime",r),s("dialog","open",o),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",r),s("progress","value max",r),s("meter","value min max low high optimum",r),s("details","open",[o,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select","onchange"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==e&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("iframe","sandbox seamless allowfullscreen")),ni(ai("a form meter progress dfn"),(function(e){u[e]&&delete u[e].children[e]})),delete u.caption.children.table,delete u.script,Qo[e]=u)}((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=ui(e.valid_styles),n=ui(e.invalid_styles,"map"),s=ui(e.valid_classes,"map"),o=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),i=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),u=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),l=y("non_empty_elements","td th iframe video audio object script pre code",a),f=y("move_caret_before_on_enter_elements","table",l),d=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),c=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",d),m=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),ni((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),(function(e){b[e]=new RegExp("</"+e+"[^>]*>","gi")}));var x=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},w=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,v,b,y,w,C,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,T=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=ai(e,","),h["@"]&&(b=h["@"].attributes,y=h["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=k.exec(e[t])){if(g=i[1],c=i[2],v=i[3],s=i[5],a={attributes:d={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),b){for(w in b)d[w]=b[w];m.push.apply(m,y)}if(s)for(r=0,o=(s=ai(s,"|")).length;r<o;r++)if(i=T.exec(s[r])){if(u={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],C=i[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"===f){delete d[l],m.splice(ii(m,l),1);continue}g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:C}),u.defaultValue=C),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:C}),u.forcedValue=C),"<"===g&&(u.validValues=ti(C,"?"))),S.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=x(l),a.attributePatterns.push(u)):(d[l]||m.push(l),d[l]=u)}b||"@"!==c||(b=d,y=m),v&&(a.outputName=c,h[v]=a),S.test(c)?(a.pattern=x(c),p.push(a)):h[c]=a}},C=function(e){h={},p=[],w(e),ni(r,(function(e,t){g[t]=e.children}))},k=function(e){var t=/^(~)?(.+)$/;e&&(Qo.text_block_elements=Qo.block_elements=null,ni(ai(e,","),(function(e){var n=t.exec(e),r="~"===n[1],o=r?"span":"div",i=n[2];if(g[i]=g[o],v[i]=o,r||(c[i.toUpperCase()]={},c[i]={}),!h[i]){var a=h[o];delete(a=ri({},a)).removeEmptyAttrs,delete a.removeEmpty,h[i]=a}ni(g,(function(e,t){e[o]&&(g[t]=e=ri({},g[t]),e[i]=e[o])}))})))},T=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Qo[e.schema]=null,t&&ni(ai(t,","),(function(e){var t,r,o=n.exec(e);o&&(r=o[1],t=r?g[o[2]]:g[o[2]]={"#comment":{}},t=g[o[2]],ni(ai(o[3],"|"),(function(e){"-"===r?delete t[e]:t[e]={}})))}))},S=function(e){var t,n=h[e];if(n)return n;for(t=p.length;t--;)if((n=p[t]).pattern.test(e))return n};return e.valid_elements?C(e.valid_elements):(ni(r,(function(e,t){h[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},g[t]=e.children})),"html5"!==e.schema&&ni(ai("strong/b em/i"),(function(e){e=ai(e,"/"),h[e[1]].outputName=e[0]})),ni(ai("ol ul sub sup blockquote span font a table tbody tr strong em b i"),(function(e){h[e]&&(h[e].removeEmpty=!0)})),ni(ai("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(function(e){h[e].paddEmpty=!0})),ni(ai("span"),(function(e){h[e].removeEmptyAttrs=!0}))),k(e.custom_elements),T(e.valid_children),w(e.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),ni({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,t){h[t]&&(h[t].parentsRequired=ai(e))})),e.invalid_elements&&ni(oi(e.invalid_elements),(function(e){h[e]&&delete h[e]})),S("span")||w("span[!data-mce-type|*]"),{children:g,elements:h,getValidStyles:function(){return t},getValidClasses:function(){return s},getBlockElements:function(){return c},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return d},getTextInlineElements:function(){return m},getBoolAttrs:function(){return u},getElementRule:S,getSelfClosingElements:function(){return i},getNonEmptyElements:function(){return l},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return b},isValidChild:function(e,t){var n=g[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,o=S(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:w,setValidElements:C,addCustomElements:k,addValidChildren:T}}var ci=function(e,t,n,r){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(r)};function li(e,t){var n,r,o,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,l={},f="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),i=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)l[r[n]]=f+n,l[f+n]=r[n];return{toHex:function(e){return e.replace(a,ci)},parse:function(t){var r,o,i,d,m,h,g,p={},v=e.url_converter,b=e.url_converter_scope||this,y=function(e,t,r){var o,i,a,u;if((o=p[e+"-top"+t])&&(i=p[e+"-right"+t])&&(a=p[e+"-bottom"+t])&&(u=p[e+"-left"+t])){var s=[o,i,a,u];for(n=s.length-1;n--&&s[n]===s[n+1];);-1<n&&r||(p[e+t]=-1===n?s[0]:s.join(" "),delete p[e+"-top"+t],delete p[e+"-right"+t],delete p[e+"-bottom"+t],delete p[e+"-left"+t])}},x=function(e){var t,n=p[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return p[e]=n[0],!0}},w=function(e){return d=!0,l[e]},C=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return l[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},k=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},T=function(e){return e.replace(/\\[0-9a-f]+/gi,k)},S=function(t,n,r,o,i,a){if(i=i||a)return"'"+(i=C(i)).replace(/\'/g,"\\'")+"'";if(n=C(n||r||o),!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(u))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return v&&(n=v.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,w).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,w)}));r=s.exec(t);)if(s.lastIndex=r.index+r[0].length,o=r[1].replace(c,"").toLowerCase(),i=r[2].replace(c,""),o&&i){if(o=T(o),i=T(i),-1!==o.indexOf(f)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===o&&"700"===i?i="bold":"color"!==o&&"background-color"!==o||(i=i.toLowerCase()),i=(i=i.replace(a,ci)).replace(u,S),p[o]=d?C(i,!0):i}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),"border",h="border-style",g="border-color",x(m="border-width")&&x(h)&&x(g)&&(p.border=p[m]+" "+p[h]+" "+p[g],delete p[m],delete p[h],delete p[g]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}return p},serialize:function(e,t){var n,r,a,u,s,c="",l=function(t){var n,r,i,a;if(n=o[t])for(r=0,i=n.length;r<i;r++)t=n[r],(a=e[t])&&(c+=(0<c.length?" ":"")+t+": "+a+";")};if(t&&o)l("*"),l(t);else for(n in e)!(r=e[n])||i&&(a=n,u=t,s=void 0,(s=i["*"])&&s[a]||(s=i[u])&&s[a])||(c+=(0<c.length?" ":"")+n+": "+r+";");return c}}}var fi,di=Xt.each,mi=Xt.grep,hi=fe.ie,gi=/^([a-z0-9],?)+$/i,pi=/^[ \t\r\n]*$/,vi=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},bi=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o};function yi(t,i){var a,u=this;void 0===i&&(i={});var s={},c=e.window,l={},f=0,d=function(t,i){void 0===i&&(i={});var a,u=0,s={};a=i.maxLoadTime||5e3;var c=function(e){t.getElementsByTagName("head")[0].appendChild(e)},l=function(n,r,o){var l,f,d,m,h=function(){for(var e=m.passed,t=e.length;t--;)e[t]();m.status=2,m.passed=[],m.failed=[]},g=function(){for(var e=m.failed,t=e.length;t--;)e[t]();m.status=3,m.passed=[],m.failed=[]},p=function(e,t){e()||((new Date).getTime()-d<a?pe.setTimeout(t):g())},v=function(){p((function(){for(var e,n,r=t.styleSheets,o=r.length;o--;)if((n=(e=r[o]).ownerNode?e.ownerNode:e.owningElement)&&n.id===l.id)return h(),!0}),v)},b=function(){p((function(){try{var e=f.sheet.cssRules;return h(),!!e}catch(e){}}),b)};if(n=Xt._addCacheSuffix(n),s[n]?m=s[n]:(m={passed:[],failed:[]},s[n]=m),r&&m.passed.push(r),o&&m.failed.push(o),1!==m.status)if(2!==m.status)if(3!==m.status){if(m.status=1,(l=t.createElement("link")).rel="stylesheet",l.type="text/css",l.id="u"+u++,l.async=!1,l.defer=!1,d=(new Date).getTime(),i.contentCssCors&&(l.crossOrigin="anonymous"),!("onload"in l)||(y=e.navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(y[1],10)<536){if(0<e.navigator.userAgent.indexOf("Firefox"))return(f=t.createElement("style")).textContent='@import "'+n+'"',b(),void c(f);v()}else l.onload=v,l.onerror=g;var y;c(l),l.href=n}else g();else h()},f=function(e){return io((function(t){l(e,n(t,r(co.value(e))),n(t,r(co.error(e))))}))},d=function(e){return e.fold(o,o)};return{load:l,loadAll:function(e,t,n){ao(j(e,f)).get((function(e){var r=$(e,(function(e){return e.isValue()}));0<r.fail.length?n(r.fail.map(d)):t(r.pass.map(d))}))}}}(t,{contentCssCors:i.contentCssCors}),m=[],h=i.schema?i.schema:si({}),g=li({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),p=i.ownEvents?new Se(i.proxy):Se.Event,v=h.getBlockElements(),b=hn.overrideDefaults((function(){return{context:t,element:q.getRoot()}})),y=function(e){if(e&&t&&"string"==typeof e){var n=t.getElementById(e);return n&&n.id!==e?t.getElementsByName(e)[1]:n}return e},x=function(e){return"string"==typeof e&&(e=y(e)),b(e)},w=function(e,t,n){var r,o,i=x(e);return i.length&&(o=(r=a[t])&&r.get?r.get(i,t):i.attr(t)),void 0===o&&(o=n||""),o},C=function(e){var t=y(e);return t?t.attributes:[]},k=function(e,t,n){var r,o;""===n&&(n=null);var u=x(e);r=u.attr(t),u.length&&((o=a[t])&&o.set?o.set(u,n,t):u.attr(t,n),r!==n&&i.onSetAttrib&&i.onSetAttrib({attrElm:u,attrName:t,attrValue:n}))},T=function(){return i.root_element||t.body},S=function(e,n){return Jr(t.body,y(e),n)},E=function(e,t,n){var r=x(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=fe.ie&&fe.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},_=function(e){var t,n;return e=y(e),t=E(e,"width"),n=E(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},N=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(gi.test(t)){var r=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=r.length-1;0<=n;n--)if(r[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var i=Array.isArray(e)?e:[e];return 0<St(t,i[0].ownerDocument||i[0],null,i).length},R=function(e,t,n,r){var o,i=[],a=y(e);for(r=void 0===r,n=n||("BODY"!==T().nodeName?T().parentNode:null),Xt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return N(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},O=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return N(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},A=function(e,t,n){var r,o="string"==typeof e?y(e):e;if(!o)return!1;if(Xt.isArray(o)&&(o.length||0===o.length))return r=[],di(o,(function(e,o){e&&("string"==typeof e&&(e=y(e)),r.push(t.call(n,e,o)))})),r;var i=n||u;return t.call(i,o)},P=function(e,t){x(e).each((function(e,n){di(t,(function(e,t){k(n,t,e)}))}))},D=function(e,t){var n=x(e);hi?n.each((function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){hn("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}})):n.html(t)},M=function(e,n,r,o,i){return A(e,(function(e){var a="string"==typeof n?t.createElement(n):n;return P(a,r),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&D(a,o)),i?a:e.appendChild(a)}))},B=function(e,n,r){return M(t.createElement(e),e,n,r,!0)},I=Zo.encodeAllRaw,L=function(e,t){var n=x(e);return t?n.each((function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)})).remove():n.remove(),1<n.length?n.toArray():n[0]},H=function(e,t,n){x(e).toggleClass(t,n).each((function(){""===this.className&&hn(this).attr("class",null)}))},F=function(e,t,n){return A(t,(function(t){return Xt.is(t,"array")&&(e=e.cloneNode(!0)),n&&di(mi(t.childNodes),(function(t){e.appendChild(t)})),t.parentNode.replaceChild(e,t)}))},z=function(){return t.createRange()},W=function(e,n,r,o){if(Xt.isArray(e)){for(var a=e.length;a--;)e[a]=W(e[a],n,r,o);return e}return!i.collect||e!==t&&e!==c||m.push([e,n,r,o]),p.bind(e,n,r,o||q)},U=function(e,n,r){var o;if(Xt.isArray(e)){for(o=e.length;o--;)e[o]=U(e[o],n,r);return e}if(m&&(e===t||e===c))for(o=m.length;o--;){var i=m[o];e!==i[0]||n&&n!==i[1]||r&&r!==i[2]||p.unbind(i[0],i[1],i[2])}return p.unbind(e,n,r)},V=function(e){if(e&&Ho.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},q={doc:t,settings:i,win:c,files:l,stdMode:!0,boxModel:!0,styleSheetLoader:d,boundEvents:m,styles:g,schema:h,events:p,isBlock:function(e){if("string"==typeof e)return!!v[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!v[e.nodeName])}return!1},$:b,$$:x,root:null,clone:function(e,n){if(!hi||1!==e.nodeType||n)return e.cloneNode(n);if(!n){var r=t.createElement(e.nodeName);return di(C(e),(function(t){k(r,t.nodeName,w(e,t.nodeName))})),r}return null},getRoot:T,getViewPort:function(e){var t=e||c,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=y(e),t=S(e),n=_(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:_,getParent:function(e,t,n){var r=R(e,t,n,!1);return r&&0<r.length?r[0]:null},getParents:R,get:y,getNext:function(e,t){return O(e,t,"nextSibling")},getPrev:function(e,t){return O(e,t,"previousSibling")},select:function(e,n){return St(e,y(n)||i.root_element||t,[])},is:N,add:M,create:B,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+I(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var n,r=t.createElement("div"),o=t.createDocumentFragment();for(o.appendChild(r),e&&(r.innerHTML=e);n=r.firstChild;)o.appendChild(n);return o.removeChild(r),o},remove:L,setStyle:function(e,t,n){var r=x(e).css(t,n);i.update_styles&&vi(g,r)},getStyle:E,setStyles:function(e,t){var n=x(e).css(t);i.update_styles&&vi(g,n)},removeAllAttribs:function(e){return A(e,(function(e){var t,n=e.attributes;for(t=n.length-1;0<=t;t--)e.removeAttributeNode(n.item(t))}))},setAttrib:k,setAttribs:P,getAttrib:w,getPos:S,parseStyle:function(e){return g.parse(e)},serializeStyle:function(e,t){return g.serialize(e,t)},addStyle:function(n){var r,o;if(q!==yi.DOM&&t===e.document){if(s[n])return;s[n]=!0}(o=t.getElementById("mceDefaultStyles"))||((o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css",(r=t.getElementsByTagName("head")[0]).firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=n:o.appendChild(t.createTextNode(n))},loadCSS:function(n){var r;q===yi.DOM||t!==e.document?(n||(n=""),r=t.getElementsByTagName("head")[0],di(n.split(","),(function(e){var t;e=Xt._addCacheSuffix(e),l[e]||(l[e]=!0,t=B("link",{rel:"stylesheet",href:e}),r.appendChild(t))}))):yi.DOM.loadCSS(n)},addClass:function(e,t){x(e).addClass(t)},removeClass:function(e,t){H(e,t,!1)},hasClass:function(e,t){return x(e).hasClass(t)},toggleClass:H,show:function(e){x(e).show()},hide:function(e){x(e).hide()},isHidden:function(e){return"none"===x(e).css("display")},uniqueId:function(e){return(e||"mce_")+f++},setHTML:D,getOuterHTML:function(e){var t="string"==typeof e?y(e):e;return Ho.isElement(t)?t.outerHTML:hn("<div></div>").append(hn(t).clone()).html()},setOuterHTML:function(e,t){x(e).each((function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}L(hn(this).html(t),!0)}))},decode:Zo.decode,encode:I,insertAfter:function(e,t){var n=y(t);return A(e,(function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e}))},replace:F,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=B(t),di(C(e),(function(t){k(n,t.nodeName,w(e,t.nodeName))})),F(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return g.toHex(Xt.trim(e))},run:A,getAttribs:C,isEmpty:function(e,t){var n,r,o,i,a,u,s=0;if(e=e.firstChild){a=new lo(e,e.parentNode),t=t||(h?h.getNonEmptyElements():null),i=h?h.getWhiteSpaceElements():{};do{if(o=e.nodeType,Ho.isElement(e)){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(u=e.nodeName.toLowerCase(),t&&t[u]){if("br"===u){s++,e=a.next();continue}return!1}for(n=(r=C(e)).length;n--;)if("name"===(u=r[n].nodeName)||"data-mce-bookmark"===u)return!1}if(8===o)return!1;if(3===o&&!pi.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&pi.test(e.nodeValue))return!1;e=a.next()}while(e)}return s<=1},createRng:z,nodeIndex:bi,split:function(e,t,n){var r,o,i,a=z();if(e&&t)return a.setStart(e.parentNode,bi(e)),a.setEnd(t.parentNode,bi(t)),r=a.extractContents(),(a=z()).setStart(t.parentNode,bi(t)+1),a.setEnd(e.parentNode,bi(e)+1),o=a.extractContents(),(i=e.parentNode).insertBefore(Wo.trimNode(q,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(Wo.trimNode(q,o),e),L(e),n||t},bind:W,unbind:U,fire:function(e,t,n){return p.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=T(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(m)for(var e=m.length;e--;){var t=m[e];p.unbind(t[0],t[1],t[2])}St.setDocument&&St.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return a=function(e,t,n){var r={},o=t.keep_values,i={set:function(e,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,o,e[0])),e.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(o&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},o&&(r.href=r.src=i),r}(g,i,(function(){return q})),q}(fi=yi||(yi={})).DOM=fi(e.document),fi.nodeIndex=bi;var xi=yi,wi=xi.DOM,Ci=Xt.each,ki=Xt.grep,Ti=function(e){return"function"==typeof e},Si=function(){var t={},n=[],r={},o=[],i=0;this.isDone=function(e){return 2===t[e]},this.markDone=function(e){t[e]=2},this.add=this.load=function(e,o,i,a){void 0===t[e]&&(n.push(e),t[e]=0),o&&(r[e]||(r[e]=[]),r[e].push({success:o,failure:a,scope:i||this}))},this.remove=function(e){delete t[e],delete r[e]},this.loadQueue=function(e,t,r){this.loadScripts(n,e,t,r)},this.loadScripts=function(n,a,u,s){var c,l=[],f=function(e,t){Ci(r[t],(function(t){Ti(t[e])&&t[e].call(t.scope)})),r[t]=void 0};o.push({success:a,failure:s,scope:u||this}),(c=function(){var r=ki(n);if(n.length=0,Ci(r,(function(n){var r,o,a,u,s,d;2!==t[n]?3!==t[n]?1!==t[n]&&(t[n]=1,i++,r=n,o=function(){t[n]=2,i--,f("success",n),c()},a=function(){t[n]=3,i--,l.push(n),f("failure",n),c()},s=(d=wi).uniqueId(),(u=e.document.createElement("script")).id=s,u.type="text/javascript",u.src=Xt._addCacheSuffix(r),u.onload=function(){d.remove(s),u&&(u.onreadystatechange=u.onload=u=null),o()},u.onerror=function(){Ti(a)?a():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+r)},(e.document.getElementsByTagName("head")[0]||e.document.body).appendChild(u)):f("failure",n):f("success",n)})),!i){var a=o.slice(0);o.length=0,Ci(a,(function(e){0===l.length?Ti(e.success)&&e.success.call(e.scope):Ti(e.failure)&&e.failure.call(e.scope,l)}))}})()}};Si.ScriptLoader=new Si;var Ei,_i=Xt.each;function Ni(){var e=this,t=[],n={},r={},o=[],i=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},u=function(e,t,n,r){var o=i(e);_i(o,(function(e){var n=a(t,e);s(n.resource,n,void 0,void 0)})),n&&(r?n.call(r):n.call(Si))},s=function(e,t,o,i,a){if(!n[e]){var s="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=Ni.baseURL+"/"+s),n[e]=s.substring(0,s.lastIndexOf("/")),r[e]?u(e,t,o,i):Si.ScriptLoader.add(s,(function(){return u(e,t,o,i)}),i,a)}};return{items:t,urls:n,lookup:r,_listeners:o,get:function(e){return r[e]?r[e].instance:void 0},dependencies:i,requireLangPack:function(e,t){var r=Ni.language;if(r&&!1!==Ni.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;Si.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,i){t.push(n),r[e]={instance:n,dependencies:i};var a=$(o,(function(t){return t.name===e}));return o=a.fail,_i(a.pass,(function(e){e.callback()})),n},remove:function(e){delete n[e],delete r[e]},createUrl:a,addComponents:function(t,n){var r=e.urls[t];_i(n,(function(e){Si.ScriptLoader.add(r+"/"+e)}))},load:s,waitFor:function(e,t){r.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}(Ei=Ni||(Ni={})).PluginManager=Ei(),Ei.ThemeManager=Ei();var Ri=function(e,t){zr(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))},Oi=function(e,t){Ur(e).fold((function(){zr(e).each((function(e){Pi(e,t)}))}),(function(e){Ri(e,t)}))},Ai=function(e,t){Yr(e).fold((function(){Pi(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},Pi=function(e,t){e.dom().appendChild(t.dom())},Di=function(e,t){V(t,(function(t){Pi(e,t)}))},Mi=function(e){e.dom().textContent="",V($r(e),(function(e){Bi(e)}))},Bi=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Ii=function(e){var t,n=$r(e);0<n.length&&(t=e,V(n,(function(e){Ri(t,e)}))),Bi(e)},Li=function(t,n){var r=null;return{cancel:function(){null!==r&&(e.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null===r&&(r=e.setTimeout((function(){t.apply(null,o),r=null}),n))}}},Hi=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Hi(n())}}},Fi=function(e,t){var n=Sr(e,t);return void 0===n||""===n?[]:n.split(" ")},zi=function(e){return void 0!==e.dom().classList},Wi=function(e,t){zi(e)?e.dom().classList.add(t):function(e,t){return r=t,o=Fi(n=e,"class").concat([r]),kr(n,"class",o.join(" ")),!0;var n,r,o}(e,t)},Ui=function(e,t){return zi(e)&&e.dom().classList.contains(t)},ji=function(e,t){var n=[];return V($r(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(ji(e,t))})),n},Vi=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),Br(i)?[]:j(i.querySelectorAll(r),sr);var r,o,i};function $i(e,t,n,r,o){return e(n,r)?N.some(n):B(o)&&o(n)?N.none():t(n,r,o)}var qi,Yi=function(e,t,n){for(var o=e.dom(),i=B(n)?n:r(!1);o.parentNode;){o=o.parentNode;var a=sr(o);if(t(a))return N.some(a);if(i(a))break}return N.none()},Xi=function(e,t,n){return $i((function(e,t){return t(e)}),Yi,e,t,n)},Gi=function(e,t,n){return Yi(e,(function(e){return Mr(e,t)}),n)},Ki=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),Br(i)?N.none():N.from(i.querySelector(r)).map(sr);var r,o,i},Ji=function(e,t,n){return $i(Mr,Gi,e,t,n)},Zi=r("mce-annotation"),Qi=r("data-mce-annotation"),ea=r("data-mce-annotation-uid"),ta=function(e,t){var n=e.selection.getRng(),r=sr(n.startContainer),o=sr(e.getBody()),i=t.fold((function(){return"."+Zi()}),(function(e){return"["+Qi()+'="'+e+'"]'})),a=qr(r,n.startOffset).getOr(r),u=Ji(a,i,(function(e){return Ir(e,o)})),s=function(e,t){return n=t,(r=e.dom())&&r.hasAttribute&&r.hasAttribute(n)?N.some(Sr(e,t)):N.none();var n,r};return u.bind((function(t){return s(t,""+ea()).bind((function(n){return s(t,""+Qi()).map((function(t){var r=na(e,n);return{uid:n,name:t,elements:r}}))}))}))},na=function(e,t){var n=sr(e.getBody());return Vi(n,"["+ea()+'="'+t+'"]')},ra=function(){return(ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},oa=0,ia=function(e,t){return sr(e.dom().cloneNode(t))},aa=function(e){return ia(e,!1)},ua=function(e){return ia(e,!0)},sa=function(t,n){var r,o,i=Hr(t).dom(),a=sr(i.createDocumentFragment()),u=(r=n,(o=(i||e.document).createElement("div")).innerHTML=r,$r(sr(o)));Di(a,u),Mi(t),Pi(t,a)},ca=function(e){return"\ufeff"===e},la="\ufeff",fa=function(e){return e.replace(new RegExp("\ufeff","g"),"")},da=Ho.isElement,ma=Ho.isText,ha=function(e){return ma(e)&&(e=e.parentNode),da(e)&&e.hasAttribute("data-mce-caret")},ga=function(e){return ma(e)&&ca(e.data)},pa=function(e){return ha(e)||ga(e)},va=function(e){return e.firstChild!==e.lastChild||!Ho.isBr(e.firstChild)},ba=function(e){var t=e.container();return!(!e||!Ho.isText(t))&&(t.data.charAt(e.offset())===la||e.isAtStart()&&ga(t.previousSibling))},ya=function(e){var t=e.container();return!(!e||!Ho.isText(t))&&(t.data.charAt(e.offset()-1)===la||e.isAtEnd()&&ga(t.nextSibling))},xa=function(e){return ma(e)&&e.data[0]===la},wa=function(e){return ma(e)&&e.data[e.data.length-1]===la},Ca=function(e){return e&&e.hasAttribute("data-mce-caret")?(n=(t=e.getElementsByTagName("br"))[t.length-1],Ho.isBogus(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},ka=Ho.isContentEditableTrue,Ta=Ho.isContentEditableFalse,Sa=Ho.isBr,Ea=Ho.isText,_a=Ho.matchNodeNames("script style textarea"),Na=Ho.matchNodeNames("img input textarea hr iframe video audio object"),Ra=Ho.matchNodeNames("table"),Oa=pa,Aa=function(e){return!Oa(e)&&(Ea(e)?!_a(e.parentNode):Na(e)||Sa(e)||Ra(e)||Pa(e))},Pa=function(e){return!1===(t=e,Ho.isElement(t)&&"true"===t.getAttribute("unselectable"))&&Ta(e);var t},Da=function(e,t){return Aa(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Pa(e))return!1;if(ka(e))return!0}return!0}(e,t)},Ma=Math.round,Ba=function(e){return e?{left:Ma(e.left),top:Ma(e.top),bottom:Ma(e.bottom),right:Ma(e.right),width:Ma(e.width),height:Ma(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Ia=function(e,t){return e=Ba(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},La=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Ha=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&La(t.top-e.bottom,e,t)},Fa=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&La(t.bottom-e.top,e,t)},za=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Wa=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ua=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},ja=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Va=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&ja.test(e)},$a=function(e,t,n){return e.isSome()&&t.isSome()?N.some(n(e.getOrDie(),t.getOrDie())):N.none()},qa=[].slice,Ya=Ho.isElement,Xa=Aa,Ga=Ho.matchStyleValues("display","block table"),Ka=Ho.matchStyleValues("float","left right"),Ja=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}(Ya,Xa,C(Ka)),Za=C(Ho.matchStyleValues("white-space","pre pre-line pre-wrap")),Qa=Ho.isText,eu=Ho.isBr,tu=xi.nodeIndex,nu=Ua,ru=function(e){return"createRange"in e?e.createRange():xi.DOM.createRng()},ou=function(e){return e&&/[\r\n\t ]/.test(e)},iu=function(e){return!!e.setStart&&!!e.setEnd},au=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(ou(e.toString())&&Za(n.parentNode)&&Ho.isText(n)&&(t=n.data,ou(t[r-1])||ou(t[r+1])))},uu=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},su=function(e){var t,n,r,o,i,a,u,s;return t=0<(n=e.getClientRects()).length?Ba(n[0]):Ba(e.getBoundingClientRect()),!iu(e)&&eu(e)&&uu(t)?(i=(r=e).ownerDocument,a=ru(i),u=i.createTextNode(" "),(s=r.parentNode).insertBefore(u,r),a.setStart(u,0),a.setEnd(u,1),o=Ba(a.getBoundingClientRect()),s.removeChild(u),o):uu(t)&&iu(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&Ho.isText(n)&&0===r&&1===o){var i=e.cloneRange();return i.setEndAfter(n),su(i)}return null}(e):t},cu=function(e,t){var n=Ia(e,t);return n.width=1,n.right=n.left+1,n};function lu(e,t,n){var o=function(){return n||(n=function(e){var t,n,r=[],o=function(e){var t,n;0!==e.height&&(0<r.length&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},i=function(e,t){var n=ru(e.ownerDocument);if(t<e.data.length){if(Va(e.data[t]))return r;if(Va(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!au(n)))return o(cu(su(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),au(n)||o(cu(su(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),au(n)||o(cu(su(n),!0)))};if(Qa(e.container()))return i(e.container(),e.offset()),r;if(Ya(e.container()))if(e.isAtEnd())n=nu(e.container(),e.offset()),Qa(n)&&i(n,n.data.length),Ja(n)&&!eu(n)&&o(cu(su(n),!1));else{if(n=nu(e.container(),e.offset()),Qa(n)&&i(n,0),Ja(n)&&e.isAtEnd())return o(cu(su(n),!1)),r;t=nu(e.container(),e.offset()-1),Ja(t)&&!eu(t)&&(Ga(t)||Ga(n)||!Ja(n))&&o(cu(su(t),!1)),Ja(n)&&o(cu(su(n),!0))}return r}(lu(e,t))),n};return{container:r(e),offset:r(t),toRange:function(){var n;return(n=ru(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function(){return 0<o().length},isAtStart:function(){return Qa(e),0===t},isAtEnd:function(){return Qa(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return nu(e,n?t-1:t)}}}(qi=lu||(lu={})).fromRangeStart=function(e){return qi(e.startContainer,e.startOffset)},qi.fromRangeEnd=function(e){return qi(e.endContainer,e.endOffset)},qi.after=function(e){return qi(e.parentNode,tu(e)+1)},qi.before=function(e){return qi(e.parentNode,tu(e))},qi.isAbove=function(e,t){return $a(Q(t.getClientRects()),ee(e.getClientRects()),Ha).getOr(!1)},qi.isBelow=function(e,t){return $a(ee(t.getClientRects()),Q(e.getClientRects()),Fa).getOr(!1)},qi.isAtStart=function(e){return!!e&&e.isAtStart()},qi.isAtEnd=function(e){return!!e&&e.isAtEnd()},qi.isTextPosition=function(e){return!!e&&Ho.isText(e.container())},qi.isElementPosition=function(e){return!1===qi.isTextPosition(e)};var fu,du,mu=lu,hu=Ho.isText,gu=Ho.isBogus,pu=xi.nodeIndex,vu=function(e){var t=e.parentNode;return gu(t)?vu(t):t},bu=function(e){return e?jt.reduce(e.childNodes,(function(e,t){return gu(t)&&"BR"!==t.nodeName?e=e.concat(bu(t)):e.push(t),e}),[]):[]},yu=function(e){return function(t){return e===t}},xu=function(e){var t,n,r,o;return(hu(e)?"text()":e.nodeName.toLowerCase())+"["+(n=bu(vu(t=e)),r=jt.findIndex(n,yu(t),t),n=n.slice(0,r+1),o=jt.reduce(n,(function(e,t,r){return hu(t)&&hu(n[r-1])&&e++,e}),0),n=jt.filter(n,Ho.matchNodeNames(t.nodeName)),(r=jt.findIndex(n,yu(t),t))-o+"]")},wu=function(e,t){var n,r,o,i,a,u=[];return n=t.container(),r=t.offset(),hu(n)?o=function(e,t){for(;(e=e.previousSibling)&&hu(e);)t+=e.data.length;return t}(n,r):(r>=(i=n.childNodes).length?(o="after",r=i.length-1):o="before",n=i[r]),u.push(xu(n)),a=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode)r.push(t);return r}(e,n),a=jt.filter(a,C(Ho.isBogus)),(u=u.concat(jt.map(a,(function(e){return xu(e)})))).reverse().join("/")+","+o},Cu=function(e,t){var n,r,o;return t?(t=(n=t.split(","))[0].split("/"),o=1<n.length?n[1]:"before",(r=jt.reduce(t,(function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,r=t[1],o=parseInt(t[2],10),i=bu(n),i=jt.filter(i,(function(e,t){return!hu(e)||!hu(i[t-1])})),(i=jt.filter(i,Ho.matchNodeNames(r)))[o]):null;var n,r,o,i}),e))?hu(r)?function(e,t){for(var n,r=e,o=0;hu(r);){if(n=r.data.length,o<=t&&t<=o+n){e=r,t-=o;break}if(!hu(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return hu(e)&&t>e.data.length&&(t=e.data.length),mu(e,t)}(r,parseInt(o,10)):(o="after"===o?pu(r)+1:pu(r),mu(r.parentNode,o)):null):null},ku=function(e,t){Ho.isText(t)&&0===t.data.length&&e.remove(t)},Tu=function(e,t,n){var r,o,i,a,u,s,c;Ho.isDocumentFragment(n)?(i=e,a=t,u=n,s=N.from(u.firstChild),c=N.from(u.lastChild),a.insertNode(u),s.each((function(e){return ku(i,e.previousSibling)})),c.each((function(e){return ku(i,e.nextSibling)}))):(r=e,o=n,t.insertNode(o),ku(r,o.previousSibling),ku(r,o.nextSibling))},Su=Ho.isContentEditableFalse,Eu=function(e,t,n,r,o){var i,a=r[o?"startContainer":"endContainer"],u=r[o?"startOffset":"endOffset"],s=[],c=0,l=e.getRoot();for(Ho.isText(a)?s.push(n?function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Ho.isText(r);r=r.previousSibling)o+=e(r.data).length;return o}(t,a,u):u):(u>=(i=a.childNodes).length&&i.length&&(c=1,u=Math.max(0,i.length-1)),s.push(e.nodeIndex(i[u],n)+c));a&&a!==l;a=a.parentNode)s.push(e.nodeIndex(a,n));return s},_u=function(e,t,n){var r=0;return Xt.each(e.select(t),(function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++})),r},Nu=function(e,t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],Ho.isElement(n)&&"TR"===n.nodeName&&(n=(o=n.childNodes)[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Ru=function(e){return Nu(e,!0),Nu(e,!1),e},Ou=function(e,t){var n;if(Ho.isElement(e)&&(e=Ua(e,t),Su(e)))return e;if(pa(e)){if(Ho.isText(e)&&ha(e)&&(e=e.parentNode),n=e.previousSibling,Su(n))return n;if(n=e.nextSibling,Su(n))return n}},Au=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(Su(r)||"IMG"===o)return{name:o,index:_u(n.dom,o,r)};var a,u,s,c,l,f,d,m=Ou((a=i).startContainer,a.startOffset)||Ou(a.endContainer,a.endOffset);return m?{name:o=m.tagName,index:_u(n.dom,o,m)}:(u=e,c=t,l=i,f=(s=n).dom,(d={}).start=Eu(f,u,c,l,!0),s.isCollapsed()||(d.end=Eu(f,u,c,l,!1)),d)},Pu=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Du=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),u=a.nodeName;if("IMG"===u)return{name:u,index:_u(n,u,a)};var s=Ru(r.cloneRange());if(!i){s.collapse(!1);var c=Pu(n,o+"_end",t);Tu(n,s,c)}(r=Ru(r)).collapse(!0);var l=Pu(n,o+"_start",t);return Tu(n,r,l),e.moveToBookmark({id:o,keep:1}),{id:o}},Mu={getBookmark:function(e,t,n){return 2===t?Au(fa,n,e):3===t?(o=(r=e).getRng(),{start:wu(r.dom.getRoot(),mu.fromRangeStart(o)),end:wu(r.dom.getRoot(),mu.fromRangeEnd(o))}):t?{rng:e.getRng()}:Du(e,!1);var r,o},getUndoBookmark:i(Au,o,!0),getPersistentBookmark:Du},Bu="_mce_caret",Iu=function(e){return Ho.isElement(e)&&e.id===Bu},Lu=function(e,t){for(;t&&t!==e;){if(t.id===Bu)return t;t=t.parentNode}return null},Hu=Ho.isElement,Fu=Ho.isText,zu=function(e){var t=e.parentNode;t&&t.removeChild(e)},Wu=function(e,t){0===t.length?zu(e):e.nodeValue=t},Uu=function(e){var t=fa(e);return{count:e.length-t.length,text:t}},ju=function(e,t){return Vu(e),t},Vu=function(e){if(Hu(e)&&pa(e)&&(va(e)?e.removeAttribute("data-mce-caret"):zu(e)),Fu(e)){var t=fa(function(e){try{return e.nodeValue}catch(e){return""}}(e));Wu(e,t)}},$u={removeAndReposition:function(e,t){return mu.isTextPosition(t)?function(e,t){return Fu(e)&&t.container()===e?(r=t,o=Uu((n=e).data.substr(0,r.offset())),i=Uu(n.data.substr(r.offset())),0<(a=o.text+i.text).length?(Wu(n,a),mu(n,r.offset()-o.count)):r):ju(e,t);var n,r,o,i,a}(e,t):(n=e,(r=t).container()===n.parentNode?function(e,t){var n,r,o,i=t.container(),a=(n=te(i.childNodes),r=e,o=z(n,r),-1===o?N.none():N.some(o)).map((function(e){return e<t.offset()?mu(i,t.offset()-1):t})).getOr(t);return Vu(e),a}(n,r):ju(n,r));var n,r},remove:Vu},qu=rr.detect().browser,Yu=Ho.isContentEditableFalse,Xu=function(e,t,n){var r,o,i,a,u,s=Ia(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,i=e.scrollTop||r.scrollTop):(u=e.getBoundingClientRect(),o=e.scrollLeft-u.left,i=e.scrollTop-u.top),s.left+=o,s.right+=o,s.top+=i,s.bottom+=i,s.width=1,0<(a=t.offsetWidth-t.clientWidth)&&(n&&(a*=-1),s.left+=a,s.right+=a),s},Gu=function(t,n,r){var o,i,a=Hi(N.none()),u=function(){!function(e){var t,n,r,o,i;for(t=hn("*[contentEditable=false]",e),o=0;o<t.length;o++)r=(n=t[o]).previousSibling,wa(r)&&(1===(i=r.data).length?r.parentNode.removeChild(r):r.deleteData(i.length-1,1)),r=n.nextSibling,xa(r)&&(1===(i=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}(t),i&&($u.remove(i),i=null),a.get().each((function(e){hn(e.caret).remove(),a.set(N.none())})),clearInterval(o)},s=function(){o=pe.setInterval((function(){r()?hn("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):hn("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")}),500)};return{show:function(r,o){var c,l,f;if(u(),f=o,Ho.isElement(f)&&/^(TD|TH)$/i.test(f.tagName))return null;if(!n(o))return i=function(e,t){var n,r,o;if(r=e.ownerDocument.createTextNode(la),o=e.parentNode,t){if(n=e.previousSibling,ma(n)){if(pa(n))return n;if(wa(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,ma(n)){if(pa(n))return n;if(xa(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(o,r),l=o.ownerDocument.createRange(),Yu(i.nextSibling)?(l.setStart(i,0),l.setEnd(i,0)):(l.setStart(i,1),l.setEnd(i,1)),l;i=function(t,n,r){var o,i,a;return(o=n.ownerDocument.createElement(t)).setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(((a=e.document.createElement("br")).setAttribute("data-mce-bogus","1"),a)),i=n.parentNode,r?i.insertBefore(o,n):n.nextSibling?i.insertBefore(o,n.nextSibling):i.appendChild(o),o}("p",o,r),c=Xu(t,o,r),hn(i).css("top",c.top);var d=hn('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(c).appendTo(t)[0];return a.set(N.some({caret:d,element:o,before:r})),a.get().each((function(e){r&&hn(e.caret).addClass("mce-visual-caret-before")})),s(),(l=o.ownerDocument.createRange()).setStart(i,0),l.setEnd(i,0),l},hide:u,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){a.get().each((function(e){var n=Xu(t,e.element,e.before);hn(e.caret).css(n)}))},destroy:function(){return pe.clearInterval(o)}}},Ku=function(){return qu.isIE()||qu.isEdge()||qu.isFirefox()},Ju=function(e){return Yu(e)||Ho.isTable(e)&&Ku()},Zu=Ho.isContentEditableFalse,Qu=Ho.matchStyleValues("display","block table table-cell table-caption list-item"),es=pa,ts=ha,ns=Ho.isElement,rs=Aa,os=function(e){return 0<e},is=function(e){return e<0},as=function(e,t){for(var n;n=e(t);)if(!ts(n))return n;return null},us=function(e,t,n,r,o){var i=new lo(e,r);if(is(t)){if((Zu(e)||ts(e))&&n(e=as(i.prev,!0)))return e;for(;e=as(i.prev,o);)if(n(e))return e}if(os(t)){if((Zu(e)||ts(e))&&n(e=as(i.next,!0)))return e;for(;e=as(i.next,o);)if(n(e))return e}return null},ss=function(e,t){for(;e&&e!==t;){if(Qu(e))return e;e=e.parentNode}return null},cs=function(e,t,n){return ss(e.container(),n)===ss(t.container(),n)},ls=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),ns(n)?n.childNodes[r+e]:null):null},fs=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},ds=function(e,t,n){var r,o,i,a;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],es(r)&&(r=r[o]),Zu(r)){if(a=n,ss(r,i=t)===ss(a,i))return r;break}if(rs(r))break;n=n.parentNode}return null},ms=i(fs,!0),hs=i(fs,!1),gs=function(e,t,n){var r,o,a,u,s=i(ds,!0,t),c=i(ds,!1,t);if(o=n.startContainer,a=n.startOffset,ha(o)){if(ns(o)||(o=o.parentNode),"before"===(u=o.getAttribute("data-mce-caret"))&&(r=o.nextSibling,Ju(r)))return ms(r);if("after"===u&&(r=o.previousSibling,Ju(r)))return hs(r)}if(!n.collapsed)return n;if(Ho.isText(o)){if(es(o)){if(1===e){if(r=c(o))return ms(r);if(r=s(o))return hs(r)}if(-1===e){if(r=s(o))return hs(r);if(r=c(o))return ms(r)}return n}if(wa(o)&&a>=o.data.length-1)return 1===e&&(r=c(o))?ms(r):n;if(xa(o)&&a<=1)return-1===e&&(r=s(o))?hs(r):n;if(a===o.data.length)return(r=c(o))?ms(r):n;if(0===a)return(r=s(o))?hs(r):n}return n},ps=function(e,t){return N.from(ls(e?0:-1,t)).filter(Zu)},vs=function(e,t,n){var r=gs(e,t,n);return-1===e?lu.fromRangeStart(r):lu.fromRangeEnd(r)},bs=function(e){return N.from(e.getNode()).map(sr)},ys=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},xs=function(e,t){var n=cs(e,t);return!(n||!Ho.isBr(e.getNode()))||n};(du=fu||(fu={}))[du.Backwards=-1]="Backwards",du[du.Forwards=1]="Forwards";var ws,Cs,ks=Ho.isContentEditableFalse,Ts=Ho.isText,Ss=Ho.isElement,Es=Ho.isBr,_s=Aa,Ns=function(e){return Na(e)||!!Pa(t=e)&&!0!==Y(te(t.getElementsByTagName("*")),(function(e,t){return e||ka(t)}),!1);var t},Rs=Da,Os=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},As=function(e,t){if(os(e)){if(_s(t.previousSibling)&&!Ts(t.previousSibling))return mu.before(t);if(Ts(t))return mu(t,0)}if(is(e)){if(_s(t.nextSibling)&&!Ts(t.nextSibling))return mu.after(t);if(Ts(t))return mu(t,t.data.length)}return is(e)?Es(t)?mu.before(t):mu.after(t):mu.before(t)},Ps=function(e,t,n){var o,i,a,u,s;if(!Ss(n)||!t)return null;if(t.isEqual(mu.after(n))&&n.lastChild){if(s=mu.after(n.lastChild),is(e)&&_s(n.lastChild)&&Ss(n.lastChild))return Es(n.lastChild)?mu.before(n.lastChild):s}else s=t;var c,l,f,d=s.container(),m=s.offset();if(Ts(d)){if(is(e)&&0<m)return mu(d,--m);if(os(e)&&m<d.length)return mu(d,++m);o=d}else{if(is(e)&&0<m&&(i=Os(d,m-1),_s(i)))return!Ns(i)&&(a=us(i,e,Rs,i))?Ts(a)?mu(a,a.data.length):mu.after(a):Ts(i)?mu(i,i.data.length):mu.before(i);if(os(e)&&m<d.childNodes.length&&(i=Os(d,m),_s(i)))return Es(i)?(c=n,(f=(l=i).nextSibling)&&_s(f)?Ts(f)?mu(f,0):mu.before(f):Ps(fu.Forwards,mu.after(l),c)):!Ns(i)&&(a=us(i,e,Rs,i))?Ts(a)?mu(a,0):mu.before(a):Ts(i)?mu(i,0):mu.after(i);o=i||s.getNode()}return(os(e)&&s.isAtEnd()||is(e)&&s.isAtStart())&&(o=us(o,e,r(!0),n,!0),Rs(o,n))?As(e,o):(i=us(o,e,Rs,n),!(u=jt.last(q(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(d,n),ks)))||i&&u.contains(i)?i?As(e,i):null:s=os(e)?mu.after(u):mu.before(u))},Ds=function(e){return{next:function(t){return Ps(fu.Forwards,t,e)},prev:function(t){return Ps(fu.Backwards,t,e)}}},Ms=function(e){return mu.isTextPosition(e)?0===e.offset():Aa(e.getNode())},Bs=function(e){if(mu.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Aa(e.getNode(!0))},Is=function(e,t){return!mu.isTextPosition(e)&&!mu.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Ls=function(e,t,n){var r=Ds(t);return N.from(e?r.next(n):r.prev(n))},Hs=function(e,t,n){return Ls(e,t,n).bind((function(r){return cs(n,r,t)&&function(e,t,n){return e?!Is(t,n)&&(r=t,!(!mu.isTextPosition(r)&&Ho.isBr(r.getNode())))&&Bs(t)&&Ms(n):!Is(n,t)&&Ms(t)&&Bs(n);var r}(e,n,r)?Ls(e,t,r):N.some(r)}))},Fs=function(e,t,n,r){return Hs(e,t,n).bind((function(n){return r(n)?Fs(e,t,n,r):N.some(n)}))},zs=function(e,t){var n,r,o,i,a,u=e?t.firstChild:t.lastChild;return Ho.isText(u)?N.some(mu(u,e?0:u.data.length)):u?Aa(u)?N.some(e?mu.before(u):(a=u,Ho.isBr(a)?mu.before(a):mu.after(a))):(r=t,o=u,i=(n=e)?mu.before(o):mu.after(o),Ls(n,r,i)):N.none()},Ws=i(Ls,!0),Us=i(Ls,!1),js={fromPosition:Ls,nextPosition:Ws,prevPosition:Us,navigate:Hs,navigateIgnore:Fs,positionIn:zs,firstPositionIn:i(zs,!0),lastPositionIn:i(zs,!1)},Vs=function(e,t){return Ho.isElement(t)&&e.isBlock(t)&&!t.innerHTML&&!fe.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},$s=function(e,t){return js.lastPositionIn(e).fold((function(){return!1}),(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},qs=function(e,t,n){return!(!1!==t.hasChildNodes()||!Lu(e,t)||(o=n,i=(r=t).ownerDocument.createTextNode(la),r.appendChild(i),o.setStart(i,0),o.setEnd(i,0),0));var r,o,i},Ys=function(e,t,n,r){var o,i,a,u,s=n[t?"start":"end"],c=e.getRoot();if(s){for(a=s[0],i=c,o=s.length-1;1<=o;o--){if(u=i.childNodes,qs(c,i,r))return!0;if(s[o]>u.length-1)return!!qs(c,i,r)||$s(i,r);i=u[s[o]]}3===i.nodeType&&(a=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(s[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},Xs=function(e){return Ho.isText(e)&&0<e.data.length},Gs=function(e,t,n){var r,o,i,a,u,s,c=e.get(n.id+"_"+t),l=n.keep;if(c){if(r=c.parentNode,"start"===t?l?c.hasChildNodes()?(r=c.firstChild,o=1):Xs(c.nextSibling)?(r=c.nextSibling,o=0):Xs(c.previousSibling)?(r=c.previousSibling,o=c.previousSibling.data.length):(r=c.parentNode,o=e.nodeIndex(c)+1):o=e.nodeIndex(c):l?c.hasChildNodes()?(r=c.firstChild,o=1):Xs(c.previousSibling)?(r=c.previousSibling,o=c.previousSibling.data.length):(r=c.parentNode,o=e.nodeIndex(c)):o=e.nodeIndex(c),u=r,s=o,!l){for(a=c.previousSibling,i=c.nextSibling,Xt.each(Xt.grep(c.childNodes),(function(e){Ho.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));c=e.get(n.id+"_"+t);)e.remove(c,!0);a&&i&&a.nodeType===i.nodeType&&Ho.isText(a)&&!fe.opera&&(o=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),u=a,s=o)}return N.some(mu(u,s))}return N.none()},Ks=function(e,t,n){return Mu.getBookmark(e,t,n)},Js=function(e,t){(function(e,t){var n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b=e.dom;if(t){if(v=t,Xt.isArray(v.start))return g=t,p=(h=b).createRng(),Ys(h,!0,g,p)&&Ys(h,!1,g,p)?N.some(p):N.none();if("string"==typeof t.start)return N.some((f=t,d=(l=b).createRng(),m=Cu(l.getRoot(),f.start),d.setStart(m.container(),m.offset()),m=Cu(l.getRoot(),f.end),d.setEnd(m.container(),m.offset()),d));if(t.hasOwnProperty("id"))return s=Gs(o=b,"start",i=t),c=Gs(o,"end",i),$a(s,(u=s,(a=c).isSome()?a:u),(function(e,t){var n=o.createRng();return n.setStart(Vs(o,e.container()),e.offset()),n.setEnd(Vs(o,t.container()),t.offset()),n}));if(t.hasOwnProperty("name"))return n=b,r=t,N.from(n.select(r.name)[r.index]).map((function(e){var t=n.createRng();return t.selectNode(e),t}));if(t.hasOwnProperty("rng"))return N.some(t.rng)}return N.none()})(e,t).each((function(t){e.setRng(t)}))},Zs=function(e){return Ho.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Qs=function(e){return e&&/^(IMG)$/.test(e.nodeName)},ec=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},tc=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},nc=function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!Qs(n.startContainer.childNodes[n.startOffset]))&&1===u.nodeType)for(a<(i=u.childNodes).length?r=new lo(u=i[a],e.getParent(u,e.isBlock)):(r=new lo(u=i[i.length-1],e.getParent(u,e.isBlock))).next(!0),o=r.current();o;o=r.next())if(3===o.nodeType&&!ec(o))return n.setStart(o,0),void t.setRng(n)},rc=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!ec(e))return e},oc=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},ic=function(e,t,n){return e.schema.isValidChild(t,n)},ac=ec,uc=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},sc=function(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},cc=tc,lc=function(e,t,n){return tc(e,e.getStyle(t,n),n)},fc=function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},dc=function(e,t,n){return e.getParents(t,n,e.getRoot())},mc=Zs,hc=dc,gc=ac,pc=oc,vc=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},bc=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},yc=function(e,t,n,r){var o,i,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(o=a.lastIndexOf(" ",r),-1!==(o=(i=a.lastIndexOf(" ",r))<o?o:i)&&!t&&(o<r||!e)&&o<=a.length&&o++):(o=a.indexOf(" ",r),i=a.indexOf(" ",r),o=-1!==o&&(-1===i||o<i)?o:i),o},xc=function(e,t,n,r,o,i){var a,u,s,c;if(3===n.nodeType){if(-1!==(s=yc(o,i,n,r)))return{container:n,offset:s};c=n}for(a=new lo(n,e.getParent(n,e.isBlock)||t);u=a[o?"prev":"next"]();)if(3!==u.nodeType||mc(u.parentNode)){if(e.isBlock(u)||sc(u,"BR"))break}else if(-1!==(s=yc(o,i,c=u)))return{container:u,offset:s};if(c)return{container:c,offset:r=o?0:c.length}},wc=function(e,t,n,r,o){var i,a,u,s;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=hc(e,r),a=0;a<i.length;a++)for(u=0;u<t.length;u++)if((!("collapsed"in(s=t[u]))||s.collapsed===n.collapsed)&&e.is(i[a],s.selector))return i[a];return r},Cc=function(e,t,n,r){var o,i=e.dom,a=i.getRoot();if(t[0].wrapper||(o=i.getParent(n,t[0].block,a)),!o){var u=i.getParent(n,"LI,TD,TH");o=i.getParent(3===n.nodeType?n.parentNode:n,(function(t){return t!==a&&pc(e,t)}),u)}if(o&&t[0].wrapper&&(o=hc(i,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!i.isBlock(o[r])&&(o=o[r],!sc(o,"br")););return o||n},kc=function(e,t,n,r,o,i,a){var u,s,c,l,f,d;if(u=s=a?n:o,l=a?"previousSibling":"nextSibling",f=e.getRoot(),3===u.nodeType&&!gc(u)&&(a?0<r:i<u.nodeValue.length))return u;for(;;){if(!t[0].block_expand&&e.isBlock(s))return s;for(c=s[l];c;c=c[l])if(!mc(c)&&!gc(c)&&("BR"!==(d=c).nodeName||!d.getAttribute("data-mce-bogus")||d.nextSibling))return s;if(s===f||s.parentNode===f){u=s;break}s=s.parentNode}return u},Tc=function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,u=t.endContainer,s=t.endOffset,c=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&3===(i=Ua(i,a)).nodeType&&(a=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=Ua(u,t.collapsed?s:s-1)).nodeType&&(s=u.nodeValue.length),i=bc(c,i),u=bc(c,u),(mc(i.parentNode)||mc(i))&&(i=mc(i)?i:i.parentNode,3===(i=t.collapsed?i.previousSibling||i:i.nextSibling||i).nodeType&&(a=t.collapsed?i.length:0)),(mc(u.parentNode)||mc(u))&&(u=mc(u)?u:u.parentNode,3===(u=t.collapsed?u.nextSibling||u:u.previousSibling||u).nodeType&&(s=t.collapsed?0:u.length)),t.collapsed&&((o=xc(c,e.getBody(),i,a,!0,r))&&(i=o.container,a=o.offset),(o=xc(c,e.getBody(),u,s,!1,r))&&(u=o.container,s=o.offset)),n[0].inline&&(u=r?u:function(e,t){var n=vc(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=vc(n.node.previousSibling);n.node&&0<n.offset&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&1<n.offset&&(e=n.node).splitText(n.offset-1)}return e}(u,s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===i.nodeType&&0!==a||(i=kc(c,n,i,a,u,s,!0)),n[0].inline&&3===u.nodeType&&s!==u.nodeValue.length||(u=kc(c,n,i,a,u,s,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=wc(c,n,t,i,"previousSibling"),u=wc(c,n,t,u,"nextSibling")),(n[0].block||n[0].selector)&&(i=Cc(e,n,i,"previousSibling"),u=Cc(e,n,u,"nextSibling"),n[0].block&&(c.isBlock(i)||(i=kc(c,n,i,a,u,s,!0)),c.isBlock(u)||(u=kc(c,n,i,a,u,s,!1)))),1===i.nodeType&&(a=c.nodeIndex(i),i=i.parentNode),1===u.nodeType&&(s=c.nodeIndex(u)+1,u=u.parentNode),{startContainer:i,startOffset:a,endContainer:u,endOffset:s}},Sc=Xt.each,Ec=function(e,t,n){var r,o,i,a,u,s,c,l=t.startContainer,f=t.startOffset,d=t.endContainer,m=t.endOffset;if(0<(c=e.select("td[data-mce-selected],th[data-mce-selected]")).length)Sc(c,(function(e){n([e])}));else{var h,g,p,v=function(e){var t;return 3===(t=e[0]).nodeType&&t===l&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===m&&0<e.length&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},b=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},y=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},x=function(e,t,r){var o=r?"nextSibling":"previousSibling";for(u=(a=e).parentNode;a&&a!==t;a=u)u=a.parentNode,(s=b(a===e?a:a[o],o)).length&&(r||s.reverse(),n(v(s)))};if(1===l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(g=m,--g>(p=(h=d).childNodes).length-1?g=p.length-1:g<0&&(g=0),d=p[g]||h),l===d)return n(v([l]));for(r=e.findCommonAncestor(l,d),a=l;a;a=a.parentNode){if(a===d)return x(l,r,!0);if(a===r)break}for(a=d;a;a=a.parentNode){if(a===l)return x(d,r);if(a===r)break}o=y(l,r)||l,i=y(d,r)||d,x(l,o,!0),(s=b(o===l?o:o.nextSibling,"nextSibling",i===d?i.nextSibling:i)).length&&n(v(s)),x(d,i)}},_c=(ws=gr,"text",{get:function(e){if(!ws(e))throw new Error("Can only get text value of a text node");return Cs(e).getOr("")},getOption:Cs=function(e){return ws(e)?N.from(e.dom().nodeValue):N.none()},set:function(e,t){if(!ws(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),Nc=function(e){return _c.get(e)},Rc=function(e,t,n,r){var o,i=t.uid,a=void 0===i?("mce-annotation",o=(new Date).getTime(),"mce-annotation_"+Math.floor(1e9*Math.random())+ ++oa+String(o)):i,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["uid"]),s=ar("span",e);Wi(s,Zi()),kr(s,""+ea(),a),kr(s,""+Qi(),n);var c,l=r(a,u),f=l.attributes,d=void 0===f?{}:f,m=l.classes,h=void 0===m?[]:m;return Tr(s,d),c=s,V(h,(function(e){Wi(c,e)})),s},Oc=function(e,t,n,r,o){var i=[],a=Rc(e.getDoc(),o,n,r),u=Hi(N.none()),s=function(){u.set(N.none())},c=function(e){V(e,l)},l=function(t){var n,r;switch(function(e,t,n,r){return zr(t).fold((function(){return"skipping"}),(function(o){return"br"===r||gr(a=t)&&"\ufeff"===Nc(a)?"valid":hr(i=t)&&Ui(i,Zi())?"existing":Iu(t)?"caret":ic(e,n,r)&&ic(e,dr(o),n)?"valid":"invalid-child";var i,a}))}(e,t,"span",dr(t))){case"invalid-child":s();var o=$r(t);c(o),s();break;case"valid":var l=u.get().getOrThunk((function(){var e=aa(a);return i.push(e),u.set(N.some(e)),e}));Ri(n=t,r=l),Pi(r,n)}};return Ec(e.dom,t,(function(e){var t;s(),t=j(e,sr),c(t)})),i};function Ac(t){var n,r=(n={},{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return n.hasOwnProperty(e)?N.from(n[e]).map((function(e){return e.settings})):N.none()}});!function(e,t){e.on("init",(function(){e.serializer.addNodeFilter("span",(function(e){V(e,(function(e){var n;(n=e,N.from(n.attributes.map[Qi()]).bind(t.lookup)).each((function(t){!1===t.persistent&&e.unwrap()}))}))}))}))}(t,r);var o=function(t,n){var r,o,i=Hi({}),a=function(e,t){u(e,(function(e){return t(e),e}))},u=function(e,t){var n=i.get(),r=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:Hi(N.none())});n[e]=r,i.set(n)},s=(r=function(){var e,n,r=i.get(),o=(e=pr(r),(n=L.call(e,0)).sort(void 0),n);V(o,(function(e){u(e,(function(n){var r=n.previous.get();return ta(t,N.some(e)).fold((function(){var t;r.isSome()&&(a(t=e,(function(e){V(e.listeners,(function(e){return e(!1,t)}))})),n.previous.set(N.none()))}),(function(e){var t,o,i,u=e.uid,s=e.name,c=e.elements;r.is(u)||(o=u,i=c,a(t=s,(function(e){V(e.listeners,(function(e){return e(!0,t,{uid:o,nodes:j(i,(function(e){return e.dom()}))})}))})),n.previous.set(N.some(u)))})),{previous:n.previous,listeners:n.listeners}}))}))},30,o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==o&&e.clearTimeout(o),o=e.setTimeout((function(){r.apply(null,t),o=null}),30)}});return t.on("remove",(function(){s.cancel()})),t.on("nodeChange",(function(){s.throttle()})),{addListener:function(e,t){u(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}}(t);return{register:function(e,t){r.register(e,t)},annotate:function(e,n){r.lookup(e).each((function(r){!function(e,t,n,r){e.undoManager.transact((function(){var o,i,a,u,s=e.selection.getRng();if(s.collapsed&&(u=Tc(o=e,i=s,[{inline:!0}],3===(a=i).startContainer.nodeType&&a.startContainer.nodeValue.length>=a.startOffset&&" "===a.startContainer.nodeValue[a.startOffset]),i.setStart(u.startContainer,u.startOffset),i.setEnd(u.endContainer,u.endOffset),o.selection.setRng(i)),e.selection.getRng().collapsed){var c=Rc(e.getDoc(),r,t,n.decorate);sa(c," "),e.selection.getRng().insertNode(c.dom()),e.selection.select(c.dom())}else{var l=Mu.getPersistentBookmark(e.selection,!1),f=e.selection.getRng();Oc(e,f,t,n.decorate,r),e.selection.moveToBookmark(l)}}))}(t,e,r,n)}))},annotationChanged:function(e,t){o.addListener(e,t)},remove:function(e){ta(t,N.some(e)).each((function(e){var t=e.elements;V(t,Ii)}))},getAll:function(e){var n,r,o,i,a,u=(n=e,r=sr(t.getBody()),o=Vi(r,"["+Qi()+'="'+n+'"]'),i={},V(o,(function(e){var t=Sr(e,ea()),n=i.hasOwnProperty(t)?i[t]:[];i[t]=n.concat([e])})),i);return a=function(e){return j(e,(function(e){return e.dom()}))},function(e,t){var n={};return br(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n}(u,(function(e,t){return{k:t,v:a(e)}}))}}}var Pc=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&(" "===(t=e.firstChild).data||Ho.isBr(t));var t}(t))?e.slice(0,-1):e;var t},Dc=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Mc=function(e,t){var n=mu.after(e),r=Ds(t).prev(n);return r?r.toRange():null},Bc=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C=(o=t,i=r,c=e.serialize(i),u=(a=o.createFragment(c)).firstChild,s=a.lastChild,u&&"META"===u.nodeName&&u.parentNode.removeChild(u),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),a),k=Dc(t,n.startContainer),T=Pc(function(e){return Xt.grep(e.childNodes,(function(e){return"LI"===e.nodeName}))}(C.firstChild)),S=t.getRoot(),E=function(e){var r=mu.fromRangeStart(n),o=Ds(t.getRoot()),i=1===e?o.prev(r):o.next(r);return!i||Dc(t,i.getNode())!==k};return E(1)?function(e,t,n){var r,o,i,a,u=e.parentNode;return Xt.each(t,(function(t){u.insertBefore(t,e)})),r=e,o=n,i=mu.before(r),(a=Ds(o).next(i))?a.toRange():null}(k,T,S):E(2)?(l=k,f=T,d=S,t.insertAfter(f.reverse(),l),Mc(f[0],d)):(h=T,g=S,p=m=k,b=(v=n).cloneRange(),y=v.cloneRange(),b.setStartBefore(p),y.setEndAfter(p),x=[b.cloneContents(),y.cloneContents()],(w=m.parentNode).insertBefore(x[0],m),Xt.each(h,(function(e){w.insertBefore(e,m)})),w.insertBefore(x[1],m),w.removeChild(m),Mc(h[h.length-1],g))},Ic=Xt.each,Lc=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Ic(e.getAttribs(t),(function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))})),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!o(r(t),r(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Zs(t)||Zs(n))}},Hc=function(e){Mi(e),Pi(e,ir('<br data-mce-bogus="1">'))},Fc=function(e){Xr(e).each((function(t){Wr(t).each((function(n){vo(e)&&yo(t)&&vo(n)&&Bi(t)}))}))},zc=Xt.makeMap;function Wc(e){var t,n,r,o,i,a=[];return t=(e=e||{}).indent,n=zc(e.indent_before||""),r=zc(e.indent_after||""),o=Zo.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="html"===e.element_format,{start:function(e,u,s){var c,l,f,d;if(t&&n[e]&&0<a.length&&0<(d=a[a.length-1]).length&&"\n"!==d&&a.push("\n"),a.push("<",e),u)for(c=0,l=u.length;c<l;c++)f=u[c],a.push(" ",f.name,'="',o(f.value,!0),'"');a[a.length]=!s||i?">":" />",s&&t&&r[e]&&0<a.length&&0<(d=a[a.length-1]).length&&"\n"!==d&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&0<a.length&&0<(n=a[a.length-1]).length&&"\n"!==n&&a.push("\n")},text:function(e,t){0<e.length&&(a[a.length]=t?e:o(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",o(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function Uc(e,t){void 0===t&&(t=si());var n=Wc(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var o,i;i=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;a(e),e=e.next;);}},n.reset();var a=function(e){var r,u,s,c,l,f,d,m,h,g=o[e.type];if(g)g(e);else{if(r=e.name,u=e.shortEnded,s=e.attributes,i&&s&&1<s.length&&((f=[]).map={},h=t.getElementRule(e.name))){for(d=0,m=h.attributesOrder.length;d<m;d++)(c=h.attributesOrder[d])in s.map&&(l=s.map[c],f.map[c]=l,f.push({name:c,value:l}));for(d=0,m=s.length;d<m;d++)(c=s[d].name)in f.map||(l=s.map[c],f.map[c]=l,f.push({name:c,value:l}));s=f}if(n.start(e.name,s,u),!u){if(e=e.firstChild)for(;a(e),e=e.next;);n.end(r)}}};return 1!==r.type||e.inner?o[11](r):a(r),n.getContent()}}}var jc=function(t){return t.collapsed?t:function(t){var n=mu.fromRangeStart(t),r=mu.fromRangeEnd(t),o=t.commonAncestorContainer;return js.fromPosition(!1,o,r).map((function(i){return!cs(n,r,o)&&cs(n,i,o)?(a=n.container(),u=n.offset(),s=i.container(),c=i.offset(),(l=e.document.createRange()).setStart(a,u),l.setEnd(s,c),l):t;var a,u,s,c,l})).getOr(t)}(t)},Vc=Ho.matchNodeNames("td th"),$c=function(e,t){var n,r,o=e.selection.getRng(),i=o.startContainer,a=o.startOffset;o.collapsed&&(n=i,r=a,Ho.isText(n)&&" "===n.nodeValue[r-1])&&Ho.isText(i)&&(i.insertData(a-1," "),i.deleteData(a,1),o.setStart(i,a),o.setEnd(i,a),e.selection.setRng(o)),e.selection.setContent(t)},qc=function(e,t,n){var r,o,i,a,u,s,c,l,f,d,m,h=e.selection,g=e.dom;if(/^ | $/.test(t)&&(t=function(e,t){var n,r;n=e.startContainer,r=e.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(0<r?t=t.replace(/^&nbsp;/," "):o("previousSibling")||(t=t.replace(/^ /,"&nbsp;")),r<n.length?t=t.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(t=t.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),t}(h.getRng(),t)),r=e.parser,m=n.merge,o=Uc({validate:e.settings.validate},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',s={content:t,format:"html",selection:!0,paste:n.paste},(s=e.fire("BeforeSetContent",s)).isDefaultPrevented())e.fire("SetContent",{content:s.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=s.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);var p,v,b,y,x,w,C=(l=h.getRng()).startContainer||(l.parentElement?l.parentElement():null),k=e.getBody();C===k&&h.isCollapsed()&&g.isBlock(k.firstChild)&&(p=e,(v=k.firstChild)&&!p.schema.getShortEndedElements()[v.nodeName])&&g.isEmpty(k.firstChild)&&((l=g.createRng()).setStart(k.firstChild,0),l.setEnd(k.firstChild,0),h.setRng(l)),h.isCollapsed()||(e.selection.setRng(jc(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),y=t,x=(b=e.selection.getRng()).startContainer,w=b.startOffset,3===x.nodeType&&b.collapsed&&(" "===x.data[w]?(x.deleteData(w,1),/[\u00a0| ]$/.test(y)||(y+=" ")):" "===x.data[w-1]&&(x.deleteData(w-1,1),/[\u00a0| ]$/.test(y)||(y=" "+y))),t=y);var T,S,E,_={context:(i=h.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(u=r.parse(t,_),!0===n.paste&&function(e,t){var n,r,o,i,a,u,s=t.firstChild,c=t.lastChild;return s&&"meta"===s.name&&(s=s.next),c&&"mce_marker"===c.attr("id")&&(c=c.prev),r=c,u=(n=e).getNonEmptyElements(),r&&(r.isEmpty(u)||(o=r,n.getBlockElements()[o.name]&&(a=o).firstChild&&a.firstChild===a.lastChild&&("br"===(i=o.firstChild).name||" "===i.value)))&&(c=c.prev),!(!s||s!==c||"ul"!==s.name&&"ol"!==s.name)}(e.schema,u)&&function(e,t){return!!Dc(e,t)}(g,i))return l=Bc(o,g,e.selection.getRng(),u),e.selection.setRng(l),void e.fire("SetContent",s);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(u),"mce_marker"===(f=u.lastChild).attr("id"))for(f=(c=f).prev;f;f=f.walk(!0))if(3===f.type||!g.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(c,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(i),_.invalid){for($c(e,d),i=h.getNode(),a=e.getBody(),9===i.nodeType?i=f=a:f=i;f!==a;)f=(i=f).parentNode;t=i===a?a.innerHTML:g.getOuterHTML(i),t=o.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,(function(){return o.serialize(u)})))),i===a?g.setHTML(a,t):g.setOuterHTML(i,t)}else!function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):$c(e,t)}}(e,t=o.serialize(u),i);!function(e,t){var n=e.schema.getTextInlineElements(),r=e.dom;if(t){var o=e.getBody(),i=new Lc(r);Xt.each(r.select("*[data-mce-fragment]"),(function(e){for(var t=e.parentNode;t&&t!==o;t=t.parentNode)n[e.nodeName.toLowerCase()]&&i.compare(t,e)&&r.remove(e,!0)}))}}(e,m),function(e,t){var n,r,o,i,a,u=e.dom,s=e.selection;if(t){if(e.selection.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return u.remove(t),s.select(n);var c=u.createRng();(i=t.previousSibling)&&3===i.nodeType?(c.setStart(i,i.nodeValue.length),fe.ie||(a=t.nextSibling)&&3===a.nodeType&&(i.appendData(a.data),a.parentNode.removeChild(a))):(c.setStartBefore(t),c.setEndBefore(t)),r=u.getParent(t,u.isBlock),u.remove(t),r&&u.isEmpty(r)&&(e.$(r).empty(),c.setStart(r,0),c.setEnd(r,0),Vc(r)||r.getAttribute("data-mce-fragment")||!(o=function(t){var n=mu.fromRangeStart(t);if(n=Ds(e.getBody()).next(n))return n.toRange()}(c))?u.add(r,u.create("br",{"data-mce-bogus":"1"})):(c=o,u.remove(r))),s.setRng(c)}}(e,g.get("mce_marker")),T=e.getBody(),Xt.each(T.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")})),S=e.dom,E=e.selection.getStart(),N.from(S.getParent(E,"td,th")).map(sr).each(Fc),e.fire("SetContent",s),e.addVisual()}},Yc=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Xc=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},Gc=function(e){return e.getParam("content_security_policy","")},Kc=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Jc=function(e){return e.getParam("forced_root_block_attrs",{})},Zc=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Qc=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},el=function(e){return e.getParam("images_upload_url","","string")},tl=function(e){return e.getParam("images_upload_base_path","","string")},nl=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},rl=function(e){return e.getParam("images_upload_handler",null,"function")},ol=function(e){return e.getParam("content_css_cors",!1,"boolean")},il=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?ga(n)?Ho.isText(n.nextSibling)?mu(n.nextSibling,0):mu.after(n):ba(t)?mu(n,r+1):t:ga(n)?Ho.isText(n.previousSibling)?mu(n.previousSibling,n.previousSibling.data.length):mu.before(n):ya(t)?mu(n,r-1):t},al={isInlineTarget:function(e,t){return Mr(sr(t),function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")}(e))},findRootInline:function(e,t,n){var r,o,i,a=(r=e,o=t,i=n,q(xi.DOM.getParents(i.container(),"*",o),r));return N.from(a[a.length-1])},isRtl:function(e){return"rtl"===xi.DOM.getStyle(e,"direction",!0)||(t=e.textContent,Yc.test(t));var t},isAtZwsp:function(e){return ba(e)||ya(e)},normalizePosition:il,normalizeForwards:i(il,!0),normalizeBackwards:i(il,!1),hasSameParentBlock:function(e,t,n){var r=ss(t,e),o=ss(n,e);return r&&r===o}},ul=function(e,t){return Lr(e,t)?Xi(t,(function(e){return xo(e)||Co(e)}),(n=e,function(e){return Ir(n,sr(e.dom().parentNode))})):N.none();var n},sl=function(e){var t,n,r;e.dom.isEmpty(e.getBody())&&(e.setContent(""),r=(n=(t=e).getBody()).firstChild&&t.dom.isBlock(n.firstChild)?n.firstChild:n,t.selection.setCursorLocation(r,0))},cl=function(e,t){return Aa(t)&&!1===(r=e,o=t,Ho.isText(o)&&/^[ \t\r\n]*$/.test(o.data)&&!1===function(e,t){var n,r,o=sr(e);return n=sr(t),"pre,code",r=i(Ir,o),Gi(n,"pre,code",r).isSome()}(r,o))||(n=t,Ho.isElement(n)&&"A"===n.nodeName&&n.hasAttribute("name"))||ll(t);var n,r,o},ll=Ho.hasAttribute("data-mce-bookmark"),fl=Ho.hasAttribute("data-mce-bogus"),dl=Ho.hasAttributeValue("data-mce-bogus","all"),ml=function(e){return function(e){var t,n,r=0;if(cl(e,e))return!1;if(!(n=e.firstChild))return!0;t=new lo(n,e);do{if(dl(n))n=t.next(!0);else if(fl(n))n=t.next();else if(Ho.isBr(n))r++,n=t.next();else{if(cl(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},hl=Rr("block","position"),gl=Rr("from","to"),pl=function(e,t){var n=sr(e),r=sr(t.container());return ul(n,r).map((function(e){return hl(e,t)}))},vl=function(e,t,n){return n.collapsed?function(e,t,n){var r=pl(e,mu.fromRangeStart(n)),o=r.bind((function(n){return js.fromPosition(t,e,n.position()).bind((function(n){return pl(e,n).map((function(n){return r=e,o=t,i=n,Ho.isBr(i.position().getNode())&&!1===ml(i.block())?js.positionIn(!1,i.block().dom()).bind((function(e){return e.isEqual(i.position())?js.fromPosition(o,r,e).bind((function(e){return pl(r,e)})):N.some(i)})).getOr(i):i;var r,o,i}))}))}));return $a(r,o,gl).filter((function(e){return!1===Ir((r=e).from().block(),r.to().block())&&zr((n=e).from().block()).bind((function(e){return zr(n.to().block()).filter((function(t){return Ir(e,t)}))})).isSome()&&(t=e,!1===Ho.isContentEditableFalse(t.from().block().dom())&&!1===Ho.isContentEditableFalse(t.to().block().dom()));var t,n,r}))}(e,t,n):N.none()},bl=function(e,t){return function(e,t,n){return Lr(t,e)?function(e,t){for(var n=B(t)?t:k,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=sr(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,(function(e){return n(e)||Ir(e,t)})).slice(0,-1):[]}(e,t,r(!1))},yl=bl,xl=function(e,t){return[e].concat(bl(e,t))},wl=function(e){var t,n=(t=$r(e),G(t,vo).fold((function(){return t}),(function(e){return t.slice(0,e)})));return V(n,Bi),n},Cl=function(e,t){var n=xl(t,e);return X(n.reverse(),ml).each(Bi)},kl=function(e,t,n,r){if(ml(n))return Hc(n),js.firstPositionIn(n.dom());0===q(jr(r),(function(e){return!ml(e)})).length&&ml(t)&&Ri(r,ar("br"));var o=js.prevPosition(n.dom(),mu.before(r.dom()));return V(wl(t),(function(e){Ri(r,e)})),Cl(e,t),o},Tl=function(e,t,n){if(ml(n))return Bi(n),ml(t)&&Hc(t),js.firstPositionIn(t.dom());var r=js.lastPositionIn(n.dom());return V(wl(t),(function(e){Pi(n,e)})),Cl(e,t),r},Sl=function(e,t){js.positionIn(e,t.dom()).map((function(e){return e.getNode()})).map(sr).filter(yo).each(Bi)},El=function(e,t,n){return Sl(!0,t),Sl(!1,n),function(e,t){return Lr(t,e)?(n=xl(e,t),N.from(n[n.length-1])):N.none();var n}(t,n).fold(i(Tl,e,t,n),i(kl,e,t,n))},_l=function(e,t,n,r){return t?El(e,r,n):El(e,n,r)},Nl=function(e,t){var n,r=sr(e.getBody());return(n=vl(r.dom(),t,e.selection.getRng()).bind((function(e){return _l(r,t,e.from().block(),e.to().block())}))).each((function(t){e.selection.setRng(t.toRange())})),n.isSome()},Rl=function(e,t){var n=sr(t),r=i(Ir,e);return Yi(n,So,r).isSome()},Ol=function(e){var t,n,r,o,i=sr(e.getBody());return function(e,t){var n,r,o=js.prevPosition(e.dom(),mu.fromRangeStart(t)).isNone(),i=js.nextPosition(e.dom(),mu.fromRangeEnd(t)).isNone();return!(Rl(n=e,(r=t).startContainer)||Rl(n,r.endContainer))&&o&&i}(i,e.selection.getRng())?((o=e).setContent(""),o.selection.setCursorLocation(),!0):(t=i,n=e.selection,r=n.getRng(),$a(ul(t,sr(r.startContainer)),ul(t,sr(r.endContainer)),(function(e,o){return!1===Ir(e,o)&&(r.deleteContents(),_l(t,!0,e,o).each((function(e){n.setRng(e.toRange())})),!0)})).getOr(!1))},Al=function(e,t){return!e.selection.isCollapsed()&&Ol(e)},Pl=function(t){if(!P(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return V(t,(function(o,i){var a=pr(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],s=o[u];if(void 0!==r[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!P(s))throw new Error("case arguments must be an array");n.push(u),r[u]=function(){var r=arguments.length;if(r!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+r);for(var o=new Array(r),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(e){var t=pr(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!J(n,(function(e){return W(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[u].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:u,params:o})}}}})),r},Dl=function(e){return bs(e).exists(yo)},Ml=function(e,t,n){var r=q(xl(sr(n.container()),t),vo),o=Q(r).getOr(t);return js.fromPosition(e,o.dom(),n).filter(Dl)},Bl=function(e,t){return bs(t).exists(yo)||Ml(!0,e,t).isSome()},Il=function(e,t){return(n=t,N.from(n.getNode(!0)).map(sr)).exists(yo)||Ml(!1,e,t).isSome();var n},Ll=i(Ml,!1),Hl=i(Ml,!0),Fl=(" ",function(e){return" "===e}),zl=function(e){return/^[\r\n\t ]$/.test(e)},Wl=function(e){return!zl(e)&&!Fl(e)},Ul=function(e,t,n){return N.from(n.container()).filter(Ho.isText).exists((function(r){var o=e?0:-1;return t(r.data.charAt(n.offset()+o))}))},jl=i(Ul,!0,zl),Vl=i(Ul,!1,zl),$l=function(e){var t=e.container();return Ho.isText(t)&&0===t.data.length},ql=function(e,t){var n=ls(e,t);return Ho.isContentEditableFalse(n)&&!Ho.isBogusAll(n)},Yl=i(ql,0),Xl=i(ql,-1),Gl=function(e,t){return Ho.isTable(ls(e,t))},Kl=i(Gl,0),Jl=i(Gl,-1),Zl=Pl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ql=function(e,t,n,r){var o=r.getNode(!1===t);return ul(sr(e),sr(n.getNode())).map((function(e){return ml(e)?Zl.remove(e.dom()):Zl.moveToElement(o)})).orThunk((function(){return N.some(Zl.moveToElement(o))}))},ef=function(e,t,n){return js.fromPosition(t,e,n).bind((function(o){return l=o.getNode(),So(sr(l))||Co(sr(l))?N.none():(i=e,s=o,c=function(e){return bo(sr(e))&&!cs(u,s,i)},ps(!(a=t),u=n).fold((function(){return ps(a,s).fold(r(!1),c)}),c)?N.none():t&&Ho.isContentEditableFalse(o.getNode())||!1===t&&Ho.isContentEditableFalse(o.getNode(!0))?Ql(e,t,n,o):t&&Xl(n)||!1===t&&Yl(n)?N.some(Zl.moveToPosition(o)):N.none());var i,a,u,s,c,l}))},tf=function(e,t,n){if(0!==n){var r,o,i,a=e.data.slice(t,t+n),u=t+n>=e.data.length,s=0===t;e.replaceData(t,n,(o=s,i=u,Y((r=a).split(""),(function(e,t){return-1!==" \f\n\r\t\v".indexOf(t)||" "===t?e.previousCharIsSpace||""===e.str&&o||e.str.length===r.length-1&&i?{previousCharIsSpace:!1,str:e.str+" "}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}}),{previousCharIsSpace:!1,str:""}).str))}},nf=function(e,t){var n,r=e.data.slice(t),o=r.length-(n=r,n.replace(/^\s+/g,"")).length;return tf(e,t,o)},rf=function(e,t){return r=e,o=(n=t).container(),i=n.offset(),!1===mu.isTextPosition(n)&&o===r.parentNode&&i>mu.before(r).offset()?mu(t.container(),t.offset()-1):t;var n,r,o,i},of=function(e){return Aa(e.previousSibling)?N.some((t=e.previousSibling,Ho.isText(t)?mu(t,t.data.length):mu.after(t))):e.previousSibling?js.lastPositionIn(e.previousSibling):N.none();var t},af=function(e){return Aa(e.nextSibling)?N.some((t=e.nextSibling,Ho.isText(t)?mu(t,0):mu.before(t))):e.nextSibling?js.firstPositionIn(e.nextSibling):N.none();var t},uf=function(e,t,n){return(r=e,o=t,a=n,r?function(e,t){return af(t).orThunk((function(){return of(t)})).orThunk((function(){return n=e,r=t,js.nextPosition(n,mu.after(r)).fold((function(){return js.prevPosition(n,mu.before(r))}),N.some);var n,r}))}(o,a):function(e,t){return of(t).orThunk((function(){return af(t)})).orThunk((function(){return n=e,r=t,o=mu.before(r.previousSibling?r.previousSibling:r.parentNode),js.prevPosition(n,o).fold((function(){return js.nextPosition(n,mu.after(r))}),N.some);var n,r,o}))}(o,a)).map(i(rf,n));var r,o,a},sf=function(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},cf=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(dr(t))},lf=function(e){if(ml(e)){var t=ir('<br data-mce-bogus="1">');return Mi(e),Pi(e,t),N.some(mu.before(t.dom()))}return N.none()},ff=function(e,t,n,r){void 0===r&&(r=!0);var o,a,u=uf(t,e.getBody(),n.dom()),s=Yi(n,i(cf,e),(o=e.getBody(),function(e){return e.dom()===o})),c=function(e,t,n){var r,o,i,a,u=Wr(e).filter(gr),s=Ur(e).filter(gr);return Bi(e),(r=u,o=s,i=t,a=function(e,t,r){var o,i,a,u,s=e.dom(),c=t.dom(),l=s.data.length;return i=c,a=n,u=Kn((o=s).data).length,o.appendData(i.data),Bi(sr(i)),a&&nf(o,u),r.container()===c?mu(s,l):r},r.isSome()&&o.isSome()&&i.isSome()?N.some(a(r.getOrDie(),o.getOrDie(),i.getOrDie())):N.none()).orThunk((function(){return n&&(u.each((function(e){return t=e.dom(),n=e.dom().length,o=(r=t.data.slice(0,n)).length-Kn(r).length,tf(t,n-o,o);var t,n,r,o})),s.each((function(e){return nf(e.dom(),0)}))),t}))}(n,u,(a=n,xr(e.schema.getTextInlineElements(),dr(a))));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(lf).fold((function(){r&&sf(e,t,c)}),(function(n){r&&sf(e,t,N.some(n))}))},df=function(e,t){var n,r,o,i,a,u;return(n=e.getBody(),r=t,o=e.selection.getRng(),i=gs(r?1:-1,n,o),a=mu.fromRangeStart(i),u=sr(n),!1===r&&Xl(a)?N.some(Zl.remove(a.getNode(!0))):r&&Yl(a)?N.some(Zl.remove(a.getNode())):!1===r&&Yl(a)&&Il(u,a)?Ll(u,a).map((function(e){return Zl.remove(e.getNode())})):r&&Xl(a)&&Bl(u,a)?Hl(u,a).map((function(e){return Zl.remove(e.getNode())})):function(e,t,n){return i=t,a=n.getNode(!1===i),u=i?"after":"before",Ho.isElement(a)&&a.getAttribute("data-mce-caret")===u?(r=t,o=n.getNode(!1===t),r&&Ho.isContentEditableFalse(o.nextSibling)?N.some(Zl.moveToElement(o.nextSibling)):!1===r&&Ho.isContentEditableFalse(o.previousSibling)?N.some(Zl.moveToElement(o.previousSibling)):N.none()).fold((function(){return ef(e,t,n)}),N.some):ef(e,t,n).bind((function(t){return r=e,o=n,t.fold((function(e){return N.some(Zl.remove(e))}),(function(e){return N.some(Zl.moveToElement(e))}),(function(e){return cs(o,e,r)?N.none():N.some(Zl.moveToPosition(e))}));var r,o}));var r,o,i,a,u}(n,r,a)).map((function(n){return n.fold((a=e,u=t,function(e){return a._selectionOverrides.hideFakeCaret(),ff(a,u,sr(e)),!0}),(o=e,i=t,function(e){var t=i?mu.before(e):mu.after(e);return o.selection.setRng(t.toRange()),!0}),(r=e,function(e){return r.selection.setRng(e.toRange()),!0}));var r,o,i,a,u})).getOr(!1)},mf=function(e,t){return e.selection.isCollapsed()?df(e,t):function(e,t){var n,r=e.selection.getNode();return!!Ho.isContentEditableFalse(r)&&(n=sr(e.getBody()),V(Vi(n,".mce-offscreen-selection"),Bi),ff(e,t,sr(e.selection.getNode())),sl(e),!0)}(e,t)},hf=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(Ho.isContentEditableTrue(t)||Ho.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return Ho.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(mu.before(t).toRange())),!0},gf=Ho.isText,pf=function(e){return gf(e)&&e.data[0]===la},vf=function(e){return gf(e)&&e.data[e.data.length-1]===la},bf=function(e){return e.ownerDocument.createTextNode(la)},yf=function(e,t){return e?function(e){if(gf(e.previousSibling))return vf(e.previousSibling)||e.previousSibling.appendData(la),e.previousSibling;if(gf(e))return pf(e)||e.insertData(0,la),e;var t=bf(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(gf(e.nextSibling))return pf(e.nextSibling)||e.nextSibling.insertData(0,la),e.nextSibling;if(gf(e))return vf(e)||e.appendData(la),e;var t=bf(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},xf=i(yf,!0),wf=i(yf,!1),Cf=function(e,t){return Ho.isText(e.container())?yf(t,e.container()):yf(t,e.getNode())},kf=function(e,t){var n=t.get();return n&&e.container()===n&&ga(n)},Tf=function(e,t){return t.fold((function(t){$u.remove(e.get());var n=xf(t);return e.set(n),N.some(mu(n,n.length-1))}),(function(t){return js.firstPositionIn(t).map((function(t){if(kf(t,e))return mu(e.get(),1);$u.remove(e.get());var n=Cf(t,!0);return e.set(n),mu(n,1)}))}),(function(t){return js.lastPositionIn(t).map((function(t){if(kf(t,e))return mu(e.get(),e.get().length-1);$u.remove(e.get());var n=Cf(t,!1);return e.set(n),mu(n,n.length-1)}))}),(function(t){$u.remove(e.get());var n=wf(t);return e.set(n),N.some(mu(n,1))}))},Sf=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return N.none()},Ef=Pl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_f=function(e,t){return ss(t,e)||e},Nf=function(e,t,n){var r=al.normalizeForwards(n),o=_f(t,r.container());return al.findRootInline(e,o,r).fold((function(){return js.nextPosition(o,r).bind(i(al.findRootInline,e,o)).map((function(e){return Ef.before(e)}))}),N.none)},Rf=function(e,t){return null===Lu(e,t)},Of=function(e,t,n){return al.findRootInline(e,t,n).filter(i(Rf,t))},Af=function(e,t,n){var r=al.normalizeBackwards(n);return Of(e,t,r).bind((function(e){return js.prevPosition(e,r).isNone()?N.some(Ef.start(e)):N.none()}))},Pf=function(e,t,n){var r=al.normalizeForwards(n);return Of(e,t,r).bind((function(e){return js.nextPosition(e,r).isNone()?N.some(Ef.end(e)):N.none()}))},Df=function(e,t,n){var r=al.normalizeBackwards(n),o=_f(t,r.container());return al.findRootInline(e,o,r).fold((function(){return js.prevPosition(o,r).bind(i(al.findRootInline,e,o)).map((function(e){return Ef.after(e)}))}),N.none)},Mf=function(e){return!1===al.isRtl(If(e))},Bf=function(e,t,n){return Sf([Nf,Af,Pf,Df],[e,t,n]).filter(Mf)},If=function(e){return e.fold(o,o,o,o)},Lf=function(e){return e.fold(r("before"),r("start"),r("end"),r("after"))},Hf=function(e){return e.fold(Ef.before,Ef.before,Ef.after,Ef.after)},Ff=function(e,t,n,r,o,i){return $a(al.findRootInline(t,n,r),al.findRootInline(t,n,o),(function(t,r){return t!==r&&al.hasSameParentBlock(n,t,r)?Ef.after(e?t:r):i})).getOr(i)},zf=function(e,t){return e.fold(r(!0),(function(e){return r=t,!(Lf(n=e)===Lf(r)&&If(n)===If(r));var n,r}))},Wf=function(e,t){return e?t.fold(n(N.some,Ef.start),N.none,n(N.some,Ef.after),N.none):t.fold(N.none,n(N.some,Ef.before),N.none,n(N.some,Ef.end))},Uf=function(e,t,n,r){var o=al.normalizePosition(e,r),a=Bf(t,n,o);return Bf(t,n,o).bind(i(Wf,e)).orThunk((function(){return o=e,u=t,s=n,c=a,l=r,f=al.normalizePosition(o,l),js.fromPosition(o,s,f).map(i(al.normalizePosition,o)).fold((function(){return c.map(Hf)}),(function(e){return Bf(u,s,e).map(i(Ff,o,u,s,f,e)).filter(i(zf,c))})).filter(Mf);var o,u,s,c,l,f}))},jf=Bf,Vf=Uf,$f=(i(Uf,!1),i(Uf,!0),Hf),qf=function(e){return e.fold(Ef.start,Ef.start,Ef.end,Ef.end)},Yf=function(e,t,n){var r=e?1:-1;return t.setRng(mu(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Xf=function(e,t){var n=t.selection.getRng(),r=e?mu.fromRangeEnd(n):mu.fromRangeStart(n);return!!function(e){return B(e.selection.getSel().modify)}(t)&&(e&&ba(r)?Yf(!0,t.selection,r):!(e||!ya(r))&&Yf(!1,t.selection,r))},Gf=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Kf=function(e){return!1!==e.settings.inline_boundaries},Jf=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Zf=function(e,t,n){return Tf(t,n).map((function(t){return Gf(e,t),n}))},Qf=function(e,t,n){return function(){return!!Kf(t)&&Xf(e,t)}},ed={move:function(e,t,n){return function(){return!!Kf(e)&&(r=e,o=t,a=n,u=r.getBody(),s=mu.fromRangeStart(r.selection.getRng()),c=i(al.isInlineTarget,r),Vf(a,c,u,s).bind((function(e){return Zf(r,o,e)}))).isSome();var r,o,a,u,s,c}},moveNextWord:i(Qf,!0),movePrevWord:i(Qf,!1),setupSelectedState:function(e){var t=Hi(null),n=i(al.isInlineTarget,e);return e.on("NodeChange",(function(r){var o,a,u,s,c;Kf(e)&&(o=n,a=e.dom,u=r.parents,s=q(a.select('*[data-mce-selected="inline-boundary"]'),o),c=q(u,o),V(Z(s,c),i(Jf,!1)),V(Z(c,s),i(Jf,!0)),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=mu.fromRangeStart(e.selection.getRng());mu.isTextPosition(n)&&!1===al.isAtZwsp(n)&&(Gf(e,$u.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var o=q(r,e);V(o,(function(r){var o=mu.fromRangeStart(t.selection.getRng());jf(e,t.getBody(),o).bind((function(e){return Zf(t,n,e)}))}))}}(n,e,t,r.parents))})),t},setCaretPosition:Gf},td=function(e,t){return function(n){return Tf(t,n).map((function(t){return ed.setCaretPosition(e,t),!0})).getOr(!1)}},nd=function(t,n,r,o){var a=t.getBody(),u=i(al.isInlineTarget,t);t.undoManager.ignore((function(){var i,s,c;t.selection.setRng((i=r,s=o,(c=e.document.createRange()).setStart(i.container(),i.offset()),c.setEnd(s.container(),s.offset()),c)),t.execCommand("Delete"),jf(u,a,mu.fromRangeStart(t.selection.getRng())).map(qf).map(td(t,n))})),t.nodeChanged()},rd=function(e,t,n){if(e.selection.isCollapsed()&&!1!==e.settings.inline_boundaries){var o=mu.fromRangeStart(e.selection.getRng());return function(e,t,n,o){var a,u,s=(a=e.getBody(),u=o.container(),ss(u,a)||a),c=i(al.isInlineTarget,e),l=jf(c,s,o);return l.bind((function(e){return n?e.fold(r(N.some(qf(e))),N.none,r(N.some($f(e))),N.none):e.fold(N.none,r(N.some($f(e))),N.none,r(N.some(qf(e))))})).map(td(e,t)).getOrThunk((function(){var r=js.navigate(n,s,o),i=r.bind((function(e){return jf(c,s,e)}));return l.isSome()&&i.isSome()?al.findRootInline(c,s,o).map((function(t){return r=t,!!$a(js.firstPositionIn(r),js.lastPositionIn(r),(function(e,t){var n=al.normalizePosition(!0,e),o=al.normalizePosition(!1,t);return js.nextPosition(r,n).map((function(e){return e.isEqual(o)})).getOr(!0)})).getOr(!0)&&(ff(e,n,sr(t)),!0);var r})).getOr(!1):i.bind((function(i){return r.map((function(r){return n?nd(e,t,o,r):nd(e,t,r,o),!0}))})).getOr(!1)}))}(e,t,n,o)}return!1},od=Rr("start","end"),id=Rr("rng","table","cells"),ad=Pl([{removeTable:["element"]},{emptyCells:["cells"]}]),ud=function(e,t){return Ji(sr(e),"td,th",t)},sd=function(e,t){return Gi(e,"table",t)},cd=function(e){return!1===Ir(e.start(),e.end())},ld=function(e,t){return sd(e.start(),t).bind((function(n){return sd(e.end(),t).bind((function(e){return Ir(n,e)?N.some(n):N.none()}))}))},fd=function(e){return Vi(e,"td,th")},dd=function(e,t){return ld(t,e).isSome()},md=function(e,t){var n,r,o,a,u=i(Ir,e);return(n=t,r=u,o=ud(n.startContainer,r),a=ud(n.endContainer,r),$a(o,a,od).filter(cd).filter((function(e){return dd(r,e)})).orThunk((function(){return function(e,t){var n=ud(t.startContainer,e),r=ud(t.endContainer,e);return t.collapsed?N.none():$a(n,r,od).fold((function(){return n.fold((function(){return r.bind((function(t){return sd(t,e).bind((function(e){return Q(fd(e)).map((function(e){return od(e,t)}))}))}))}),(function(t){return sd(t,e).bind((function(e){return ee(fd(e)).map((function(e){return od(t,e)}))}))}))}),(function(t){return dd(e,t)?N.none():(r=e,sd((n=t).start(),r).bind((function(e){return ee(fd(e)).map((function(e){return od(n.start(),e)}))})));var n,r}))}(r,n)}))).bind((function(e){return ld(t=e,u).map((function(e){return id(t,e,fd(e))}));var t}))},hd=function(e,t){return G(e,(function(e){return Ir(e,t)}))},gd=function(e){return(t=e,$a(hd(t.cells(),t.rng().start()),hd(t.cells(),t.rng().end()),(function(e,n){return t.cells().slice(e,n+1)}))).map((function(t){var n=e.cells();return t.length===n.length?ad.removeTable(e.table()):ad.emptyCells(t)}));var t},pd=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},vd=pd,bd=function(e){return q(function(e){return K(e,(function(e){var t=Wa(e);return t?[sr(t)]:[]}))}(e),So)},yd=function(e,t){var n=function(e){return Vi(e,"td[data-mce-selected],th[data-mce-selected]")}(t),r=bd(e);return 0<n.length?n:r},xd=yd,wd=function(e){return yd(vd(e.selection.getSel()),sr(e.getBody()))},Cd=function(e,t){return V(t,Hc),e.selection.setCursorLocation(t[0].dom(),0),!0},kd=function(e,t){return ff(e,!1,t),!0},Td=function(e,t,n,r){return Ed(t,r).fold((function(){return r=e,function(e,t){return md(e,t).bind(gd)}(t,n).map((function(e){return e.fold(i(kd,r),i(Cd,r))}));var r}),(function(t){return _d(e,t)})).getOr(!1)},Sd=function(e,t){return X(xl(t,e),So)},Ed=function(e,t){return X(xl(t,e),(function(e){return"caption"===dr(e)}))},_d=function(e,t){return Hc(t),e.selection.setCursorLocation(t.dom(),0),N.some(!0)},Nd=function(e,t,n){var r=sr(e.getBody());return Ed(r,n).fold((function(){return function(e,t,n,r){var o=mu.fromRangeStart(e.selection.getRng());return Sd(n,r).bind((function(r){return ml(r)?_d(e,r):(i=e,a=n,u=t,s=r,c=o,js.navigate(u,i.getBody(),c).bind((function(e){return Sd(a,sr(e.getNode())).map((function(e){return!1===Ir(e,s)}))})));var i,a,u,s,c}))}(e,t,r,n)}),(function(n){return o=e,i=t,a=r,u=n,s=mu.fromRangeStart(o.selection.getRng()),ml(u)?_d(o,u):function(e,t,n,r,o){return js.navigate(n,e.getBody(),o).bind((function(i){return u=r,s=n,c=o,l=i,js.firstPositionIn(u.dom()).bind((function(e){return js.lastPositionIn(u.dom()).map((function(t){return s?c.isEqual(e)&&l.isEqual(t):c.isEqual(t)&&l.isEqual(e)}))})).getOr(!0)?_d(e,r):(a=r,Ed(t,sr(i.getNode())).map((function(e){return!1===Ir(e,a)})));var a,u,s,c,l})).or(N.some(!0))}(o,a,i,u,s);var o,i,a,u,s})).getOr(!1)},Rd=function(e,t){var n,r,o,i,a,u=sr(e.selection.getStart(!0)),s=wd(e);return e.selection.isCollapsed()&&0===s.length?Nd(e,t,u):(r=u,o=sr((n=e).getBody()),i=n.selection.getRng(),0!==(a=wd(n)).length?Cd(n,a):Td(n,o,i,r))},Od=sc,Ad=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},Pd=function(e,t,n,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,(function(t){return!!Ad(e,t,n)||t.parentNode===o||!!Bd(e,t,n,r,!0)})),Bd(e,t,n,r))},Dd=function(e,t,n){return!!Od(t,n.inline)||!!Od(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Md=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if(void 0===c.length){for(a in c)if(c.hasOwnProperty(a)){if(u="attributes"===r?e.getAttrib(t,a):lc(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!Od(u,cc(e,uc(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):lc(e,t,c[s]))return n;return n},Bd=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],Dd(e.dom,t,i)&&Md(l,t,i,"attributes",o,r)&&Md(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,s[u]))return;return i}},Id={matchNode:Bd,matchName:Dd,match:function(e,t,n,r){var o;return r?Pd(e,r,t,n):(r=e.selection.getNode(),!!Pd(e,r,t,n)||!((o=e.selection.getStart())===r||!Pd(e,o,t,n)))},matchAll:function(e,t,n){var r,o=[],i={};return r=e.selection.getStart(),e.dom.getParent(r,(function(r){var a,u;for(a=0;a<t.length;a++)u=t[a],!i[u]&&Bd(e,r,u,n)&&(i[u]=!0,o.push(u))}),e.dom.getRoot()),o},canApply:function(e,t){var n,r,o,i,a,u=e.formatter.get(t),s=e.dom;if(u)for(n=e.selection.getStart(),r=dc(s,n),i=u.length-1;0<=i;i--){if(!(a=u[i].selector)||u[i].defaultBlock)return!0;for(o=r.length-1;0<=o;o--)if(s.is(r[o],a))return!0}return!1},matchesUnInheritedFormatSelector:Ad},Ld=function(e,t){return e.splitText(t)},Hd=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&Ho.isText(t)?0<n&&n<t.nodeValue.length&&(t=(r=Ld(t,n)).previousSibling,n<o?(t=r=Ld(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(Ho.isText(t)&&0<n&&n<t.nodeValue.length&&(t=Ld(t,n),n=0),Ho.isText(r)&&0<o&&o<r.nodeValue.length&&(o=(r=Ld(r,o).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},Fd="_mce_caret",zd=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&"\ufeff"!==e.nodeValue||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},Wd=function(e){var t;if(e)for(e=(t=new lo(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},Ud=function(e){var t=ar("span");return Tr(t,{id:Fd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Pi(t,ur("\ufeff")),t},jd=function(e,t,n){void 0===n&&(n=!0);var r,o=e.dom,i=e.selection;if(zd(t))ff(e,!1,sr(t),n);else{var a=i.getRng(),u=o.getParent(t,o.isBlock),s=((r=Wd(t))&&"\ufeff"===r.nodeValue.charAt(0)&&r.deleteData(0,1),r);a.startContainer===s&&0<a.startOffset&&a.setStart(s,a.startOffset-1),a.endContainer===s&&0<a.endOffset&&a.setEnd(s,a.endOffset-1),o.remove(t,!0),u&&o.isEmpty(u)&&Hc(sr(u)),i.setRng(a)}},Vd=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)jd(e,t,n);else if(!(t=Lu(e.getBody(),o.getStart())))for(;t=r.get(Fd);)jd(e,t,!1)},$d=function(e,t,n){var r=e.dom,o=r.getParent(n,i(oc,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(function(e){var t=Vi(e,"br"),n=q(function(e){for(var t=[],n=e.dom();n;)t.push(sr(n)),n=n.lastChild;return t}(e).slice(-1),yo);t.length===n.length&&V(n,Bi)}(sr(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},qd=function(e,t){return e.appendChild(t),t},Yd=function(e,t){var n,r,o=(n=function(e,t){return qd(e,t.cloneNode(!1))},r=t,function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,(function(e){r=n(r,e)})),r);return qd(o,o.ownerDocument.createTextNode("\ufeff"))},Xd=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(dr(t))&&!Iu(t.dom())&&!Ho.isBogus(t.dom())},Gd=function(e){return 1===$r(e).length},Kd=function(e,t){var n,o=sr(e.getBody()),a=sr(e.selection.getStart()),u=q((n=xl(a,o),G(n,vo).fold(r(n),(function(e){return n.slice(0,e)}))),Gd);return ee(u).map((function(n){var r,o=mu.fromRangeStart(e.selection.getRng());return!(!function(e,t,n){return $a(js.firstPositionIn(n),js.lastPositionIn(n),(function(r,o){var i=al.normalizePosition(!0,r),a=al.normalizePosition(!1,o),u=al.normalizePosition(!1,t);return e?js.nextPosition(n,u).map((function(e){return e.isEqual(a)&&t.isEqual(i)})).getOr(!1):js.prevPosition(n,u).map((function(e){return e.isEqual(i)&&t.isEqual(a)})).getOr(!1)})).getOr(!0)}(t,o,n.dom())||Iu((r=n).dom())&&zd(r.dom())||(function(e,t,n,r){var o,a,u,s,c=i(Xd,t),l=j(q(r,c),(function(e){return e.dom()}));if(0===l.length)ff(t,e,n);else{var f=(o=n.dom(),a=l,u=Ud(!1),s=Yd(a,u.dom()),Ri(sr(o),u),Bi(sr(o)),mu(s,0));t.selection.setRng(f.toRange())}}(t,e,n,u),0))})).getOr(!1)},Jd=function(e,t){return!!e.selection.isCollapsed()&&Kd(e,t)},Zd=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},Qd=Ho.isContentEditableTrue,em=Ho.isContentEditableFalse,tm=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},nm=function(e,t){var n,r;return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((r=(n=t).ownerDocument.createRange()).selectNode(n),r)},rm=function(e,t,n){var r=gs(1,e.getBody(),t),o=mu.fromRangeStart(r),i=o.getNode();if(em(i))return tm(1,e,i,!o.isAtEnd(),!1);var a=o.getNode(!0);if(em(a))return tm(1,e,a,!1,!1);var u=e.dom.getParent(o.getNode(),(function(e){return em(e)||Qd(e)}));return em(u)?tm(1,e,u,!1,n):null},om=function(e,t,n){return t&&t.collapsed&&rm(e,t,n)||t},im=function(e,t){e.selection.setRng(t),function(e,t){Q(lu.fromRangeStart(t).getClientRects()).each((function(t){var n,r,o,i,a,u,s,c,l,f=(a=n=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),(u=r=t).left>a.left&&u.right<a.right?0:u.left<a.left?u.left-a.left:u.right-a.right),d=(o=n,(i=r).top>o.top&&i.bottom<o.bottom?0:i.top<o.top?i.top-o.top:i.bottom-o.bottom);c=0!==f?0<f?f+4:f-4:0,l=0!==d?0<d?d+4:d-4:0,(s=e).inline?(s.getBody().scrollLeft+=c,s.getBody().scrollTop+=l):s.getWin().scrollBy(c,l)}))}(e,e.selection.getRng())},am=function(e,t,n,r,o,i){var a,u,s=tm(r,e,i.getNode(!o),o,!0);if(t.collapsed){var c=t.cloneRange();o?c.setEnd(s.startContainer,s.startOffset):c.setStart(s.endContainer,s.endOffset),c.deleteContents()}else t.deleteContents();return e.selection.setRng(s),a=e.dom,u=n,Ho.isText(u)&&0===u.data.length&&a.remove(u),!0},um=function(e,t){return function(e,t){var n=e.selection.getRng();if(!Ho.isText(n.commonAncestorContainer))return!1;var r=t?fu.Forwards:fu.Backwards,o=Ds(e.getBody()),a=i(ys,o.next),u=i(ys,o.prev),s=t?a:u,c=t?Yl:Xl,l=vs(r,e.getBody(),n),f=al.normalizePosition(t,s(l));if(!f)return!1;if(c(f))return am(e,n,l.getNode(),r,t,f);var d=s(f);return!!(d&&c(d)&&xs(f,d))&&am(e,n,l.getNode(),r,t,d)}(e,t)},sm=function(e,t){e.getDoc().execCommand(t,!1,null)},cm=function(e){return function(t,n){return N.from(n).map(sr).filter(hr).bind((function(n){return function(e,t,n){var r=function(t){return n=e,r=t.dom(),o=Nr(r,n),N.from(o).filter((function(e){return 0<e.length}));var n,r,o};return Xi(sr(n),(function(e){return r(e).isSome()}),(function(e){return Ir(sr(t),e)})).bind(r)}(e,t,n.dom()).or((r=e,o=n.dom(),N.from(xi.DOM.getStyle(o,r,!0))));var r,o})).getOr("")}},lm={getFontSize:cm("font-size"),getFontFamily:n((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),cm("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,r=t||0,o=Math.pow(10,r),Math.round(n*o)/o+"pt"):e;var n,r,o}},fm=function(e){return js.firstPositionIn(e.getBody()).map((function(e){var t=e.container();return Ho.isText(t)?t.parentNode:t}))},dm=function(e){return N.from(e.selection.getRng()).bind((function(t){var n,r;return r=e.getBody(),(n=t).startContainer===r&&0===n.startOffset?N.none():N.from(e.selection.getStart(!0))}))},mm=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var r=function(e){return Xt.explode(e.getParam("font_size_style_values",""))}(e),o=function(e){return Xt.explode(e.getParam("font_size_classes",""))}(e);return o?o[n-1]||t:r[n-1]||t}return t}return t},hm=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},gm=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},pm=function(e,t,n){return gm(e,t,(function(e){return e.nodeName===n}))},vm=function(e){return e&&"TABLE"===e.nodeName},bm=function(e,t,n){for(var r=new lo(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(Ho.isBr(t))return!0},ym=function(e,t,n,r,o){var i,a,u,s,c,l,f=e.getRoot(),d=e.schema.getNonEmptyElements();if(u=e.getParent(o.parentNode,e.isBlock)||f,r&&Ho.isBr(o)&&t&&e.isEmpty(u))return N.some(lu(o.parentNode,e.nodeIndex(o)));for(i=new lo(o,u);s=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(s)||(l=f,pa(c=s)&&!1===gm(c,l,Iu)))return N.none();if(Ho.isText(s)&&0<s.nodeValue.length)return!1===pm(s,f,"A")?N.some(lu(s,r?s.nodeValue.length:0)):N.none();if(e.isBlock(s)||d[s.nodeName.toLowerCase()])return N.none();a=s}return n&&a?N.some(lu(a,0)):N.none()},xm=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,m=e.getRoot(),h=!1;if(o=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"],l=Ho.isElement(o)&&i===o.childNodes.length,s=e.schema.getNonEmptyElements(),c=n,pa(o))return N.none();if(Ho.isElement(o)&&i>o.childNodes.length-1&&(c=!1),Ho.isDocument(o)&&(o=m,i=0),o===m){if(c&&(u=o.childNodes[0<i?i-1:0])){if(pa(u))return N.none();if(s[u.nodeName]||vm(u))return N.none()}if(o.hasChildNodes()){if(i=Math.min(!c&&0<i?i-1:i,o.childNodes.length-1),o=o.childNodes[i],i=Ho.isText(o)&&l?o.data.length:0,!t&&o===m.lastChild&&vm(o))return N.none();if(function(e,t){for(;t&&t!==e;){if(Ho.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(m,o)||pa(o))return N.none();if(o.hasChildNodes()&&!1===vm(o)){a=new lo(u=o,m);do{if(Ho.isContentEditableFalse(u)||pa(u)){h=!1;break}if(Ho.isText(u)&&0<u.nodeValue.length){i=c?0:u.nodeValue.length,o=u,h=!0;break}if(s[u.nodeName.toLowerCase()]&&(!(f=u)||!/^(TD|TH|CAPTION)$/.test(f.nodeName))){i=e.nodeIndex(u),o=u.parentNode,c||i++,h=!0;break}}while(u=c?a.next():a.prev())}}}return t&&(Ho.isText(o)&&0===i&&ym(e,l,t,!0,o).each((function(e){o=e.container(),i=e.offset(),h=!0})),Ho.isElement(o)&&((u=o.childNodes[i])||(u=o.childNodes[i-1]),!u||!Ho.isBr(u)||("A",(d=u).previousSibling&&"A"===d.previousSibling.nodeName)||bm(e,u,!1)||bm(e,u,!0)||ym(e,l,t,!0,u).each((function(e){o=e.container(),i=e.offset(),h=!0})))),c&&!t&&Ho.isText(o)&&i===o.nodeValue.length&&ym(e,l,t,!1,o).each((function(e){o=e.container(),i=e.offset(),h=!0})),h?N.some(lu(o,i)):N.none()},wm=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=lu.fromRangeStart(t);return xm(e,n,!0,r).each((function(e){n&&lu.isAbove(o,e)||r.setStart(e.container(),e.offset())})),n||xm(e,n,!1,r).each((function(e){r.setEnd(e.container(),e.offset())})),n&&r.collapse(!0),hm(t,r)?N.none():N.some(r)},Cm=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},km=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Tm=function(e,t){var n=ar("br");Ri(sr(t),n),e.undoManager.add()},Sm=function(e,t){Em(e.getBody(),t)||Oi(sr(t),ar("br"));var n=ar("br");Oi(sr(t),n),Cm(e.dom,e.selection,n.dom()),km(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Em=function(e,t){return n=mu.after(t),!!Ho.isBr(n.getNode())||js.nextPosition(e,mu.after(t)).map((function(e){return Ho.isBr(e.getNode())})).getOr(!1);var n},_m=function(e){return e&&"A"===e.nodeName&&"href"in e},Nm=function(e){return e.fold(r(!1),_m,_m,r(!1))},Rm=function(e,n){n.fold(t,i(Tm,e),i(Sm,e),t)},Om=function(e,t){var n,r,o,a=(n=e,r=i(al.isInlineTarget,n),o=mu.fromRangeStart(n.selection.getRng()),jf(r,n.getBody(),o).filter(Nm));a.isSome()?a.each(i(Rm,e)):function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();wm(i,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var u=a.startOffset,s=a.startContainer;if(1===s.nodeType&&s.hasChildNodes()){var c=u>s.childNodes.length-1;s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s,u=c&&3===s.nodeType?s.nodeValue.length:0}var l=i.getParent(s,i.isBlock),f=l?i.getParent(l.parentNode,i.isBlock):null,d=f?f.nodeName.toUpperCase():"",m=t&&t.ctrlKey;"LI"!==d||m||(l=f),s&&3===s.nodeType&&u>=s.nodeValue.length&&(function(e,t,n){for(var r,o=new lo(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0}(e.schema,s,l)||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=i.create("br"),Tu(i,a,n),Cm(i,o,n),km(i,o,n,r),e.undoManager.add()}(e,t)},Am={create:Rr("start","soffset","finish","foffset")},Pm=Pl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Dm=(Pm.before,Pm.on,Pm.after,function(e){return e.fold(o,o,o)}),Mm=Pl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Bm={domRange:Mm.domRange,relative:Mm.relative,exact:Mm.exact,exactFromRange:function(e){return Mm.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return sr(e.startContainer)},relative:function(e,t){return Dm(e)},exact:function(e,t,n,r){return e}});return Fr(t)},range:Am.create},Im=rr.detect().browser,Lm=function(e,t){var n=gr(t)?Nc(t).length:$r(t).length+1;return n<e?n:e<0?0:e},Hm=function(e){return Bm.range(e.start(),Lm(e.soffset(),e.start()),e.finish(),Lm(e.foffset(),e.finish()))},Fm=function(e,t){return!Ho.isRestrictedNode(t.dom())&&(Lr(e,t)||Ir(e,t))},zm=function(e){return function(t){return Fm(e,t.start())&&Fm(e,t.finish())}},Wm=function(e){return Bm.range(sr(e.startContainer),e.startOffset,sr(e.endContainer),e.endOffset)},Um=function(e){return function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?N.from(t.getRangeAt(0)):N.none()).map(Wm)}(Fr(e).dom()).filter(zm(e))},jm=function(e,t){return N.from(t).filter(zm(e)).map(Hm)},Vm=function(t){var n=e.document.createRange();try{return n.setStart(t.start().dom(),t.soffset()),n.setEnd(t.finish().dom(),t.foffset()),N.some(n)}catch(e){return N.none()}},$m=function(e){return(e.bookmark?e.bookmark:N.none()).bind(i(jm,sr(e.getBody()))).bind(Vm)},qm=function(e){var t=function(e){return!0===e.inline||Im.isIE()}(e)?Um(sr(e.getBody())):N.none();e.bookmark=t.isSome()?t:e.bookmark},Ym=$m,Xm=function(e){return wo(e)||Co(e)},Gm=function(e,t){var n=e.settings,r=e.dom,o=e.selection,i=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],u=parseInt(n.indentation,10),s=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||i.apply("div"),V(function(e){return q(j(e.selection.getSelectedBlocks(),sr),(function(e){return!Xm(e)&&!zr(e).map(Xm).getOr(!1)}))}(e),(function(e){!function(e,t,n,r,o,i){if("false"!==e.getContentEditable(i)){var a=n?"margin":"padding";if(a="TABLE"===i.nodeName?"margin":a,a+="rtl"===e.getStyle(i,"direction",!0)?"Right":"Left","outdent"===t){var u=Math.max(0,parseInt(i.style[a]||0,10)-r);e.setStyle(i,a,u?u+o:"")}else u=parseInt(i.style[a]||0,10)+r+o,e.setStyle(i,a,u)}}(r,t,s,u,a,e.dom())}))},Km=Xt.each,Jm=Xt.extend,Zm=Xt.map,Qm=Xt.inArray;function eh(e){var t,n,r,o,i={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",(function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter}));var u=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=i.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},s=function(e,t){t=t||"exec",Km(e,(function(e,n){Km(n.toLowerCase().split(","),(function(n){i[t][n]=e}))}))},c=function(t,n,r){t=t.toLowerCase(),i.value[t]=function(){return n.call(r||e)}};Jm(this,{execCommand:function(t,n,r,o){var a,u,s=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?function(e){$m(e).each((function(t){e.selection.setRng(t)}))}(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(u=t.toLowerCase(),a=i.exec[u])return a(u,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(Km(e.plugins,(function(o){if(o.execCommand&&o.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!(s=!0)})),s)return s;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{s=e.getDoc().execCommand(t,n,r)}catch(e){}return!!s&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:u,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=i.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),i.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:s,addCommand:function(t,n,r){t=t.toLowerCase(),i.exec[t]=function(t,o,i,a){return n.call(r||e,o,i,a)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),i.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:c,hasCustomCommand:function(e){return e=e.toLowerCase(),!!i.exec[e]}});var l=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},f=function(e){return r.match(e)},d=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},m=function(e){o=n.getBookmark(e)},h=function(){n.moveToBookmark(o)};s({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{l(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");fe.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Km("left,center,right,justify".split(","),(function(e){t!==e&&r.remove("align"+e)})),"none"!==t&&d("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,o;l(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(o=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)&&(m(),t.split(o,r),h()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){d(e)},"ForeColor,HiliteColor":function(e,t,n){d(e,n)},FontName:function(t,n,r){var o,i;i=r,(o=e).formatter.toggle("fontname",{value:mm(o,i)}),o.nodeChanged()},FontSize:function(t,n,r){var o,i;i=r,(o=e).formatter.toggle("fontsize",{value:mm(o,i)}),o.nodeChanged()},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,t,n){return d(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,o){var i=o||n.getNode();i!==e.getBody()&&(m(),e.dom.remove(i,!0),h())},mceSelectNodeDepth:function(r,o,i){var a=0;t.getParent(n.getNode(),(function(e){if(1===e.nodeType&&a++===i)return n.select(e),!1}),e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){!function(e,t){var n,r,o="string"!=typeof(n=t)?(r=Xt.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:r}):{content:n,details:{}};qc(e,o.content,o.details)}(e,r)},mceInsertRawHTML:function(t,r,o){n.setContent("tiny_mce_marker");var i=e.getContent();e.setContent(i.replace(/tiny_mce_marker/g,(function(){return o})))},mceToggleFormat:function(e,t,n){d(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){Gm(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,i){var a;"string"==typeof i&&(i={href:i}),a=t.getParent(n.getNode(),"a"),i.href=i.href.replace(" ","%20"),a&&i.href||r.remove("link"),i.href&&r.apply("link",i,a)},selectAll:function(){var e=t.getParent(n.getStart(),Ho.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){!function(e){mf(e,!1)||um(e,!1)||rd(e,!1)||Nl(e,!1)||Rd(e)||Al(e)||Jd(e,!1)||(sm(e,"Delete"),sl(e))}(e)},forwardDelete:function(){!function(e){mf(e,!0)||um(e,!0)||rd(e,!0)||Nl(e,!0)||Rd(e)||Al(e)||Jd(e,!0)||sm(e,"ForwardDelete")}(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Om(e,r),!0}});var g=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),i=Zm(o,(function(t){return!!r.matchNode(t,e)}));return-1!==Qm(i,!0)}};s({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return f(e)},mceBlockQuote:function(){return f("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return u("InsertUnorderedList")||u("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),s({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),c("FontName",(function(){return dm(t=e).fold((function(){return fm(t).map((function(e){return lm.getFontFamily(t.getBody(),e)})).getOr("")}),(function(e){return lm.getFontFamily(t.getBody(),e)}));var t}),this),c("FontSize",(function(){return dm(t=e).fold((function(){return fm(t).map((function(e){return lm.getFontSize(t.getBody(),e)})).getOr("")}),(function(e){return lm.getFontSize(t.getBody(),e)}));var t}),this)}var th=Xt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),nh=function(e){var t,n,r=this,o={},i=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||i;var u=function(e,t,a,u){var s,c,l;if(!1===t&&(t=i),t)for(t={func:t},u&&Xt.extend(t,u),l=(c=e.toLowerCase().split(" ")).length;l--;)e=c[l],(s=o[e])||(s=o[e]=[],n(e,!0)),a?s.unshift(t):s.push(t);return r},s=function(e,t){var i,a,u,s,c;if(e)for(i=(s=e.toLowerCase().split(" ")).length;i--;){if(e=s[i],a=o[e],!e){for(u in o)n(u,!1),delete o[u];return r}if(a){if(t)for(c=a.length;c--;)a[c].func===t&&(a=a.slice(0,c).concat(a.slice(c+1)),o[e]=a);else a.length=0;a.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return r};r.fire=function(n,r){var u,c,l,f;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=i,r.isPropagationStopped=i,r.isImmediatePropagationStopped=i),e.beforeFire&&e.beforeFire(r),u=o[n])for(c=0,l=u.length;c<l;c++){if((f=u[c]).once&&s(n,f.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===f.func.call(t,r))return r.preventDefault(),r}return r},r.on=u,r.off=s,r.once=function(e,t,n){return u(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)}};nh.isNative=function(e){return!!th[e.toLowerCase()]};var rh,oh=function(e){return e._eventDispatcher||(e._eventDispatcher=new nh({scope:e,toggleEvent:function(t,n){nh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},ih={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;if(t=oh(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return oh(this).on(e,t,n)},off:function(e,t){return oh(this).off(e,t)},once:function(e,t){return oh(this).once(e,t)},hasEventListeners:function(e){return oh(this).has(e)}},ah=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},uh=function(e,t,n){var r,o;Ui(e,t)&&!1===n?(o=t,zi(r=e)?r.dom().classList.remove(o):function(e,t){return o=t,0<(i=q(Fi(n=e,r="class"),(function(e){return e!==o}))).length?kr(n,r,i.join(" ")):Er(n,r),!1;var n,r,o,i}(r,o),function(e){0===(zi(e)?e.dom().classList:Fi(e,"class")).length&&Er(e,"class")}(r)):n&&Wi(e,t)},sh=function(e,t){uh(sr(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",ah(e,"StyleWithCSS",!1),ah(e,"enableInlineTableEditing",!1),ah(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},ch=xi.DOM,lh=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=ch.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},fh=function(e,t,n){var r;(r=e).hidden||r.readonly?!0===e.readonly&&n.preventDefault():e.fire(t,n)},dh=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=lh(e,t),e.settings.event_root){if(rh||(rh={},e.editorManager.on("removeEditor",(function(){var t;if(!e.editorManager.activeEditor&&rh){for(t in rh)e.dom.unbind(lh(e,t));rh=null}}))),rh[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),i=o.length;i--;){var a=o[i].getBody();(a===r||ch.isChildOf(r,a))&&fh(o[i],t,n)}},rh[t]=r,ch.bind(n,t,r)}else r=function(n){fh(e,t,n)},ch.bind(n,t,r),e.delegates[t]=r},mh={bindPendingEventDelegates:function(){var e=this;Xt.each(e._pendingNativeEvents,(function(t){dh(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?dh(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(lh(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(lh(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},hh=mh=Xt.extend({},ih,mh),gh=Rr("sections","settings"),ph=rr.detect().deviceType.isTouch(),vh=["lists","autolink","autosave"],bh={theme:"mobile"},yh=function(e){var t=P(e)?e.join(" "):e,n=j(O(t)?t.split(" "):[],Gn);return q(n,(function(e){return 0<e.length}))},xh=function(e,t){return e.sections().hasOwnProperty(t)},wh=function(e,t,n,r){var o,a=yh(n.forced_plugins),u=yh(r.plugins),s=(o=e&&xh(t,"mobile")?q(u,i(W,vh)):u,[].concat(yh(a)).concat(yh(o)));return Xt.extend(r,{plugins:s.join(" ")})},Ch=function(e,t,n){return N.from(t.settings[n]).filter(e)},kh=Xt.each,Th=Xt.explode,Sh={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Eh=Xt.makeMap("alt,ctrl,shift,meta,access");function _h(e){var t={},n=[],r=function(e){var t,n,r={};for(n in kh(Th(e,"+"),(function(e){e in Eh?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Sh[e]||e.toUpperCase().charCodeAt(0))})),t=[r.keyCode],Eh)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,fe.mac?r.ctrl=!0:r.shift=!0),r.meta&&(fe.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},o=function(t,n,o,i){var a;return(a=Xt.map(Th(t,">"),r))[a.length-1]=Xt.extend(a[a.length-1],{func:o,scope:i||e}),Xt.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},i=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",(function(e){var r,o;((o=e).altKey||o.ctrlKey||o.metaKey||"keydown"===(r=e).type&&112<=r.keyCode&&r.keyCode<=123)&&!e.isDefaultPrevented()&&(kh(t,(function(t){if(i(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0})),i(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))})),this.add=function(n,r,i,a){var u;return"string"==typeof(u=i)?i=function(){e.execCommand(u,!1,null)}:Xt.isArray(u)&&(i=function(){e.execCommand(u[0],u[1],u[2])}),kh(Th(Xt.trim(n.toLowerCase())),(function(e){var n=o(e,r,i,a);t[n.id]=n})),!0},this.remove=function(e){var n=o(e);return!!t[n.id]&&(delete t[n.id],!0)}}var Nh=function(e){var t=Hr(e).dom();return e.dom()===t.activeElement},Rh=function(e,t){(function(e,t){return(n=t,n.collapsed?N.from(Ua(n.startContainer,n.startOffset)).map(sr):N.none()).bind((function(t){return To(t)?N.some(t):!1===Lr(e,t)?N.some(e):N.none()}));var n})(sr(e.getBody()),t).bind((function(e){return js.firstPositionIn(e.dom())})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},Oh=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Ah=function(t){var n,r=t.getBody();return r&&(n=sr(r),Nh(n)||function(t){return(n=Hr(t),r=void 0!==n?n.dom():e.document,N.from(r.activeElement).map(sr)).filter((function(e){return t.dom().contains(e.dom())}));var n,r}(n).isSome())},Ph=function(e){return e.inline?Ah(e):(t=e).iframeElement&&Nh(sr(t.iframeElement));var t},Dh=function(e){return e.editorManager.setActive(e)},Mh=Ph,Bh=function(e,t){return t.dom()[e]},Ih=function(e,t){return parseInt(_r(t,e),10)},Lh=i(Bh,"clientWidth"),Hh=i(Bh,"clientHeight"),Fh=i(Ih,"margin-top"),zh=i(Ih,"margin-left"),Wh=function(e,t,n){var r,o,i,a,u,s,c,l,f,d,m=sr(e.getBody()),h=e.inline?m:sr(m.dom().ownerDocument.documentElement),g=(r=e.inline,i=t,a=n,u=(o=h).dom().getBoundingClientRect(),{x:i-(r?u.left+o.dom().clientLeft+zh(o):0),y:a-(r?u.top+o.dom().clientTop+Fh(o):0)});return c=g.x,l=g.y,f=Lh(s=h),d=Hh(s),0<=c&&0<=l&&c<=f&&l<=d};function Uh(e){var t,n=[],r=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},o=function(){0<n.length&&r().reposition(n)},i=function(e){G(n,(function(t){return t===e})).each((function(e){n.splice(e,1)}))},a=function(t){if(!e.removed&&function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),N.from(t).map(sr)).map((function(e){return Lr(Hr(e),e)})).getOr(!1)}(e))return X(n,(function(e){return n=r().getArgs(e),o=t,!(n.type!==o.type||n.text!==o.text||n.progressBar||n.timeout||o.progressBar||o.timeout);var n,o})).getOrThunk((function(){e.editorManager.setActive(e);var a,u=r().open(t,(function(){i(u),o()}));return a=u,n.push(a),o(),u}))};return(t=e).on("SkinLoaded",(function(){var e=t.settings.service_message;e&&a({text:e,type:"warning",timeout:0,icon:""})})),t.on("ResizeEditor ResizeWindow",(function(){pe.requestAnimationFrame(o)})),t.on("remove",(function(){V(n.slice(),(function(e){r().close(e)}))})),{open:a,close:function(){N.from(n[0]).each((function(e){r().close(e),i(e),o()}))},getNotifications:function(){return n}}}function jh(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(n){var r;t.push(n),r=n,e.fire("OpenWindow",{win:r})},i=function(n){G(t,(function(e){return e===n})).each((function(r){var o;t.splice(r,1),o=n,e.fire("CloseWindow",{win:o}),0===t.length&&e.focus()}))},a=function(){return N.from(t[t.length-1])};return e.on("remove",(function(){V(t.slice(0),(function(e){n().close(e)}))})),{windows:t,open:function(t,r){e.editorManager.setActive(e),qm(e);var a=n().open(t,r,i);return o(a),a},alert:function(e,t,a){var u=n().alert(e,r(a||this,t),i);o(u)},confirm:function(e,t,a){var u=n().confirm(e,r(a||this,t),i);o(u)},close:function(){a().each((function(e){n().close(e),i(e)}))},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each((function(t){n().setParams(t,e)}))},getWindows:function(){return t}}}var Vh={},$h="en",qh={setCode:function(e){e&&($h=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return $h},rtl:!1,add:function(e,t){var n=Vh[e];for(var r in n||(Vh[e]=n={}),t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=Vh[$h]||{},n=function(e){return Xt.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||Xt.is(e,"undefined")},o=function(e){return e=n(e),Xt.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Xt.is(e,"object")&&Xt.hasOwn(e,"raw"))return n(e.raw);if(Xt.is(e,"array")){var i=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return Xt.hasOwn(i,t)?n(i[t]):e}))}return o(e).replace(/{context:\w+}$/,"")},data:Vh},Yh=Ni.PluginManager,Xh=function(e,t){e.notificationManager.open({type:"error",text:t})},Gh=function(e,t){e._skinLoaded?Xh(e,t):e.on("SkinLoaded",(function(){Xh(e,t)}))},Kh=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.window.console;o&&(o.error?o.error.apply(o,arguments):o.log.apply(o,arguments))},Jh=function(e,t){Gh(e,function(e,t){var n=function(e,t){for(var n in Yh.urls)if(Yh.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?qh.translate(["Failed to load plugin: {0} from url {1}",n,t]):qh.translate(["Failed to load plugin url: {0}",t])}(e,t))},Zh=function(e,t,n){var r=qh.translate(["Failed to initialize plugin: {0}",t]);Kh(r,n),Gh(e,r)},Qh=function(e,t){Gh(e,qh.translate(["Failed to upload image: {0}",t]))},eg=Gh,tg=Kh,ng=Ni.PluginManager,rg=Ni.ThemeManager;function og(){return new(re("XMLHttpRequest"))}function ig(t,n){var r={},o=function(t,r,o,i){var a,u;(a=og()).open("POST",n.url),a.withCredentials=n.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e,t,i;a.status<200||300<=a.status?o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?r((t=n.basePath,i=e.location,t?t.replace(/\/$/,"")+"/"+i.replace(/^\//,""):i)):o("Invalid JSON: "+a.responseText)},(u=new e.FormData).append("file",t.blob(),t.filename()),a.send(u)},i=function(e,t){return{url:t,blobInfo:e,status:!0}},a=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},u=function(e,t){Xt.each(r[e],(function(e){e(t)})),delete r[e]};return!1===B(n.handler)&&(n.handler=o),{upload:function(e,s){return n.url||n.handler!==o?function(e,o){return e=Xt.grep(e,(function(e){return!t.isUploaded(e.blobUri())})),de.all(Xt.map(e,(function(e){return t.isPending(e.blobUri())?(f=e.blobUri(),new de((function(e){r[f]=r[f]||[],r[f].push(e)}))):(s=e,c=n.handler,l=o,t.markPending(s.blobUri()),new de((function(e){var n;try{var r=function(){n&&n.close()};c(s,(function(n){r(),t.markUploaded(s.blobUri(),n),u(s.blobUri(),i(s,n)),e(i(s,n))}),(function(n){r(),t.removeFailed(s.blobUri()),u(s.blobUri(),a(s,n)),e(a(s,n))}),(function(e){e<0||100<e||(n||(n=l()),n.progressBar.value(e))}))}catch(t){e(a(s,t.message))}})));var s,c,l,f})))}(e,s):new de((function(e){e([])}))}}}var ag=function(e){var t,n,r=decodeURIComponent(e).split(",");return(n=/data:([^;]+)/.exec(r[0]))&&(t=n[1]),{type:t,data:r[1]}},ug=function(t){return new de((function(n){var r,o,i,a,u=ag(t);try{r=function(e){return re("atob")(e)}(u.data)}catch(t){return void n(new e.Blob([]))}for(a=r.length,o=new(re("Uint8Array"))(a),i=0;i<o.length;i++)o[i]=r.charCodeAt(i);n(new e.Blob([o],{type:u.type}))}))},sg=function(e){return 0===e.indexOf("blob:")?(t=e,new de((function(e,n){var r=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var o=og();o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200===this.status?e(this.response):r()},o.onerror=r,o.send()}catch(e){r()}}))):0===e.indexOf("data:")?ug(e):null;var t},cg=ag,lg=0,fg=function(e){return(e||"blobid")+lg++},dg=function(e,t,n,r){var o,i;0!==t.src.indexOf("blob:")?(o=cg(t.src).data,(i=e.findFirst((function(e){return e.base64()===o})))?n({image:t,blobInfo:i}):sg(t.src).then((function(r){i=e.create(fg(),r,o),e.add(i),n({image:t,blobInfo:i})}),(function(e){r(e)}))):(i=e.getByUri(t.src))?n({image:t,blobInfo:i}):sg(t.src).then((function(r){(function(e){return new de((function(t){var n=new(re("FileReader"));n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}))})(r).then((function(a){o=cg(a).data,i=e.create(fg(),r,o),e.add(i),n({image:t,blobInfo:i})}))}),(function(e){r(e)}))},mg=0,hg=function(e){return e+mg+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t};function gg(e){var t,n,o,i,a,u,s,c,l,f=(t=[],n=function(e){var t,n,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||hg("blobid"),n=e.name||t,{id:r(t),name:r(n),filename:r(n+"."+(o=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[o.toLowerCase()]||"dat")),blob:r(e.blob),base64:r(e.base64),blobUri:r(e.blobUri||ie(e.blob)),uri:r(e.uri)}},{create:function(e,t,r,o){if(O(e))return n({id:e,name:o,blob:t,base64:r});if(A(e))return n(e);throw new Error("Unknown input type")},add:function(e){o(e.id())||t.push(e)},get:o=function(e){return i((function(t){return t.id()===e}))},getByUri:function(e){return i((function(t){return t.blobUri()===e}))},findFirst:i=function(e){return q(t,e)[0]},removeByUri:function(e){t=q(t,(function(t){return t.blobUri()!==e||(ae(t.blobUri()),!1)}))},destroy:function(){V(t,(function(e){ae(e.blobUri())})),t=[]}}),d=(s={},c=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:l=function(e){return e in s},getResultUri:function(e){var t=s[e];return t?t.resultUri:null},isPending:function(e){return!!l(e)&&1===s[e].status},isUploaded:function(e){return!!l(e)&&2===s[e].status},markPending:function(e){s[e]=c(1,null)},markUploaded:function(e,t){s[e]=c(2,t)},removeFailed:function(e){delete s[e]},destroy:function(){s={}}}),m=[],h=function(t){return function(n){return e.selection?t(n):[]}},g=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},p=function(e,t,n){return e=g(e,'src="'+t+'"','src="'+n+'"'),g(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},v=function(t,n){V(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=j(e.fragments,(function(e){return p(e,t,n)})):e.content=p(e.content,t,n)}))},b=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},y=function(t){return a||(a=ig(d,{url:el(e),basePath:tl(e),credentials:nl(e),handler:rl(e)})),C().then(h((function(n){var r;return r=j(n,(function(e){return e.blobInfo})),a.upload(r,b).then(h((function(r){var o=j(r,(function(t,r){var o=n[r].image;return t.status&&function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")}(e)?function(t,n){f.removeByUri(t.src),v(t.src,n),e.$(t).attr({src:Qc(e)?n+"?"+(new Date).getTime():n,"data-mce-src":e.convertURL(n,"src")})}(o,t.url):t.error&&Qh(e,t.error),{element:o,status:t.status}}));return t&&t(o),o})))})))},x=function(t){if(Zc(e))return y(t)},w=function(t){return!1!==J(m,(function(e){return e(t)}))&&(0!==t.getAttribute("src").indexOf("data:")||function(e){return e.getParam("images_dataimg_filter",r(!0),"function")}(e)(t))},C=function(){var t,n,o;return u||(t=d,n=f,o={},u={findAll:function(e,i){var a;i||(i=r(!0)),a=q(function(e){return e?te(e.getElementsByTagName("img")):[]}(e),(function(e){var n=e.src;return!!fe.fileApi&&!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!n||n===fe.transparentSrc)&&(0===n.indexOf("blob:")?!t.isUploaded(n)&&i(e):0===n.indexOf("data:")&&i(e))}));var u=j(a,(function(e){if(o[e.src])return new de((function(t){o[e.src].then((function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));var t=new de((function(t,r){dg(n,e,t,r)})).then((function(e){return delete o[e.image.src],e})).catch((function(t){return delete o[e.src],t}));return o[e.src]=t}));return de.all(u)}}),u.findAll(e.getBody(),w).then(h((function(t){return t=q(t,(function(t){return"string"!=typeof t||(eg(e,t),!1)})),V(t,(function(e){v(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t})))},k=function(t){return t.replace(/src="(blob:[^"]+)"/g,(function(t,n){var r=d.getResultUri(n);if(r)return'src="'+r+'"';var o=f.getByUri(n);return o||(o=Y(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t}))};return e.on("setContent",(function(){Zc(e)?x():C()})),e.on("RawSaveContent",(function(e){e.content=k(e.content)})),e.on("getContent",(function(e){e.source_view||"raw"===e.format||(e.content=k(e.content))})),e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){V(e,(function(e){var t=e.attr("src");if(!f.getByUri(t)){var n=d.getResultUri(t);n&&e.attr("src",n)}}))}))})),{blobCache:f,addFilter:function(e){m.push(e)},uploadImages:y,uploadImagesAuto:x,scanForImages:C,destroy:function(){f.destroy(),d.destroy(),u=a=null}}}var pg=function(e,t){return e.hasOwnProperty(t.nodeName)},vg=function(e,t){if(Ho.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||pg(e,t.nextSibling)))return!0}return!1},bg=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=e.settings,m=e.dom,h=e.selection,g=e.schema,p=g.getBlockElements(),v=h.getStart(),b=e.getBody();if(f=d.forced_root_block,v&&Ho.isElement(v)&&f&&(l=b.nodeName.toLowerCase(),g.isValidChild(l,f.toLowerCase())&&(y=p,x=b,!U(yl(sr(v),sr(x)),(function(e){return pg(y,e.dom())}))))){var y,x,w,C;for(n=(t=h.getRng()).startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,c=Mh(e),v=b.firstChild;v;)if(w=p,C=v,Ho.isText(C)||Ho.isElement(C)&&!pg(w,C)&&!Zs(C)){if(vg(p,v)){v=(u=v).nextSibling,m.remove(u);continue}a||(a=m.create(f,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),s=!0),v=(u=v).nextSibling,a.appendChild(u)}else a=null,v=v.nextSibling;s&&c&&(t.setStart(n,r),t.setEnd(o,i),h.setRng(t),e.nodeChanged())}},yg=function(e){e.settings.forced_root_block&&e.on("NodeChange",i(bg,e))},xg=function(e){return Yr(e).fold(r([e]),(function(t){return[e].concat(xg(t))}))},wg=function(e){return Xr(e).fold(r([e]),(function(t){return"br"===dr(t)?Wr(t).map((function(t){return[e].concat(wg(t))})).getOr([]):[e].concat(wg(t))}))},Cg=function(e,t,n,r){var o=n,i=new lo(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Xt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(fe.ie&&fe.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},kg=function(e){var t=e.selection.getSel();return t&&0<t.rangeCount};function Tg(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",(function(n){var r,o;o={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&hm(o,t)||e.fire("SelectionChange"),t=o})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!fe.range&&e.selection.isCollapsed()||kg(e)&&!function(t){var r,o;if((o=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=o.length;0<=r&&o[r]===n[r];r--);if(-1===r)return n=o,!0}return n=o,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("MouseUp",(function(t){!t.isDefaultPrevented()&&kg(e)&&("IMG"===e.selection.getNode().nodeName?pe.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())})),this.nodeChanged=function(t){var n,r,o,i=e.selection;e.initialized&&i&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=i.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),r=[],e.dom.getParent(n,(function(e){if(e===o)return!0;r.push(e)})),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}var Sg,Eg,_g={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return fe.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Ng=function(e){return Y(e,(function(e,t){return e.concat(function(e){var t=function(t){return j(t,(function(t){return(t=Ba(t)).node=e,t}))};if(Ho.isElement(e))return t(e.getClientRects());if(Ho.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))}),[])};(Eg=Sg||(Sg={}))[Eg.Up=-1]="Up",Eg[Eg.Down=1]="Down";var Rg=function(e,t,n,r,o,i){var a,u,s=0,c=[],l=function(r){var i,a,l;for(l=Ng([r]),-1===e&&(l=l.reverse()),i=0;i<l.length;i++)if(a=l[i],!n(a,u)){if(0<c.length&&t(a,jt.last(c))&&s++,a.line=s,o(a))return!0;c.push(a)}};return(u=jt.last(i.getClientRects()))&&(l(a=i.getNode()),function(e,t,n,r){for(;r=us(r,e,Da,t);)if(n(r))return}(e,r,l,a)),c},Og=i(Rg,Sg.Up,Ha,Fa),Ag=i(Rg,Sg.Down,Fa,Ha),Pg=function(e){return function(t){return n=e,t.line>n;var n}},Dg=function(e){return function(t){return n=e,t.line===n;var n}},Mg=Ho.isContentEditableFalse,Bg=us,Ig=function(e,t){return Math.abs(e.left-t)},Lg=function(e,t){return Math.abs(e.right-t)},Hg=function(e,t){return e>=t.left&&e<=t.right},Fg=function(e,t){return jt.reduce(e,(function(e,n){var r,o;return r=Math.min(Ig(e,t),Lg(e,t)),o=Math.min(Ig(n,t),Lg(n,t)),Hg(t,n)?n:Hg(t,e)?e:o===r&&Mg(n.node)||o<r?n:e}))},zg=function(e,t,n,r){for(;r=Bg(r,e,Da,t);)if(n(r))return},Wg=function(e,t,n){if(n.collapsed)return!1;if(fe.ie&&fe.ie<=11&&n.startOffset===n.endOffset-1&&n.startContainer===n.endContainer){var r=n.startContainer.childNodes[n.startOffset];if(Ho.isElement(r))return U(r.getClientRects(),(function(n){return za(n,e,t)}))}return U(n.getClientRects(),(function(n){return za(n,e,t)}))},Ug=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},jg=function(e,t){return n=(u=e).inline?Ug(u.getBody()):{left:0,top:0},a=(i=e).getBody(),r=i.inline?{left:a.scrollLeft,top:a.scrollTop}:{left:0,top:0},{pageX:(o=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Ug(e.getContentAreaContainer()),r=(i=(o=e).getBody(),a=o.getDoc().documentElement,u={left:i.scrollLeft,top:i.scrollTop},s={left:i.scrollLeft||a.scrollLeft,top:i.scrollTop||a.scrollTop},o.inline?u:s);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}var o,i,a,u,s;return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:o.top-n.top+r.top};var n,r,o,i,a,u},Vg=Ho.isContentEditableFalse,$g=Ho.isContentEditableTrue,qg=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Yg=function(e,t){return function(n){if(0===n.button){var r=X(t.dom.getParents(n.target),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=qa.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(Vg,$g)).getOr(null);if(u=t.getBody(),Vg(s=r)&&s!==u){var o=t.dom.getPos(r),i=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?i.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?i.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),i.appendChild(o),i}(t,r,e.width,e.height)}}var u,s}},Xg=function(e){e.dragging=!1,e.element=null,qg(e.ghost)},Gg=function(t){var n,r,o,i,a,u,s,c,l,f,d,m={};n=xi.DOM,u=e.document,r=Yg(m,t),s=m,c=t,l=pe.throttle((function(e,t){c._selectionOverrides.hideFakeCaret(),c.selection.placeCaretAt(e,t)}),0),o=function(e){var t,n,r,o,i,a,u,f,d,m,h,g,p=Math.max(Math.abs(e.screenX-s.screenX),Math.abs(e.screenY-s.screenY));if(s.element&&!s.dragging&&10<p){if(c.fire("dragstart",{target:s.element}).isDefaultPrevented())return;s.dragging=!0,c.focus()}if(s.dragging){var v=(h=s,{pageX:(g=jg(c,e)).pageX-h.relX,pageY:g.pageY+5});d=s.ghost,m=c.getBody(),d.parentNode!==m&&m.appendChild(d),t=s.ghost,n=v,r=s.width,o=s.height,i=s.maxX,a=s.maxY,f=u=0,t.style.left=n.pageX+"px",t.style.top=n.pageY+"px",n.pageX+r>i&&(u=n.pageX+r-i),n.pageY+o>a&&(f=n.pageY+o-a),t.style.width=r-u+"px",t.style.height=o-f+"px",l(e.clientX,e.clientY)}},i=function(e,t){return function(n){if(e.dragging&&((u=3===(c=(a=t).selection.getSel().getRangeAt(0).startContainer).nodeType?c.parentNode:c)!==(s=e.element)&&!a.dom.isChildOf(u,s)&&!Vg(u))){var r=((i=e.element.cloneNode(!0)).removeAttribute("data-mce-selected"),i),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact((function(){qg(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()})))}var i,a,u,s,c;Xg(e)}}(m,t),f=m,a=function(){f.dragging&&d.fire("dragend"),Xg(f)},(d=t).on("mousedown",r),t.on("mousemove",o),t.on("mouseup",i),n.bind(u,"mousemove",o),n.bind(u,"mouseup",a),t.on("remove",(function(){n.unbind(u,"mousemove",o),n.unbind(u,"mouseup",a)}))},Kg=Ho.isContentEditableTrue,Jg=Ho.isContentEditableFalse,Zg=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Kg(t)||Jg(t))return t;t=t.parentNode}return null},Qg=function(e){var t,n,r,o=e.getBody(),a=Gu(e.getBody(),(function(t){return e.dom.isBlock(t)}),(function(){return Mh(e)})),u="sel-"+e.dom.uniqueId(),s=function(t){t&&e.selection.setRng(t)},c=function(){return e.selection.getRng()},l=function(t,n,r,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,-1===t),a.show(r,n))},f=function(e,t){return t=gs(e,o,t),-1===e?mu.fromRangeStart(t):mu.fromRangeEnd(t)},d=function(e){return pa(e)||xa(e)||wa(e)},m=function(e){return d(e.startContainer)||d(e.endContainer)},h=function(n,r){var o,i,a,s,c,d,h,g,v,b,y=e.$,x=e.dom;if(!n)return null;if(n.collapsed){if(!m(n))if(!1===r){if(g=f(-1,n),Ju(g.getNode(!0)))return l(-1,g.getNode(!0),!1,!1);if(Ju(g.getNode()))return l(-1,g.getNode(),!g.isAtEnd(),!1)}else{if(g=f(1,n),Ju(g.getNode()))return l(1,g.getNode(),!g.isAtEnd(),!1);if(Ju(g.getNode(!0)))return l(1,g.getNode(!0),!1,!1)}return null}return s=n.startContainer,c=n.startOffset,d=n.endOffset,3===s.nodeType&&0===c&&Jg(s.parentNode)&&(s=s.parentNode,c=x.nodeIndex(s),s=s.parentNode),1!==s.nodeType?null:(d===c+1&&s===n.endContainer&&(o=s.childNodes[c]),Jg(o)?(v=b=o.cloneNode(!0),(h=e.fire("ObjectSelected",{target:o,targetClone:v})).isDefaultPrevented()?null:(i=Ki(sr(e.getBody()),"#"+u).fold((function(){return y([])}),(function(e){return y([e.dom()])})),v=h.targetClone,0===i.length&&(i=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",u)).appendTo(e.getBody()),n=e.dom.createRng(),v===b&&fe.ie?(i.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(v),n.setStartAfter(i[0].firstChild.firstChild),n.setEndAfter(v)):(i.empty().append(" ").append(v).append(" "),n.setStart(i[0].firstChild,1),n.setEnd(i[0].lastChild,0)),i.css({top:x.getPos(o,e.getBody()).y}),i[0].focus(),(a=e.selection.getSel()).removeAllRanges(),a.addRange(n),V(Vi(sr(e.getBody()),"*[data-mce-selected]"),(function(e){Er(e,"data-mce-selected")})),o.setAttribute("data-mce-selected","1"),t=o,p(),n)):null)},g=function(){t&&(t.removeAttribute("data-mce-selected"),Ki(sr(e.getBody()),"#"+u).each(Bi),t=null),Ki(sr(e.getBody()),"#"+u).each(Bi),t=null},p=function(){a.hide()};return fe.ceFalse&&(function(){e.on("mouseup",(function(t){var n=c();n.collapsed&&Wh(e,t.clientX,t.clientY)&&s(rm(e,n,!1))})),e.on("click",(function(t){var n;(n=Zg(e,t.target))&&(Jg(n)&&(t.preventDefault(),e.focus()),Kg(n)&&e.dom.isChildOf(n,e.selection.getNode())&&g())})),e.on("blur NewBlock",(function(){g()})),e.on("ResizeWindow FullscreenStateChanged",(function(){return a.reposition()}));var n,r;r=!1,(n=e).on("touchstart",(function(){r=!1})),n.on("touchmove",(function(){r=!0})),n.on("touchend",(function(e){var t=Zg(n,e.target);Jg(t)&&(r||(e.preventDefault(),h(nm(n,t))))})),e.on("mousedown",(function(t){var n,r=t.target;if((r===o||"HTML"===r.nodeName||e.dom.isChildOf(r,o))&&!1!==Wh(e,t.clientX,t.clientY))if(n=Zg(e,r))Jg(n)?(t.preventDefault(),h(nm(e,n))):(g(),Kg(n)&&t.shiftKey||Wg(t.clientX,t.clientY,e.selection.getRng())||(p(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===Ju(r)){g(),p();var a=function(e,t,n){var r,o,a,u,s,c,l,f=Ng(q(te(e.getElementsByTagName("*")),Ju)),d=q(f,(function(e){return n>=e.top&&n<=e.bottom}));return(r=Fg(d,t))&&(r=Fg((u=e,l=function(e,t){var n;return n=q(Ng([t]),(function(t){return!e(t,s)})),c=c.concat(n),0===n.length},(c=[]).push(s=r),zg(Sg.Up,u,i(l,Ha),s.node),zg(Sg.Down,u,i(l,Fa),s.node),c),t))&&Ju(r.node)?(a=t,{node:(o=r).node,before:Ig(o,a)<Lg(o,a)}):null}(o,t.clientX,t.clientY);if(a&&!function(t,n){var r,o,i=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(n,e.dom.isBlock);return!(!i||!e.dom.isChildOf(i,a)||!1!==Jg(Zg(e,i)))||i&&(r=i,o=a,!(e.dom.getParent(r,e.dom.isBlock)===e.dom.getParent(o,e.dom.isBlock)))&&function(e){var t=Ds(e);if(!e.firstChild)return!1;var n=mu.before(e.firstChild),r=t.next(n);return r&&!Yl(r)&&!Xl(r)}(i)}(t.target,a.node)){t.preventDefault();var u=l(1,a.node,a.before,!1);e.getBody().focus(),s(u)}}})),e.on("keypress",(function(t){_g.modifierPressed(t)||(t.keyCode,Jg(e.selection.getNode())&&t.preventDefault())})),e.on("getSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("setSelectionRange",(function(t){t.range=function(t){var n=e.schema.getShortEndedElements(),r=e.dom.createRng(),o=t.startContainer,i=t.startOffset,a=t.endContainer,u=t.endOffset;return xr(n,o.nodeName.toLowerCase())?0===i?r.setStartBefore(o):r.setStartAfter(o):r.setStart(o,i),xr(n,a.nodeName.toLowerCase())?0===u?r.setEndBefore(a):r.setEndAfter(a):r.setEnd(a,u),r}(t.range);var n=h(t.range,t.forward);n&&(t.range=n)})),e.on("AfterSetSelectionRange",(function(t){var n,r=t.range;m(r)||"mcepastebin"===r.startContainer.parentNode.id||p(),n=r.startContainer.parentNode,e.dom.hasClass(n,"mce-offscreen-selection")||g()})),e.on("copy",(function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!fe.ie){var o=(n=e.dom.get(u))?n.getElementsByTagName("*")[0]:n;o&&(t.preventDefault(),r.clearData(),r.setData("text/html",o.outerHTML),r.setData("text/plain",o.outerText))}})),function(e){var t;Gg(e),(t=e).on("drop",(function(e){var n=void 0!==e.clientX?t.getDoc().elementFromPoint(e.clientX,e.clientY):null;(Vg(n)||Vg(t.dom.getContentEditableParent(n)))&&e.preventDefault()}))}(e),function(e){var t=Li((function(){if(!e.removed&&e.selection.getRng().collapsed){var t=om(e,e.selection.getRng(),!1);e.selection.setRng(t)}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))}(e)}(),r=".mce-content-body",(n=e.contentStyles).push(a.getCss()),n.push(r+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+r+" *[contentEditable=false] {cursor: default;}"+r+" *[contentEditable=true] {cursor: text;}")),{showCaret:l,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(Ca(t),s(c()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:p,destroy:function(){a.destroy(),t=null}}},ep=function(e){for(var t=e;/<!--|--!?>/g.test(t);)t=t.replace(/<!--|--!?>/g,"");return t},tp=function(e,t,n){var r,o,i,a,u=1;for(a=e.getShortEndedElements(),(i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;o=i.exec(t);){if(r=i.lastIndex,"/"===o[1])u--;else if(!o[1]){if(o[2]in a)continue;u++}if(0===u)break}return r},np=function(e,t){var n=e.exec(t);if(n){var r=n[1],o=n[2];return"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?o:null}return null};function rp(e,t){void 0===t&&(t=si());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,o=e.cdata?e.cdata:n,i=e.text?e.text:n,a=e.start?e.start:n,u=e.end?e.end:n,s=e.pi?e.pi:n,c=e.doctype?e.doctype:n;return{parse:function(n){var l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R,O,A,P,D,M,B,I,L,H,F=0,z=[],W=0,U=Zo.decode,j=Xt.makeMap("src,href,data,background,formaction,poster,xlink:href"),V=/((java|vb)script|mhtml):/i,$=function(e){var t,n;for(t=z.length;t--&&z[t].name!==e;);if(0<=t){for(n=z.length-1;t<=n;n--)(e=z[n]).valid&&u(e.name);z.length=t}},q=function(t,n,r,o,i){var a,u,s,c,l;if(r=(n=n.toLowerCase())in x?n:U(r||o||i||""),C&&!v&&0==(0===(s=n).indexOf("data-")||0===s.indexOf("aria-"))){if(!(a=_[n])&&N){for(u=N.length;u--&&!(a=N[u]).pattern.test(n););-1===u&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(j[n]&&!e.allow_script_urls){var f=r.replace(/[\s\u0000-\u001F]+/g,"");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}if(V.test(f))return;if(l=f,!(c=e).allow_html_data_urls&&(/^data:image\//i.test(l)?!1===c.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(l):/^data:/i.test(l)))return}v&&(n in j||0===n.indexOf("on"))||(m.map[n]=r,m.push({name:n,value:r}))};for(M=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=t.getShortEndedElements(),D=e.self_closing_elements||t.getSelfClosingElements(),x=t.getBoolAttrs(),C=e.validate,b=e.remove_internals,H=e.fix_self_closing,I=t.getSpecialElements(),P=n+">";l=M.exec(P);){if(F<l.index&&i(U(n.substr(F,l.index-F))),f=l[6])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),$(f);else if(f=l[7]){if(l.index+l[0].length>n.length){i(U(n.substr(l.index))),F=l.index+l[0].length;continue}":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),w=f in y,H&&D[f]&&0<z.length&&z[z.length-1].name===f&&$(f);var Y=np(B,l[8]);if(null!==Y){if("all"===Y){F=tp(t,n,M.lastIndex),M.lastIndex=F;continue}T=!1}if(!C||(k=t.getElementRule(f))){if(T=!0,C&&(_=k.attributes,N=k.attributePatterns),(E=l[8])?((v=-1!==E.indexOf("data-mce-type"))&&b&&(T=!1),(m=[]).map={},E.replace(B,q)):(m=[]).map={},C&&!v){if(R=k.attributesRequired,O=k.attributesDefault,A=k.attributesForced,k.removeEmptyAttrs&&!m.length&&(T=!1),A)for(h=A.length;h--;)p=(S=A[h]).name,"{$uid}"===(L=S.value)&&(L="mce_"+W++),m.map[p]=L,m.push({name:p,value:L});if(O)for(h=O.length;h--;)(p=(S=O[h]).name)in m.map||("{$uid}"===(L=S.value)&&(L="mce_"+W++),m.map[p]=L,m.push({name:p,value:L}));if(R){for(h=R.length;h--&&!(R[h]in m.map););-1===h&&(T=!1)}if(S=m.map["data-mce-bogus"]){if("all"===S){F=tp(t,n,M.lastIndex),M.lastIndex=F;continue}T=!1}}T&&a(f,m,w)}else T=!1;if(d=I[f]){d.lastIndex=F=l.index+l[0].length,(l=d.exec(n))?(T&&(g=n.substr(F,l.index-F)),F=l.index+l[0].length):(g=n.substr(F),F=n.length),T&&(0<g.length&&i(g,!0),u(f)),M.lastIndex=F;continue}w||(E&&E.indexOf("/")===E.length-1?T&&u(f):z.push({name:f,valid:T}))}else(f=l[1])?(">"===f.charAt(0)&&(f=" "+f),e.allow_conditional_comments||"[if"!==f.substr(0,3).toLowerCase()||(f=" "+f),r(f)):(f=l[2])?o(ep(f)):(f=l[3])?c(f):(f=l[4])&&s(f,l[5]);F=l.index+l[0].length}for(F<n.length&&i(U(n.substr(F))),h=z.length-1;0<=h;h--)(f=z[h]).valid&&u(f.name)}}}(rp||(rp={})).findEndTag=tp;var op=rp,ip=function(e,t){var n,r,o,i,a,u,s,c,l=t,f=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=e.schema;for(u=e.getTempAttrs(),s=l,c=new RegExp(["\\s?("+u.join("|")+')="[^"]+"'].join("|"),"gi"),l=s.replace(c,""),a=d.getShortEndedElements();i=f.exec(l);)r=f.lastIndex,o=i[0].length,n=a[i[1]]?r:op.findEndTag(d,l,r),l=l.substring(0,r-o)+l.substring(n),f.lastIndex=r-o;return fa(l)},ap=ip,up=ip,sp=function(e){return Ho.isElement(e)?e.outerHTML:Ho.isText(e)?Zo.encodeRaw(e.data,!1):Ho.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},cp=function(t,n){var r,o,i;return r=function(e,t){var n=e.length+t.length+2,r=new Array(n),o=new Array(n),i=function(n,r,o,a,s){var c=u(n,r,o,a);if(null===c||c.start===r&&c.diag===r-a||c.end===n&&c.diag===n-o)for(var l=n,f=o;l<r||f<a;)l<r&&f<a&&e[l]===t[f]?(s.push([0,e[l]]),++l,++f):a-o<r-n?(s.push([2,e[l]]),++l):(s.push([1,t[f]]),++f);else{i(n,c.start,o,c.start-c.diag,s);for(var d=c.start;d<c.end;++d)s.push([0,e[d]]);i(c.end,r,c.end-c.diag,a,s)}},a=function(n,r,o,i){for(var a=n;a-r<i&&a<o&&e[a]===t[a-r];)++a;return{start:n,end:a,diag:r}},u=function(n,i,u,s){var c=i-n,l=s-u;if(0===c||0===l)return null;var f,d,m,h,g,p=c-l,v=l+c,b=(v%2==0?v:v+1)/2;for(r[1+b]=n,o[1+b]=i+1,f=0;f<=b;++f){for(d=-f;d<=f;d+=2){for(m=d+b,d===-f||d!==f&&r[m-1]<r[m+1]?r[m]=r[m+1]:r[m]=r[m-1]+1,g=(h=r[m])-n+u-d;h<i&&g<s&&e[h]===t[g];)r[m]=++h,++g;if(p%2!=0&&p-f<=d&&d<=p+f&&o[m-p]<=r[m])return a(o[m-p],d+n-u,i,s)}for(d=p-f;d<=p+f;d+=2){for(m=d+b-p,d===p-f||d!==p+f&&o[m+1]<=o[m-1]?o[m]=o[m+1]-1:o[m]=o[m-1],g=(h=o[m]-1)-n+u-d;n<=h&&u<=g&&e[h]===t[g];)o[m]=h--,g--;if(p%2==0&&-f<=d&&d<=f&&o[m]<=r[m+p])return a(o[m],d+n-u,i,s)}}},s=[];return i(0,e.length,0,t.length,s),s}(j(te(n.childNodes),sp),t),o=n,i=0,V(r,(function(t){0===t[0]?i++:1===t[0]?(function(t,n,r){var o=function(t){var n,r,o;for(o=e.document.createElement("div"),n=e.document.createDocumentFragment(),t&&(o.innerHTML=t);r=o.firstChild;)n.appendChild(r);return n}(n);if(t.hasChildNodes()&&r<t.childNodes.length){var i=t.childNodes[r];i.parentNode.insertBefore(o,i)}else t.appendChild(o)}(o,t[1],i),i++):2===t[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(o,i)})),n},lp=Hi(N.none()),fp=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},dp=function(t){var n=ar("body",lp.get().getOrThunk((function(){var t=e.document.implementation.createHTMLDocument("undo");return lp.set(N.some(t)),t})));return sa(n,fp(t)),V(Vi(n,"*[data-mce-bogus]"),Ii),n.dom().innerHTML},mp=function(e){var t,n,r;return t=function(e){return q(j(te(e.childNodes),sp),(function(e){return 0<e.length}))}(e.getBody()),-1!==(n=(r=K(t,(function(t){var n=up(e.serializer,t);return 0<n.length?[n]:[]}))).join("")).indexOf("</iframe>")?function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(r):function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(n)},hp=function(e,t,n){"fragmented"===t.type?cp(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},gp=function(e,t){return!(!e||!t)&&(r=t,fp(e)===fp(r)||(n=t,dp(e)===dp(n)));var n,r};function pp(e){var t,n,r=this,o=0,i=[],a=0,u=function(){return 0===a},s=function(e){u()&&(r.typing=e)},c=function(t){e.setDirty(t)},l=function(e){s(!1),r.add({},e)},f=function(){r.typing&&(s(!1),r.add())};return e.on("init",(function(){r.add()})),e.on("BeforeExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(f(),r.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&l(e)})),e.on("ObjectResizeStart Cut",(function(){r.beforeChange()})),e.on("SaveContent ObjectResized blur",l),e.on("DragEnd",l),e.on("KeyUp",(function(t){var o=t.keyCode;t.isDefaultPrevented()||((33<=o&&o<=36||37<=o&&o<=40||45===o||t.ctrlKey)&&(l(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&r.typing&&!1===gp(mp(e),i[0])&&(!1===e.isDirty()&&(c(!0),e.fire("change",{level:i[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))})),e.on("KeyDown",(function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(33<=t&&t<=36||37<=t&&t<=40||45===t)r.typing&&l(e);else{var o=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||20<t)||224===t||91===t||r.typing||o||(r.beforeChange(),s(!0),r.add({},e),n=!0)}})),e.on("MouseDown",(function(e){r.typing&&l(e)})),e.on("input",(function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data)&&l(e)})),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()})),r={data:i,typing:!1,beforeChange:function(){u()&&(t=Mu.getUndoBookmark(e.selection))},add:function(n,r){var a,s,l,f=e.settings;if(l=mp(e),n=n||{},n=Xt.extend(n,l),!1===u()||e.removed)return null;if(s=i[o],e.fire("BeforeAddUndo",{level:n,lastLevel:s,originalEvent:r}).isDefaultPrevented())return null;if(s&&gp(s,n))return null;if(i[o]&&(i[o].beforeBookmark=t),f.custom_undo_redo_levels&&i.length>f.custom_undo_redo_levels){for(a=0;a<i.length-1;a++)i[a]=i[a+1];i.length--,o=i.length}n.bookmark=Mu.getUndoBookmark(e.selection),o<i.length-1&&(i.length=o+1),i.push(n),o=i.length-1;var d={level:n,lastLevel:s,originalEvent:r};return e.fire("AddUndo",d),0<o&&(c(!0),e.fire("change",d)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,s(!1)),0<o&&(t=i[--o],hp(e,t,!0),c(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<i.length-1&&(t=i[++o],hp(e,t,!1),c(!0),e.fire("redo",{level:t})),t},clear:function(){i=[],o=0,r.typing=!1,r.data=i,e.fire("ClearUndos")},hasUndo:function(){return 0<o||r.typing&&i[0]&&!gp(mp(e),i[0])},hasRedo:function(){return o<i.length-1&&!r.typing},transact:function(e){return f(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,u;r.transact(t)&&(u=i[o].bookmark,a=i[o-1],hp(e,a,!0),r.transact(n)&&(i[o-1].beforeBookmark=u))}}}var vp,bp={},yp=jt.filter,xp=jt.each;vp=function(e){var t,n,r=e.selection.getRng();t=Ho.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),xp(yp(yp(n,t),(function(e){return t(e.previousSibling)&&-1!==jt.indexOf(n,e.previousSibling)})),(function(e){var t,n;t=e.previousSibling,hn(n=e).remove(),hn(t).append("<br><br>").append(n.childNodes)})))},bp["pre"]||(bp.pre=[]),bp.pre.push(vp);var wp=/^(src|href|style)$/,Cp=Xt.each,kp=sc,Tp=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Sp=function(e,t,n){var r,o,i;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],Ho.isElement(r)&&(i=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[i<o?i:o]),Ho.isText(r)&&n&&o>=r.nodeValue.length&&(r=new lo(r,e.getBody()).next()||r),Ho.isText(r)&&!n&&0===o&&(r=new lo(r,e.getBody()).prev()||r),r},Ep=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},_p=function(e,t,n,r,o){var i=sr(t),a=sr(e.create(r,o)),u=n?Vr(i):jr(i);return Di(a,u),n?(Ri(i,a),Ai(a,i)):(Oi(i,a),Pi(a,i)),a.dom()},Np=function(e,t,n,r){return!(t=rc(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},Rp=function(e,t,n,r,o){var i,a,u,s,c,l,f,d,m,h,g,p,v,b,y=e.dom;if(c=y,!(kp(l=r,(f=t).inline)||kp(l,f.block)||(f.selector?Ho.isElement(l)&&c.is(l,f.selector):void 0)||(s=r,t.links&&"A"===s.tagName)))return!1;if("all"!==t.remove)for(Cp(t.styles,(function(e,i){e=cc(y,uc(e,n),i),"number"==typeof i&&(i=e,o=0),(t.remove_similar||!o||kp(lc(y,o,i),e))&&y.setStyle(r,i,""),u=1})),u&&""===y.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),Cp(t.attributes,(function(e,t){var i;if(e=uc(e,n),"number"==typeof t&&(t=e,o=0),!o||kp(y.getAttrib(o,t),e)){if("class"===t&&(e=y.getAttrib(r,t))&&(i="",Cp(e.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)})),i))return void y.setAttrib(r,t,i);"class"===t&&r.removeAttribute("className"),wp.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}})),Cp(t.classes,(function(e){e=uc(e,n),o&&!y.hasClass(o,e)||y.removeClass(r,e)})),a=y.getAttribs(r),i=0;i<a.length;i++){var x=a[i].nodeName;if(0!==x.indexOf("_")&&0!==x.indexOf("data-"))return!1}return"none"!==t.remove?(d=e,h=t,p=(m=r).parentNode,v=d.dom,b=d.settings.forced_root_block,h.block&&(b?p===v.getRoot()&&(h.list_block&&kp(m,h.list_block)||Cp(Xt.grep(m.childNodes),(function(e){ic(d,b,e.nodeName.toLowerCase())?g?g.appendChild(e):(g=Ep(v,e,b),v.setAttribs(g,d.settings.forced_root_block_attrs)):g=0}))):v.isBlock(m)&&!v.isBlock(p)&&(Np(v,m,!1)||Np(v,m.firstChild,!0,1)||m.insertBefore(v.create("br"),m.firstChild),Np(v,m,!0)||Np(v,m.lastChild,!1,1)||m.appendChild(v.create("br")))),h.selector&&h.inline&&!kp(h.inline,m)||v.remove(m,1),!0):void 0},Op=Rp,Ap=function(e,t,n,r,o){var i,a,u=e.formatter.get(t),s=u[0],c=!0,l=e.dom,f=e.selection,d=function(r){var i,a,c,l,f,d,m=(a=r,c=t,l=n,f=o,Cp(dc((i=e).dom,a.parentNode).reverse(),(function(e){var t;d||"_start"===e.id||"_end"===e.id||(t=Id.matchNode(i,e,c,l,f))&&!1!==t.split&&(d=e)})),d);return function(e,t,n,r,o,i,a,u){var s,c,l,f,d,m,h=e.dom;if(n){for(m=n.parentNode,s=r.parentNode;s&&s!==m;s=s.parentNode){for(c=h.clone(s,!1),d=0;d<t.length;d++)if(Rp(e,t[d],u,c,c)){c=0;break}c&&(l&&c.appendChild(l),f||(f=c),l=c)}a.mixed&&h.isBlock(n)||(r=h.split(n,r)),l&&(o.parentNode.insertBefore(l,o),f.appendChild(o))}return r}(e,u,m,r,r,0,s,n)},m=function(t){var r,o,i,a,f;if(Ho.isElement(t)&&l.getContentEditable(t)&&(a=c,c="true"===l.getContentEditable(t),f=!0),r=Xt.grep(t.childNodes),c&&!f)for(o=0,i=u.length;o<i&&!Rp(e,u[o],n,t,t);o++);if(s.deep&&r.length){for(o=0,i=r.length;o<i;o++)m(r[o]);f&&(c=a)}},h=function(e){var t,n=l.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return Zs(t=r)&&Ho.isElement(t)&&("_start"===t.id||"_end"===t.id)&&(r=r[e?"firstChild":"lastChild"]),Ho.isText(r)&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),l.remove(n,!0),r},g=function(t){var n,r,o=t.commonAncestorContainer;if(t=Tc(e,t,u,!0),s.split){if(t=Hd(t),(n=Sp(e,t,!0))!==(r=Sp(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r=r.firstChild||r),Tp(l,n,r)){var i=N.from(n.firstChild).getOr(n);return d(_p(l,i,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(Tp(l,r,n))return i=N.from(r.lastChild).getOr(r),d(_p(l,i,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1);n=Ep(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=Ep(l,r,"span",{id:"_end","data-mce-type":"bookmark"}),d(n),d(r),n=h(!0),r=h()}else n=r=d(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=l.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=l.nodeIndex(r)+1}Ec(l,t,(function(t){Cp(t,(function(t){m(t),Ho.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===fc(l,t.parentNode)&&Rp(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)}))}))};if(r)r.nodeType?((a=l.createRng()).setStartBefore(r),a.setEndAfter(r),g(a)):g(r);else if("false"!==l.getContentEditable(f.getNode()))f.isCollapsed()&&s.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var o,i,a,u,s,c,l,f=e.dom,d=e.selection,m=[],h=d.getRng();for(o=h.startContainer,i=h.startOffset,3===(s=o).nodeType&&(i!==o.nodeValue.length&&(u=!0),s=s.parentNode);s;){if(Id.matchNode(e,s,t,n,r)){c=s;break}s.nextSibling&&(u=!0),m.push(s),s=s.parentNode}if(c)if(u){a=d.getBookmark(),h.collapse(!0);var g=Tc(e,h,e.formatter.get(t),!0);g=Hd(g),e.formatter.remove(t,n,g),d.moveToBookmark(a)}else{l=Lu(e.getBody(),c);var p=Ud(!1).dom(),v=Yd(m,p);$d(e,p,l||c),jd(e,l,!1),d.setCursorLocation(v,1),f.isEmpty(c)&&f.remove(c)}}(e,t,n,o):(i=Mu.getPersistentBookmark(e.selection,!0),g(f.getRng()),f.moveToBookmark(i),s.inline&&Id.match(e,t,n,f.getStart())&&nc(l,f,f.getRng()),e.nodeChanged());else{r=f.getNode();for(var p=0,v=u.length;p<v&&(!u[p].ceFalseOverride||!Rp(e,u[p],n,r,r));p++);}},Pp=Xt.each,Dp=function(e){return e&&1===e.nodeType&&!Zs(e)&&!Iu(e)&&!Ho.isBogus(e)},Mp=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Zs(n))return n}return e},Bp=function(e,t,n){var r,o,i=new Lc(e);if(t&&n&&(t=Mp(t,"previousSibling"),n=Mp(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),Xt.each(Xt.grep(n.childNodes),(function(e){t.appendChild(e)})),t}return n},Ip=function(e,t,n){Pp(e.childNodes,(function(e){Dp(e)&&(t(e)&&n(e),e.hasChildNodes()&&Ip(e,t,n))}))},Lp=function(e,t){return i((function(t,n){return!(!n||!lc(e,n,t))}),t)},Hp=function(e,t,n){return i((function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),Fp(e,r)}),t,n)},Fp=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},zp=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=fc(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Wp=Xt.each,Up=function(e,t,n,r){var o,a,u=e.formatter.get(t),s=u[0],c=!r&&e.selection.isCollapsed(),l=e.dom,f=e.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),Wp(t.styles,(function(t,r){l.setStyle(e,r,uc(t,n))})),t.styles){var o=l.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}Wp(t.attributes,(function(t,r){l.setAttrib(e,r,uc(t,n))})),Wp(t.classes,(function(t){t=uc(t,n),l.hasClass(e,t)||l.addClass(e,t)}))}},m=function(e,t){var n=!1;return!!s.selector&&(Wp(e,(function(e){if(!("collapsed"in e)||e.collapsed===c)return l.is(t,e.selector)&&!Iu(t)?(d(t,e),!(n=!0)):void 0})),n)},h=function(r,o,i,a){var c,l,f=[],h=!0;c=s.inline||s.block,l=r.create(c),d(l),Ec(r,o,(function(o){var i,g=function(o){var p,v,b,y;if(y=h,p=o.nodeName.toLowerCase(),v=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&r.getContentEditable(o)&&(y=h,h="true"===r.getContentEditable(o),b=!0),sc(p,"br"))return i=0,void(s.block&&r.remove(o));if(s.wrapper&&Id.matchNode(e,o,t,n))i=0;else{if(h&&!b&&s.block&&!s.wrapper&&oc(e,p)&&ic(e,v,c))return o=r.rename(o,c),d(o),f.push(o),void(i=0);if(s.selector){var x=m(u,o);if(!s.inline||x)return void(i=0)}!h||b||!ic(e,c,p)||!ic(e,v,c)||!a&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Iu(o)||s.inline&&r.isBlock(o)?(i=0,Wp(Xt.grep(o.childNodes),g),b&&(h=y),i=0):(i||(i=r.clone(l,!1),o.parentNode.insertBefore(i,o),f.push(i)),i.appendChild(o))}};Wp(o,g)})),!0===s.links&&Wp(f,(function(e){var t=function(e){"A"===e.nodeName&&d(e,s),Wp(Xt.grep(e.childNodes),t)};t(e)})),Wp(f,(function(o){var i,a,c,l,m;a=0,Wp(o.childNodes,(function(e){ac(e)||Zs(e)||a++})),i=a,!(1<f.length)&&r.isBlock(o)||0!==i?(s.inline||s.wrapper)&&(s.exact||1!==i||((l=function(e){var t=!1;return Wp(e.childNodes,(function(e){if((n=e)&&1===n.nodeType&&!Zs(n)&&!Iu(n)&&!Ho.isBogus(n))return t=e,!1;var n})),t}(c=o))&&!Zs(l)&&Id.matchName(r,l,s)&&(m=r.clone(l,!1),d(m),r.replace(m,c,!0),r.remove(l,1)),o=m||c),function(e,t,n,r){Pp(t,(function(t){Pp(e.dom.select(t.inline,r),(function(r){Dp(r)&&Op(e,t,n,r,t.exact?r:null)})),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Pp(e.select(r,n),(function(n){Dp(n)&&Pp(t.styles,(function(t,r){e.setStyle(n,r,"")}))}))}}(e.dom,t,r)}))}(e,u,n,o),function(e,t,n,r,o){Id.matchNode(e,o.parentNode,n,r)&&Op(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,(function(i){if(Id.matchNode(e,i,n,r))return Op(e,t,r,o),!0}))}(e,s,t,n,o),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Ip(r,Lp(e,"fontSize"),Hp(e,"backgroundColor",uc(t.styles.backgroundColor,n)))}(r,s,n,o),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Ip(r,Lp(e,"fontSize"),Hp(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,s,0,o),function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Bp(e,rc(r),r),r=Bp(e,r,rc(r,!0)))}(r,s,0,o)):r.remove(o,1)}))};if("false"!==l.getContentEditable(f.getNode())){if(s){if(r)r.nodeType?m(u,r)||((a=l.createRng()).setStartBefore(r),a.setEndAfter(r),h(l,Tc(e,a,u),0,!0)):h(l,r,0,!0);else if(c&&s.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,o,i,a,u,s,c=e.selection;a=(r=c.getRng(!0)).startOffset,s=r.startContainer.nodeValue,(o=Lu(e.getBody(),c.getStart()))&&(i=Wd(o));var l,f,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;s&&0<a&&a<s.length&&d.test(s.charAt(a))&&d.test(s.charAt(a-1))?(u=c.getBookmark(),r.collapse(!0),r=Tc(e,r,e.formatter.get(t)),r=Hd(r),e.formatter.apply(t,n,r),c.moveToBookmark(u)):(o&&"\ufeff"===i.nodeValue||(l=e.getDoc(),f=Ud(!0).dom(),i=(o=l.importNode(f,!0)).firstChild,r.insertNode(o),a=1),e.formatter.apply(t,n,o),c.setCursorLocation(i,a))}(e,t,n);else{var g=e.selection.getNode();e.settings.forced_root_block||!u[0].defaultBlock||l.getParent(g,l.isBlock)||Up(e,u[0].defaultBlock),e.selection.setRng(jc(e.selection.getRng())),o=Mu.getPersistentBookmark(e.selection,!0),h(l,Tc(e,f.getRng(),u)),s.styles&&function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(Xt.walk(r,i(zp,e),"childNodes"),zp(e,r))}(l,s,0,g),f.moveToBookmark(o),nc(l,f,f.getRng()),e.nodeChanged()}!function(e,t){xp(bp[e],(function(e){e(t)}))}(t,e)}}else{r=f.getNode();for(var p=0,v=u.length;p<v;p++)if(u[p].ceFalseOverride&&l.is(r,u[p].selector))return void d(r,u[p])}},jp={applyFormat:Up},Vp=Xt.each,$p=function(e,t,n,r,o){var i,a,u,s,c,l,f,d;null===t.get()&&(a=e,u={},(i=t).set({}),a.on("NodeChange",(function(e){var t=dc(a.dom,e.element),n={};t=Xt.grep(t,(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")})),Vp(i.get(),(function(e,r){Vp(t,(function(o){return a.formatter.matchNode(o,r,{},e.similar)?(u[r]||(Vp(e,(function(e){e(!0,{node:o,format:r,parents:t})})),u[r]=e),n[r]=e,!1):!Id.matchesUnInheritedFormatSelector(a,o,r)&&void 0}))})),Vp(u,(function(r,o){n[o]||(delete u[o],Vp(r,(function(n){n(!1,{node:e.element,format:o,parents:t})})))}))}))),c=n,l=r,f=o,d=(s=t).get(),Vp(c.split(","),(function(e){d[e]||(d[e]=[],d[e].similar=f),d[e].push(l)})),s.set(d)},qp=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Xt.each(r,(function(n,r){e.setAttrib(t,r,n)}))}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Xt.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t},Yp=Xt.each,Xp=xi.DOM,Gp=function(e,t){var n,r,o,i=t&&t.schema||si({}),a=function(e){var t,n,o;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,n=t=Xp.create(r.name),(o=r).classes.length&&Xp.addClass(n,o.classes.join(" ")),Xp.setAttribs(n,o.attrs),t},u=function(e,t,n){var r,o,s,c,l,f,d,m,h=0<t.length&&t[0],g=h&&h.name;if(l=g,f="string"!=typeof(c=e)?c.nodeName.toLowerCase():c,s=!(!(m=(d=i.getElementRule(f))&&d.parentsRequired)||!m.length)&&(l&&-1!==Xt.inArray(m,l)?l:m[0]))g===s?(o=t[0],t=t.slice(1)):o=s;else if(h)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(r=a(o)).appendChild(e),n&&(r||(r=Xp.create("div")).appendChild(e),Xt.each(n,(function(t){var n=a(t);r.insertBefore(n,e)}))),u(r,t,o&&o.siblings)};return e&&e.length?(r=e[0],n=a(r),(o=Xp.create("div")).appendChild(u(n,e.slice(1),r.siblings)),o):""},Kp=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Xt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,r,o,i){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Xt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){var a=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""}))),n.name=t||"div",n},Jp=function(e,t){var n,r,o,i,a,u,s="";if(!1===(u=e.settings.preview_styles))return"";"string"!=typeof u&&(u="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var c=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(u=t.preview)?"":(n=t.block||t.inline||"span",(i=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Xt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=Xt.map(e.split(/(?:~\+|~|\+)/),Kp),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[]}(t.selector)).length?(i[0].name||(i[0].name=n),n=t.selector,r=Gp(i,e)):r=Gp([n],e),o=Xp.select(n,r)[0]||r.firstChild,Yp(t.styles,(function(e,t){(e=c(e))&&Xp.setStyle(o,t,e)})),Yp(t.attributes,(function(e,t){(e=c(e))&&Xp.setAttrib(o,t,e)})),Yp(t.classes,(function(e){e=c(e),Xp.hasClass(o,e)||Xp.addClass(o,e)})),e.fire("PreviewFormats"),Xp.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=Xp.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,Yp(u.split(" "),(function(t){var n=Xp.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Xp.getStyle(e.getBody(),t,!0),"#ffffff"===Xp.toHex(n).toLowerCase())||"color"===t&&"#000000"===Xp.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(s+="padding:0 2px;"),s+=t+":"+n+";"}})),e.fire("AfterPreviewFormats"),Xp.remove(r),s)},Zp=function(e,t,n,r,o){var i=t.get(n);!Id.match(e,n,r,o)||"toggle"in i[0]&&!i[0].toggle?jp.applyFormat(e,n,r,o):Ap(e,n,r,o)};function Qp(e){var t,n,r,o=(n={},(r=function(e,t){e&&("string"!=typeof e?Xt.each(e,(function(e,t){r(t,e)})):(t=t.length?t:[t],Xt.each(t,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),n[e]=t))})(qp((t=e).dom)),r(t.settings.formats),{get:function(e){return e?n[e]:n},register:r,unregister:function(e){return e&&n[e]&&delete n[e],n}}),a=Hi(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),function(e){e.on("mouseup keydown",(function(t){var n,r,o,i;n=e,r=t.keyCode,o=n.selection,i=n.getBody(),Vd(n,null,!1),8!==r&&46!==r||!o.isCollapsed()||"\ufeff"!==o.getStart().innerHTML||Vd(n,Lu(i,o.getStart())),37!==r&&39!==r||Vd(n,Lu(i,o.getStart()))}))}(e),{get:o.get,register:o.register,unregister:o.unregister,apply:i(jp.applyFormat,e),remove:i(Ap,e),toggle:i(Zp,e,o),match:i(Id.match,e),matchAll:i(Id.matchAll,e),matchNode:i(Id.matchNode,e),canApply:i(Id.canApply,e),formatChanged:i($p,e,a),getCssText:i(Jp,e)}}var ev,tv=Object.prototype.hasOwnProperty,nv=(ev=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)tv.call(o,i)&&(n[i]=ev(n[i],o[i]))}return n}),rv=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)})),e.addAttributeFilter("src,href,style",(function(e,r){for(var o,i,a=e.length,u="data-mce-"+r,s=t.url_converter,c=t.url_converter_scope;a--;)void 0!==(i=(o=e[a]).attributes.map[u])?(o.attr(r,0<i.length?i:null),o.attr(u,null)):(i=o.attributes.map[r],"style"===r?i=n.serializeStyle(n.parseStyle(i),o.name):s&&(i=s.call(c,i,r,o.name)),o.attr(r,0<i.length?i:null))})),e.addAttributeFilter("class",(function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||(N.from(r.firstChild).exists((function(e){return!ca(e.value)}))?r.unwrap():r.remove())})),e.addNodeFilter("noscript",(function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Zo.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var r,o,i,a=e.length,u=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)o=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((i=r.attr("type"))&&r.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<o.length&&(r.firstChild.value="// <![CDATA[\n"+u(o)+"\n// ]]>")):"xhtml"===t.element_format&&0<o.length&&(r.firstChild.value="\x3c!--\n"+u(o)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){V(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))},ov=function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())},iv=function(t,n,r){return d=r,(f=t)&&f.hasEventListeners("PreProcess")&&!d.no_events?(i=n,a=r,l=(o=t).dom,i=i.cloneNode(!0),(u=e.document.implementation).createHTMLDocument&&(s=u.createHTMLDocument(""),Xt.each("BODY"===i.nodeName?i.childNodes:[i],(function(e){s.body.appendChild(s.importNode(e,!0))})),i="BODY"!==i.nodeName?s.body.firstChild:s.body,c=l.doc,l.doc=s),function(e,t){e.fire("PreProcess",t)}(o,nv(a,{node:i})),c&&(l.doc=c),i):n;var o,i,a,u,s,c,l,f,d},av=function(e,t){var n,r=li();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",(function(e){V(e,(function(e){var r,o=t.parse(e.attr("style")),i=e.attr("color"),a=e.attr("face"),u=e.attr("size");i&&(o.color=i),a&&(o["font-family"]=a),u&&(o["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(o)),r=e,V(["color","face","size"],(function(e){r.attr(e,null)}))}))}))}(e,r,Xt.explode(t.font_size_legacy_values)),n=r,e.addNodeFilter("strike",(function(e){V(e,(function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}))}))},uv=function(e,t){t.inline_styles&&av(e,t)},sv=/^[ \t\r\n]*$/,cv={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},lv=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},fv=function(){function e(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,o;if(r=new e(t,cv[t]||1),n)for(o in n)r.attr(o,n[o]);return r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,r,o,i,a=new e(this.name,this.type);if(r=this.attributes){for((i=[]).map={},t=0,n=r.length;t<n;t++)"id"!==(o=r[t]).name&&(i[i.length]={name:o.name,value:o.value},i.map[o.name]=o.value);a.attributes=i}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=lv(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=lv(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var r,o,i=this.firstChild;if(t=t||{},i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;for(r=i.attributes.length;r--;)if("name"===(o=i.attributes[r].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===i.type)return!1;if(3===i.type&&!sv.test(i.value))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&sv.test(i.value))return!1;if(n&&n(i))return!1}while(i=lv(i,this));return!0},e.prototype.walk=function(e){return lv(this,null,e)},e}(),dv=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new fv("br",1)).shortEnded=!0:r.empty().append(new fv("#text",3)).value=" "},mv=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},hv=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return n=t,(r=e.getElementRule(n.name))&&r.paddEmpty;var n,r}))},gv=Xt.makeMap,pv=Xt.each,vv=Xt.explode,bv=Xt.extend;function yv(e,t){void 0===t&&(t=si());var n={},r=[],o={},i={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,u;(a=e.name)in n&&((u=o[a])?u.push(e):o[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((u=i[a])?u.push(e):i[a]=[e]);return e},u={schema:t,addAttributeFilter:function(e,t){pv(vv(e),(function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})}))},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){pv(vv(e),(function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)}))},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(u,s){var c,l,f,d,m,h,g,p,v,b,y,x=[];s=s||{},o={},i={},v=bv(gv("script,style,head,html,body,title,meta,param"),t.getBlockElements());var w=t.getNonEmptyElements(),C=t.children,k=e.validate,T="forced_root_block"in s?s.forced_root_block:e.forced_root_block,S=t.getWhiteSpaceElements(),E=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,R=/^[ \t\r\n]+$/;b=S.hasOwnProperty(s.context)||S.hasOwnProperty(e.root_name);var O=function(e,t){var r,i=new fv(e,t);return e in n&&((r=o[e])?r.push(i):o[e]=[i]),i},A=function(e){var n,r,o,i,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(0<(o=n.value.replace(_,"")).length)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}i=n.prev,n.remove(),n=i}};c=op({validate:k,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){y.append(O("#cdata",4)).value=e},text:function(e,t){var n;b||(e=e.replace(N," "),function(e,t){return e&&(t[e.name]||"br"===e.name)}(y.lastChild,v)&&(e=e.replace(E,""))),0!==e.length&&((n=O("#text",3)).raw=!!t,y.append(n).value=e)},comment:function(e){y.append(O("#comment",8)).value=e},pi:function(e,t){y.append(O(e,7)).value=t,A(y)},doctype:function(e){y.append(O("#doctype",10)).value=e,A(y)},start:function(e,n,o){var a,u,s,c,l;if(s=k?t.getElementRule(e):{}){for((a=O(s.outputName||e,1)).attributes=n,a.shortEnded=o,y.append(a),(l=C[y.name])&&C[a.name]&&!l[a.name]&&x.push(a),u=r.length;u--;)(c=r[u].name)in n.map&&((g=i[c])?g.push(a):i[c]=[a]);v[e]&&A(a),o||(y=a),!b&&S[e]&&(b=!0)}},end:function(n){var r,o,i,a,u;if(o=k?t.getElementRule(n):{}){if(v[n]&&!b){if((r=y.firstChild)&&3===r.type)if(0<(i=r.value.replace(E,"")).length)r.value=i,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.next,(0===i.length||R.test(i))&&(r.remove(),r=a),r=a;if((r=y.lastChild)&&3===r.type)if(0<(i=r.value.replace(_,"")).length)r.value=i,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.prev,(0===i.length||R.test(i))&&(r.remove(),r=a),r=a}if(b&&S[n]&&(b=!1),o.removeEmpty&&hv(t,w,S,y)&&!y.attributes.map.name&&!y.attr("id"))return u=y.parent,v[y.name]?y.empty().remove():y.unwrap(),void(y=u);o.paddEmpty&&(function(e){return mv(e,"#text")&&" "===e.firstChild.value}(y)||hv(t,w,S,y))&&dv(e,s,v,y),y=y.parent}}},t);var P=y=new fv(s.context||e.root_name,11);if(c.parse(u),k&&x.length&&(s.context?s.invalid=!0:function(e){var n,r,o,i,u,s,c,l,f,d,m,h,g,p,v,b;for(h=gv("tr,td,th,tbody,thead,tfoot,table"),d=t.getNonEmptyElements(),m=t.getWhiteSpaceElements(),g=t.getTextBlockElements(),p=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(g[r.name]&&"li"===r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(i=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!h[o.name];o=o.parent)i.push(o);if(o&&1<i.length){for(i.reverse(),u=s=a(i[0].clone()),f=0;f<i.length-1;f++){for(t.isValidChild(s.name,i[f].name)?(c=a(i[f].clone()),s.append(c)):c=s,l=i[f].firstChild;l&&l!==i[f+1];)b=l.next,c.append(l),l=b;s=c}hv(t,d,m,u)?o.insert(r,i[0],!0):(o.insert(u,i[0],!0),o.insert(r,u)),o=i[0],(hv(t,d,m,o)||mv(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(a(new fv("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(a(new fv("div",1))):p[r.name]?r.empty().remove():r.unwrap()}}}(x)),T&&("body"===P.name||s.isRootContent)&&function(){var n,r,o=P.firstChild,i=function(e){e&&((o=e.firstChild)&&3===o.type&&(o.value=o.value.replace(E,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(_,"")))};if(t.isValidChild(P.name,T.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!v[o.name]&&!o.attr("data-mce-type")?(r||((r=O(T,1)).attr(e.forced_root_block_attrs),P.insert(r,o)),r.append(o)):(i(r),r=null),o=n;i(r)}}(),!s.invalid){for(p in o){for(g=n[p],m=(l=o[p]).length;m--;)l[m].parent||l.splice(m,1);for(f=0,d=g.length;f<d;f++)g[f](l,p,s)}for(f=0,d=r.length;f<d;f++)if((g=r[f]).name in i){for(m=(l=i[g.name]).length;m--;)l[m].parent||l.splice(m,1);for(m=0,h=g.callbacks.length;m<h;m++)g.callbacks[m](l,g.name,s)}}return P}};return function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,r,o){var i,a,u,s,c,l,f,d,m=e.length,h=Xt.extend({},n.getBlockElements()),g=n.getNonEmptyElements(),p=n.getWhiteSpaceElements();for(h.body=1,i=0;i<m;i++)if(u=(a=e[i]).parent,h[a.parent.name]&&a===u.lastChild){for(c=a.prev;c;){if("span"!==(l=c.name)||"bookmark"!==c.attr("data-mce-type")){if("br"!==l)break;if("br"===l){a=null;break}}c=c.prev}a&&(a.remove(),hv(n,g,p,u)&&(f=n.getElementRule(u.name))&&(f.removeEmpty?u.remove():f.paddEmpty&&dv(t,o,h,u)))}else{for(s=a;u&&u.firstChild===s&&u.lastChild===s&&!h[(s=u).name];)u=u.parent;s===u&&!0!==t.padd_empty_with_br&&((d=new fv("#text",3)).value=" ",a.replace(d))}})),e.addAttributeFilter("href",(function(e){var n,r,o,i=e.length;if(!t.allow_unsafe_link_target)for(;i--;)"a"===(n=e[i]).name&&"_blank"===n.attr("target")&&n.attr("rel",(o=(r=n.attr("rel"))?Xt.trim(r):"",/\b(noopener)\b/g.test(o)?o:o.split(" ").filter((function(e){return 0<e.length})).concat(["noopener"]).sort().join(" ")))})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new fv("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(function(e){for(var t,r,o,i,a,u,s,c=e.length,l=n.getValidClasses();c--;){for(r=(t=e[c]).attr("class").split(" "),a="",o=0;o<r.length;o++)i=r[o],s=!1,(u=l["*"])&&u[i]&&(s=!0),u=l[t.name],!s&&u&&u[i]&&(s=!0),s&&(a&&(a+=" "),a+=i);a.length||(a=null),t.attr("class",a)}}))}(u,e),uv(u,e),u}var xv=function(e,t,n){-1===Xt.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))};function wv(e,t){var n,r,o,a,u,s,c=(n=e,s=["data-mce-selected"],o=(r=t)&&r.dom?r.dom:xi.DOM,a=r&&r.schema?r.schema:si(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs,u=yv(n,a),rv(u,n,o),{schema:a,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:function(e,t){var i=nv({format:"html"},t||{}),s=iv(r,e,i),c=function(e,t,n){var r=fa(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Eo(sr(t))?r:Xt.trim(r)}(o,s,i),l=function(e,t,n){var r=n.selection?nv({forced_root_block:!1},n):n,o=e.parse(t,r);return ov(o),o}(u,c,i);return"tree"===i.format?l:function(e,t,n,r,o){var i,a,u,s;return a=e,s=(i=r,Uc(t,n).serialize(i)),!(u=o).no_events&&a?function(e,t){return e.fire("PostProcess",t)}(a,nv(u,{content:s})).content:s}(r,n,a,l,i)},addRules:function(e){a.addValidElements(e)},setRules:function(e){a.setValidElements(e)},addTempAttr:i(xv,u,s),getTempAttrs:function(){return s}});return{schema:c.schema,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:c.serialize,addRules:c.addRules,setRules:c.setRules,addTempAttr:c.addTempAttr,getTempAttrs:c.getTempAttrs}}function Cv(e){return{getBookmark:i(Ks,e),moveToBookmark:i(Js,e)}}(Cv||(Cv={})).isBookmarkNode=Zs;var kv,Tv,Sv=Cv,Ev=Ho.isContentEditableFalse,_v=Ho.isContentEditableTrue,Nv=function(t,n){var r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x=n.dom,w=Xt.each,C=n.getDoc(),k=e.document,T=Math.abs,S=Math.round,E=n.getBody();a={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var _=".mce-content-body";n.contentStyles.push(_+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+_+" .mce-resizehandle:hover {background: #000}"+_+" img[data-mce-selected],"+_+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+_+" .mce-clonedresizable {position: absolute;"+(fe.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+_+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var N=function(e){return e&&("IMG"===e.nodeName||n.dom.is(e,"figure.image"))},R=function(e){var t,r,o=e.target;t=e,r=n.selection.getRng(),!N(t.target)||Wg(t.clientX,t.clientY,r)||e.isDefaultPrevented()||n.selection.select(o)},O=function(e){return n.dom.is(e,"figure.image")?e.querySelector("img"):e},A=function(e){var t=n.settings.object_resizing;return!1!==t&&!fe.iOS&&("string"!=typeof t&&(t="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==n.getBody()&&Mr(sr(e),t))},P=function(e){var t,a,w,C;t=e.screenX-s,a=e.screenY-c,p=t*u[2]+d,v=a*u[3]+m,p=p<5?5:p,v=v<5?5:v,(N(r)&&!1!==n.settings.resize_img_proportional?!_g.modifierPressed(e):_g.modifierPressed(e)||N(r)&&u[2]*u[3]!=0)&&(T(t)>T(a)?(v=S(p*h),p=S(v/h)):(p=S(v/h),v=S(p*h))),x.setStyles(O(o),{width:p,height:v}),w=0<(w=u.startPos.x+t)?w:0,C=0<(C=u.startPos.y+a)?C:0,x.setStyles(i,{left:w,top:C,display:"block"}),i.innerHTML=p+" &times; "+v,u[2]<0&&o.clientWidth<=p&&x.setStyle(o,"left",l+(d-p)),u[3]<0&&o.clientHeight<=v&&x.setStyle(o,"top",f+(m-v)),(t=E.scrollWidth-b)+(a=E.scrollHeight-y)!=0&&x.setStyles(i,{left:w-t,top:C-a}),g||(function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})}(n,r,d,m),g=!0)},D=function(){g=!1;var e=function(e,t){t&&(r.style[e]||!n.schema.isValid(r.nodeName.toLowerCase(),e)?x.setStyle(O(r),e,t):x.setAttrib(O(r),e,t))};e("width",p),e("height",v),x.unbind(C,"mousemove",P),x.unbind(C,"mouseup",D),k!==C&&(x.unbind(k,"mousemove",P),x.unbind(k,"mouseup",D)),x.remove(o),x.remove(i),M(r),function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})}(n,r,p,v),x.setAttrib(r,"style",x.getAttrib(r,"style")),n.nodeChanged()},M=function(e){var t,g,T,S,_;B(),H(),t=x.getPos(e,E),l=t.x,f=t.y,_=e.getBoundingClientRect(),g=_.width||_.right-_.left,T=_.height||_.bottom-_.top,r!==e&&(r=e,p=v=0),S=n.fire("ObjectSelected",{target:e}),A(e)&&!S.isDefaultPrevented()?w(a,(function(e,t){var n;(n=x.get("mceResizeHandle"+t))&&x.remove(n),n=x.add(E,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===fe.ie&&(n.contentEditable=!1),x.bind(n,"mousedown",(function(t){var n;t.stopImmediatePropagation(),t.preventDefault(),s=(n=t).screenX,c=n.screenY,d=O(r).clientWidth,m=O(r).clientHeight,h=m/d,(u=e).startPos={x:g*e[0]+l,y:T*e[1]+f},b=E.scrollWidth,y=E.scrollHeight,o=r.cloneNode(!0),x.addClass(o,"mce-clonedresizable"),x.setAttrib(o,"data-mce-bogus","all"),o.contentEditable=!1,o.unSelectabe=!0,x.setStyles(o,{left:l,top:f,margin:0}),o.removeAttribute("data-mce-selected"),E.appendChild(o),x.bind(C,"mousemove",P),x.bind(C,"mouseup",D),k!==C&&(x.bind(k,"mousemove",P),x.bind(k,"mouseup",D)),i=x.add(E,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+m)})),e.elm=n,x.setStyles(n,{left:g*e[0]+l-n.offsetWidth/2,top:T*e[1]+f-n.offsetHeight/2})})):B(),r.setAttribute("data-mce-selected","1")},B=function(){var e,t;for(e in H(),r&&r.removeAttribute("data-mce-selected"),a)(t=x.get("mceResizeHandle"+e))&&(x.unbind(t),x.remove(t))},I=function(e){var r,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};g||n.removed||(w(x.select("img[data-mce-selected],hr[data-mce-selected]"),(function(e){e.removeAttribute("data-mce-selected")})),r="mousedown"===e.type?e.target:t.getNode(),o(r=x.$(r).closest("table,img,figure.image,hr")[0],E)&&(F(),o(t.getStart(!0),r)&&o(t.getEnd(!0),r))?M(r):B())},L=function(e){return Ev(function(e,t){for(;t&&t!==e;){if(_v(t)||Ev(t))return t;t=t.parentNode}return null}(n.getBody(),e))},H=function(){for(var e in a){var t=a[e];t.elm&&(x.unbind(t.elm),delete t.elm)}},F=function(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return n.on("init",(function(){F(),fe.ie&&11<=fe.ie&&(n.on("mousedown click",(function(e){var t=e.target,r=t.nodeName;g||!/^(TABLE|IMG|HR)$/.test(r)||L(t)||(2!==e.button&&n.selection.select(t,"TABLE"===r),"mousedown"===e.type&&n.nodeChanged())})),n.dom.bind(E,"mscontrolselect",(function(e){var t=function(e){pe.setEditorTimeout(n,(function(){n.selection.select(e)}))};if(L(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))})));var e=pe.throttle((function(e){n.composing||I(e)}));n.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),n.on("keyup compositionend",(function(t){r&&"TABLE"===r.nodeName&&e(t)})),n.on("hide blur",B),n.on("contextmenu",R)})),n.on("remove",H),{isResizable:A,showResizeRect:M,hideResizeRect:B,updateResizeRect:I,destroy:function(){r=o=null}}},Rv=function(e){return Ho.isContentEditableTrue(e)||Ho.isContentEditableFalse(e)},Ov=function(e,t,n){var r,o,i,a,u,s=n;if(s.caretPositionFromPoint)(o=s.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(s.body.createTextRange){r=s.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=function(e,t,n){var r,o,i;if(r=n.elementFromPoint(e,t),o=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),o.moveToElementText(r),0<(i=(i=Xt.toArray(o.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))}))).length){t=(i[0].bottom+i[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(e){}}return null}(e,t,n)}return i=r,a=n.body,u=i&&i.parentElement?i.parentElement():null,Ho.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(u,a,Rv))?null:i}return r},Av=function(e,t){return j(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},Pv=function(t,n){var r=(n||e.document).createDocumentFragment();return V(t,(function(e){r.appendChild(e.dom())})),sr(r)},Dv=Rr("element","width","rows"),Mv=Rr("element","cells"),Bv=Rr("x","y"),Iv=function(e,t){var n=parseInt(Sr(e,t),10);return isNaN(n)?1:n},Lv=function(e){return Y(e,(function(e,t){return t.cells().length>e?t.cells().length:e}),0)},Hv=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var o=n[r].cells(),i=0;i<o.length;i++)if(Ir(o[i],t))return N.some(Bv(i,r));return N.none()},Fv=function(e,t,n,r,o){for(var i=[],a=e.rows(),u=n;u<=o;u++){var s=a[u].cells(),c=t<r?s.slice(t,r+1):s.slice(r,t+1);i.push(Mv(a[u].element(),c))}return i},zv=function(e){return n=j((t=e).rows(),(function(e){var t=j(e.cells(),(function(e){var t=ua(e);return Er(t,"colspan"),Er(t,"rowspan"),t})),n=aa(e.element());return Di(n,t),n})),r=aa(t.element()),o=ar("tbody"),Di(o,n),Pi(r,o),r;var t,n,r,o},Wv=function(e,t){return X(e,(function(e){return"li"===dr(e)&&function(e,t){return $a((a=t,u=a.startContainer,s=a.startOffset,Ho.isText(u)?0===s?N.some(sr(u)):N.none():N.from(u.childNodes[s]).map(sr)),(n=t,r=n.endContainer,o=n.endOffset,Ho.isText(r)?o===r.data.length?N.some(sr(r)):N.none():N.from(r.childNodes[o-1]).map(sr)),(function(t,n){var r=X(xg(e),i(Ir,t)),o=X(wg(e),i(Ir,n));return r.isSome()&&o.isSome()})).getOr(!1);var n,r,o,a,u,s}(e,t)})).fold(r([]),(function(t){return(n=e,X(n,(function(e){return"ul"===dr(e)||"ol"===dr(e)}))).map((function(e){return[ar("li"),ar(dr(e))]})).getOr([]);var n}))},Uv=function(){return Pv([])},jv=function(e,t){return n=sr(t.cloneContents()),o=function(e,t){var n,o=sr(t.commonAncestorContainer),i=xl(o,e),a=q(i,(function(e){return bo(e)||po(e)})),u=Wv(i,t),s=a.concat(u.length?u:Co(n=o)?zr(n).filter(wo).fold(r([]),(function(e){return[n,e]})):wo(n)?[n]:[]);return j(s,aa)}(e,t),i=Y(o,(function(e,t){return Pi(t,e),t}),n),0<o.length?Pv([i]):i;var n,o,i},Vv=function(e,t){return(n=e,r=t[0],Gi(r,"table",i(Ir,n))).bind((function(e){var n=t[0],r=t[t.length-1];return function(e,t,n){return Hv(e,t).bind((function(t){return Hv(e,n).map((function(n){return r=e,i=n,a=(o=t).x(),u=o.y(),s=i.x(),l=u<(c=i.y())?Fv(r,a,u,s,c):Fv(r,a,c,s,u),Dv(r.element(),Lv(l),l);var r,o,i,a,u,s,c,l}))}))}(function(e){var t=Dv(aa(e),0,[]);return V(Vi(e,"tr"),(function(e,n){V(Vi(e,"td,th"),(function(r,o){!function(e,t,n,r,o){for(var i=Iv(o,"rowspan"),a=Iv(o,"colspan"),u=e.rows(),s=n;s<n+i;s++){u[s]||(u[s]=Mv(ua(r),[]));for(var c=t;c<t+a;c++)u[s].cells()[c]=s===n&&c===t?o:aa(o)}}(t,function(e,t,n){for(;r=t,o=n,i=void 0,((i=e.rows())[o]?i[o].cells():[])[r];)t++;var r,o,i;return t}(t,o,n),n,e,r)}))})),Dv(t.element(),Lv(t.rows()),t.rows())}(e),n,r).map((function(e){return Pv([zv(e)])}))})).getOrThunk(Uv);var n,r},$v=function(e,t){if(void 0===t&&(t={}),t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return c=e,N.from(c.selection.getRng()).map((function(e){var t=c.dom.add(c.getBody(),"div",{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),n=fa(t.innerText);return c.dom.remove(t),n})).getOr("");t.getInner=!0;var n,r,o,i,a,u,s,c,l=(r=t,i=(n=e).selection.getRng(),a=n.dom.create("body"),u=n.selection.getSel(),s=Av(n,vd(u)),(o=r.contextual?function(e,t){var n,r,o=xd(t,e);return 0<o.length?Vv(e,o):(n=e,0<(r=t).length&&r[0].collapsed?Uv():jv(n,r[0]))}(sr(n.getBody()),s).dom():i.cloneContents())&&a.appendChild(o),n.selection.serializer.serialize(a,r));return"tree"===t.format?l:(t.content=e.selection.isCollapsed()?"":l,e.fire("GetContent",t),t.content)},qv=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return N.from(i).map(sr).map((function(e){return r&&t.collapsed?e:qr(e,o(e,a)).getOr(e)})).bind((function(e){return hr(e)?N.some(e):zr(e)})).map((function(e){return e.dom()})).getOr(e)},Yv=function(e,t,n){return qv(e,t,!0,n,(function(e,t){return Math.min(e.dom().childNodes.length,t)}))},Xv=function(e,t,n){return qv(e,t,!1,n,(function(e,t){return 0<t?t-1:t}))},Gv=function(e,t){for(var n=e;e&&Ho.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Kv=Xt.each,Jv=function(e){return!!e.select},Zv=function(e){return!(!e||!e.ownerDocument)&&Lr(sr(e.ownerDocument),sr(e))},Qv=function(e,t,n,r){var o,i,a,u,s,c=function(e,t){return function(e,t,n){var r,o,i,a,u=(r=t,ra(ra({format:"html"},n),{set:!0,selection:!0,content:r})),s=e.selection.getRng(),c=e.getDoc();if(u.no_events||!(u=e.fire("BeforeSetContent",u)).isDefaultPrevented()){if(t=function(e,t){if("raw"!==t.format){var n=e.parser.parse(t.content,ra({isRootContent:!0,forced_root_block:!1},t));return Uc({validate:e.validate},e.schema).serialize(n)}return t.content}(e,u),s.insertNode){t+='<span id="__caret">_</span>',s.startContainer===c&&s.endContainer===c?c.body.innerHTML=t:(s.deleteContents(),0===c.body.childNodes.length?c.body.innerHTML=t:s.createContextualFragment?s.insertNode(s.createContextualFragment(t)):(i=c.createDocumentFragment(),a=c.createElement("div"),i.appendChild(a),a.outerHTML=t,s.insertNode(i))),o=e.dom.get("__caret"),(s=c.createRange()).setStartBefore(o),s.setEndBefore(o),e.selection.setRng(s),e.dom.remove("__caret");try{e.selection.setRng(s)}catch(e){}}else{var l=s;l.item&&(c.execCommand("Delete",!1,null),l=e.selection.getRng()),/^\s+/.test(t)?(l.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):l.pasteHTML(t)}u.no_events||e.fire("SetContent",u)}else e.fire("SetContent",u)}(r,e,t)},l=function(e){var t=d();t.collapse(!!e),m(t)},f=function(){return t.getSelection?t.getSelection():t.document.selection},d=function(){var n,o,i,s,c=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(null==(s=t.document))return null;if(void 0!==r.bookmark&&!1===Mh(r)){var l=Ym(r);if(l.isSome())return l.map((function(e){return Av(r,[e])[0]})).getOr(s.createRange())}try{(n=f())&&!Ho.isRestrictedNode(n.anchorNode)&&(o=0<n.rangeCount?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(e){}return(o=Av(r,[o])[0])||(o=s.createRange?s.createRange():s.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=e.getRoot(),o.setStart(i,0),o.setEnd(i,0)),a&&u&&(0===c(o.START_TO_START,o,a)&&0===c(o.END_TO_END,o,a)?o=u:u=a=null),o},m=function(e,t){var n,o;if((i=e)&&(Jv(i)||Zv(i.startContainer)&&Zv(i.endContainer))){var i,s=Jv(e)?e:null;if(s){u=null;try{s.select()}catch(e){}}else{if(n=f(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){u=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||fe.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},h=function(){var t,n,r=f();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},g={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:l,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),m(o),l(!1)):(Cg(e,o,r.getBody(),!0),m(o))},getContent:function(e){return $v(r,e)},setContent:c,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,n){var r,o,i;return(r=e,o=t,i=n,N.from(o).map((function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),i&&(Cg(r,n,e,!0),Cg(r,n,e,!1)),n}))).each(m),t},isCollapsed:function(){var e=d(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:h,setNode:function(t){return c(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=d())?(o=t.startContainer,i=t.endContainer,a=t.startOffset,u=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(o===i&&u-a<2&&o.hasChildNodes()&&(n=o.childNodes[a]),3===o.nodeType&&3===i.nodeType&&(o=o.length===a?Gv(o.nextSibling,!0):o.parentNode,i=0===u?Gv(i.previousSibling,!1):i.parentNode,o&&o===i))?o:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,o,i,a,u},getSel:f,setRng:m,getRng:d,getStart:function(e){return Yv(r.getBody(),d(),e)},getEnd:function(e){return Xv(r.getBody(),d(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var o,i,a=[];if(i=e.getRoot(),n=e.getParent(n||Yv(i,t,t.collapsed),e.isBlock),r=e.getParent(r||Xv(i,t,t.collapsed),e.isBlock),n&&n!==i&&a.push(n),n&&r&&n!==r)for(var u=new lo(o=n,i);(o=u.next())&&o!==r;)e.isBlock(o)&&a.push(o);return r&&n!==r&&r!==i&&a.push(r),a}(e,d(),t,n)},normalize:function(){var t=d();if(!function(e){return 1<pd(e).length}(f())&&kg(r)){var n=wm(e,t);return n.each((function(e){m(e,h())})),n.getOr(t)}return t},selectorChanged:function(t,n){var o;return s||(s={},o={},r.on("NodeChange",(function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),i={};Kv(s,(function(t,n){Kv(r,(function(a){if(e.is(a,n))return o[n]||(Kv(t,(function(e){e(!0,{node:a,selector:n,parents:r})})),o[n]=t),i[n]=t,!1}))})),Kv(o,(function(e,t){i[t]||(delete o[t],Kv(e,(function(e){e(!1,{node:n,selector:t,parents:r})})))}))}))),s[t]||(s[t]=[]),s[t].push(n),g},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var r,o,i,a,u,s=e.dom,c=s.getRoot(),l=0;if(u={elm:t,alignToTop:n},e.fire("scrollIntoView",u),!u.isDefaultPrevented()&&Ho.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==c.nodeName){var f=e.selection.getScrollContainer();if(f)return r=Zd(t).y-Zd(f).y+l,a=f.clientHeight,void((r<(i=f.scrollTop)||i+a<r+25)&&(f.scrollTop=r<i?r:r-a+25))}o=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,i=o.y,a=o.h,(r<o.y||i+a<r+25)&&e.getWin().scrollTo(0,r<i?r:r-a+25)}}(r,e,t)},placeCaretAt:function(e,t){return m(Ov(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=d();return e.collapsed?mu.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=u=null,i.destroy()}};return o=Sv(g),i=Nv(g,r),g.bookmarkManager=o,g.controlSelection=i,g};(Tv=kv||(kv={}))[Tv.Br=0]="Br",Tv[Tv.Block=1]="Block",Tv[Tv.Wrap=2]="Wrap",Tv[Tv.Eol=3]="Eol";var eb=function(e,t){return e===fu.Backwards?t.reverse():t},tb=function(e,t,n,r){for(var o,i,a,u,s,c,l=Ds(n),f=r,d=[];f&&(s=l,c=f,o=t===fu.Forwards?s.next(c):s.prev(c));){if(Ho.isBr(o.getNode(!1)))return t===fu.Forwards?{positions:eb(t,d).concat([o]),breakType:kv.Br,breakAt:N.some(o)}:{positions:eb(t,d),breakType:kv.Br,breakAt:N.some(o)};if(o.isVisible()){if(e(f,o)){var m=(i=t,a=f,u=o,Ho.isBr(u.getNode(i===fu.Forwards))?kv.Br:!1===cs(a,u)?kv.Block:kv.Wrap);return{positions:eb(t,d),breakType:m,breakAt:N.some(o)}}d.push(o),f=o}else f=o}return{positions:eb(t,d),breakType:kv.Eol,breakAt:N.none()}},nb=function(e,t,n,r){return t(n,r).breakAt.map((function(r){var o=t(n,r).positions;return e===fu.Backwards?o.concat(r):[r].concat(o)})).getOr([])},rb=function(e,t){return Y(e,(function(e,n){return e.fold((function(){return N.some(n)}),(function(r){return $a(Q(r.getClientRects()),Q(n.getClientRects()),(function(e,o){var i=Math.abs(t-e.left);return Math.abs(t-o.left)<=i?n:r})).or(e)}))}),N.none())},ob=function(e,t){return Q(t.getClientRects()).bind((function(t){return rb(e,t.left)}))},ib=i(tb,lu.isAbove,-1),ab=i(tb,lu.isBelow,1),ub=i(nb,-1,ib),sb=i(nb,1,ab),cb=Ho.isContentEditableFalse,lb=Wa,fb=function(e,t,n){var r,o,a,u,s=Ds(e.getBody()),c=i(ys,s.next),l=i(ys,s.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?c(mu.fromRangeStart(n)):l(mu.fromRangeStart(n)))||(u=(a=e).dom.create(Kc(a)),(!fe.ie||11<=fe.ie)&&(u.innerHTML='<br data-mce-bogus="1">'),o=u,1===t?e.$(r).after(o):e.$(r).before(o),e.selection.select(o,!0),e.selection.collapse())}},db=function(e,t){return function(){var n,r,o,a,u,s,c,l,f,d=(r=t,a=Ds((n=e).getBody()),u=i(ys,a.next),s=i(ys,a.prev),c=r?fu.Forwards:fu.Backwards,l=r?u:s,f=n.selection.getRng(),(o=function(e,t,n,r){var o=e===fu.Forwards,i=o?Yl:Xl;if(!r.collapsed){var a=lb(r);if(cb(a))return tm(e,t,a,e===fu.Backwards,!0)}var u=ha(r.startContainer),s=vs(e,t.getBody(),r);if(i(s))return nm(t,s.getNode(!o));var c=al.normalizePosition(o,n(s));if(!c)return u?r:null;if(i(c))return tm(e,t,c.getNode(!o),o,!0);var l=n(c);return l&&i(l)&&xs(c,l)?tm(e,t,l.getNode(!o),o,!0):u?om(t,c.toRange(),!0):null}(c,n,l,f))?o:(o=fb(n,c,f))||null);return!!d&&(im(e,d),!0)}},mb=function(e,t){return function(){var n,r,o,i,a,u,s=(i=(r=t)?1:-1,a=r?Ag:Og,u=(n=e).selection.getRng(),(o=function(e,t,n,r){var o,i,a,u,s,c,l,f,d;if(d=lb(r),o=vs(e,t.getBody(),r),i=n(t.getBody(),Pg(1),o),a=q(i,Dg(1)),s=jt.last(o.getClientRects()),(Yl(o)||Kl(o))&&(d=o.getNode()),(Xl(o)||Jl(o))&&(d=o.getNode(!0)),!s)return null;if(c=s.left,(u=Fg(a,c))&&cb(u.node))return l=Math.abs(c-u.left),f=Math.abs(c-u.right),tm(e,t,u.node,l<f,!0);if(d){var m=function(e,t,n,r){var o,i,a,u,s,c,l=Ds(t),f=[],d=0,m=function(e){return jt.last(e.getClientRects())};1===e?(o=l.next,i=Fa,a=Ha,u=mu.after(r)):(o=l.prev,i=Ha,a=Fa,u=mu.before(r)),c=m(u);do{if(u.isVisible()&&!a(s=m(u),c)){if(0<f.length&&i(s,jt.last(f))&&d++,(s=Ba(s)).position=u,s.line=d,n(s))return f;f.push(s)}}while(u=o(u));return f}(e,t.getBody(),Pg(1),d);if(u=Fg(q(m,Dg(1)),c))return om(t,u.position.toRange(),!0);if(u=jt.last(q(m,Dg(0))))return om(t,u.position.toRange(),!0)}}(i,n,a,u))?o:(o=fb(n,i,u))||null);return!!s&&(im(e,s),!0)}},hb=function(e,t){return function(){var n,o=t?mu.fromRangeEnd(e.selection.getRng()):mu.fromRangeStart(e.selection.getRng()),i=t?ab(e.getBody(),o):ib(e.getBody(),o);return(t?ee(i.positions):Q(i.positions)).filter((n=t,function(e){return n?Xl(e):Yl(e)})).fold(r(!1),(function(t){return e.selection.setRng(t.toRange()),!0}))}},gb=function(e,t,n,r,o){var i,a,u,s,c=Vi(sr(n),"td,th,caption").map((function(e){return e.dom()}));return(a=q((i=e,K(c,(function(e){var t,n,r=(n=-1,{left:(t=Ba(e.getBoundingClientRect())).left-n,top:t.top-n,right:t.right+-2,bottom:t.bottom+-2,width:t.width+n,height:t.height+n});return[{x:r.left,y:i(r),cell:e},{x:r.right,y:i(r),cell:e}]}))),(function(e){return t(e,o)})),u=r,s=o,Y(a,(function(e,t){return e.fold((function(){return N.some(t)}),(function(e){var n=Math.sqrt(Math.abs(e.x-u)+Math.abs(e.y-s)),r=Math.sqrt(Math.abs(t.x-u)+Math.abs(t.y-s));return N.some(r<n?t:e)}))}),N.none())).map((function(e){return e.cell}))},pb=i(gb,(function(e){return e.bottom}),(function(e,t){return e.y<t})),vb=i(gb,(function(e){return e.top}),(function(e,t){return e.y>t})),bb=function(e,t,n){var r,o,i,a,u=e(t,n);return(a=u).breakType===kv.Wrap&&0===a.positions.length||!Ho.isBr(n.getNode())&&(i=u).breakType===kv.Br&&1===i.positions.length?(r=e,o=t,!u.breakAt.map((function(e){return r(o,e).breakAt.isSome()})).getOr(!1)):u.breakAt.isNone()},yb=i(bb,ib),xb=i(bb,ab),wb=function(e,t,n){var r=function(e,t){var n=t.getNode(e);return Ho.isElement(n)&&"TABLE"===n.nodeName?N.some(n):N.none()}(!!t,n),o=!1===t;r.fold((function(){return im(e,n.toRange())}),(function(r){return js.positionIn(o,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return im(e,n.toRange())}),(function(o){return i=t,u=r,s=n,void((c=Kc(a=e))?a.undoManager.transact((function(){var e=ar(c);Tr(e,Jc(a)),Pi(e,ar("br")),i?Oi(sr(u),e):Ri(sr(u),e);var t=a.dom.createRng();t.setStart(e.dom(),0),t.setEnd(e.dom(),0),im(a,t)})):im(a,s.toRange()));var i,a,u,s,c}))}))},Cb=function(e,t,n,r){var o,i,a,u,s,c,l=e.selection.getRng(),f=mu.fromRangeStart(l),d=e.getBody();if(!t&&yb(r,f)){var m=(u=d,function(e,t){return Q(t.getClientRects()).bind((function(t){return pb(e,t.left,t.top)})).bind((function(e){return ob((n=e,js.lastPositionIn(n).map((function(e){return ib(n,e).positions.concat(e)})).getOr([])),t);var n}))}(s=n,c=f).orThunk((function(){return Q(c.getClientRects()).bind((function(e){return rb(ub(u,mu.before(s)),e.left)}))})).getOr(mu.before(s)));return wb(e,t,m),!0}return!(!t||!xb(r,f)||(o=d,m=function(e,t){return ee(t.getClientRects()).bind((function(t){return vb(e,t.left,t.top)})).bind((function(e){return ob((n=e,js.firstPositionIn(n).map((function(e){return[e].concat(ab(n,e).positions)})).getOr([])),t);var n}))}(i=n,a=f).orThunk((function(){return Q(a.getClientRects()).bind((function(e){return rb(sb(o,mu.after(i)),e.left)}))})).getOr(mu.after(i)),wb(e,t,m),0))},kb=function(e,t){return function(){return N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return N.from(e.dom.getParent(n,"table")).map((function(n){return function(e,t,n,r){var o,i,a,u,s=e.selection.getRng(),c=t?1:-1;if(Ku()&&(o=t,i=s,a=n,u=mu.fromRangeStart(i),js.positionIn(!o,a).map((function(e){return e.isEqual(u)})).getOr(!1))){var l=tm(c,e,n,!t,!0);return im(e,l),!0}return!1}(e,t,n)}))})).getOr(!1)}},Tb=function(e,t){return function(){return N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return N.from(e.dom.getParent(n,"table")).map((function(r){return Cb(e,t,r,n)}))})).getOr(!1)}},Sb=function(e){return W(["figcaption"],dr(e))},Eb=function(t){var n=e.document.createRange();return n.setStartBefore(t.dom()),n.setEndBefore(t.dom()),n},_b=function(e,t,n){n?Pi(e,t):Ai(e,t)},Nb=function(e,t){var n,r,o,a=sr(e.getBody()),u=mu.fromRangeStart(e.selection.getRng()),s=Kc(e),c=Jc(e);return(n=u,r=a,o=i(Ir,r),Xi(sr(n.container()),vo,o).filter(Sb)).exists((function(){if(function(e,t,n){return t?(o=e.dom(),ab(o,n).breakAt.isNone()):(r=e.dom(),ib(r,n).breakAt.isNone());var r,o}(a,t,u)){var n=function(e,t,n,r){return""===t?(c=e,l=r,f=ar("br"),_b(c,f,l),Eb(f)):(o=e,i=r,a=n,u=ar(t),s=ar("br"),Tr(u,a),Pi(u,s),_b(o,u,i),Eb(s));var o,i,a,u,s,c,l,f}(a,s,c,t);return e.selection.setRng(n),!0}return!1}))},Rb=function(e,t){return function(){return!!e.selection.isCollapsed()&&Nb(e,t)}},Ob=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},Ab=function(e,n){return X(function(e,n){return K(j(e,(function(e){return nv({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t},e)})),(function(e){return t=e,(r=n).keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey?[e]:[];var t,r}))}(e,n),(function(e){return e.action()}))},Pb=function(e){return N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Db=function(e,t){var n,r,o,i=t,a=e.dom,u=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var s=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new lo(t,t);r=n.current();){if(Ho.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}i=r,r=n.next()}r||(o.setStart(i,0),o.setEnd(i,0))}else Ho.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),a.remove(void 0),e.selection.scrollIntoView(t)}},Mb=Pb,Bb=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},Ib=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Lb=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Hb=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!Ho.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},Fb=function(e){e.innerHTML='<br data-mce-bogus="1">'},zb=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},Wb=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},Ub=function(e,t,n){return!1===Ho.isText(t)?n:e?1===n&&t.data.charAt(n-1)===la?0:n:n===t.data.length-1&&t.data.charAt(n)===la?t.data.length:n},jb=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},Vb=function(e,t){var n=Kc(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,t,n){N.from(n.style).map(e.dom.parseStyle).each((function(n){var r=function(e){var t={},n=e.dom();if(wr(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t}(sr(t)),o=ra(ra({},r),n);e.dom.setStyles(t,o)}));var r=N.from(n.class).map((function(e){return e.split(/\s+/)})),o=N.from(t.className).map((function(e){return q(e.split(/\s+/),(function(e){return""!==e}))}));$a(r,o,(function(n,r){var o=q(r,(function(e){return!W(n,e)})),i=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}(n,o);e.dom.setAttrib(t,"class",i.join(" "))}));var i=["style","class"],a=yr(n,(function(e,t){return!W(i,t)})).t;e.dom.setAttribs(t,a)}(e,t,Jc(e))},$b=function(e,t){var n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x=e.dom,w=e.schema,C=w.getNonEmptyElements(),k=e.selection.getRng(),T=function(t){var n,i,u,s=o,c=w.getTextInlineElements();if(u=n=t||"TABLE"===f||"HR"===f?x.create(t||m):a.cloneNode(!1),!1===function(e){return e.getParam("keep_styles",!0)}(e))x.setAttrib(n,"style",null),x.setAttrib(n,"class",null);else do{if(c[s.nodeName]){if(Iu(s)||Zs(s))continue;i=s.cloneNode(!1),x.setAttrib(i,"id",""),n.hasChildNodes()?i.appendChild(n.firstChild):u=i,n.appendChild(i)}}while((s=s.parentNode)&&s!==r);return Vb(e,n),Fb(u),n},S=function(e){var t,n,r,u;if(u=Ub(e,o,i),Ho.isText(o)&&(e?0<u:u<o.nodeValue.length))return!1;if(o.parentNode===a&&h&&!e)return!0;if(e&&Ho.isElement(o)&&o===a.firstChild)return!0;if(zb(o,"TABLE")||zb(o,"HR"))return h&&!e||!h&&e;for(t=new lo(o,a),Ho.isText(o)&&(e&&0===u?t.prev():e||u!==o.nodeValue.length||t.next());n=t.current();){if(Ho.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),C[r]&&"br"!==r))return!1}else if(Ho.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},E=function(){s=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==d?T(m):T(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&Wb(x,l)&&x.isEmpty(a)?s=x.split(l,a):x.insertAfter(s,a),Db(e,s)};wm(x,k).each((function(e){k.setStart(e.startContainer,e.startOffset),k.setEnd(e.endContainer,e.endOffset)})),o=k.startContainer,i=k.startOffset,m=Kc(e),u=t.shiftKey,Ho.isElement(o)&&o.hasChildNodes()&&(h=i>o.childNodes.length-1,o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o,i=h&&Ho.isText(o)?o.nodeValue.length:0),(r=jb(x,o))&&((m&&!u||!m&&u)&&(o=function(e,t,n,r,o){var i,a,u,s,c,l,f,d=t||"P",m=e.dom,h=jb(m,r);if(!(a=m.getParent(r,m.isBlock))||!Wb(m,a)){if(l=(a=a||h)===e.getBody()||(f=a)&&/^(TD|TH|CAPTION)$/.test(f.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=m.create(d),Vb(e,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(s=r;s.parentNode!==a;)s=s.parentNode;for(;s&&!m.isBlock(s);)s=(u=s).previousSibling;if(u&&e.schema.isValidChild(l,d.toLowerCase())){for(i=m.create(d),Vb(e,i),u.parentNode.insertBefore(i,u),s=u;s&&!m.isBlock(s);)c=s.nextSibling,i.appendChild(s),s=c;n.setStart(r,o),n.setEnd(r,o)}}return r}(e,m,k,o,i)),a=x.getParent(o,x.isBlock),l=a?x.getParent(a.parentNode,x.isBlock):null,f=a?a.nodeName.toUpperCase():"","LI"!==(d=l?l.nodeName.toUpperCase():"")||t.ctrlKey||(l=(a=l).parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&x.isEmpty(a)?function(e,t,n,r,o){var i=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var u;Ib(u=n)&&Ib(u.parentNode)&&(o="LI");var s,c=o?t(o):i.create("BR");if(Hb(n,r,!0)&&Hb(n,r,!1))Bb(n,"LI")?i.insertAfter(c,Lb(n)):i.replace(c,n);else if(Hb(n,r,!0))Bb(n,"LI")?(i.insertAfter(c,Lb(n)),c.appendChild(i.doc.createTextNode(" ")),c.appendChild(n)):n.parentNode.insertBefore(c,n);else if(Hb(n,r,!1))i.insertAfter(c,Lb(n));else{n=Lb(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var f=l.extractContents();"LI"===o&&("LI",(s=f).firstChild&&"LI"===s.firstChild.nodeName)?(c=f.firstChild,i.insertAfter(f,n)):(i.insertAfter(f,n),i.insertAfter(c,n))}i.remove(r),Db(e,c)}}(e,T,l,a,m):m&&a===e.getBody()||(m=m||"P",ha(a)?(s=Ca(a),x.isEmpty(a)&&Fb(a),Vb(e,s),Db(e,s)):S()?E():S(!0)?(s=a.parentNode.insertBefore(T(),a),Db(e,zb(a,"HR")?s:a)):((n=(b=k,y=b.cloneRange(),y.setStart(b.startContainer,Ub(!0,b.startContainer,b.startOffset)),y.setEnd(b.endContainer,Ub(!1,b.endContainer,b.endOffset)),y).cloneRange()).setEndAfter(a),c=n.extractContents(),V(ji(sr(c),gr),(function(e){var t=e.dom();t.nodeValue=fa(t.nodeValue)})),function(e){for(;Ho.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(c),s=c.firstChild,x.insertAfter(c,a),function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;Ho.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)!(o=i[r]).hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):(a=e,(u=o)&&"A"===u.nodeName&&a.isEmpty(u)&&e.remove(o));var a,u}}(x,C,s),g=x,(p=a).normalize(),(v=p.lastChild)&&!/^(left|right)$/gi.test(g.getStyle(v,"float",!0))||g.add(p,"br"),x.isEmpty(a)&&Fb(a),s.normalize(),x.isEmpty(s)?(x.remove(s),E()):(Vb(e,s),Db(e,s))),x.setAttrib(s,"id",""),e.fire("NewBlock",{newBlock:s})))},qb=function(e,t){return Mb(e).filter((function(e){return 0<t.length&&Mr(sr(e),t)})).isSome()},Yb=Pl([{br:[]},{block:[]},{none:[]}]),Xb=function(e,t){return function(e){return qb(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Gb=function(e){return function(t,n){return""===Kc(t)===e}},Kb=function(e){return function(t,n){return function(e){return Pb(e).filter((function(e){return Co(sr(e))})).isSome()}(t)===e}},Jb=function(e,t){return function(n,o){return function(e){return Pb(e).fold(r(""),(function(e){return e.nodeName.toUpperCase()}))}(n)===e.toUpperCase()===t}},Zb=function(e){return Jb("pre",e)},Qb=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},ey=function(e,t){return function(e){return qb(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},ty=function(e,t){return t},ny=function(e){var t=Kc(e),n=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},ry=function(e,t){return function(n,r){return Y(e,(function(e,t){return e&&t(n,r)}),!0)?N.some(t):N.none()}},oy=function(e,n){(function(e,t){return Sf([ry([Xb],Yb.none()),ry([Jb("summary",!0)],Yb.br()),ry([Zb(!0),Qb(!1),ty],Yb.br()),ry([Zb(!0),Qb(!1)],Yb.block()),ry([Zb(!0),Qb(!0),ty],Yb.block()),ry([Zb(!0),Qb(!0)],Yb.br()),ry([Kb(!0),ty],Yb.br()),ry([Kb(!0)],Yb.block()),ry([Gb(!0),ty,ny],Yb.block()),ry([Gb(!0)],Yb.br()),ry([ey],Yb.br()),ry([Gb(!1),ty],Yb.br()),ry([ny],Yb.block())],[e,t.shiftKey]).getOr(Yb.none())})(e,n).fold((function(){Om(e,n)}),(function(){$b(e,n)}),t)},iy=function(e,t){var n=t.container(),r=t.offset();return Ho.isText(n)?(n.insertData(r,e),N.some(lu(n,r+e.length))):bs(t).map((function(n){var r=ur(e);return t.isAtEnd()?Oi(n,r):Ri(n,r),lu(r.dom(),e.length)}))},ay=i(iy," "),uy=i(iy," "),sy=function(e,t,n){return js.navigateIgnore(e,t,n,$l)},cy=function(e,t){return X(xl(sr(t.container()),e),vo)},ly=function(e,t,n){return sy(e,t.dom(),n).forall((function(e){return cy(t,n).fold((function(){return!1===cs(e,n,t.dom())}),(function(r){return!1===cs(e,n,t.dom())&&Lr(r,sr(e.container()))}))}))},fy=function(e,t,n){return cy(t,n).fold((function(){return sy(e,t.dom(),n).forall((function(e){return!1===cs(e,n,t.dom())}))}),(function(t){return sy(e,t.dom(),n).isNone()}))},dy=i(fy,!1),my=i(fy,!0),hy=i(ly,!1),gy=i(ly,!0),py=function(e){return lu.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},vy=function(e,t){var n=q(xl(sr(t.container()),e),vo);return Q(n).getOr(e)},by=function(e,t){return py(t)?Vl(t):Vl(t)||js.prevPosition(vy(e,t).dom(),t).exists(Vl)},yy=function(e,t){return py(t)?jl(t):jl(t)||js.nextPosition(vy(e,t).dom(),t).exists(jl)},xy=function(e){return bs(e).bind((function(e){return Xi(e,hr)})).exists((function(e){return t=_r(e,"white-space"),W(["pre","pre-wrap"],t);var t}))},wy=function(e,t){return n=e,!xy(r=t)&&(dy(n,r)||hy(n,r)||Il(n,r)||by(n,r))||function(e,t){var n,r,o,i=(r=(n=t).container(),o=n.offset(),Ho.isText(r)&&o<r.data.length?lu(r,o+1):n);return!xy(i)&&(my(e,i)||gy(e,i)||Bl(e,i)||yy(e,i))}(e,t);var n,r},Cy=function(e,t){return Fl(e.charAt(t))},ky=function(e){var t=e.container();return Ho.isText(t)&&Xn(t.data," ")},Ty=function(e,t){return N.some(t).filter(ky).bind((function(t){var n,r,o,i,a,u,s,c,l=t.container();return a=e,s=(u=l).data,c=lu(u,0),Cy(s,0)&&!wy(a,c)&&(u.data=" "+s.slice(1),1)||function(e){var t,n=e.data,r=(t=n.split(""),j(t,(function(e,n){return Fl(e)&&0<n&&n<t.length-1&&Wl(t[n-1])&&Wl(t[n+1])?" ":e})).join(""));return r!==n&&(e.data=r,!0)}(l)||(n=e,o=(r=l).data,i=lu(r,o.length-1),Cy(o,o.length-1)&&!wy(n,i)&&(r.data=o.slice(0,-1)+" ",1))?N.some(t):N.none()}))},Sy=function(e){var t=sr(e.getBody());e.selection.isCollapsed()&&Ty(t,lu.fromRangeStart(e.selection.getRng())).each((function(t){e.selection.setRng(t.toRange())}))},Ey=function(e,t){return function(n){return r=e,!xy(o=n)&&(function(e,t){return o=e,i=t,js.prevPosition(o.dom(),i).isNone()||(n=e,r=t,js.nextPosition(n.dom(),r).isNone())||dy(e,t)||my(e,t)||Il(e,t)||Bl(e,t);var n,r,o,i}(r,o)||by(r,o)||yy(r,o))?ay(t):uy(t);var r,o}},_y=function(e){var t,n,r=mu.fromRangeStart(e.selection.getRng()),o=sr(e.getBody());if(e.selection.isCollapsed()){var a=i(al.isInlineTarget,e),u=mu.fromRangeStart(e.selection.getRng());return jf(a,e.getBody(),u).bind((n=o,function(e){return e.fold((function(e){return js.prevPosition(n.dom(),mu.before(e))}),(function(e){return js.firstPositionIn(e)}),(function(e){return js.lastPositionIn(e)}),(function(e){return js.nextPosition(n.dom(),mu.after(e))}))})).bind(Ey(o,r)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},Ny=function(e,t){var n;t.hasAttribute("data-mce-caret")&&(Ca(t),(n=e).selection.setRng(n.selection.getRng()),e.selection.scrollIntoView(t))},Ry=function(e,t){var n=Ki(sr(e.getBody()),"*[data-mce-caret]").fold(r(null),(function(e){return e.dom()}));if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Ny(e,n)):void(va(n)&&(Ny(e,n),e.undoManager.add()))},Oy=rr.detect().browser,Ay=function(e){var t=ed.setupSelectedState(e);(function(e){e.on("keyup compositionstart",i(Ry,e))})(e),function(e,t){e.on("keydown",(function(n){var r,o,i,a;!1===n.isDefaultPrevented()&&(r=e,o=t,i=n,a=rr.detect().os,Ab([{keyCode:_g.RIGHT,action:db(r,!0)},{keyCode:_g.LEFT,action:db(r,!1)},{keyCode:_g.UP,action:mb(r,!1)},{keyCode:_g.DOWN,action:mb(r,!0)},{keyCode:_g.RIGHT,action:kb(r,!0)},{keyCode:_g.LEFT,action:kb(r,!1)},{keyCode:_g.UP,action:Tb(r,!1)},{keyCode:_g.DOWN,action:Tb(r,!0)},{keyCode:_g.RIGHT,action:ed.move(r,o,!0)},{keyCode:_g.LEFT,action:ed.move(r,o,!1)},{keyCode:_g.RIGHT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:ed.moveNextWord(r,o)},{keyCode:_g.LEFT,ctrlKey:!a.isOSX(),altKey:a.isOSX(),action:ed.movePrevWord(r,o)},{keyCode:_g.UP,action:Rb(r,!1)},{keyCode:_g.DOWN,action:Rb(r,!0)}],i).each((function(e){i.preventDefault()})))}))}(e,t),function(e,t){e.on("keydown",(function(n){var r,o,i;!1===n.isDefaultPrevented()&&(r=e,o=t,i=n,Ab([{keyCode:_g.BACKSPACE,action:Ob(mf,r,!1)},{keyCode:_g.DELETE,action:Ob(mf,r,!0)},{keyCode:_g.BACKSPACE,action:Ob(um,r,!1)},{keyCode:_g.DELETE,action:Ob(um,r,!0)},{keyCode:_g.BACKSPACE,action:Ob(rd,r,o,!1)},{keyCode:_g.DELETE,action:Ob(rd,r,o,!0)},{keyCode:_g.BACKSPACE,action:Ob(Rd,r,!1)},{keyCode:_g.DELETE,action:Ob(Rd,r,!0)},{keyCode:_g.BACKSPACE,action:Ob(Al,r,!1)},{keyCode:_g.DELETE,action:Ob(Al,r,!0)},{keyCode:_g.BACKSPACE,action:Ob(Nl,r,!1)},{keyCode:_g.DELETE,action:Ob(Nl,r,!0)},{keyCode:_g.BACKSPACE,action:Ob(Jd,r,!1)},{keyCode:_g.DELETE,action:Ob(Jd,r,!0)}],i).each((function(e){i.preventDefault()})))})),e.on("keyup",(function(t){var n,r;!1===t.isDefaultPrevented()&&(n=e,r=t,Ab([{keyCode:_g.BACKSPACE,action:Ob(hf,n)},{keyCode:_g.DELETE,action:Ob(hf,n)}],r))}))}(e,t),function(e){e.on("keydown",(function(t){var n,r,o;t.keyCode===_g.ENTER&&(n=e,(r=t).isDefaultPrevented()||(r.preventDefault(),(o=n.undoManager).typing&&(o.typing=!1,o.add()),n.undoManager.transact((function(){!1===n.selection.isCollapsed()&&n.execCommand("Delete"),oy(n,r)}))))}))}(e),function(e){e.on("keydown",(function(t){var n,r;!1===t.isDefaultPrevented()&&(n=e,r=t,Ab([{keyCode:_g.SPACEBAR,action:Ob(_y,n)}],r).each((function(e){r.preventDefault()})))}))}(e),function(e){var t,n;t=e,n=Li((function(){t.composing||Sy(t)}),0),Oy.isIE()&&(t.on("keypress",(function(e){n.throttle()})),t.on("remove",(function(e){n.cancel()}))),e.on("input",(function(t){!1===t.isComposing&&Sy(e)}))}(e),function(e){e.on("keydown",(function(t){var n,r;!1===t.isDefaultPrevented()&&(n=e,r=t,Ab([{keyCode:_g.END,action:hb(n,!0)},{keyCode:_g.HOME,action:hb(n,!1)}],r).each((function(e){r.preventDefault()})))}))}(e)};var Py=function(e){return Ho.isElement(e)&&xo(sr(e))},Dy=xi.DOM,My=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&pe.setEditorTimeout(t,(function(){var e;(e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||e.focus()}),100)},By=function(t,n){var r,o,i,a,u,s,c,l,f,d=t.settings,m=t.getElement(),h=t.getDoc();d.inline||(t.getElement().style.visibility=t.orgVisibility),n||d.content_editable||(h.open(),h.write(t.iframeHTML),h.close()),d.content_editable&&(t.on("remove",(function(){var e=this.getBody();Dy.removeClass(e,"mce-content-body"),Dy.removeClass(e,"mce-edit-focus"),Dy.setAttrib(e,"contentEditable",null)})),Dy.addClass(m,"mce-content-body"),t.contentDocument=h=d.content_document||e.document,t.contentWindow=d.content_window||e.window,t.bodyElement=m,d.content_document=d.content_window=null,d.root_name=m.nodeName.toLowerCase()),(r=t.getBody()).disabled=!0,t.readonly=d.readonly,t.readonly||(t.inline&&"static"===Dy.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable=t.getParam("content_editable_state",!0)),r.disabled=!1,t.editorUpload=gg(t),t.schema=si(d),t.dom=xi(h,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:d.force_hex_style_colors,class_filter:d.class_filter,update_styles:!0,root_element:t.inline?t.getBody():null,collect:d.content_editable,schema:t.schema,contentCssCors:ol(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((a=yv((i=t).settings,i.schema)).addAttributeFilter("src,href,style,tabindex",(function(e,t){for(var n,r,o,a=e.length,u=i.dom;a--;)if(r=(n=e[a]).attr(t),o="data-mce-"+t,!n.attributes.map[o]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=u.serializeStyle(u.parseStyle(r),n.name)).length||(r=null),n.attr(o,r),n.attr(t,r)):"tabindex"===t?(n.attr(o,r),n.attr(t,null)):n.attr(o,i.convertURL(r,t,n.name))}})),a.addNodeFilter("script",(function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)})),a.addNodeFilter("#cdata",(function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"})),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(e){for(var t,n=e.length,r=i.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new fv("br",1)).shortEnded=!0)})),a),t.serializer=wv(d,t),t.selection=Qv(t.dom,t.getWin(),t.serializer,t),t.annotator=Ac(t),t.formatter=Qp(t),t.undoManager=pp(t),t._nodeChangeDispatcher=new Tg(t),t._selectionOverrides=Qg(t),function(e){var t,n;(t=e).on("click",(function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()})),(n=e).parser.addNodeFilter("details",(function(e){V(e,(function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),n.serializer.addNodeFilter("details",(function(e){V(e,(function(e){var t=e.attr("data-mce-open");e.attr("open",O(t)?t:null),e.attr("data-mce-open",null)}))}))}(t),function(e){e.on("click",(function(t){3<=t.detail&&function(e){var t=e.selection.getRng(),n=lu.fromRangeStart(t),r=lu.fromRangeEnd(t);if(lu.isElementPosition(n)){var o=n.container();Py(o)&&js.firstPositionIn(o).each((function(e){return t.setStart(e.container(),e.offset())}))}lu.isElementPosition(r)&&(o=n.container(),Py(o)&&js.lastPositionIn(o).each((function(e){return t.setEnd(e.container(),e.offset())}))),e.selection.setRng(jc(t))}(e)}))}(t),Ay(t),yg(t),t.fire("PreInit"),d.browser_spellcheck||d.gecko_spellcheck||(h.body.spellcheck=!1,Dy.setAttrib(r,"spellcheck","false")),t.quirks=function(t){var n,r,o,i=Xt.each,a=_g.BACKSPACE,u=_g.DELETE,s=t.dom,c=t.selection,l=t.settings,f=t.parser,d=fe.gecko,m=fe.ie,h=fe.webkit,g="data:text/mce-internal,",p=m?"Text":"URL",v=function(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(e){}},b=function(e){return e.isDefaultPrevented()},y=function(){t.shortcuts.add("meta+a",null,"SelectAll")},x=function(){t.on("keydown",(function(e){if(!b(e)&&e.keyCode===a&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},w=function(){t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",(function(e){var n;if("HTML"===e.target.nodeName){if(11<fe.ie)return void t.getBody().focus();n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged()}})))};return t.on("keydown",(function(e){var n,r,o,i,a;if(!b(e)&&e.keyCode===_g.BACKSPACE&&(r=(n=c.getRng()).startContainer,o=n.startOffset,i=s.getRoot(),a=r,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==i;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(t.formatter.toggle("blockquote",null,a),(n=s.createRng()).setStart(r,0),n.setEnd(r,0),c.setRng(n))}})),n=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),c.serializer.serialize(t,{format:"html"})},t.on("keydown",(function(e){var r,o,i,c,l,f=e.keyCode;if(!b(e)&&(f===u||f===a)){if(r=t.selection.isCollapsed(),o=t.getBody(),r&&!s.isEmpty(o))return;if(!r&&(i=t.selection.getRng(),c=n(i),(l=s.createRng()).selectNode(t.getBody()),c!==n(l)))return;e.preventDefault(),t.setContent(""),o.firstChild&&s.isBlock(o.firstChild)?t.selection.setCursorLocation(o.firstChild,0):t.selection.setCursorLocation(o,0),t.nodeChanged()}})),fe.windowsPhone||t.on("keyup focusin mouseup",(function(e){_g.modifierPressed(e)||c.normalize()}),!0),h&&(t.settings.content_editable||s.bind(t.getDoc(),"mousedown mouseup",(function(e){var n;if(e.target===t.getDoc().documentElement)if(n=c.getRng(),t.getBody().focus(),"mousedown"===e.type){if(pa(n.startContainer))return;c.placeCaretAt(e.clientX,e.clientY)}else c.setRng(n)})),t.on("click",(function(e){var n=e.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(e.preventDefault(),t.selection.select(n),t.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(e.preventDefault(),c.select(n))})),l.forced_root_block&&t.on("init",(function(){v("DefaultParagraphSeparator",l.forced_root_block)})),t.on("init",(function(){t.dom.bind(t.getBody(),"submit",(function(e){e.preventDefault()}))})),x(),f.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),fe.iOS?(t.inline||t.on("keydown",(function(){e.document.activeElement===e.document.body&&t.getWin().focus()})),w(),t.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):y()),11<=fe.ie&&(w(),x()),fe.ie&&(y(),v("AutoUrlDetect",!1),t.on("dragstart",(function(e){var n,r,o;(n=e).dataTransfer&&(t.selection.isCollapsed()&&"IMG"===n.target.tagName&&c.select(n.target),0<(r=t.selection.getContent()).length&&(o=g+escape(t.id)+","+escape(r),n.dataTransfer.setData(p,o)))})),t.on("drop",(function(e){if(!b(e)){var n=(i=e).dataTransfer&&(a=i.dataTransfer.getData(p))&&0<=a.indexOf(g)?(a=a.substr(g.length).split(","),{id:unescape(a[0]),html:unescape(a[1])}):null;if(n&&n.id!==t.id){e.preventDefault();var r=Ov(e.x,e.y,t.getDoc());c.setRng(r),o=n.html,!0,t.queryCommandSupported("mceInsertClipboardContent")?t.execCommand("mceInsertClipboardContent",!1,{content:o,internal:!0}):t.execCommand("mceInsertContent",!1,o)}}var o,i,a}))),d&&(t.on("keydown",(function(e){if(!b(e)&&e.keyCode===a){if(!t.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){var n=c.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void e.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),e.preventDefault())}}})),e.Range.prototype.getClientRects||t.on("mousedown",(function(e){if(!b(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),pe.setEditorTimeout(t,(function(){n.focus()}))}})),r=function(){var e=s.getAttribs(c.getStart().cloneNode(!1));return function(){var n=c.getStart();n!==t.getBody()&&(s.setAttrib(n,"style",null),i(e,(function(e){n.setAttributeNode(e.cloneNode(!0))})))}},o=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)},t.on("keypress",(function(e){var n;if(!b(e)&&(8===e.keyCode||46===e.keyCode)&&o())return n=r(),t.getDoc().execCommand("delete",!1,null),n(),e.preventDefault(),!1})),s.bind(t.getDoc(),"cut",(function(e){var n;!b(e)&&o()&&(n=r(),pe.setEditorTimeout(t,(function(){n()})))})),l.readonly||t.on("BeforeExecCommand MouseDown",(function(){v("StyleWithCSS",!1),v("enableInlineTableEditing",!1),l.object_resizing||v("enableObjectResizing",!1)})),t.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||i(s.select("a"),(function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}}))})),t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),fe.mac&&t.on("keydown",(function(e){!_g.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})),x()),{refreshContentEditable:function(){},isHidden:function(){var e;return!d||t.removed?0:!(e=t.selection.getSel())||!e.rangeCount||0===e.rangeCount}}}(t),t.fire("PostRender"),d.directionality&&(r.dir=d.directionality),d.nowrap&&(r.style.whiteSpace="nowrap"),d.protect&&t.on("BeforeSetContent",(function(e){Xt.each(d.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),t.on("SetContent",(function(){t.addVisual(t.getBody())})),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",(function(e){t.composing="compositionstart"===e.type})),0<t.contentStyles.length&&(o="",Xt.each(t.contentStyles,(function(e){o+=e+"\r\n"})),t.dom.addStyle(o)),(u=t,u.inline?Dy.styleSheetLoader:u.dom.styleSheetLoader).loadAll(t.contentCSS,(function(e){My(t)}),(function(e){My(t)})),d.content_style&&(s=t,c=d.content_style,l=sr(s.getDoc().head),f=ar("style"),kr(f,"type","text/css"),Pi(f,ur(c)),Pi(l,f))},Iy=xi.DOM,Ly=function(t,n){var r,o,i,a,u,s,c,l=t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),f=(r=t.id,o=l,i=n.height,a=function(e){return e.getParam("iframe_attrs",{})}(t),c=ar("iframe"),Tr(c,a),Tr(c,{id:r+"_ifr",frameBorder:"0",allowTransparency:"true",title:o}),function(t,n){var r=t.dom();br(n,(function(t,n){!function(t,n,r){if(!O(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);wr(t)&&t.style.setProperty(n,r)}(r,n,t)}))}(c,{width:"100%",height:(u=i,s="number"==typeof u?u+"px":u,s||""),display:"block"}),c).dom();f.onload=function(){f.onload=null,t.fire("load")};var d,m,h,g,p=function(t,n){if(e.document.domain!==e.window.location.hostname&&fe.ie&&fe.ie<12){var r=hg("mce");t[r]=function(){By(t)};var o='javascript:(function(){document.open();document.domain="'+e.document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+r+"(true);})()";return Iy.setAttrib(n,"src",o),!0}return!1}(t,f);return t.contentAreaContainer=n.iframeContainer,t.iframeElement=f,t.iframeHTML=(g=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(d=t)+"<html><head>",function(e){return e.getParam("document_base_url","")}(d)!==d.documentBaseUrl&&(g+='<base href="'+d.documentBaseURI.getURI()+'" />'),g+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',m=function(e){return Xc(e,"body_id","tinymce")}(d),h=function(e){return Xc(e,"body_class","")}(d),Gc(d)&&(g+='<meta http-equiv="Content-Security-Policy" content="'+Gc(d)+'" />'),g+='</head><body id="'+m+'" class="mce-content-body '+h+'" data-id="'+d.id+'"><br></body></html>'),Iy.add(n.iframeContainer,f),p},Hy=xi.DOM,Fy=function(e,t,n){var r=ng.get(n),o=ng.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Xt.trim(n),r&&-1===Xt.inArray(t,n)){if(Xt.each(ng.dependencies(n),(function(n){Fy(e,t,n)})),e.plugins[n])return;try{var i=new r(e,o,e.$);(e.plugins[n]=i).init&&(i.init(e,o),t.push(n))}catch(t){Zh(e,n,t)}}},zy=function(e){return e.replace(/^\-/,"")},Wy=function(e){return{editorContainer:e,iframeContainer:e}},Uy=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=e.settings,m=e.getElement();return e.orgDisplay=m.style.display,O(d.theme)?(l=(o=e).settings,f=o.getElement(),i=l.width||Hy.getStyle(f,"width")||"100%",a=l.height||Hy.getStyle(f,"height")||f.offsetHeight,u=l.min_height||100,(s=/^[0-9\.]+(|px)$/i).test(""+i)&&(i=Math.max(parseInt(i,10),100)),s.test(""+a)&&(a=Math.max(parseInt(a,10),u)),c=o.theme.renderUI({targetNode:f,width:i,height:a,deltaWidth:l.delta_width,deltaHeight:l.delta_height}),l.content_editable||(a=(c.iframeHeight||a)+("number"==typeof a?c.deltaHeight||0:""))<u&&(a=u),c.height=a,c):B(d.theme)?(r=(t=e).getElement(),(n=t.settings.theme(t,r)).editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:r.offsetHeight,n):function(e){var t,n,r=e.getElement();return e.inline?Wy(null):(t=r,n=Hy.create("div"),Hy.insertAfter(n,t),Wy(n))}(e)},jy=function(e){var t,n,r,o,i,a,u=e.settings,s=e.getElement();return e.rtl=u.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(u.language),u.aria_label=u.aria_label||Hy.getAttrib(s,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),o=(n=e).settings.theme,O(o)?(n.settings.theme=zy(o),r=rg.get(o),n.theme=new r(n,rg.urls[o]),n.theme.init&&n.theme.init(n,rg.urls[o]||n.documentBaseUrl.replace(/\/$/,""),n.$)):n.theme={},i=e,a=[],Xt.each(i.settings.plugins.split(/[ ,]/),(function(e){Fy(i,a,zy(e))})),t=Uy(e),e.editorContainer=t.editorContainer?t.editorContainer:null,u.content_css&&Xt.each(Xt.explode(u.content_css),(function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))})),u.content_editable?By(e):function(e,t){var n=Ly(e,t);t.editorContainer&&(Iy.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Iy.isHidden(t.editorContainer)),e.getElement().style.display="none",Iy.setAttrib(e.id,"aria-hidden","true"),n||By(e)}(e,t)},Vy=xi.DOM,$y=function(e){return"-"===e.charAt(0)},qy=function(t){var n=t.settings,r=t.id,o=function(){Vy.unbind(e.window,"ready",o),t.render()};if(Se.Event.domLoaded){if(t.getElement()&&fe.contentEditable){n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var i=t.getElement().form||Vy.getParent(r,"form");i&&(t.formElement=i,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(Vy.insertAfter(Vy.create("input",{type:"hidden",name:r}),r),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},Vy.bind(i,"submit reset",t.formEventDelegate),t.on("reset",(function(){t.setContent(t.startContent,{format:"raw"})})),!n.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)})),t.windowManager=jh(t),t.notificationManager=Uh(t),"xml"===n.encoding&&t.on("GetContent",(function(e){e.save&&(e.content=Vy.encode(e.content))})),n.add_form_submit_trigger&&t.on("submit",(function(){t.initialized&&t.save()})),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),function(e,t){var n=Si.ScriptLoader;!function(e,t,n,r){var o=t.settings,i=o.theme;if(O(i)){if(!$y(i)&&!rg.urls.hasOwnProperty(i)){var a=o.theme_url;a?rg.load(i,t.documentBaseURI.toAbsolute(a)):rg.load(i,"themes/"+i+"/theme"+n+".js")}e.loadQueue((function(){rg.waitFor(i,r)}))}else r()}(n,e,t,(function(){var r,o,i,a,u;r=n,(i=(o=e).settings).language&&"en"!==i.language&&!i.language_url&&(i.language_url=o.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&!o.editorManager.i18n.data[i.language]&&r.add(i.language_url),a=e.settings,u=t,Xt.isArray(a.plugins)&&(a.plugins=a.plugins.join(" ")),Xt.each(a.external_plugins,(function(e,t){ng.load(t,e),a.plugins+=" "+t})),Xt.each(a.plugins.split(/[ ,]/),(function(e){if((e=Xt.trim(e))&&!ng.urls[e])if($y(e)){e=e.substr(1,e.length);var t=ng.dependencies(e);Xt.each(t,(function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+u+".js"};e=ng.createUrl(t,e),ng.load(e.resource,e)}))}else ng.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+u+".js"})})),n.loadQueue((function(){e.removed||jy(e)}),e,(function(t){Jh(e,t[0]),e.removed||jy(e)}))}))}(t,t.suffix)}}else Vy.bind(e.window,"ready",o)},Yy=Xt.each,Xy=Xt.trim,Gy="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Ky={ftp:21,http:80,https:443,mailto:25},Jy=function(t,n){var r,o,i=this;if(t=Xy(t),r=(n=i.settings=n||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))i.source=t;else{var a=0===t.indexOf("//");0!==t.indexOf("/")||a||(t=(r&&r.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=n.base_uri?n.base_uri.path:new Jy(e.document.location.href).directory,""==n.base_uri.protocol?t="//mce_host"+i.toAbsPath(o,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(o,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),Yy(Gy,(function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[e]=r})),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),i.port||"mce_host"!==i.host||(i.port=r.port),i.host&&"mce_host"!==i.host||(i.host=r.host),i.source=""),a&&(i.protocol="")}};Jy.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new Jy(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),r=e.getURI();return n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new Jy(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=Ky[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!==n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!==n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!==i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,o,i=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),Yy(e,(function(e){e&&a.push(e)})),e=a,n=t.length-1,a=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<i?i--:a.push(t[n]):i++);return 0!==(o=(n=e.length-i)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},Jy.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Jy.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var Zy=function(e,t){t(e),e.firstChild&&Zy(e.firstChild,t),e.next&&Zy(e.next,t)},Qy=function(e){return e instanceof fv},ex=function(e,t){var n;e.dom.setHTML(e.getBody(),t),Mh(n=e)&&js.firstPositionIn(n.getBody()).each((function(e){var t=e.getNode(),r=Ho.isTable(t)?js.firstPositionIn(t).getOr(e):e;n.selection.setRng(r.toRange())}))},tx=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=Qy(t)?"":t,Qy(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),N.from(e.getBody()).fold(r(t),(function(r){return Qy(t)?function(e,t,n,r){!function(e,t,n){var r=function(e,t,n){var r={},o={},i=[];for(var a in n.firstChild&&Zy(n.firstChild,(function(n){V(e,(function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})})),V(t,(function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})}))})),r)r.hasOwnProperty(a)&&i.push(r[a]);for(var a in o)o.hasOwnProperty(a)&&i.push(o[a]);return i}(e,t,n);V(r,(function(e){V(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=Uc({validate:e.validate},e.schema).serialize(n);return r.content=Eo(sr(t))?o:Xt.trim(o),ex(e,r.content),r.no_events||e.fire("SetContent",r),n}(e,r,t,n):(o=e,i=r,u=n,0===(a=t).length||/^\s+$/.test(a)?(c='<br data-mce-bogus="1">',"TABLE"===i.nodeName?a="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(a="<li>"+c+"</li>"),(s=Kc(o))&&o.schema.isValidChild(i.nodeName.toLowerCase(),s.toLowerCase())?(a=c,a=o.dom.createHTML(s,o.settings.forced_root_block_attrs,a)):a||(a='<br data-mce-bogus="1">'),ex(o,a),o.fire("SetContent",u)):("raw"!==u.format&&(a=Uc({validate:o.validate},o.schema).serialize(o.parser.parse(a,{isRootContent:!0,insert:!0}))),u.content=Eo(sr(i))?a:Xt.trim(a),ex(o,u.content),u.no_events||o.fire("SetContent",u)),u.content);var o,i,a,u,s,c}))},nx=xi.DOM,rx=function(e){return N.from(e).each((function(e){return e.destroy()}))},ox=xi.DOM,ix=Xt.extend,ax=Xt.each,ux=Xt.resolve,sx=fe.ie,cx=function(e,t,n){var r,o,i,a,u,s,c,l=this,f=l.documentBaseUrl=n.documentBaseURL,d=n.baseURI;r=l,o=e,i=f,a=n.defaultSettings,u=t,c={id:o,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:i,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"40px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(s=r).convertURL,url_converter_scope:s,ie7_compat:!0},t=function(e,t,n,r){var o,i,a,u,s,c,l,f,d,m,h,g,p=(o=["mobile"],i=yr(r,(function(e,t){return W(o,t)})),gh(i.t,i.f)),v=Xt.extend(t,n,p.settings(),(m=e,g=(h=p).settings().inline,m&&xh(h,"mobile")&&!g?(c="mobile",l=bh,d=(f=p.sections()).hasOwnProperty(c)?f[c]:{},Xt.extend({},l,d)):{}),{validate:!0,content_editable:p.settings().inline,external_plugins:(a=n,u=p.settings(),s=u.external_plugins?u.external_plugins:{},a&&a.external_plugins?Xt.extend({},a.external_plugins,s):s)});return wh(e,p,n,v)}(ph,c,a,u),l.settings=t,Ni.language=t.language||"en",Ni.languageLoad=t.language_load,Ni.baseURL=n.baseURL,l.id=e,l.setDirty(!1),l.plugins={},l.documentBaseURI=new Jy(t.document_base_url,{base_uri:d}),l.baseURI=d,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new _h(l),l.loadedCSS={},l.editorCommands=new eh(l),l.suffix=n.suffix,l.editorManager=n,l.inline=t.inline,l.buttons={},l.menuItems={},t.cache_suffix&&(fe.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(fe.overrideViewPort=!1),n.fire("SetupEditor",{editor:l}),l.execCallback("setup",l),l.$=hn.overrideDefaults((function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}}))};ix(cx.prototype={render:function(){qy(this)},focus:function(e){!function(e,t){e.removed||(t?Dh(e):function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var i,a,u=(i=e,a=t.getNode(),i.dom.getParent(a,(function(e){return"true"===i.dom.getContentEditable(e)})));if(e.$.contains(r,u))return Oh(u),Rh(e,o),Dh(e);void 0!==e.bookmark&&!1===Ph(e)&&Ym(e).each((function(t){e.selection.setRng(t),o=t})),n||(fe.opera||Oh(r),e.getWin().focus()),(fe.gecko||n)&&(Oh(r),Rh(e,o)),Dh(e)}(e))}(this,e)},hasFocus:function(){return Mh(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this.settings[e];if(o)return this.callbackLookup&&(r=this.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?ux(r):0,o=ux(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:r}),o.apply(r||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Xt.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,(function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}))}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,r){var o,i,a,u=t in e.settings?e.settings[t]:n;return"hash"===r?(a={},"string"==typeof(i=u)?V(0<i.indexOf("=")?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),(function(e){var t=e.split("=");1<t.length?a[Xt.trim(t[0])]=Xt.trim(t[1]):a[Xt.trim(t[0])]=Xt.trim(t)})):a=i,a):"string"===r?Ch(O,e,t).getOr(n):"number"===r?Ch(I,e,t).getOr(n):"boolean"===r?Ch(M,e,t).getOr(n):"object"===r?Ch(A,e,t).getOr(n):"array"===r?Ch(P,e,t).getOr(n):"string[]"===r?Ch((o=O,function(e){return P(e)&&J(e,o)}),e,t).getOr(n):"function"===r?Ch(B,e,t).getOr(n):u}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:hg("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(ox.show(this.getContainer()),ox.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(sx&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(ox.hide(e.getContainer()),ox.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=ox.getParent(r.id,"form"))&&ax(n.elements,(function(e){if(e.name===r.id)return e.value=t,!1}))),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return tx(this,e,t)},getContent:function(e){return t=this,void 0===(n=e)&&(n={}),N.from(t.getBody()).fold(r("tree"===n.format?new fv("body",11):""),(function(e){return function(e,t,n){var r,o,i,a,u;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=Xt.trim(ap(e.serializer,n.innerHTML));else if("text"===t.format)r=fa(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);i=(o=e).serializer.serialize(n,t),a=Kc(o),u=new RegExp("^(<"+a+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+a+">[\r\n]*|<br \\/>[\r\n]*)$"),r=i.replace(u,"")}return"text"===t.format||Eo(sr(n))?t.content=r:t.content=Xt.trim(r),t.no_events||e.fire("GetContent",t),t.content}(t,n,e)}));var t,n},insertContent:function(e,t){t&&(e=ix({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){var t,n;(n=e)!==function(e){return e.readonly?"readonly":"design"}(t=this)&&(t.initialized?sh(t,"readonly"===n):t.on("init",(function(){sh(t,"readonly"===n)})),function(e,t){e.fire("SwitchMode",{mode:t})}(t,n))},getContainer:function(){return this.container||(this.container=ox.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=ox.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),ax(o.select("table,a",e),(function(e){var i;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((i=o.getAttrib(e,"border"))&&"0"!==i||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(i=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}})),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&nx.remove(o.nextSibling),function(e){e.fire("remove")}(e),e.editorManager.remove(e),!e.inline&&r&&(i=e,nx.setStyle(i.id,"display",i.orgDisplay)),function(e){e.fire("detach")}(e),nx.remove(e.getContainer()),rx(t),rx(n),e.destroy()}var i}(this)},destroy:function(e){!function(e,t){var n,r,o,i=e.selection,a=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),rx(i),rx(a)),(r=(n=e).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),nx.unbind(r,"submit reset",n.formEventDelegate)),(o=e).contentAreaContainer=o.formElement=o.container=o.editorContainer=null,o.bodyElement=o.contentDocument=o.contentWindow=null,o.iframeElement=o.targetElm=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},hh);var lx,fx,dx,mx={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},hx=function(t){var n,r,o,i=Li((function(){qm(t)}),0);t.inline&&(n=t,r=i,o=function(){r.throttle()},xi.DOM.bind(e.document,"mouseup",o),n.on("remove",(function(){xi.DOM.unbind(e.document,"mouseup",o)}))),t.on("init",(function(){!function(e,t){var n,r;rr.detect().browser.isIE()?(r=e).on("focusout",(function(){qm(r)})):(n=t,e.on("mouseup touchend",(function(e){n.throttle()}))),e.on("keyup nodechange",(function(t){var n;"nodechange"===(n=t).type&&n.selectionChange||qm(e)}))}(t,i)})),t.on("remove",(function(){i.cancel()}))},gx=xi.DOM,px=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==gx.getParent(t,(function(t){return function(e){return mx.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)}))},vx=function(t,n){var r=n.editor;hx(r),r.on("focusin",(function(){var e=t.focusedEditor;e!==this&&(e&&e.fire("blur",{focusedEditor:this}),t.setActive(this),(t.focusedEditor=this).fire("focus",{blurredEditor:e}),this.focus(!0))})),r.on("focusout",(function(){var n=this;pe.setEditorTimeout(n,(function(){var r=t.focusedEditor;px(n,function(){try{return e.document.activeElement}catch(t){return e.document.body}}())||r!==n||(n.fire("blur",{focusedEditor:null}),t.focusedEditor=null)}))})),lx||(lx=function(n){var r,o=t.activeEditor;r=n.target,o&&r.ownerDocument===e.document&&(r===e.document.body||px(o,r)||t.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),t.focusedEditor=null))},gx.bind(e.document,"focusin",lx))},bx=function(t,n){t.focusedEditor===n.editor&&(t.focusedEditor=null),t.activeEditor||(gx.unbind(e.document,"focusin",lx),lx=null)},yx=xi.DOM,xx=Xt.explode,wx=Xt.each,Cx=Xt.extend,kx=0,Tx=!1,Sx=[],Ex=[],_x=function(e){var t=e.type;wx(dx.get(),(function(n){switch(t){case"scroll":n.fire("ScrollWindow",e);break;case"resize":n.fire("ResizeWindow",e)}}))},Nx=function(e){e!==Tx&&(e?hn(window).on("resize scroll",_x):hn(window).off("resize scroll",_x),Tx=e)},Rx=function(e){var t=Ex;delete Sx[e.id];for(var n=0;n<Sx.length;n++)if(Sx[n]===e){Sx.splice(n,1);break}return Ex=q(Ex,(function(t){return e!==t})),dx.activeEditor===e&&(dx.activeEditor=0<Ex.length?Ex[0]:null),dx.focusedEditor===e&&(dx.focusedEditor=null),t.length!==Ex.length};Cx(dx={defaultSettings:{},$:hn,majorVersion:"4",minorVersion:"9.11",releaseDate:"2020-07-13",editors:Sx,i18n:qh,activeEditor:null,settings:{},setup:function(){var t,n,r="";n=Jy.getDocumentBaseUrl(e.document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,r=o.suffix;else{for(var a=e.document.getElementsByTagName("script"),u=0;u<a.length;u++){var s;if(""!==(s=a[u].src||"")){var c=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==c.indexOf(".min")&&(r=".min"),t=s.substring(0,s.lastIndexOf("/"));break}}}!t&&e.document.currentScript&&(-1!==(s=e.document.currentScript.src).indexOf(".min")&&(r=".min"),t=s.substring(0,s.lastIndexOf("/")))}this.baseURL=new Jy(n).toAbsolute(t),this.documentBaseURL=n,this.baseURI=new Jy(this.baseURL),this.suffix=r,function(e){e.on("AddEditor",i(vx,e)),e.on("RemoveEditor",i(bx,e))}(this)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new Jy(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Jy(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n);var r=(this.defaultSettings=e).plugin_base_urls;for(var o in r)Ni.PluginManager.urls[o]=r[o]},init:function(t){var n,r,o=this;r=Xt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e){var t=e.id;return t||(t=(t=e.name)&&!yx.get(t)?e.name:yx.uniqueId(),e.setAttribute("id",t)),t},a=function(e,t){return t.constructor===RegExp?t.test(e.className):yx.hasClass(e,t)},u=function(e){n=e},s=function(){var n,c=0,l=[],f=function(e,t,r){var i=new cx(e,t,o);l.push(i),i.on("init",(function(){++c===n.length&&u(l)})),i.targetElm=i.targetElm||r,i.render()};yx.unbind(window,"ready",s),function(e){var n=t[e];n&&n.apply(o,Array.prototype.slice.call(arguments,2))}("onpageload"),n=hn.unique(function(t){var n,r=[];if(fe.ie&&fe.ie<11)return tg("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(t.types)return wx(t.types,(function(e){r=r.concat(yx.select(e.selector))})),r;if(t.selector)return yx.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(n=t.elements||"").length&&wx(xx(n),(function(t){var n;(n=yx.get(t))?r.push(n):wx(e.document.forms,(function(e){wx(e.elements,(function(e){e.name===t&&(t="mce_editor_"+kx++,yx.setAttrib(e,"id",t),r.push(e))}))}))}));break;case"textareas":case"specific_textareas":wx(yx.select("textarea"),(function(e){t.editor_deselector&&a(e,t.editor_deselector)||t.editor_selector&&!a(e,t.editor_selector)||r.push(e)}))}return r}(t)),t.types?wx(t.types,(function(e){Xt.each(n,(function(n){return!yx.is(n,e.selector)||(f(i(n),Cx({},t,e),n),!1)}))})):(Xt.each(n,(function(e){var t;(t=o.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Rx(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})),0===(n=Xt.grep(n,(function(e){return!o.get(e.id)}))).length?u([]):wx(n,(function(e){var n;n=e,t.inline&&n.tagName.toLowerCase()in r?tg("Could not initialize inline editor on invalid inline target element",e):f(i(e),t,e)})))};return o.settings=t,yx.bind(window,"ready",s),new de((function(e){n?e(n):u=function(t){e(t)}}))},get:function(e){return 0===arguments.length?Ex.slice(0):O(e)?X(Ex,(function(t){return t.id===e})).getOr(null):I(e)&&Ex[e]?Ex[e]:null},add:function(e){var t=this;return Sx[e.id]===e||(null===t.get(e.id)&&("length"!==e.id&&(Sx[e.id]=e),Sx.push(e),Ex.push(e)),Nx(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),fx||(fx=function(){t.fire("BeforeUnload")},yx.bind(window,"beforeunload",fx))),e},createEditor:function(e,t){return this.add(new cx(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!O(e))return n=e,D(r.get(n.id))?null:(Rx(n)&&r.fire("RemoveEditor",{editor:n}),0===Ex.length&&yx.unbind(window,"beforeunload",fx),n.remove(),Nx(0<Ex.length),n);wx(yx.select(e),(function(e){(n=r.get(e.id))&&r.remove(n)}))}else for(t=Ex.length-1;0<=t;t--)r.remove(Ex[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new cx(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){wx(Ex,(function(e){e.save()}))},addI18n:function(e,t){qh.add(e,t)},translate:function(e){return qh.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},ih),dx.setup();var Ox,Ax=dx;function Px(e){return{walk:function(t,n){return Ec(e,t,n)},split:Hd,normalize:function(t){return wm(e,t).fold(r(!1),(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}}(Ox=Px||(Px={})).compareRanges=hm,Ox.getCaretRangeFromPoint=Ov,Ox.getSelectedNode=Wa,Ox.getNode=Ua;var Dx,Mx,Bx=Px,Ix=Math.min,Lx=Math.max,Hx=Math.round,Fx=function(e,t,n){var r,o,i,a,u,s;return r=t.x,o=t.y,i=e.w,a=e.h,u=t.w,s=t.h,"b"===(n=(n||"").split(""))[0]&&(o+=s),"r"===n[1]&&(r+=u),"c"===n[0]&&(o+=Hx(s/2)),"c"===n[1]&&(r+=Hx(u/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=Hx(a/2)),"c"===n[4]&&(r-=Hx(i/2)),zx(r,o,i,a)},zx=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},Wx={inflate:function(e,t,n){return zx(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:Fx,findBestRelativePosition:function(e,t,n,r){var o,i;for(i=0;i<r.length;i++)if((o=Fx(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n,r,o,i;return n=Lx(e.x,t.x),r=Lx(e.y,t.y),o=Ix(e.x+e.w,t.x+t.w),i=Ix(e.y+e.h,t.y+t.h),o-n<0||i-r<0?null:zx(n,r,o-n,i-r)},clamp:function(e,t,n){var r,o,i,a,u,s,c,l,f,d;return u=e.x,s=e.y,c=e.x+e.w,l=e.y+e.h,f=t.x+t.w,d=t.y+t.h,r=Lx(0,t.x-u),o=Lx(0,t.y-s),i=Lx(0,c-f),a=Lx(0,l-d),u+=r,s+=o,n&&(c+=r,l+=o,u-=i,s-=a),zx(u,s,(c-=i)-u,(l-=a)-s)},create:zx,fromClientRect:function(e){return zx(e.left,e.top,e.width,e.height)}},Ux={},jx={add:function(e,t){Ux[e.toLowerCase()]=t},has:function(e){return!!Ux[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=Ux.hasOwnProperty(t)?Ux[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=Ux[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},Vx=Xt.each,$x=Xt.extend,qx=function(){};qx.extend=Dx=function(e){var t,n,r,o=this.prototype,i=function(){var e,t,n;if(!Mx&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},u=function(e,t){return function(){var n,r=this._super;return this._super=o[e],n=t.apply(this,arguments),this._super=r,n}};for(n in Mx=!0,t=new this,Mx=!1,e.Mixins&&(Vx(e.Mixins,(function(t){for(var n in t)"init"!==n&&(e[n]=t[n])})),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&Vx(e.Methods.split(","),(function(t){e[t]=a})),e.Properties&&Vx(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}})),e.Statics&&Vx(e.Statics,(function(e,t){i[t]=e})),e.Defaults&&o.Defaults&&(e.Defaults=$x({},o.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&o[n]?t[n]=u(n,r):t[n]=r;return i.prototype=t,(i.constructor=i).extend=Dx,i};var Yx=Math.min,Xx=Math.max,Gx=Math.round,Kx=function(e,t){var n,r,o,i;if(t=t||'"',null===e)return"null";if("string"==(o=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,(function(e,o){return'"'===t&&"'"===e?e:(n=r.indexOf(o))+1?"\\"+r.charAt(n+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+t;if("object"===o){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(0<n?",":"")+Kx(e[n],t);return r+"]"}for(i in r="{",e)e.hasOwnProperty(i)&&(r+="function"!=typeof e[i]?(1<r.length?","+t:t)+i+t+":"+Kx(e[i],t):"");return r+"}"}return""+e},Jx={serialize:Kx,parse:function(e){try{return JSON.parse(e)}catch(e){}}},Zx={callbacks:{},count:0,send:function(e){var t=this,n=xi.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(i){n.remove(o),delete t.callbacks[r],e.callback(i)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},Qx={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",Qx.fire("beforeInitialize",{settings:e}),t=og()){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Xt.each(e.requestheaders,(function(e){t.setRequestHeader(e.key,e.value)})),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Qx.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Xt.extend(Qx,ih);var ew,tw,nw,rw,ow=Xt.extend,iw=function(e){this.settings=ow({},e),this.count=0};iw.sendRPC=function(e){return(new iw).send(e)},iw.prototype={send:function(e){var t=e.error,n=e.success;(e=ow(this.settings,e)).success=function(r,o){void 0===(r=Jx.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,o):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=Jx.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",Qx.send(e)}};try{ew=e.window.localStorage}catch(e){tw={},nw=[],rw={getItem:function(e){return tw[e]||null},setItem:function(e,t){nw.push(e),tw[e]=String(t)},key:function(e){return nw[e]},removeItem:function(e){nw=nw.filter((function(t){return t===e})),delete tw[e]},clear:function(){nw=[],tw={}},length:0},Object.defineProperty(rw,"length",{get:function(){return nw.length},configurable:!1,enumerable:!1}),ew=rw}var aw,uw=Ax,sw={geom:{Rect:Wx},util:{Promise:de,Delay:pe,Tools:Xt,VK:_g,URI:Jy,Class:qx,EventDispatcher:nh,Observable:ih,I18n:qh,XHR:Qx,JSON:Jx,JSONRequest:iw,JSONP:Zx,LocalStorage:ew,Color:function(e){var t={},n=0,r=0,o=0,i=function(e){var i;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,o=e.b):"v"in e&&function(e,t,i){var a,u,s,c;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,i=parseInt(i,10)/100,t=Xx(0,Yx(t,1)),i=Xx(0,Yx(i,1)),0!==t){switch(a=e/60,s=(u=i*t)*(1-Math.abs(a%2-1)),c=i-u,Math.floor(a)){case 0:n=u,r=s,o=0;break;case 1:n=s,r=u,o=0;break;case 2:n=0,r=u,o=s;break;case 3:n=0,r=s,o=u;break;case 4:n=s,r=0,o=u;break;case 5:n=u,r=0,o=s;break;default:n=r=o=0}n=Gx(255*(n+c)),r=Gx(255*(r+c)),o=Gx(255*(o+c))}else n=r=o=Gx(255*i)}(e.h,e.s,e.v):(i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(i[1],10),r=parseInt(i[2],10),o=parseInt(i[3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(i[1]+i[1],16),r=parseInt(i[2]+i[2],16),o=parseInt(i[3]+i[3],16)),n=n<0?0:255<n?255:n,r=r<0?0:255<r?255:r,o=o<0?0:255<o?255:o,t};return e&&i(e),t.toRgb=function(){return{r:n,g:r,b:o}},t.toHsv=function(){return e=n,t=r,i=o,u=0,(s=Yx(e/=255,Yx(t/=255,i/=255)))===(c=Xx(e,Xx(t,i)))?{h:0,s:0,v:100*(u=s)}:(a=(c-s)/c,{h:Gx(60*((e===s?3:i===s?1:5)-(e===s?t-i:i===s?e-t:i-e)/((u=c)-s))),s:Gx(100*a),v:Gx(100*u)});var e,t,i,a,u,s,c},t.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(n)+e(r)+e(o)},t.parse=i,t}},dom:{EventUtils:Se,Sizzle:St,DomQuery:hn,TreeWalker:lo,DOMUtils:xi,ScriptLoader:Si,RangeUtils:Bx,Serializer:wv,ControlSelection:Nv,BookmarkManager:Sv,Selection:Qv,Event:Se.Event},html:{Styles:li,Entities:Zo,Node:fv,Schema:si,SaxParser:op,DomParser:yv,Writer:Wc,Serializer:Uc},ui:{Factory:jx},Env:fe,AddOnManager:Ni,Annotator:Ac,Formatter:Qp,UndoManager:pp,EditorCommands:eh,WindowManager:jh,NotificationManager:Uh,EditorObservable:hh,Shortcuts:_h,Editor:cx,FocusManager:mx,EditorManager:Ax,DOM:xi.DOM,ScriptLoader:Si.ScriptLoader,PluginManager:Ni.PluginManager,ThemeManager:Ni.ThemeManager,trim:Xt.trim,isArray:Xt.isArray,is:Xt.is,toArray:Xt.toArray,makeMap:Xt.makeMap,each:Xt.each,map:Xt.map,grep:Xt.grep,inArray:Xt.inArray,extend:Xt.extend,create:Xt.create,walk:Xt.walk,createNS:Xt.createNS,resolve:Xt.resolve,explode:Xt.explode,_addCacheSuffix:Xt._addCacheSuffix,isOpera:fe.opera,isWebKit:fe.webkit,isIE:fe.ie,isGecko:fe.gecko,isMac:fe.mac},cw=uw=Xt.extend(uw,sw);aw=cw,window.tinymce=aw,window.tinyMCE=aw,function(e){if("object"==typeof module)try{module.exports=e}catch(e){}}(cw)}(window),function(e){"use strict";var t,n,r,o,i,a=tinymce.util.Tools.resolve("tinymce.ThemeManager"),u=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Delay"),l=function(e){return e.reduce((function(e,t){return Array.isArray(t)?e.concat(l(t)):e.concat(t)}),[])},f={flatten:l},d=function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(r)return r}return null},m=function(e,t){return{id:e,rect:t}},h=function(e){return{x:e.left,y:e.top,w:e.width,h:e.height}},g=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},p=function(e){var t=s.DOM.getViewPort();return{x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},v=function(e){var t=e.getBoundingClientRect();return p({x:t.left,y:t.top,w:Math.max(e.clientWidth,e.offsetWidth),h:Math.max(e.clientHeight,e.offsetHeight)})},b=function(e,t){return v(t)},y=function(e){return v(e.getContentAreaContainer()||e.getBody())},x=function(e){var t=e.selection.getBoundingClientRect();return t?p(h(t)):null},w=function(e,t){return function(n){for(var r=0;r<t.length;r++)if(t[r].predicate(e))return m(t[r].id,b(0,e));return null}},C=function(e,t){return function(n){for(var r=0;r<e.length;r++)for(var o=0;o<t.length;o++)if(t[o].predicate(e[r]))return m(t[o].id,b(0,e[r]));return null}},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),T=function(e){return function(t){return t.selection.isCollapsed()?null:m(e,x(t))}},S=function(e,t){return function(n){var r,o=n.schema.getTextBlockElements();for(r=0;r<e.length;r++)if("TABLE"===e[r].nodeName)return null;for(r=0;r<e.length;r++)if(e[r].nodeName in o)return n.dom.isEmpty(e[r])?m(t,x(n)):null;return null}},E=tinymce.util.Tools.resolve("tinymce.EditorManager"),_=function(e){return function(t){return typeof t===e}},N=function(e){return _("string")(e)},R=function(e){return _("boolean")(e)},O=function(e){return _("function")(e)},A=(_("object"),function(e){return Array.isArray(e)}),P=function(e,t){if(t(e))return!0;throw new Error("Default value doesn't match requested type.")},D=function(e){return function(t,n,r){var o=t.settings;return P(r,e),n in o&&e(o[n])?o[n]:r}},M={getStringOr:D(N),getBoolOr:D(R),getNumberOr:D((function(e){return _("number")(e)})),getHandlerOr:D(O),getToolbarItemsOr:(t=A,function(e,n,r){var o,i,a,u,s=n in e.settings?e.settings[n]:r;return P(r,t),i=r,A(o=s)?o:N(o)?"string"==typeof(a=o)?(u=/[ ,]/,a.split(u).filter((function(e){return 0<e.length}))):a:R(o)?!1===o?[]:i:i})},B=tinymce.util.Tools.resolve("tinymce.geom.Rect"),I=function(e,t){return{rect:e,position:t}},L=function(e,t){return{x:t.x,y:t.y,w:e.w,h:e.h}},H=function(e,t,n,r,o){var i,a,u,s={x:r.x,y:r.y,w:r.w+(r.w<o.w+n.w?o.w:0),h:r.h+(r.h<o.h+n.h?o.h:0)};return i=B.findBestRelativePosition(o,n,s,e),n=B.clamp(n,s),i?(a=B.relativePosition(o,n,i),u=L(o,a),I(u,i)):(n=B.intersect(s,n))?((i=B.findBestRelativePosition(o,n,s,t))?(a=B.relativePosition(o,n,i),u=L(o,a)):u=L(o,n),I(u,i)):null},F=function(e,t,n){return H(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr","cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr","cr-cl"],e,t,n)},z=function(e,t,n,r){var o;return"function"==typeof e?(o=e({elementRect:g(t),contentAreaRect:g(n),panelRect:g(r)}),h(o)):r},W=function(e){return e.panelRect},U=function(e){return M.getToolbarItemsOr(e,"selection_toolbar",["bold","italic","|","quicklink","h2","h3","blockquote"])},j=function(e){return M.getToolbarItemsOr(e,"insert_toolbar",["quickimage","quicktable"])},V=function(e){return M.getHandlerOr(e,"inline_toolbar_position_handler",W)},$=function(e,t){var n=function(e){var t,n,r,o,i=e.settings;return i.skin_url?(r=e,o=i.skin_url,r.documentBaseURI.toAbsolute(o)):(t=i.skin,n=E.baseURL+"/skins/",t?n+t:n+"lightgray")}(e),r=function(){var n,r,o;r=t,o=function(){n._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(n),r()},(n=e).initialized?o():n.on("init",o)};!function(e){return!1===e.settings.skin}(e)?(s.DOM.styleSheetLoader.load(n+"/skin.min.css",r),e.contentCSS.push(n+"/content.inline.min.css")):r()},q=function(e){var t,n=e.contextToolbars;return f.flatten([n||[],(t=e,"img","image","alignleft aligncenter alignright",{predicate:function(e){return t.dom.is(e,"img")},id:"image",items:"alignleft aligncenter alignright"})])},Y=function(e,t){var n,r,o,i,a;return a=(i=e).selection.getNode(),r=i.dom.getParents(a,"*"),o=function(e){return k.map(e,(function(e){return function(e,t){return{id:e,predicate:t}}(e.id,e.predicate)}))}(t),(n=d(e,[w(r[0],o),T("text"),S(r,"insert"),C(r,o)]))&&n.rect?n:null},X=function(t,n){return function(){var r,o,i;t.removed||(i=t,e.document.activeElement!==i.getBody())||(r=q(t),(o=Y(t,r))?n.show(t,o.id,o.rect,r):n.hide())}},G=function(e,t){return $(e,(function(){var n,r;(function(e,t){var n,r,o,i,a,l=c.throttle(X(e,t),0),f=c.throttle((o=X(n=e,r=t),function(){n.removed||r.inForm()||o()}),0),d=(i=e,a=t,function(){var e=q(i),t=Y(i,e);t&&a.reposition(i,t.id,t.rect)});e.on("blur hide ObjectResizeStart",t.hide),e.on("click",l),e.on("nodeChange mouseup",f),e.on("ResizeEditor keyup",l),e.on("ResizeWindow",d),s.DOM.bind(u.container,"scroll",d),e.on("remove",(function(){s.DOM.unbind(u.container,"scroll",d),t.remove()})),e.shortcuts.add("Alt+F10,F10","",t.focus)})(e,t),r=t,(n=e).shortcuts.remove("meta+k"),n.shortcuts.add("meta+k","",(function(){var e=q(n),t=d(n,[T("quicklink")]);t&&r.show(n,t.id,t.rect,e)}))})),{}},K=function(){},J=function(e){return function(){return e}},Z=J(!1),Q=J(!0),ee=function(){return te},te=(n=function(e){return e.isNone()},i={fold:function(e,t){return e()},is:Z,isSome:Z,isNone:Q,getOr:o=function(e){return e},getOrThunk:r=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:J(null),getOrUndefined:J(void 0),or:o,orThunk:r,map:ee,each:K,bind:ee,exists:Z,forall:Q,filter:ee,equals:n,equals_:n,toArray:function(){return[]},toString:J("none()")},Object.freeze&&Object.freeze(i),i),ne=function(e){var t=J(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Q,isNone:Z,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return ne(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:te},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(Z,(function(t){return n(e,t)}))}};return o},re={some:ne,none:ee,from:function(e){return null==e?te:ne(e)}},oe=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},ie=oe("array"),ae=oe("function"),ue=oe("number"),se=(Array.prototype.slice,Array.prototype.indexOf),ce=Array.prototype.push,le=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},fe=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},de=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},me=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},he=(ae(Array.from)&&Array.from,0),ge={id:function(){return"mceu_"+he++},create:function(t,n,r){var o=e.document.createElement(t);return s.DOM.setAttribs(o,n),"string"==typeof r?o.innerHTML=r:k.each(r,(function(e){e.nodeType&&o.appendChild(e)})),o},createFragment:function(e){return s.DOM.createFragment(e)},getWindowSize:function(){return s.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return s.DOM.getPos(e,t||ge.getContainer())},getContainer:function(){return u.container?u.container:e.document.body},getViewPort:function(e){return s.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return s.DOM.addClass(e,t)},removeClass:function(e,t){return s.DOM.removeClass(e,t)},hasClass:function(e,t){return s.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return s.DOM.toggleClass(e,t,n)},css:function(e,t,n){return s.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return s.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return s.DOM.bind(e,t,n,r)},off:function(e,t,n){return s.DOM.unbind(e,t,n)},fire:function(e,t,n){return s.DOM.fire(e,t,n)},innerHtml:function(e,t){s.DOM.setHTML(e,t)}},pe=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ve=tinymce.util.Tools.resolve("tinymce.util.Class"),be=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),ye=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},xe=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,(function(e){return"-"+e})),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function we(){}function Ce(e){this.cls=[],this.cls._map={},this.onchange=e||we,this.prefix=""}k.extend(Ce.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Ce.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e};var ke,Te,Se,Ee=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,_e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Ne=/^\s*|\s*$/g,Re=ve.extend({init:function(e){var t=this.match;function n(e,n,o){var i;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((i=Ee.exec(e.replace(Ne,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(i[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(i[3])),a(function(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?0<=o.indexOf(n):"~="===t?0<=(" "+o+" ").indexOf(" "+n+" "):"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(i[4],i[5],i[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=r(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(i[7])),n.pseudo=!!i[7],n.direct=o,n}function r(e,t){var o,i,a,u=[];do{if(_e.exec(""),(i=_e.exec(e))&&(e=i[3],u.push(i[1]),i[2])){o=i[3];break}}while(i);for(o&&r(o,t),e=[],a=0;a<u.length;a++)">"!==u[a]&&e.push(n(u[a],[],">"===u[a-1]));return t.push(e),t}this._selectors=r(e,[])},match:function(e,t){var n,r,o,i,a,u,s,c,l,f,d,m,h;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(h=e,m=0,o=(i=(a=t[n]).length)-1;0<=o;o--)for(c=a[o];h;){if(c.pseudo)for(l=f=(d=h.parent().items()).length;l--&&d[l]!==h;);for(u=0,s=c.length;u<s;u++)if(!c[u](h,l,f)){u=s+1;break}if(u===s){m++;break}if(o===i-1)break;h=h.parent()}if(m===i)return!0}return!1},find:function(e){var t,n,r=[],o=this._selectors;function i(e,t,n){var o,a,u,s,c,l=t[n];for(o=0,a=e.length;o<a;o++){for(c=e[o],u=0,s=l.length;u<s;u++)if(!l[u](c,o,a)){u=s+1;break}if(u===s)n===t.length-1?r.push(c):c.items&&i(c.items(),t,n+1);else if(l.direct)return;c.items&&i(c.items(),t,n)}}if(e.items){for(t=0,n=o.length;t<n;t++)i(e.items(),o[t],0);1<n&&(r=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return ke||(ke=Re.Collection),new ke(r)}}),Oe=Array.prototype.push,Ae=Array.prototype.slice;Se={length:0,init:function(e){e&&this.add(e)},add:function(e){return k.isArray(e)?Oe.apply(this,e):e instanceof Te?this.add(e.toArray()):Oe.call(this,e),this},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(e){var t,n,r,o,i=[];for("string"==typeof e?(e=new Re(e),o=function(t){return e.match(t)}):o=e,t=0,n=this.length;t<n;t++)o(r=this[t])&&i.push(r);return new Te(i)},slice:function(){return new Te(Ae.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return k.each(this,e),this},toArray:function(){return k.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new Te(k.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each((function(n){n[e]&&n[e](t)})),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=k.toArray(arguments).slice(1);return this.each((function(n){n[e]&&n[e].apply(n,t)})),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each((function(t){t.classes.add(e)}))},removeClass:function(e){return this.each((function(t){t.classes.remove(e)}))}},k.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){Se[e]=function(){var t=k.toArray(arguments);return this.each((function(n){e in n&&n[e].apply(n,t)})),this}})),k.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){Se[e]=function(t){return this.prop(e,t)}})),Te=ve.extend(Se);var Pe=Re.Collection=Te,De=function(e){this.create=e.create};De.create=function(e,t){return new De({create:function(n,r){var o,i=function(e){n.set(r,e.value)};return n.on("change:"+r,(function(n){e.set(t,n.value)})),e.on("change:"+t,i),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",(function(){for(var e=o.length;e--;)o[e]()}))),o.push((function(){e.off("change:"+t,i)})),e.get(t)}})};var Me=tinymce.util.Tools.resolve("tinymce.util.Observable");function Be(e){return 0<e.nodeType}var Ie,Le,He=ve.extend({Mixins:[Me],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof De&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r,o=this.data[e];if(t instanceof De&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var r,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(k.isArray(n)){if(t.length!==n.length)return!1;for(r=t.length;r--;)if(!e(t[r],n[r]))return!1}if(Be(t)||Be(n))return t===n;for(r in o={},n){if(!e(t[r],n[r]))return!1;o[r]=!0}for(r in t)if(!o[r]&&!e(t[r],n[r]))return!1;return!0}(o,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return De.create(this,e)},destroy:function(){this.fire("destroy")}}),Fe={},ze={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative())return;Fe[n._id]||(Fe[n._id]=n),Ie||(Ie=!0,c.requestAnimationFrame((function(){var e,t;for(e in Ie=!1,Fe)(t=Fe[e]).state.get("rendered")&&t.reflow();Fe={}}),e.document.body))}},remove:function(e){Fe[e._id]&&delete Fe[e._id]}},We=function(e){return e?e.getRoot().uiContainer:null},Ue=We,je=function(e,t){return t.uiContainer=We(e)},Ve="onmousewheel"in e.document,$e=0,qe={Statics:{classPrefix:"mce-"},isRtl:function(){return Le.rtl},classPrefix:"mce-",init:function(e){var t,n,r=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)r.classes.add(e[t])}r.settings=e=k.extend({},r.Defaults,e),r._id=e.id||"mceu_"+$e++,r._aria={role:e.role},r._elmCache={},r.$=pe,r.state=new He({visible:!0,active:!1,disabled:!1,value:""}),r.data=new He(e.data),r.classes=new Ce((function(){r.state.get("rendered")&&(r.getEl().className=this.toString())})),r.classes.prefix=r.classPrefix,(t=e.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&t!==n&&o(n),o(t)),k.each("title text name visible disabled active value".split(" "),(function(t){t in e&&r[t](e[t])})),r.on("click",(function(){if(r.disabled())return!1})),r.settings=e,r.borderBox=ye(e.border),r.paddingBox=ye(e.padding),r.marginBox=ye(e.margin),e.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){return Ue(this)||ge.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,u,s,c,l=this,f=l.settings,d=l.getEl();e=l.borderBox=l.borderBox||xe(d,"border"),l.paddingBox=l.paddingBox||xe(d,"padding"),l.marginBox=l.marginBox||xe(d,"margin"),c=ge.getSize(d),u=f.minWidth,s=f.minHeight,o=u||c.width,i=s||c.height,n=f.width,r=f.height,a=void 0!==(a=f.autoResize)?a:!n&&!r,n=n||o,r=r||i;var m=e.left+e.right,h=e.top+e.bottom,g=f.maxWidth||65535,p=f.maxHeight||65535;return l._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:r,deltaW:m,deltaH:h,contentW:n-m,contentH:r-h,innerW:n-m,innerH:r-h,startMinWidth:u||0,startMinHeight:s||0,minW:Math.min(o,g),minH:Math.min(i,p),maxW:g,maxH:p,autoResize:a,scrollW:0},l._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,i,a=this,u=a._layoutRect;return u||(u=a.initLayoutRect()),e?(r=u.deltaW,o=u.deltaH,void 0!==e.x&&(u.x=e.x),void 0!==e.y&&(u.y=e.y),void 0!==e.minW&&(u.minW=e.minW),void 0!==e.minH&&(u.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<u.minW?u.minW:n)>u.maxW?u.maxW:n,u.w=n,u.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<u.minH?u.minH:n)>u.maxH?u.maxH:n,u.h=n,u.innerH=n-o),void 0!==(n=e.innerW)&&(n=(n=n<u.minW-r?u.minW-r:n)>u.maxW-r?u.maxW-r:n,u.innerW=n,u.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<u.minH-o?u.minH-o:n)>u.maxH-o?u.maxH-o:n,u.innerH=n,u.h=n+o),void 0!==e.contentW&&(u.contentW=e.contentW),void 0!==e.contentH&&(u.contentH=e.contentH),(t=a._lastLayoutRect).x===u.x&&t.y===u.y&&t.w===u.w&&t.h===u.h||((i=Le.repaintControls)&&i.map&&!i.map[a._id]&&(i.push(a),i.map[a._id]=!0),t.x=u.x,t.y=u.y,t.w=u.w,t.h=u.h),a):u},repaint:function(){var t,n,r,o,i,a,u,s,c,l,f=this;c=e.document.createRange?function(e){return e}:Math.round,t=f.getEl().style,o=f._layoutRect,s=f._lastRepaintRect||{},a=(i=f.borderBox).left+i.right,u=i.top+i.bottom,o.x!==s.x&&(t.left=c(o.x)+"px",s.x=o.x),o.y!==s.y&&(t.top=c(o.y)+"px",s.y=o.y),o.w!==s.w&&(l=c(o.w-a),t.width=(0<=l?l:0)+"px",s.w=o.w),o.h!==s.h&&(l=c(o.h-u),t.height=(0<=l?l:0)+"px",s.h=o.h),f._hasBody&&o.innerW!==s.innerW&&(l=c(o.innerW),(r=f.getEl("body"))&&((n=r.style).width=(0<=l?l:0)+"px"),s.innerW=o.innerW),f._hasBody&&o.innerH!==s.innerH&&(l=c(o.innerH),(r=r||f.getEl("body"))&&((n=n||r.style).height=(0<=l?l:0)+"px"),s.innerH=o.innerH),f._lastRepaintRect=s,f.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,ge.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return Ye(i).on(e,"string"!=typeof(n=t)?n:function(e){return r||i.parentsAndSelf().each((function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1})),r?r.call(o,e):(e.action=n,void this.fire("execute",e))}),i},off:function(e,t){return Ye(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Ye(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Ye(this).has(e)},parents:function(e){var t,n=new Pe;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new Pe(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=pe("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(e){return Le.translate?Le.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,r=n.getEl(),o=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}o&&o.items&&(e=[],o.items().each((function(t){t!==n&&e.push(t)})),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&pe(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return pe(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return pe(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i=this,a=i.settings;for(r in i.$el=pe(i.getEl()),i.state.set("rendered",!0),a)0===r.indexOf("on")&&i.on(r.substr(2),a[r]);if(i._eventsRoot){for(n=i.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)i._nativeEvents[r]=!0}Xe(i),a.style&&(e=i.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var u=i.getRoot();for(var s in u.controlIdLookup||(u.controlIdLookup={}),(u.controlIdLookup[i._id]=i)._aria)i.aria(s,i._aria[s]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",(function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===n?"none":"",i.getEl().getBoundingClientRect()),(t=i.parent())&&(t._lastRect=null),i.fire(n?"show":"hide"),ze.add(i)})),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,u=this.getEl(),s=u.parentNode,c=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(u,s);return t=c.x,n=c.y,r=u.offsetWidth,o=u.offsetHeight,i=s.clientWidth,a=s.clientHeight,"end"===e?(t-=i-r,n-=a-o):"center"===e&&(t-=i/2-r/2,n-=a/2-o/2),s.scrollLeft=t,s.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),t=(e=t).parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){ze.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Ye(e){return e._eventDispatcher||(e._eventDispatcher=new be({scope:e,toggleEvent:function(t,n){n&&be.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&Xe(e))}})),e._eventDispatcher}function Xe(e){var t,n,r,o,i,a;function u(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function s(){var e=o._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})})),o._lastHoverCtrl=null)}function c(t){var n,r,i,a=e.getParentCtrl(t.target),u=o._lastHoverCtrl,s=0;if(a!==u){if((r=(o._lastHoverCtrl=a).parents().toArray().reverse()).push(a),u){for((i=u.parents().toArray().reverse()).push(u),s=0;s<i.length&&r[s]===i[s];s++);for(n=i.length-1;s<=n;n--)(u=i[n]).fire("mouseleave",{target:u.getEl()})}for(n=s;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function l(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(i=e._nativeEvents){for((r=e.parents().toArray()).unshift(e),t=0,n=r.length;!o&&t<n;t++)o=r[t]._eventsRoot;for(o||(o=r[r.length-1]||e),e._eventsRoot=o,n=t,t=0;t<n;t++)r[t]._eventsRoot=o;var f=o._delegates;for(a in f||(f=o._delegates={}),i){if(!i)return!1;"wheel"!==a?("mouseenter"===a||"mouseleave"===a?o._hasMouseEnter||(pe(o.getEl()).on("mouseleave",s).on("mouseover",c),o._hasMouseEnter=1):f[a]||(pe(o.getEl()).on(a,u),f[a]=!0),i[a]=!1):Ve?pe(e.getEl()).on("mousewheel",l):pe(e.getEl()).on("DOMMouseScroll",l)}}}k.each("text title visible disabled active value".split(" "),(function(e){qe[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}));var Ge=Le=ve.extend(qe),Ke=function(e){return"static"===ge.getRuntimeStyle(e,"position")},Je=function(e){return e.state.get("fixed")};function Ze(t,n,r){var o,i,a,u,s,c,l,f,d,m;return d=Qe(),a=(i=ge.getPos(n,Ue(t))).x,u=i.y,Je(t)&&Ke(e.document.body)&&(a-=d.x,u-=d.y),o=t.getEl(),s=(m=ge.getSize(o)).width,c=m.height,l=(m=ge.getSize(n)).width,f=m.height,"b"===(r=(r||"").split(""))[0]&&(u+=f),"r"===r[1]&&(a+=l),"c"===r[0]&&(u+=Math.round(f/2)),"c"===r[1]&&(a+=Math.round(l/2)),"b"===r[3]&&(u-=c),"r"===r[4]&&(a-=s),"c"===r[3]&&(u-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(s/2)),{x:a,y:u,w:s,h:c}}var Qe=function(){var t=e.window;return{x:Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop),w:t.innerWidth||e.document.documentElement.clientWidth,h:t.innerHeight||e.document.documentElement.clientHeight}},et=function(e){var t,n=Ue(e);return n&&!Je(e)?{x:0,y:0,w:(t=n).scrollWidth-1,h:t.scrollHeight-1}:Qe()},tt={testMoveRel:function(e,t){for(var n=et(this),r=0;r<t.length;r++){var o=Ze(this,e,t[r]);if(Je(this)){if(0<o.x&&o.x+o.w<n.w&&0<o.y&&o.y+o.h<n.h)return t[r]}else if(o.x>n.x&&o.x+o.w<n.w+n.x&&o.y>n.y&&o.y+o.h<n.h+n.y)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=Ze(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n=this;function r(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}if(n.settings.constrainToViewport){var o=et(this),i=n.layoutRect();e=r(e,o.w+o.x,i.w),t=r(t,o.h+o.y,i.h)}var a=Ue(n);return a&&Ke(a)&&!Je(n)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),n.state.get("rendered")?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}},nt=Ge.extend({Mixins:[tt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)})),e._super()},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),rt=Ge.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==rt.tooltips&&(t.on("mouseenter",(function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(t.getEl(),o)}else r.hide()})),t.on("mouseleave mousedown click",(function(){t.tooltip().remove(),t._tooltip=null}))),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new nt({type:"tooltip"}),je(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",(function(e){t(e.value)})),e.state.on("change:active",(function(e){n(e.value)})),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),ot=rt.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",(function(e){t(e.value)})),t(e.state.get("value")),e._super()}}),it=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},at=Ge.extend({Mixins:[tt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new ot),t.on("click",(function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()}))},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",i="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true">×</button>'),t.progressBar&&(i=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+i+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return c.setTimeout((function(){e.$el.addClass(e.classPrefix+"in"),it(e,e.state.get("text"))}),100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().firstChild.innerHTML=t.value,it(e,t.value)})),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",(function(t){it(e,e.state.get("text"))}))),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});function ut(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function st(t,n){var r,o,i,a,u,s,c,l=n.document||e.document;n=n||{};var f=l.getElementById(n.handle||t);i=function(t){var i,d,m,h,g,p,v,b,y,x,w,C=(i=l,y=Math.max,d=i.documentElement,m=i.body,h=y(d.scrollWidth,m.scrollWidth),g=y(d.clientWidth,m.clientWidth),p=y(d.offsetWidth,m.offsetWidth),v=y(d.scrollHeight,m.scrollHeight),b=y(d.clientHeight,m.clientHeight),{width:h<p?g:h,height:v<y(d.offsetHeight,m.offsetHeight)?b:v});ut(t),t.preventDefault(),o=t.button,x=f,s=t.screenX,c=t.screenY,w=e.window.getComputedStyle?e.window.getComputedStyle(x,null).getPropertyValue("cursor"):x.runtimeStyle.cursor,r=pe("<div></div>").css({position:"absolute",top:0,left:0,width:C.width,height:C.height,zIndex:2147483647,opacity:1e-4,cursor:w}).appendTo(l.body),pe(l).on("mousemove touchmove",u).on("mouseup touchend",a),n.start(t)},u=function(e){if(ut(e),e.button!==o)return a(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-c,e.preventDefault(),n.drag(e)},a=function(e){ut(e),pe(l).off("mousemove touchmove",u).off("mouseup touchend",a),r.remove(),n.stop&&n.stop(e)},this.destroy=function(){pe(f).off()},pe(f).on("mousedown touchstart",i)}var ct=tinymce.util.Tools.resolve("tinymce.ui.Factory"),lt=function(e){return!!e.getAttribute("data-mce-tabstop")};function ft(t){var n,r,o=t.root;function i(e){return e&&1===e.nodeType}try{n=e.document.activeElement}catch(t){n=e.document.body}function a(e){return i(e=e||n)?e.getAttribute("role"):null}function u(e){for(var t,r=e||n;r=r.parentNode;)if(t=a(r))return t}function s(e){var t=n;if(i(t))return t.getAttribute("aria-"+e)}function c(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function l(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){var r;(c(r=n)&&!r.hidden||lt(r)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(r)))&&t.push(n);for(var o=0;o<n.childNodes.length;o++)e(n.childNodes[o])}}(e||o.getEl()),t}function f(e){var t,n;(n=(e=e||r).parents().toArray()).unshift(e);for(var o=0;o<n.length&&!(t=n[o]).settings.ariaRoot;o++);return t}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function m(e,t){var r=-1,o=f();t=t||l(o.getEl());for(var i=0;i<t.length;i++)t[i]===n&&(r=i);r+=e,o.lastAriaIndex=d(r,t)}function h(){"tablist"===u()?m(-1,l(n.parentNode)):r.parent().submenu?b():m(-1)}function g(){var e=a(),t=u();"tablist"===t?m(1,l(n.parentNode)):"menuitem"===e&&"menu"===t&&s("haspopup")?y():m(1)}function p(){m(-1)}function v(){var e=a(),t=u();"menuitem"===e&&"menubar"===t?y():"button"===e&&s("haspopup")?y({key:"down"}):m(1)}function b(){r.fire("cancel")}function y(e){e=e||{},r.fire("click",{target:n,aria:e})}return r=o.getParentCtrl(n),o.on("keydown",(function(e){function t(e,t){c(n)||lt(n)||"slider"!==a(n)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,h);break;case 39:t(e,g);break;case 38:t(e,p);break;case 40:t(e,v);break;case 27:b();break;case 14:case 13:case 32:t(e,y);break;case 9:!function(e){if("tablist"===u()){var t=l(r.getEl("body"))[0];t&&t.focus()}else m(e.shiftKey?-1:1)}(e),e.preventDefault()}})),o.on("focusin",(function(e){n=e.target,r=e.control})),{focusFirst:function(e){var t=f(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?d(t.lastAriaIndex,n):d(0,n)}}}var dt,mt,ht,gt,pt={},vt=Ge.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Pe,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Ce((function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())})),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=ct.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=pt[e]=pt[e]||new Re(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r,o=this;if(!e||!(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav))return r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each((function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)})),t&&t.focus(),o;n.focusFirst(o)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return k.isArray(e)||(e=[e]),k.each(e,(function(e){e&&(e instanceof Ge||("string"==typeof e&&(e={type:e}),t=k.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=ct.create(t)),r.push(e))})),r},renderNew:function(){var e=this;return e.items().each((function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?pe(r.childNodes[n]).before(t.renderHtml()):pe(r).append(t.renderHtml()),t.postRender(),ze.add(t))})),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,o,i;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each((function(t){var n=t.name(),r=t.value();n&&void 0!==r&&(e[n]=r)})),e},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=ft({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(ze.remove(this),this.visible()){for(Ge.repaintControls=[],Ge.repaintControls.map={},this.recalc(),e=Ge.repaintControls.length;e--;)Ge.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Ge.repaintControls=[]}return this}}),bt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this;function t(){var t,n,r;function o(r,o,i,a,u,s){var c,l,f,d,m,h,g,p;if(l=e.getEl("scroll"+r)){if(g=o.toLowerCase(),p=i.toLowerCase(),pe(e.getEl("absend")).css(g,e.layoutRect()[a]-1),!u)return void pe(l).css("display","none");pe(l).css("display","block"),c=e.getEl("body"),f=e.getEl("scroll"+r+"t"),d=c["client"+i]-4,m=(d-=t&&n?l["client"+s]:0)/c["scroll"+i],(h={})[g]=c["offset"+o]+2,h[p]=d,pe(l).css(h),(h={})[g]=c["scroll"+o]*m,h[p]=d*m,pe(f).css(h)}}r=e.getEl("body"),t=r.scrollWidth>r.clientWidth,n=r.scrollHeight>r.clientHeight,o("h","Left","Width","contentW",t,"Height"),o("v","Top","Height","contentH",n,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function t(t,n,r,o,i){var a,u=e._id+"-scroll"+t,s=e.classPrefix;pe(e.getEl()).append('<div id="'+u+'" class="'+s+"scrollbar "+s+"scrollbar-"+t+'"><div id="'+u+'t" class="'+s+'scrollbar-thumb"></div></div>'),e.draghelper=new st(u+"t",{start:function(){a=e.getEl("body")["scroll"+n],pe("#"+u).addClass(s+"active")},drag:function(u){var s,c,l,f,d=e.layoutRect();c=d.contentW>d.innerW,l=d.contentH>d.innerH,f=e.getEl("body")["client"+r]-4,s=(f-=c&&l?e.getEl("scroll"+t)["client"+i]:0)/e.getEl("body")["scroll"+r],e.getEl("body")["scroll"+n]=a+u["delta"+o]/s},stop:function(){pe("#"+u).removeClass(s+"active")}})}e.classes.add("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}(),e.on("wheel",(function(n){var r=e.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,t()})),pe(e.getEl("body")).on("scroll",t)),t())}},yt=vt.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[bt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),xt={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ge.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},wt=[],Ct=[];function kt(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function Tt(e){var t=ge.getViewPort().y;function n(t,n){for(var r,o=0;o<wt.length;o++)if(wt[o]!==e)for(r=wt[o].parent();r&&(r=r.parent());)r===e&&wt[o].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function St(e,t){var n,r,o=Et.zIndex||65535;if(e)Ct.push(t);else for(n=Ct.length;n--;)Ct[n]===t&&Ct.splice(n,1);if(Ct.length)for(n=0;n<Ct.length;n++)Ct[n].modal&&(o++,r=Ct[n]),Ct[n].getEl().style.zIndex=o,Ct[n].zIndex=o,o++;var i=pe("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?pe(i).css("z-index",r.zIndex-1):i&&(i.parentNode.removeChild(i),gt=!1),Et.currentZIndex=o}var Et=yt.extend({Mixins:[tt,xt],init:function(t){var n=this;n._super(t),(n._eventsRoot=n).classes.add("floatpanel"),t.autohide&&(dt||(dt=function(e){2!==e.button&&function(e){for(var t=wt.length;t--;){var n=wt[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(kt(r,n)||n.parent()===r))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},pe(e.document).on("click touchstart",dt)),function(){if(!ht){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;ht=function(){e.document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,Et.hideAll())},pe(e.window).on("resize",ht)}}(),wt.push(n)),t.autofix&&(mt||(mt=function(){var e;for(e=wt.length;e--;)Tt(wt[e])},pe(e.window).on("scroll",mt)),n.on("move",(function(){Tt(this)}))),n.on("postrender show",(function(e){if(e.control===n){var t,r=n.classPrefix;n.modal&&!gt&&((t=pe("#"+r+"modal-block",n.getContainerElm()))[0]||(t=pe('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(n.getContainerElm())),c.setTimeout((function(){t.addClass(r+"in"),pe(n.getEl()).addClass(r+"in")})),gt=!0),St(!0,n)}})),n.on("show",(function(){n.parents().each((function(e){if(e.state.get("fixed"))return n.fixed(!0),!1}))})),t.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",t.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=ge.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this._super();for(e=wt.length;e--&&wt[e]!==this;);return-1===e&&wt.push(this),t},hide:function(){return _t(this),St(!1,this),this._super()},hideAll:function(){Et.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),St(!1,this)),this},remove:function(){_t(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function _t(e){var t;for(t=wt.length;t--;)wt[t]===e&&wt.splice(t,1);for(t=Ct.length;t--;)Ct[t]===e&&Ct.splice(t,1)}Et.hideAll=function(){for(var e=wt.length;e--;){var t=wt[e];t&&t.settings.autohide&&(t.hide(),wt.splice(e,1))}};var Nt=[],Rt="";function Ot(t){var n,r=pe("meta[name=viewport]")[0];!1!==u.overrideViewPort&&(r||((r=e.document.createElement("meta")).setAttribute("name","viewport"),e.document.getElementsByTagName("head")[0].appendChild(r)),(n=r.getAttribute("content"))&&void 0!==Rt&&(Rt=n),r.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Rt))}var At=Et.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new yt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",(function(e){var n=t.classPrefix+"close";(ge.hasClass(e.target,n)||ge.hasClass(e.target.parentNode,n))&&t.close()})),t.on("cancel",(function(){t.close()})),t.on("move",(function(e){e.control===t&&Et.hideAll()})),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(ge.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=ge.getSize(e);n.headerW=o.width,n.headerH=o.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var i=ge.getWindowSize();return n.x=t.settings.x||Math.max(0,i.w/2-n.w/2),n.y=t.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",u=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(u='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===u&&(u=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+u+"</div>"+a+"</div></div>"},fullscreen:function(t){var n,r,o=this,i=e.document.documentElement,a=o.classPrefix;if(t!==o._fullscreen)if(pe(e.window).on("resize",(function(){var e;if(o._fullscreen)if(n)o._timer||(o._timer=c.setTimeout((function(){var e=ge.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0}),50));else{e=(new Date).getTime();var t=ge.getWindowSize();o.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)}})),r=o.layoutRect(),o._fullscreen=t){o._initial={x:r.x,y:r.y,w:r.w,h:r.h},o.borderBox=ye("0"),o.getEl("head").style.display="none",r.deltaH-=r.headerH+2,pe([i,e.document.body]).addClass(a+"fullscreen"),o.classes.add("fullscreen");var u=ge.getWindowSize();o.moveTo(0,0).resizeTo(u.w,u.h)}else o.borderBox=ye(o.settings.border),o.getEl("head").style.display="",r.deltaH+=r.headerH,pe([i,e.document.body]).removeClass(a+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout((function(){t.classes.add("in"),t.fire("open")}),0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new st(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",(function(e){e.isDefaultPrevented()||t.close()})),Nt.push(t),Ot(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),function(t,n){(function(){for(var e=0;e<Nt.length;e++)if(Nt[e]._fullscreen)return!0;return!1})()&&!1===n&&pe([e.document.documentElement,e.document.body]).removeClass(t+"fullscreen")}(n.classPrefix,!1),t=Nt.length;t--;)Nt[t]===n&&Nt.splice(t,1);Ot(0<Nt.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!u.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};c.setInterval((function(){var n=e.window.innerWidth,r=e.window.innerHeight;t.w===n&&t.h===r||(t={w:n,h:r},pe(e.window).trigger("resize"))}),100)}pe(e.window).on("resize",(function(){var e,t,n=ge.getWindowSize();for(e=0;e<Nt.length;e++)t=Nt[e].layoutRect(),Nt[e].moveTo(Nt[e].settings.x||Math.max(0,n.w/2-t.w/2),Nt[e].settings.y||Math.max(0,n.h/2-t.h/2))}))}();var Pt,Dt,Mt,Bt=At.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n,r=t.callback||function(){};function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(t.buttons){case Bt.OK_CANCEL:n=[o("Ok",!0,!0),o("Cancel",!1)];break;case Bt.YES_NO:case Bt.YES_NO_CANCEL:n=[o("Yes",1,!0),o("No",0)],t.buttons===Bt.YES_NO_CANCEL&&n.push(o("Cancel",-1));break;default:n=[o("Ok",!0,!0)]}return new At({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){r(!1)}}).renderTo(e.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Bt.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Bt.OK_CANCEL,Bt.msgBox(e)}}}),It=function(t,n){return{renderUI:function(){return function(e,t){return e.inline?G(e,t):function(e){throw new Error("inlite theme only supports inline mode.")}()}(t,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,r){var o,i=k.extend(n,{maxWidth:(o=t(e),ge.getSize(o).width)}),a=new at(i);return 0<(a.args=i).timeout&&(a.timer=setTimeout((function(){a.close(),r()}),i.timeout)),a.on("close",(function(){r()})),a.renderTo(),a},close:function(e){e.close()},reposition:function(n){de(n,(function(e){e.moveTo(0,0)})),function(n){if(0<n.length){var r=n.slice(0,1)[0],o=t(e);r.moveRel(o,"tc-tc"),de(n,(function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))}}(n)},getArgs:function(e){return e.args}}}(t)},getWindowManagerImpl:function(){return{open:function(t,n,r){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new At(t)).on("close",(function(){r(o)})),t.data&&o.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();n in t.data&&e.value(t.data[n])}))})),o.features=t||{},o.params=n||{},o=o.renderTo(e.document.body).reflow()},alert:function(e,t,n){var r;return(r=Bt.alert(e,(function(){t()}))).on("close",(function(){n(r)})),r},confirm:function(e,t,n){var r;return(r=Bt.confirm(e,(function(e){t(e)}))).on("close",(function(){n(r)})),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Lt=void 0!==e.window?e.window:Function("return this;")(),Ht=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:Lt,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},Ft=tinymce.util.Tools.resolve("tinymce.util.Promise"),zt=0,Wt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ut=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),jt=function(e){return"A"===e.nodeName&&e.hasAttribute("href")},Vt=function(e){var t,n,r,o,i;n=function(e){var t,n,r,o,i,a,u,s;return o=e.selection,i=e.dom,a=o.getRng(),u=i,s=Ut.getNode(a.startContainer,a.startOffset),t=u.getParent(s,jt)||s,n=Ut.getNode(a.endContainer,a.endOffset),r=e.getBody(),k.grep(function(e,t,n){var r,o,i=[];for(r=new Wt(t,e),o=t;o&&(1===o.nodeType&&i.push(o),o!==n);o=r.next());return i}(r,t,n),jt)}(t=e),r=function(e,t){var n={};function r(r){var o,i,a;i=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"],1===i.nodeType&&(o=e.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(a=Math.min(a,i.childNodes.length-1),r?i.insertBefore(o,i.childNodes[a]):e.insertAfter(o,i.childNodes[a])):i.appendChild(o),i=o,a=0),n[r?"startContainer":"endContainer"]=i,n[r?"startOffset":"endOffset"]=a}return r(!0),t.collapsed||r(),n}(o=t.dom,(i=t.selection).getRng()),k.each(n,(function(e){t.dom.remove(e,!0)})),i.setRng(function(e,t){function n(n){var r,o,i;r=i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],r&&(1===r.nodeType&&(o=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(r),r=r.parentNode,e.remove(i)),t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=o)}n(!0),n();var r=e.createRng();return r.setStart(t.startContainer,t.startOffset),t.endContainer&&r.setEnd(t.endContainer,t.endOffset),r}(o,r))},$t=function(e){e.selection.collapse(!1)},qt=function(e){e.focus(),Vt(e),$t(e)},Yt=function(e,t,n){var r,o;o=(r=e.editorUpload.blobCache).create(function(e){return e+zt+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+Date.now().toString(36)+t()+t()+t());var t}("mceu"),n,t),r.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()}))},Xt=function(e,t){0===t.trim().length?qt(e):function(e,t){var n,r,o,i,a,u=e.dom.getParent(e.selection.getStart(),"a[href]");u?(i=u,a=t,(o=e).focus(),o.dom.setAttrib(i,"href",a),$t(o)):(r=t,(n=e).execCommand("mceInsertLink",!1,{href:r}),$t(n))}(e,t)},Gt=qt,Kt=function(t,n){t.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){n.showForm(t,"quicklink")}}),t.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){new Ft((function(t){var n;(n=e.document.createElement("input")).type="file",n.style.position="fixed",n.style.left=0,n.style.top=0,n.style.opacity=.001,e.document.body.appendChild(n),n.onchange=function(e){t(Array.prototype.slice.call(e.target.files))},n.click(),n.parentNode.removeChild(n)})).then((function(e){var n=e[0];(function(e){return new Ft((function(t){var n=new(Ht("FileReader"));n.onloadend=function(){t(n.result.split(",")[1])},n.readAsDataURL(e)}))})(n).then((function(e){Yt(t,e,n)}))}))}}),t.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){n.hide(),function(e,t,n){var r,o,i;e.plugins.table?e.plugins.table.insertTable(t,n):(o=t,i=n,(r=e).undoManager.transact((function(){var e,t;r.insertContent(function(e,t){var n,r,o;for(o='<table data-mce-id="mce" style="width: 100%">',o+="<tbody>",r=0;r<t;r++){for(o+="<tr>",n=0;n<e;n++)o+="<td><br></td>";o+="</tr>"}return(o+="</tbody>")+"</table>"}(o,i)),(e=r.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),t=r.dom.select("td,th",e),r.selection.setCursorLocation(t[0],0)})))}(t,2,2)}}),function(e){for(var t=function(t){return function(){!function(e,t){e.execCommand("FormatBlock",!1,t)}(e,t)}},n=1;n<6;n++){var r="h"+n;e.addButton(r,{text:r.toUpperCase(),tooltip:"Heading "+n,stateSelector:r,onclick:t(r),onPostRender:function(){this.getEl().firstChild.firstChild.style.fontWeight="bold"}})}}(t)},Jt=function(){var e=u.container;if(e&&"static"!==s.DOM.getStyle(e,"position",!0)){var t=s.DOM.getPos(e),n=t.x-e.scrollLeft,r=t.y-e.scrollTop;return re.some({x:n,y:r})}return re.none()},Zt=function(e,t){var n,r,o={};return"quicklink",n={items:[{type:"button",name:"unlink",icon:"unlink",onclick:function(){e.focus(),Gt(e),t()},tooltip:"Remove link"},{type:"filepicker",name:"linkurl",placeholder:"Paste or type a link",filetype:"file",onchange:function(e){var t=e.meta;t&&t.attach&&(o={href:this.value(),attach:t.attach})}},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:function(t){if(t.control===this){var n,r="";(n=e.dom.getParent(e.selection.getStart(),"a[href]"))&&(r=e.dom.getAttrib(n,"href")),this.fromJSON({linkurl:r}),o=this.find("#unlink"),n?o.show():o.hide(),this.find("#linkurl")[0].focus()}var o},onsubmit:function(n){(function(e,t){return!function(e){return/^https?:\/\//.test(e.trim())}(t)&&function(e){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(e.trim())}(t)?(n=e,r=t,new Ft((function(e){n.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(t){e(!0===t?"http://"+r:r)}))}))):Ft.resolve(t);var n,r})(e,n.data.linkurl).then((function(n){e.undoManager.transact((function(){n===o.href&&(o.attach(),o={}),Xt(e,n)})),t()}))}},(r=ct.create(k.extend({type:"form",layout:"flex",direction:"row",padding:5,name:"quicklink",spacing:3},n))).on("show",(function(){r.find("textbox").eq(0).each((function(e){e.focus()}))})),r},Qt=function(e,t,n){var r,o,i=[];if(n)return k.each(A(o=n)?o:N(o)?o.split(/[ ,]/):[],(function(t){if("|"===t)r=null;else if(e.buttons[t]){r||(r={type:"buttongroup",items:[]},i.push(r));var n=e.buttons[t];O(n)&&(n=n()),n.type=n.type||"button",(n=ct.create(n)).on("postRender",(o=e,a=n,function(){var e,t,n=(t=function(e,t){return{selector:e,handler:t}},(e=a).settings.stateSelector?t(e.settings.stateSelector,(function(t){e.active(t)})):e.settings.disabledStateSelector?t(e.settings.disabledStateSelector,(function(t){e.disabled(t)})):null);null!==n&&o.selection.selectorChanged(n.selector,n.handler)})),r.items.push(n)}var o,a})),ct.create({type:"toolbar",layout:"flow",name:t,items:i})},en=function(){var e,t,n=function(e){return 0<e.items().length},r=function(e,t){var r,o,i=(r=e,o=t,k.map(o,(function(e){return Qt(r,e.id,e.items)}))).concat([Qt(e,"text",U(e)),Qt(e,"insert",j(e)),Zt(e,l)]);return ct.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:k.grep(i,n),oncancel:function(){e.focus()}})},o=function(e){e&&e.show()},i=function(e,t){e.moveTo(t.x,t.y)},a=function(e,t){t=t?t.substr(0,2):"",k.each({t:"down",b:"up",c:"center"},(function(n,r){e.classes.toggle("arrow-"+n,r===t.substr(0,1))})),"cr"===t?(e.classes.toggle("arrow-left",!0),e.classes.toggle("arrow-right",!1)):"cl"===t?(e.classes.toggle("arrow-left",!1),e.classes.toggle("arrow-right",!0)):k.each({l:"left",r:"right"},(function(n,r){e.classes.toggle("arrow-"+n,r===t.substr(1,1))}))},u=function(e,t){var n=e.items().filter("#"+t);return 0<n.length&&(n[0].show(),e.reflow(),!0)},c=function(e,n,r,o){var u,c,l,f;if(f=V(r),u=y(r),c=s.DOM.getRect(e.getEl()),l="insert"===n?function(e,t,n){return H(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],e,t,n)}(o,u,c):F(o,u,c)){var d=Jt().getOr({x:0,y:0}),m={x:l.rect.x-d.x,y:l.rect.y-d.y,w:l.rect.w,h:l.rect.h};return i(e,z(f,t=o,u,m)),a(e,l.position),!0}return!1},l=function(){e&&e.hide()};return{show:function(t,n,i,a){var s,f,d,m;e||(function(e){e.fire("BeforeRenderUI")}(t),(e=r(t,a)).renderTo().reflow().moveTo(i.x,i.y),t.nodeChanged()),f=n,d=t,m=i,o(s=e),s.items().hide(),u(s,f)?!1===c(s,f,d,m)&&l():l()},showForm:function(n,r){if(e){if(e.items().hide(),!u(e,r))return void l();var c,f,d,m=void 0;o(e),e.items().hide(),u(e,r),d=V(n),c=y(n),m=s.DOM.getRect(e.getEl()),(f=F(t,c,m))&&(m=f.rect,i(e,z(d,t,c,m)),a(e,f.position))}},reposition:function(t,n,r){e&&c(e,n,t,r)},inForm:function(){return e&&e.visible()&&0<e.items().filter("form:visible").length},hide:l,focus:function(){e&&e.find("toolbar:visible").eq(0).each((function(e){e.focus(!0)}))},remove:function(){e&&(e.remove(),e=null)}}},tn=ve.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=k.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,i=this.settings;t=i.firstControlClass,n=i.lastControlClass,e.each((function(e){e.classes.remove(t).remove(n).add(i.controlClass),e.visible()&&(r||(r=e),o=e)})),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each((function(e){t+=e.renderHtml()})),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),nn=tn.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),rn=rt.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",(function(e){e.preventDefault()})),n.on("touchstart",(function(e){n.fire("click",e),e.preventDefault()})),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var t,n,r=this,o=r._id,i=r.classPrefix,a=r.state.get("icon"),u=r.state.get("text"),s="",c=r.settings;return(t=c.image)?(a="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",u&&(r.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+r.encode(u)+"</span>"),a=a?i+"ico "+i+"i-"+a:"",n="boolean"==typeof c.active?' aria-pressed="'+c.active+'"':"",'<div id="'+o+'" class="'+r.classes+'" tabindex="-1"'+n+'><button id="'+o+'-button" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+s+"</button></div>"},bindStates:function(){var t=this,n=t.$,r=t.classPrefix+"txt";function o(e){var o=n("span."+r,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),o=n("span."+r,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}return t.state.on("change:text",(function(e){o(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,i=t.classPrefix;r=(t.settings.icon=r)?i+"ico "+i+"i-"+t.settings.icon:"";var a=t.getEl().firstChild,u=a.getElementsByTagName("i")[0];r?(u&&u===a.firstChild||(u=e.document.createElement("i"),a.insertBefore(u,a.firstChild)),u.className=r):u&&a.removeChild(u),o(t.state.get("text"))})),t._super()}}),on=rn.extend({init:function(e){e=k.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=ge.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),pe(t).on("change",(function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)})),pe(t).on("click",(function(e){e.stopPropagation()})),pe(e.getEl("button")).on("click touchstart",(function(e){e.stopPropagation(),t.click(),e.preventDefault()})),e.getEl().appendChild(t)},remove:function(){pe(this.getEl("button")).off(),pe(this.getEl("input")).off(),this._super()}}),an=vt.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),un=rt.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",(function(e){e.preventDefault()})),t.on("click",(function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())})),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",(function(e){t.getEl("al").firstChild.data=t.translate(e.value)})),t.state.on("change:checked change:value",(function(e){t.fire("change"),n(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,o=t.classPrefix;if(void 0===r)return t.settings.icon;r=(t.settings.icon=r)?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a===i.firstChild||(a=e.document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a)})),t.state.get("checked")&&n(!0),t._super()}}),sn=tinymce.util.Tools.resolve("tinymce.util.VK"),cn=rt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",(function(n){var r=n.target,o=t.getEl();if(pe.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode})),t.on("keydown",(function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}})),t.on("mouseover",(function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}}))},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||((e=n.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=ct.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",(function(e){e.control===t.menu&&t.focus()})),t.menu.on("show hide",(function(e){e.control.items().each((function(e){e.active(e.value()===t.value())}))})).fire("show"),t.menu.on("select",(function(e){t.value(e.control.value())})),t.on("focusin",(function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()})),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,n,r=this,o=r.getEl(),i=r.getEl("open"),a=r.layoutRect(),u=0,s=o.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(u=parseInt(ge.getRuntimeStyle(s,"padding-right"),10)-parseInt(ge.getRuntimeStyle(s,"padding-left"),10)),t=i?a.w-ge.getSize(i).width-10:a.w-10;var c=e.document;return c.all&&(!c.documentMode||c.documentMode<=8)&&(n=r.layoutRect().h-2+"px"),pe(s).css({width:t-u,lineHeight:n}),r._super(),r},postRender:function(){var e=this;return pe(this.getEl("inp")).on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)})),e._super()},renderHtml:function(){var e,t,n,r=this,o=r._id,i=r.settings,a=r.classPrefix,u=r.state.get("value")||"",s="",c="";return"spellcheck"in i&&(c+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(c+=' maxlength="'+i.maxLength+'"'),i.size&&(c+=' size="'+i.size+'"'),i.subtype&&(c+=' type="'+i.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',r.disabled()&&(c+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=a+"ico "+a+"i-"+i.icon),t=r.state.get("text"),(e||t)&&(s='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",r.classes.add("has-open")),'<div id="'+o+'" class="'+r.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+r.encode(u,!1)+'" hidefocus="1"'+c+' placeholder="'+r.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=ct.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),k.each(e,(function(e){var r,o;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(r=e.value,o=e.title,function(){n.fire("selectitem",{title:o,value:r})})})})),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()}));var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",(function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl("inp").disabled=t.value})),e.state.on("change:statusLevel",(function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;ge.css(n,"display","none"===o?"none":""),ge.toggleClass(n,r+"i-checkmark","ok"===o),ge.toggleClass(n,r+"i-warning","warn"===o),ge.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()})),ge.on(e.getEl("status"),"mouseleave",(function(){e.tooltip().hide()})),e.on("cancel",(function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())}));var t=function(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()};return e.on("keydown",(function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===sn.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===sn.UP&&(n.preventDefault(),t(-1,e.menu)))})),e._super()},remove:function(){pe(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ln=cn.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.state.get("rendered")&&e.repaintColor(t.value)})),e._super()}}),fn=rn.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Et(n).on("hide",(function(){e.classes.remove("opened")})).on("cancel",(function(t){t.stopPropagation(),e.focus(),e.hidePanel()})).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===r.substr(-1)),e.panel.classes.toggle("end","r"===r.substr(-1));var o="t"===r.substr(0,1);e.panel.classes.toggle("bottom",!o),e.panel.classes.toggle("top",o),e.panel.moveRel(e.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",(function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))})),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),dn=s.DOM,mn=fn.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",(function(n){n.aria&&"down"===n.aria.key||n.control!==e||dn.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))})),delete e.settings.onclick,e._super()}}),hn=tinymce.util.Tools.resolve("tinymce.util.Color"),gn=rt.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,r,o,i=this,a=i.color();function u(e,t){var n,r,o=ge.getPos(e);return n=t.pageX-o.x,r=t.pageY-o.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:r=Math.max(0,Math.min(r/e.clientHeight,1))}}function s(e,t){var a=(360-e.h)/360;ge.css(n,{top:100*a+"%"}),t||ge.css(o,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=hn({s:100,v:100,h:e.h}).toHex(),i.color().parse({s:e.s,v:e.v,h:e.h})}function c(t){var n;n=u(r,t),e.s=100*n.x,e.v=100*(1-n.y),s(e),i.fire("change")}function l(n){var r;r=u(t,n),(e=a.toHsv()).h=360*(1-r.y),s(e,!0),i.fire("change")}t=i.getEl("h"),n=i.getEl("hp"),r=i.getEl("sv"),o=i.getEl("svp"),i._repaint=function(){s(e=a.toHsv())},i._super(),i._svdraghelper=new st(i._id+"-sv",{start:c,drag:c}),i._hdraghelper=new st(i._id+"-h",{start:l,drag:l}),i._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=hn()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var e,t,o,i,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(i=r.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+i[e]+",endColorstr="+i[e+1]+");-ms-"+o+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),pn=rt.extend({init:function(e){e=k.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},t=ge.create("div",e,"<span>"+this.translate(n.text)+"</span>"),n.height&&ge.css(t,"height",n.height+"px"),n.width&&ge.css(t,"width",n.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",(function(e){e.preventDefault()})),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",(function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return k.grep(t,(function(e){return r.test(e.name)}))}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}}))},remove:function(){this.$el.off(),this._super()}}),vn=rt.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",(function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})})),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",(function(t){e.innerHtml(e._getDataPathHtml(t.value))})),e._super()},_getDataPathHtml:function(e){var t,n,r=e||[],o="",i=this.classPrefix;for(t=0,n=r.length;t<n;t++)o+=(0<t?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(t===n-1?" "+i+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return o||(o='<div class="'+i+'path-item"> </div>'),o}}),bn=vn.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",(function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()})),t.on("nodeChange",(function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1===i[a].nodeType&&!n(i[a])){var u=t.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(u.isDefaultPrevented()||o.push({name:u.name,element:i[a]}),u.isPropagationStopped())break}e.row(o)}))),e._super()}}),yn=vt.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),xn=vt.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each((function(t){var n,r=t.settings.label;r&&((n=new yn(k.extend({items:{type:"label",id:t._id+"-l",text:r,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,r=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each((function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=r<n?n:r,o.push(t)})),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=r+n}e._super(),e.on("show",t),t()}}),wn=xn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),Cn=0,kn=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:J(e)}},Tn=kn,Sn=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),En=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),_n=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Rn(r(1),r(2))}),Nn=function(){return Rn(0,0)},Rn=function(e,t){return{major:e,minor:t}},On=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Nn():_n(e,n)},An=Nn,Pn="Firefox",Dn=function(e,t){return function(){return t===e}},Mn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Dn("Edge",t),isChrome:Dn("Chrome",t),isIE:Dn("IE",t),isOpera:Dn("Opera",t),isFirefox:Dn(Pn,t),isSafari:Dn("Safari",t)}},Bn=function(){return Mn({current:void 0,version:An()})},In=Mn,Ln=(J("Edge"),J("Chrome"),J("IE"),J("Opera"),J(Pn),J("Safari"),"Windows"),Hn="Android",Fn="Solaris",zn="FreeBSD",Wn=function(e,t){return function(){return t===e}},Un=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Wn(Ln,t),isiOS:Wn("iOS",t),isAndroid:Wn(Hn,t),isOSX:Wn("OSX",t),isLinux:Wn("Linux",t),isSolaris:Wn(Fn,t),isFreeBSD:Wn(zn,t)}},jn=function(){return Un({current:void 0,version:An()})},Vn=Un,$n=(J(Ln),J("iOS"),J(Hn),J("Linux"),J("OSX"),J(Fn),J(zn),function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o))return re.some(o)}return re.none()}(e,(function(e){return e.search(n)}))}),qn=function(e,t){return-1!==e.indexOf(t)},Yn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Xn=function(e){return function(t){return qn(t,e)}},Gn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return qn(e,"edge/")&&qn(e,"chrome")&&qn(e,"safari")&&qn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yn],search:function(e){return qn(e,"chrome")&&!qn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return qn(e,"msie")||qn(e,"trident")}},{name:"Opera",versionRegexes:[Yn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xn("firefox")},{name:"Safari",versionRegexes:[Yn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(qn(e,"safari")||qn(e,"mobile/"))&&qn(e,"applewebkit")}}],Kn=[{name:"Windows",search:Xn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return qn(e,"iphone")||qn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Xn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xn("linux"),versionRegexes:[]},{name:"Solaris",search:Xn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xn("freebsd"),versionRegexes:[]}],Jn={browsers:J(Gn),oses:J(Kn)},Zn=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=Jn.browsers(),m=Jn.oses(),h=function(e,t){return $n(e,t).map((function(e){var n=On(e.versionRegexes,t);return{current:e.name,version:n}}))}(d,e).fold(Bn,In),g=function(e,t){return $n(e,t).map((function(e){var n=On(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(jn,Vn);return{browser:h,os:g,deviceType:(n=h,r=e,o=(t=g).isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,s=o||a||u&&!0===/mobile/i.test(r),c=t.isiOS()||t.isAndroid(),l=c&&!s,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:J(o),isiPhone:J(i),isTablet:J(s),isPhone:J(l),isTouch:J(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:J(f)})}},Qn=(Mt=!(Pt=function(){var t=e.navigator.userAgent;return Zn(t)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Mt||(Mt=!0,Dt=Pt.apply(null,e)),Dt}),er=En,tr=Sn,nr=function(e){return e.nodeType!==er&&e.nodeType!==tr||0===e.childElementCount},rr=(Qn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),k.trim),or=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},ir=or("true"),ar=or("false"),ur=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},sr=function(e){return e.innerText||e.textContent},cr=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&fr(e);var t},lr=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},fr=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return ir(e)}return!1}(e)&&!ar(e)},dr=function(e){return lr(e)&&fr(e)},mr=function(e){var t,n=function(e){return e.id?e.id:("h",t=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++Cn+String(t));var t}(e);return ur("header",sr(e),"#"+n,lr(t=e)?parseInt(t.nodeName.substr(1),10):0,(function(){e.id=n}))},hr=function(e){var t=e.id||e.name,n=sr(e);return ur("anchor",n||"#"+t,"#"+t,0,K)},gr=function(e){return 0<rr(e.title).length},pr=function(t){var n,r=function(t){var n,r,o;return"h1,h2,h3,h4,h5,h6,a:not([href])",n=t,fe((Qn().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),"h1,h2,h3,h4,h5,h6,a:not([href])",o=void 0===(r=Tn(n))?e.document:r.dom(),nr(o)?[]:fe(o.querySelectorAll("h1,h2,h3,h4,h5,h6,a:not([href])"),Tn)),(function(e){return e.dom()}))}(t);return me((n=r,fe(me(n,dr),mr)).concat(fe(me(r,cr),hr)),gr)},vr={},br=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},yr=function(e,t){return{title:e,value:{title:e,url:t,attach:K}}},xr=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},wr=function(e,t){var n=e.toLowerCase(),r=k.grep(t,(function(e){return-1!==e.title.toLowerCase().indexOf(n)}));return 1===r.length&&r[0].title===e?[]:r},Cr=function(e,t,n,r){var o=function(o){var i=function(e,t,n,r){var o,i,a,u,s,c,l={title:"-"},f=function(e){var r=e.hasOwnProperty(n)?e[n]:[],o=me(r,(function(e){return n=e,!le(t,(function(e){return e.url===n}));var n}));return k.map(o,(function(e){return{title:e,value:{title:e,url:e,attach:K}}}))},d=function(e){var n;return n=me(t,(function(t){return t.type===e})),k.map(n,br)};return!1===r.typeahead_urls?[]:"file"===n?(o=[wr(e,f(vr)),wr(e,d("header")),wr(e,(u=d("anchor"),s=xr(r,"anchor_top","#top"),c=xr(r,"anchor_bottom","#bottom"),null!==s&&u.unshift(yr("<top>",s)),null!==c&&u.push(yr("<bottom>",c)),u))],i=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(l,t)},a=[],de(o,(function(e){a=i(a,e)})),a):wr(e,f(vr))}(o,pr(n),r,t);e.showAutoComplete(i,o)};e.on("autocomplete",(function(){o(e.value())})),e.on("selectitem",(function(t){var n=t.value;e.value(n.url);var o,i=(o=n.title).raw?o.raw:o;"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()})),e.on("click",(function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&o("")})),e.on("PostRender",(function(){e.getRoot().on("submit",(function(t){var n,o,i;t.isDefaultPrevented()||(n=e.value(),i=vr[o=r],/^https?/.test(n)&&(i?function(e,t){var n,r,o=(n=e,r=t,se.call(n,r));return-1===o?re.none():re.some(o)}(i,n).isNone()&&(vr[o]=i.slice(0,5).concat(n)):vr[o]=[n]))}))}))},kr=cn.extend({Statics:{clearHistory:function(){vr={}}},init:function(e){var t,n,r,o=this,i=window.tinymce?window.tinymce.activeEditor:E.activeEditor,a=i.settings,u=e.filetype;e.spellcheck=!1,(r=a.file_picker_types||a.file_browser_callback_types)&&(r=k.makeMap(r,/[, ]/)),r&&!r[u]||(!(n=a.file_picker_callback)||r&&!r[u]?!(n=a.file_browser_callback)||r&&!r[u]||(t=function(){n(o.getEl("inp").id,o.value(),u,window)}):t=function(){var e=o.fire("beforecall").meta;e=k.extend({filetype:u},e),n.call(i,(function(e,t){o.value(e).fire("change",{meta:t})}),o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),Cr(o,a,i.getBody(),u),function(e,t,n){var r=t.filepicker_validator_handler;r&&e.state.on("change:value",(function(t){var o;0!==(o=t.value).length?r({url:o,type:n},(function(t){var n,r,o,i=(r=(n=t).status,o=n.message,"valid"===r?{status:"ok",message:o}:"unknown"===r||"invalid"===r?{status:"warn",message:o}:{status:"none",message:""});e.statusMessage(i.message),e.statusLevel(i.status)})):e.statusLevel("none")}))}(o,a,u)}}),Tr=nn.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()}))}}),Sr=nn.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R,O,A,P,D,M,B,I,L,H=[],F=Math.max,z=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,u=a.align,s=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(T="y",C="h",k="minH",S="maxH",_="innerH",E="top",N="deltaH",R="contentH",M="left",P="w",O="x",A="innerW",D="minW",B="right",I="deltaW",L="contentW"):(T="x",C="w",k="minW",S="maxW",_="innerW",E="left",N="deltaW",R="contentW",M="top",P="h",O="y",A="innerH",D="minH",B="bottom",I="deltaH",L="contentH"),f=o[_]-i[E]-i[E],w=l=0,t=0,n=r.length;t<n;t++)h=(m=r[t]).layoutRect(),f-=t<n-1?c:0,0<(g=m.settings.flex)&&(l+=g,h[S]&&H.push(m),h.flex=g),f-=h[k],w<(p=i[M]+h[D]+i[B])&&(w=p);if((y={})[k]=f<0?o[k]-f+o[N]:o[_]-f+o[N],y[D]=w+o[I],y[R]=o[_]-f,y[L]=w,y.minW=z(y.minW,o.maxW),y.minH=z(y.minH,o.maxH),y.minW=F(y.minW,o.startMinWidth),y.minH=F(y.minH,o.startMinHeight),!o.autoResize||y.minW===o.minW&&y.minH===o.minH){for(b=f/l,t=0,n=H.length;t<n;t++)(v=(h=(m=H[t]).layoutRect())[S])<(p=h[k]+h.flex*b)?(f-=h[S]-h[k],l-=h.flex,h.flex=0,h.maxFlexSize=v):h.maxFlexSize=0;for(b=f/l,x=i[E],y={},0===l&&("end"===s?x=f+i[E]:"center"===s?(x=Math.round(o[_]/2-(o[_]-f)/2)+i[E])<0&&(x=i[E]):"justify"===s&&(x=i[E],c=Math.floor(f/(r.length-1)))),y[O]=i[M],t=0,n=r.length;t<n;t++)p=(h=(m=r[t]).layoutRect()).maxFlexSize||h[k],"center"===u?y[O]=Math.round(o[A]/2-h[P]/2):"stretch"===u?(y[P]=F(h[D]||0,o[A]-i[M]-i[B]),y[O]=i[M]):"end"===u&&(y[O]=o[A]-h[P]-i.top),0<h.flex&&(p+=h.flex*b),y[C]=p,y[T]=x,m.layoutRect(y),m.recalc&&m.recalc(),x+=p+c}else if(y.w=y.minW,y.h=y.minH,e.layoutRect(y),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}}),Er=tn.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){e.recalc&&e.recalc()}))},isNative:function(){return!0}}),_r=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Nr=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",(function(){e.formatter.formatChanged(t,r)}))},Rr=function(e,t){return function(n){Nr(e,t,(function(e){n.control.active(e)}))}},Or=function(e){return e?e.split(",")[0]:""},Ar=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",(function(r){var o,i,a,u,s=e.queryCommandValue("FontName"),c=(o=t,u=(i=s)?i.toLowerCase():"",k.each(o,(function(e){e.value.toLowerCase()===u&&(a=e.value)})),k.each(o,(function(e){a||Or(e.value).toLowerCase()!==Or(u).toLowerCase()||(a=e.value)})),a);n.value(c||null),!c&&s&&n.text(Or(s))}))}},Pr=function(e){!function(e){e.addButton("fontselect",(function(){var t,n=(t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),k.map(t,(function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:Ar(e,n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}))}(e)},Dr=function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,r=t||0,o=Math.pow(10,r),Math.round(n*o)/o+"pt"):e;var n,r,o},Mr=function(e,t,n){var r;return k.each(e,(function(e){e.value===n?r=n:e.value===t&&(r=t)})),r},Br=function(e){!function(e){e.addButton("fontsizeselect",(function(){var t,n,r,o=(t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",k.map(t.split(" "),(function(e){var t=e,n=e,r=e.split("=");return 1<r.length&&(t=r[0],n=r[1]),{text:t,value:n}})));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:o,fixedWidth:!0,onPostRender:(n=e,r=o,function(){var e=this;n.on("init nodeChange",(function(t){var o,i,a,u;if(o=n.queryCommandValue("FontSize"))for(a=3;!u&&0<=a;a--)i=Dr(o,a),u=Mr(r,i,o);e.value(u||null),u||e.text(i)}))}),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}))}(e)},Ir=function(e,t){var n=t.length;return k.each(t,(function(t){t.menu&&(t.hidden=0===Ir(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--})),n},Lr=function(e,t){var n=t.items().length;return t.items().each((function(t){t.menu&&t.visible(0<Lr(e,t.menu)),!t.menu&&t.settings.menu&&t.visible(0<Ir(e,t.settings.menu));var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--})),n},Hr=function(e){var t,n,r=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:(t=e,n=r,k.map(n,(function(e){return{text:e[0],onclick:_r(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})))}),e.addButton("formatselect",function(e,t){return function(){var n,r,o=[];return k.each(t,(function(t){o.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})})),{type:"listbox",text:t[0][0],values:o,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();_r(e,n)()}},onPostRender:(n=e,r=o,function(){var e=this;n.on("nodeChange",(function(t){var o=n.formatter,i=null;k.each(t.parents,(function(e){if(k.each(r,(function(t){if(o.matchNode(e,t.value)&&(i=t.value),i)return!1})),i)return!1})),e.value(i)}))})}}}(e,r))},Fr=function(e,t){var n,r;if("string"==typeof t)r=t.split(" ");else if(k.isArray(t))return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!ie(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ce.apply(t,e[n])}return t}(k.map(t,(function(t){return Fr(e,t)})));return n=k.grep(r,(function(t){return"|"===t||t in e.menuItems})),k.map(n,(function(t){return"|"===t?{text:"-"}:e.menuItems[t]}))},zr=function(e){return e&&"-"===e.text},Wr=function(e){var t,n,r,o=e.settings.insert_button_items;return function(e){var t=me(e,(function(t,n){return!zr(t)||!zr(e[n-1])}));return me(t,(function(e,n){return!zr(e)||0<n&&n<t.length-1}))}(o?Fr(e,o):(t=e,"insert",n=[{text:"-"}],r=k.grep(t.menuItems,(function(e){return"insert"===e.context})),k.each(r,(function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})})),n))},Ur=function(e){var t;(function(e){var t,n,r;t=e,k.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:Rr(t,n),onclick:_r(t,n)})})),n=e,k.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})),r=e,k.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:Rr(r,t)})}))})(e),t=e,k.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})})),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:_r(t,"code")})},jr=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(e.readonly||!r())}))}},Vr={setup:function(t){var n;t.rtl&&(Ge.rtl=!0),t.on("mousedown progressstate",(function(){Et.hideAll()})),(n=t).settings.ui_container&&(u.container=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),nr(i)?re.none():re.from(i.querySelector(r)).map(Tn);var r,o,i}(Tn(e.document.body),n.settings.ui_container).fold(J(null),(function(e){return e.dom()}))),rt.tooltips=!u.iOS,Ge.translate=function(e){return E.translate(e)},Hr(t),function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n="alignleft",r=[{text:"Left",icon:"alignleft",onclick:_r(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:_r(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:_r(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:_r(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:r}),e.addButton("align",{type:"menubutton",icon:n,menu:r,onShowMenu:function(n){var r=n.control.menu;k.each(t,(function(t,n){r.items().eq(n).each((function(n){return n.active(e.formatter.match(t))}))}))},onPostRender:function(r){var o=r.control;k.each(t,(function(t,r){Nr(e,t,(function(e){o.icon(n),e&&o.icon(t)}))}))}}),k.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Rr(e,n)})}))}(t),Ur(t),function(e){var t,n;(t=e).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:jr(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:jr(t,"redo"),cmd:"redo"}),(n=e).addButton("undo",{tooltip:"Undo",onPostRender:jr(n,"undo"),cmd:"undo"}),n.addButton("redo",{tooltip:"Redo",onPostRender:jr(n,"redo"),cmd:"redo"})}(t),Br(t),Pr(t),function(e){var t,n,r,o,i,a,u,s,c=(n=0,r=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(e){var t=[];if(e)return k.each(e,(function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=i(e.items);else{var a=e.format||"custom"+n++;e.format||(e.name=a,r.push(e)),o.format=a,o.cmd=e.cmd}t.push(o)})),t},(t=e).on("init",(function(){k.each(r,(function(e){t.formatter.register(e.name,e)}))})),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?i(o.concat(t.settings.style_formats)):i(o):i(t.settings.style_formats||o),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",(function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))}))},onclick:function(){this.settings.format&&_r(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}});a=c,e.addMenuItem("formats",{text:"Formats",menu:a}),s=c,(u=e).addButton("styleselect",{type:"menubutton",text:"Formats",menu:s,onShowMenu:function(){u.settings.style_formats_autohide&&Lr(u,this.menu)}})}(t),function(e){var t,n;(t=e).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=t,function(){var e=this;n.on("VisualAid",(function(t){e.active(t.hasVisual)})),e.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})}(t),function(e){var t;(t=e).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Wr(t)),this.menu.renderNew()}})}(t)}},$r=nn.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R=[],O=[];t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,x=t.alignH||t.align,w=t.alignV||t.align,p=e.paddingBox,N="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(f=0;f<r;f++)R.push(0);for(d=0;d<n;d++)O.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(l=o[d*r+f]);f++)T=(c=l.layoutRect()).minW,S=c.minH,R[f]=T>R[f]?T:R[f],O[d]=S>O[d]?S:O[d];for(E=i.innerW-p.left-p.right,f=C=0;f<r;f++)C+=R[f]+(0<f?b:0),E-=(0<f?b:0)+R[f];for(_=i.innerH-p.top-p.bottom,d=k=0;d<n;d++)k+=O[d]+(0<d?y:0),_-=(0<d?y:0)+O[d];if(C+=p.left+p.right,k+=p.top+p.bottom,(s={}).minW=C+(i.w-i.innerW),s.minH=k+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW===i.minW&&s.minH===i.minH){var A;i.autoResize&&((s=e.layoutRect(s)).contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH),A="start"===t.packV?0:0<_?Math.floor(_/n):0;var P=0,D=t.flexWidths;if(D)for(f=0;f<D.length;f++)P+=D[f];else P=r;var M=E/P;for(f=0;f<r;f++)R[f]+=D?D[f]*M:M;for(h=p.top,d=0;d<n;d++){for(m=p.left,u=O[d]+A,f=0;f<r&&(l=o[N?d*r+r-1-f:d*r+f]);f++)g=l.settings,c=l.layoutRect(),a=Math.max(R[f],c.startMinWidth),c.x=m,c.y=h,"center"===(v=g.alignH||(x?x[f]||x[0]:null))?c.x=m+a/2-c.w/2:"right"===v?c.x=m+a-c.w:"stretch"===v&&(c.w=a),"center"===(v=g.alignV||(w?w[f]||w[0]:null))?c.y=h+u/2-c.h/2:"bottom"===v?c.y=h+u-c.h:"stretch"===v&&(c.h=u),l.layoutRect(c),m+=a+b,l.recalc&&l.recalc();h+=u+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}}),qr=rt.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):c.setTimeout((function(){n.html(e)})),this}}),Yr=rt.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e.state.on("change:help",(function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Xr=rt.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(ge.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,ge.getSize(e.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Gr=vt.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(e){e.classes.add("toolbar-item")})),this._super()}}),Kr=Gr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Jr=rn.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=ct.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()})),n.menu.on("show hide",(function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)})).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=n.menu.layoutRect(),o=n.$el.offset().top+n.layoutRect().h;o>r.y&&o<r.y+r.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t,n=this,r=n._id,o=n.classPrefix,i=n.settings.icon,a=n.state.get("text"),u="";return(t=n.settings.image)?(i="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(n.classes.add("btn-has-text"),u='<span class="'+o+'txt">'+n.encode(a)+"</span>"),i=n.settings.icon?o+"ico "+o+"i-"+i:"",n.aria("role",n.parent()instanceof Kr?"menuitem":"button"),'<div id="'+r+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+r+'"><button id="'+r+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+u+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",(function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())})),e.on("mouseenter",(function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof Jr&&r.parent()===o&&(o.items().filter("MenuButton").each((function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())})),n&&(r.focus(),r.showMenu()))})),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",(function(){e.menu&&e.menu.remove(),e.menu=null})),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});function Zr(e,t){var n,r,o=this,i=Ge.classPrefix;o.show=function(a,u){function s(){n&&(pe(e).append('<div class="'+i+"throbber"+(t?" "+i+"throbber-inline":"")+'"></div>'),u&&u())}return o.hide(),n=!0,a?r=c.setTimeout(s,a):s(),o},o.hide=function(){var t=e.lastChild;return c.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}var Qr=Et.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=k.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==u.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new Zr(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,(function(){t.items().remove(),t.fire("loading")})),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory((function(r){0!==r.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(r),t.renderNew(),t.fire("loaded")):t.hide()})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each((function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return!(e._hasIcons=!0)})),e.settings.itemsFactory&&e.on("postrender",(function(){e.settings.itemsFactory&&e.load()})),e.on("show hide",(function(t){t.control===e&&("show"===t.type?c.setTimeout((function(){e.classes.add("in")}),0):e.classes.remove("in"))})),e._super()}}),eo=Jr.extend({init:function(e){var t,n,r,o,i=this;i._super(e),e=i.settings,i._values=t=e.values,t&&(void 0!==e.value&&function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value)return r=r||o[a].text,i.state.set("value",o[a].value),!0;if(o[a].menu&&t(o[a].menu))return!0}}(t),!n&&0<t.length&&(r=t[0].text,i.state.set("value",t[0].value)),i.state.set("menu",t)),i.state.set("text",e.text||r),i.classes.add("listbox"),i.on("select",(function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):i.value(t.control.value()),o=n}))},value:function(e){return 0===arguments.length?this.state.get("value"):(void 0===e||(this.settings.values&&!function t(n){return le(n,(function(n){return n.menu?t(n.menu):n.value===e}))}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e)),this)},bindStates:function(){var e=this;return e.on("show",(function(t){var n,r;n=t.control,r=e.value(),n instanceof Qr&&n.items().each((function(e){e.hasMenus()||e.active(e.value()===r)}))})),e.state.on("change:value",(function(t){var n=function e(t,n){var r;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(e.state.get("menu"),t.value);n?e.text(n.text):e.text(e.settings.text)})),e._super()}}),to=rt.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",(function(e){e.preventDefault()})),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each((function(e){e!==t&&e.hideMenu()})),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),(e=t.menu=ct.create(e).parent(t).renderTo()).reflow(),e.on("cancel",(function(n){n.stopPropagation(),t.focus(),e.hide()})),e.on("show hide",(function(e){e.control.items&&e.control.items().each((function(e){e.active(e.settings.selected)}))})).fire("show"),e.on("hide",(function(n){n.control===e&&t.classes.remove("selected")})),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),o="menu-sub-"+(e.rel=o),e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e,t=this,n=t._id,r=t.settings,o=t.classPrefix,i=t.state.get("text"),a=t.settings.icon,s="",c=r.shortcut,l=t.encode(r.url);function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(e){var t=r.match||"";return t?e.replace(new RegExp(f(t),"gi"),(function(e){return"!mce~match["+e+"]mce~match!"})):e}function m(e){return e.replace(new RegExp(f("!mce~match["),"g"),"<b>").replace(new RegExp(f("]mce~match!"),"g"),"</b>")}return a&&t.parent().classes.add("menu-has-icons"),r.image&&(s=" style=\"background-image: url('"+r.image+"')\""),c&&(c=function(e){var t,n,r;for(r=u.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(c)),a=o+"ico "+o+"i-"+(t.settings.icon||"none"),e="-"!==i?'<i class="'+a+'"'+s+"></i> ":"",i=m(t.encode(d(i))),l=m(t.encode(d(l))),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==i?'<span id="'+n+'-text" class="'+o+'text">'+i+"</span>":"")+(c?'<div id="'+n+'-shortcut" class="'+o+'menu-shortcut">'+c+"</div>":"")+(r.menu?'<div class="'+o+'caret"></div>':"")+(l?'<div class="'+o+'menu-item-link">'+l+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",(function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),c.requestAnimationFrame((function(){e.parent().hideAll()}))))})),e._super(),e},hover:function(){return this.parent().items().each((function(e){e.classes.remove("selected")})),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),no=un.extend({Defaults:{classes:"radio",role:"radio"}}),ro=rt.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new st(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function oo(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var io=rt.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))}))},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=oo(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",(function(t){e.getEl().innerHTML=oo(t.value)})),e._super()}});function ao(e,t,n){return e<t&&(e=t),n<e&&(e=n),e}function uo(e,t,n){e.setAttribute("aria-"+t,n)}function so(e,t){var n,r,o,i,a;"v"===e.settings.orientation?(o="top",r="height",n="h"):(o="left",r="width",n="w"),a=e.getEl("handle"),i=((e.layoutRect()[n]||100)-ge.getSize(a)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[o]=i,a.style.height=e.layoutRect().h+"px",uo(a,"valuenow",t),uo(a,"valuetext",""+e.settings.previewFilter(t)),uo(a,"valuemin",e._minValue),uo(a,"valuemax",e._maxValue)}var co=rt.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=ue(e.minValue)?e.minValue:0,t._maxValue=ue(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,o,i,a,u,s,c,l,f,d,m,h=this;e=h._minValue,t=h._maxValue,"v"===h.settings.orientation?(n="screenY",r="top",o="height",i="h"):(n="screenX",r="left",o="width",i="w"),h._super(),function(e,t){function n(n){var r,o,i,a;r=ao(r=(((r=h.value())+(a=o=e))/((i=t)-a)+.05*n)*(i-o)-o,e,t),h.value(r),h.fire("dragstart",{value:r}),h.fire("drag",{value:r}),h.fire("dragend",{value:r})}h.on("keydown",(function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(e,t),a=e,u=t,s=h.getEl("handle"),h._dragHelper=new st(h._id,{handle:h._id+"-handle",start:function(e){c=e[n],l=parseInt(h.getEl("handle").style[r],10),f=(h.layoutRect()[i]||100)-ge.getSize(s)[o],h.fire("dragstart",{value:m})},drag:function(e){var t=e[n]-c;d=ao(l+t,0,f),s.style[r]=d+"px",m=a+d/f*(u-a),h.value(m),h.tooltip().text(""+h.settings.previewFilter(m)).show().moveRel(s,"bc tc"),h.fire("drag",{value:m})},stop:function(){h.tooltip().hide(),h.fire("dragend",{value:m})}})},repaint:function(){this._super(),so(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){so(e,t.value)})),e._super()}}),lo=rt.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),fo=Jr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this.getEl(),r=this.layoutRect();return this._super(),e=n.firstChild,t=n.lastChild,pe(e).css({width:r.w-ge.getSize(t).width,height:r.h-2}),pe(t).css({height:r.h-2}),this},activeMenu:function(e){pe(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var t,n,r=this,o=r._id,i=r.classPrefix,a=r.state.get("icon"),u=r.state.get("text"),s=r.settings,c="";return(t=s.image)?(a="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a=s.icon?i+"ico "+i+"i-"+a:"",u&&(r.classes.add("btn-has-text"),c='<span class="'+i+'txt">'+r.encode(u)+"</span>"),n="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+o+'" class="'+r.classes+'" role="button"'+n+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+c+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(r._menuBtnText?(a?" ":"")+r._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",(function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}})),delete this.settings.onclick,this._super()}}),mo=Er.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ho=yt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),pe(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),pe(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each((function(t,n){e!==n&&t.hide()}))},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each((function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"})),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",(function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)}))},initLayoutRect:function(){var e,t,n,r=this;t=(t=ge.getSize(r.getEl("head")).width)<0?0:t,n=0,r.items().each((function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)})),r.items().each((function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})}));var o=ge.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=n+o,(e=r._super()).deltaH+=o,e.innerH=e.h-e.deltaH,e}}),go=rt.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){t.state.set("value",e.target.value)})))},repaint:function(){var t,n,r,o,i,a=this,u=0;t=a.getEl().style,n=a._layoutRect,i=a._lastRepaintRect||{};var s=e.document;return!a.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=n.h-u+"px"),o=(r=a.borderBox).left+r.right+8,u=r.top+r.bottom+(a.settings.multiline?8:0),n.x!==i.x&&(t.left=n.x+"px",i.x=n.x),n.y!==i.y&&(t.top=n.y+"px",i.y=n.y),n.w!==i.w&&(t.width=n.w-o+"px",i.w=n.w),n.h!==i.h&&(t.height=n.h-u+"px",i.h=n.h),a._lastRepaintRect=i,a.fire("repaint",{},!1),a},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},k.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(t){e[t]=r[t]})),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),(t=ge.create(r.multiline?"textarea":"input",e)).value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)}))},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl().disabled=t.value})),e._super()},remove:function(){this.$el.off(),this._super()}}),po=function(){return{Selector:Re,Collection:Pe,ReflowQueue:ze,Control:Ge,Factory:ct,KeyboardNavigation:ft,Container:vt,DragHelper:st,Scrollable:bt,Panel:yt,Movable:tt,Resizable:xt,FloatPanel:Et,Window:At,MessageBox:Bt,Tooltip:nt,Widget:rt,Progress:ot,Notification:at,Layout:tn,AbsoluteLayout:nn,Button:rn,ButtonGroup:an,Checkbox:un,ComboBox:cn,ColorBox:ln,PanelButton:fn,ColorButton:mn,ColorPicker:gn,Path:vn,ElementPath:bn,FormItem:yn,Form:xn,FieldSet:wn,FilePicker:kr,FitLayout:Tr,FlexLayout:Sr,FlowLayout:Er,FormatControls:Vr,GridLayout:$r,Iframe:qr,InfoBox:Yr,Label:Xr,Toolbar:Gr,MenuBar:Kr,MenuButton:Jr,MenuItem:to,Throbber:Zr,Menu:Qr,ListBox:eo,Radio:no,ResizeHandle:ro,SelectBox:io,Slider:co,Spacer:lo,SplitButton:fo,StackLayout:mo,TabPanel:ho,TextBox:go,DropZone:pn,BrowseButton:on}};k.each(po(),(function(e,t){ct.add(t,e)})),function(e){e.ui?k.each(po(),(function(t,n){e.ui[n]=t})):e.ui=po()}(window.tinymce?window.tinymce:{}),a.add("inlite",(function(e){var t=en();return Vr.setup(e),Kt(e,t),It(e,t)}))}(window),function(e){"use strict";var t=function(){},n=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},r=function(e){return function(){return e}},o=function(e){return e};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var a,u,s,c,l,f,d=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},m=function(e){return function(){throw new Error(e)}},h=function(e){return e()},g=r(!1),p=r(!0),v=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},b=v("string"),y=v("object"),x=v("array"),w=v("boolean"),C=v("function"),k=v("number"),T=Object.prototype.hasOwnProperty,S=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)T.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}},E=S((function(e,t){return y(e)&&y(t)?E(e,t):t})),_=S((function(e,t){return t})),N=function(){return R},R=(a=function(e){return e.isNone()},c={fold:function(e,t){return e()},is:g,isSome:g,isNone:p,getOr:s=function(e){return e},getOrThunk:u=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:s,orThunk:u,map:N,each:t,bind:N,exists:g,forall:p,filter:N,equals:a,equals_:a,toArray:function(){return[]},toString:r("none()")},Object.freeze&&Object.freeze(c),c),O=function(e){var t=r(e),n=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:p,isNone:g,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return O(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:R},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(g,(function(t){return n(e,t)}))}};return i},A={some:O,none:N,from:function(e){return null==e?R:O(e)}},P=Object.keys,D=function(e,t){for(var n=P(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},M=function(e,t){return B(e,(function(e,n){return{k:n,v:t(e,n)}}))},B=function(e,t){var n={};return D(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n},I=function(e,t){var n=[];return D(e,(function(e,r){n.push(t(e,r))})),n},L=r("touchstart"),H=r("touchmove"),F=r("touchend"),z=r("mousedown"),W=r("mousemove"),U=r("mouseup"),j=r("mouseover"),V=r("keydown"),$=r("input"),q=r("change"),Y=r("click"),X=r("transitionend"),G=r("selectstart"),K=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},J=function(){return Z(0,0)},Z=function(e,t){return{major:e,minor:t}},Q=function(e,t){var n=String(t).toLowerCase();return 0===e.length?J():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Z(r(1),r(2))}(e,n)},ee=J,te="Firefox",ne=function(e,t){return function(){return t===e}},re=function(e){var t=e.current;return{current:t,version:e.version,isEdge:ne("Edge",t),isChrome:ne("Chrome",t),isIE:ne("IE",t),isOpera:ne("Opera",t),isFirefox:ne(te,t),isSafari:ne("Safari",t)}},oe=function(){return re({current:void 0,version:ee()})},ie=re,ae=(r("Edge"),r("Chrome"),r("IE"),r("Opera"),r(te),r("Safari"),"Windows"),ue="Android",se="Solaris",ce="FreeBSD",le=function(e,t){return function(){return t===e}},fe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:le(ae,t),isiOS:le("iOS",t),isAndroid:le(ue,t),isOSX:le("OSX",t),isLinux:le("Linux",t),isSolaris:le(se,t),isFreeBSD:le(ce,t)}},de=function(){return fe({current:void 0,version:ee()})},me=fe,he=(r(ae),r("iOS"),r(ue),r("Linux"),r("OSX"),r(se),r(ce),Array.prototype.slice),ge=Array.prototype.indexOf,pe=Array.prototype.push,ve=function(e,t){return n=e,r=t,-1<ge.call(n,r);var n,r},be=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},ye=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},xe=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},we=function(e,t,n){return function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,(function(e){n=t(n,e)})),n},Ce=function(e,t,n){return ye(e,(function(e){n=t(n,e)})),n},ke=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return A.some(o)}return A.none()},Te=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return A.some(n);return A.none()},Se=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!x(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);pe.apply(t,e[n])}return t},Ee=function(e,t){var n=be(e,t);return Se(n)},_e=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Ne=function(e){var t=he.call(e,0);return t.reverse(),t},Re=function(e){return[e]},Oe=(C(Array.from)&&Array.from,function(e,t){var n=String(t).toLowerCase();return ke(e,(function(e){return e.search(n)}))}),Ae=function(e,t){return-1!==e.indexOf(t)},Pe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,De=function(e){return function(t){return Ae(t,e)}},Me=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ae(e,"edge/")&&Ae(e,"chrome")&&Ae(e,"safari")&&Ae(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pe],search:function(e){return Ae(e,"chrome")&&!Ae(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ae(e,"msie")||Ae(e,"trident")}},{name:"Opera",versionRegexes:[Pe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:De("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:De("firefox")},{name:"Safari",versionRegexes:[Pe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ae(e,"safari")||Ae(e,"mobile/"))&&Ae(e,"applewebkit")}}],Be=[{name:"Windows",search:De("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ae(e,"iphone")||Ae(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:De("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:De("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:De("linux"),versionRegexes:[]},{name:"Solaris",search:De("sunos"),versionRegexes:[]},{name:"FreeBSD",search:De("freebsd"),versionRegexes:[]}],Ie={browsers:r(Me),oses:r(Be)},Le=function(e){var t,n,o,i,a,u,s,c,l,f,d,m=Ie.browsers(),h=Ie.oses(),g=function(e,t){return Oe(e,t).map((function(e){var n=Q(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(oe,ie),p=function(e,t){return Oe(e,t).map((function(e){var n=Q(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold(de,me);return{browser:g,os:p,deviceType:(n=g,o=e,i=(t=p).isiOS()&&!0===/ipad/i.test(o),a=t.isiOS()&&!i,u=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=i||u||s&&!0===/mobile/i.test(o),l=t.isiOS()||t.isAndroid(),f=l&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:r(i),isiPhone:r(a),isTablet:r(c),isPhone:r(f),isTouch:r(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r(d)})}},He={detect:K((function(){var t=e.navigator.userAgent;return Le(t)}))},Fe={tap:r("alloy.tap")},ze=r("alloy.focus"),We=r("alloy.blur.post"),Ue=r("alloy.receive"),je=r("alloy.execute"),Ve=r("alloy.focus.item"),$e=Fe.tap,qe=He.detect().deviceType.isTouch()?Fe.tap:Y,Ye=r("alloy.longpress"),Xe=r("alloy.system.init"),Ge=r("alloy.system.scroll"),Ke=r("alloy.system.attached"),Je=r("alloy.system.detached"),Ze=function(e,t){nt(e,e.element(),t,{})},Qe=function(e,t,n){nt(e,e.element(),t,n)},et=function(e){Ze(e,je())},tt=function(e,t,n){nt(e,t,n,{})},nt=function(e,t,n,o){var i=E({target:t},o);e.getSystem().triggerEvent(n,t,M(i,r))},rt=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:r(e)}},ot=function(t,n){var r=(n||e.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return rt(r.childNodes[0])},it=function(t,n){var r=(n||e.document).createElement(t);return rt(r)},at=function(t,n){var r=(n||e.document).createTextNode(t);return rt(r)},ut=rt,st=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),ct=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),lt=e.Node.TEXT_NODE,ft=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")()),dt=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:ft,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},mt=function(e){return e.dom().nodeName.toLowerCase()},ht=function(e){return function(t){return t.dom().nodeType===e}},gt=ht(ct),pt=ht(lt),vt=function(e){var t=pt(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)},bt=K((function(){return yt(ut(e.document))})),yt=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return ut(t)},xt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var o={};return ye(e,(function(e,n){o[e]=r(t[n])})),o}},wt=function(e){return e.slice(0).sort()},Ct=function(e,t){throw new Error("All required keys ("+wt(e).join(", ")+") were not specified. Specified keys were: "+wt(t).join(", ")+".")},kt=function(e){throw new Error("Unsupported keys for object: "+wt(e).join(", "))},Tt=function(e,t){if(!x(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");ye(t,(function(t){if(!b(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},St=function(e){var t=wt(e);ke(t,(function(e,n){return n<t.length-1&&e===t[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},Et=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return Tt("required",e),Tt("optional",t),St(n),function(o){var i=P(o);_e(e,(function(e){return ve(i,e)}))||Ct(e,i);var a=xe(i,(function(e){return!ve(n,e)}));0<a.length&&kt(a);var u={};return ye(e,(function(e){u[e]=r(o[e])})),ye(t,(function(e){u[e]=r(Object.prototype.hasOwnProperty.call(o,e)?A.some(o[e]):A.none())})),u}},_t=ct,Nt=st,Rt=function(e,t){var n=e.dom();if(n.nodeType!==_t)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ot=function(e){return e.nodeType!==_t&&e.nodeType!==Nt||0===e.childElementCount},At=function(t,n){var r=void 0===n?e.document:n.dom();return Ot(r)?[]:be(r.querySelectorAll(t),ut)},Pt=function(t,n){var r=void 0===n?e.document:n.dom();return Ot(r)?A.none():A.from(r.querySelector(t)).map(ut)},Dt=function(e,t){return e.dom()===t.dom()},Mt=(He.detect().browser.isIE(),function(e){return ut(e.dom().ownerDocument)}),Bt=function(e){return ut(e.dom().ownerDocument.defaultView)},It=function(e){return A.from(e.dom().parentNode).map(ut)},Lt=function(e){return be(e.dom().childNodes,ut)},Ht=(xt("element","offset"),function(e,t){(function(e){return 0,t=e.dom().childNodes,A.from(t[0]).map(ut);var t})(e).fold((function(){Ft(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))}),Ft=function(e,t){e.dom().appendChild(t.dom())},zt=function(e,t){ye(t,(function(t){Ft(e,t)}))},Wt=function(e){e.dom().textContent="",ye(Lt(e),(function(e){Ut(e)}))},Ut=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},jt=function(e){Ze(e,Je());var t=e.components();ye(t,jt)},Vt=function(e){var t=e.components();ye(t,Vt),Ze(e,Ke())},$t=function(e,t){qt(e,t,Ft)},qt=function(e,t,n){e.getSystem().addToWorld(t),n(e.element(),t.element()),vt(e.element())&&Vt(t),e.syncComponents()},Yt=function(e){jt(e),Ut(e.element()),e.getSystem().removeFromWorld(e)},Xt=function(e){var t=It(e.element()).bind((function(t){return e.getSystem().getByDom(t).fold(A.none,A.some)}));Yt(e),t.each((function(e){e.syncComponents()}))},Gt=function(e){return{is:function(t){return e===t},isValue:p,isError:g,getOr:r(e),getOrThunk:r(e),getOrDie:r(e),or:function(t){return Gt(e)},orThunk:function(t){return Gt(e)},fold:function(t,n){return n(e)},map:function(t){return Gt(t(e))},mapError:function(t){return Gt(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return A.some(e)}}},Kt=function(e){return{is:g,isValue:g,isError:p,getOr:o,getOrThunk:function(e){return e()},getOrDie:function(){return m(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Kt(e)},mapError:function(t){return Kt(t(e))},each:t,bind:function(t){return Kt(e)},exists:g,forall:p,toOption:A.none}},Jt={value:Gt,error:Kt,fromOption:function(e,t){return e.fold((function(){return Kt(t)}),Gt)}},Zt=function(t){if(!x(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return ye(t,(function(o,i){var a=P(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],s=o[u];if(void 0!==r[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!x(s))throw new Error("case arguments must be an array");n.push(u),r[u]=function(){var r=arguments.length;if(r!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+r);for(var o=new Array(r),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(e){var t=P(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!_e(n,(function(e){return ve(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[u].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:u,params:o})}}}})),r},Qt=Zt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),en=function(e){return Qt.defaultedThunk(r(e))},tn=Qt.strict,nn=Qt.asOption,rn=Qt.defaultedThunk,on=Qt.mergeWithThunk,an=(Zt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return ye(e,(function(e){e.fold((function(e){t.push(e)}),(function(e){n.push(e)}))})),{errors:t,values:n}}),un=function(e){return n(Jt.error,Se)(e)},sn=function(e,t){var n,r,o=an(e);return 0<o.errors.length?un(o.errors):(n=o.values,r=t,Jt.value(E.apply(void 0,[r].concat(n))))},cn=function(e){return function(t){return t.hasOwnProperty(e)?A.from(t[e]):A.none()}},ln=function(e,t){return cn(t)(e)},fn=function(e,t){var n={};return n[e]=t,n},dn=function(e,t){return n=e,r={},ye(t,(function(e){void 0!==n[e]&&n.hasOwnProperty(e)&&(r[e]=n[e])})),r;var n,r},mn=function(e){return cn(e)},hn=function(e,t){return n=e,r=t,function(e){return cn(n)(e).getOr(r)};var n,r},gn=function(e,t){return ln(e,t)},pn=function(e,t){return fn(e,t)},vn=function(e){return t={},ye(e,(function(e){t[e.key]=e.value})),t;var t},bn=function(e,t){return sn(e,t)},yn=function(e,t){return r=t,(n=e).hasOwnProperty(r)&&void 0!==n[r]&&null!==n[r];var n,r},xn=Zt([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),wn=Zt([{field:["name","presence","type"]},{state:["name"]}]),Cn=function(e,t,n){return dt("JSON").stringify(e,t,n)},kn=function(e){return y(e)&&100<P(e).length?" removed due to size":Cn(e,null,2)},Tn=function(e,t){return Jt.error([{path:e,getErrorInfo:t}])},Sn=Zt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),En=function(e,t,n){var r=ln(e,t).fold((function(){return n(e)}),o);return Jt.value(r)},_n=function(e,t,n,o){return n.fold((function(n,i,a,u){var s=function(t){return u.extract(e.concat([n]),o,t).map((function(e){return fn(i,o(e))}))},c=function(t){return t.fold((function(){var e=fn(i,o(A.none()));return Jt.value(e)}),(function(t){return u.extract(e.concat([n]),o,t).map((function(e){return fn(i,o(A.some(e)))}))}))};return a.fold((function(){return function(e,t,n){return ln(t,n).fold((function(){return r=n,o=t,Tn(e,(function(){return'Could not find valid *strict* value for "'+r+'" in '+kn(o)}));var r,o}),Jt.value)}(e,t,n).bind(s)}),(function(e){return En(t,n,e).bind(s)}),(function(){return(e=t,r=n,Jt.value(ln(e,r))).bind(c);var e,r}),(function(e){return(r=t,o=n,i=e,a=ln(r,o).map((function(e){return!0===e?i(r):e})),Jt.value(a)).bind(c);var r,o,i,a}),(function(e){var o=e(t);return En(t,n,r({})).map((function(e){return E(o,e)})).bind(s)}))}),(function(e,n){var r=n(t);return Jt.value(fn(e,o(r)))}))},Nn=function(e){return{extract:function(t,n,r){return e(r,n).fold((function(e){return n=e,Tn(t,(function(){return n}));var n}),Jt.value)},toString:function(){return"val"},toDsl:function(){return xn.itemOf(e)}}},Rn=function(e){var t=On(e),n=we(e,(function(e,t){return t.fold((function(t){return E(e,pn(t,!0))}),r(e))}),{});return{extract:function(e,r,o){var i,a,u,s=w(o)?[]:(a=P(i=o),xe(a,(function(e){return yn(i,e)}))),c=xe(s,(function(e){return!yn(n,e)}));return 0===c.length?t.extract(e,r,o):(u=c,Tn(e,(function(){return"There are unsupported fields: ["+u.join(", ")+"] specified"})))},toString:t.toString,toDsl:t.toDsl}},On=function(e){return{extract:function(t,n,r){return o=t,i=r,a=n,u=be(e,(function(e){return _n(o,i,e,a)})),sn(u,{});var o,i,a,u},toString:function(){return"obj{\n"+be(e,(function(e){return e.fold((function(e,t,n,r){return e+" -> "+r.toString()}),(function(e,t){return"state("+e+")"}))})).join("\n")+"}"},toDsl:function(){return xn.objOf(be(e,(function(e){return e.fold((function(e,t,n,r){return wn.field(e,n,r)}),(function(e,t){return wn.state(e)}))})))}}},An=function(e,t){var n=function(t,n){return(r=Nn(e),{extract:function(e,t,n){return function(e){var t=an(e);return 0<t.errors.length?un(t.errors):Jt.value(t.values)}(be(n,(function(n,o){return r.extract(e.concat(["["+o+"]"]),t,n)})))},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return xn.arrOf(r)}}).extract(t,o,n);var r};return{extract:function(e,r,o){var i=P(o);return n(e,i).bind((function(n){var i=be(n,(function(e){return Sn.field(e,e,tn(),t)}));return On(i).extract(e,r,o)}))},toString:function(){return"setOf("+t.toString()+")"},toDsl:function(){return xn.setOf(e,t)}}},Pn=r(Nn(Jt.value)),Dn=Sn.state,Mn=Sn.field,Bn=function(e,t){return{extract:function(n,r,o){return gn(o,e).fold((function(){return t=e,Tn(n,(function(){return'Choice schema did not contain choice key: "'+t+'"'}));var t}),(function(e){return function(e,t,n,r,o){return gn(r,o).fold((function(){return t=r,n=o,Tn(e,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+kn(t)}));var t,n}),(function(r){return On(r).extract(e.concat(["branch: "+o]),t,n)}))}(n,r,o,t,e)}))},toString:function(){return"chooseOn("+e+"). Possible values: "+P(t)},toDsl:function(){return xn.choiceOf(e,t)}}},In=Nn(Jt.value),Ln=function(e,t,n,r){return t.extract([e],n,r).fold((function(e){return Jt.error({input:r,errors:e})}),Jt.value)},Hn=function(e,t,n){return Ln(e,t,r,n)},Fn=function(e){return e.fold((function(e){throw new Error(Un(e))}),o)},zn=function(e,t,n){return Fn(Ln(e,t,o,n))},Wn=function(e,t,n){return Fn(Hn(e,t,n))},Un=function(e){return"Errors: \n"+(n=10<(t=e.errors).length?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,be(n,(function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))+"\n\nInput object: ")+kn(e.input);var t,n},jn=function(e,t){return Bn(e,t)},Vn=r(In),$n=(l=C,"function",Nn((function(e){var t=typeof e;return l(e)?Jt.value(e):Jt.error("Expected type: function but got: "+t)}))),qn=function(e){return Mn(e,e,tn(),Pn())},Yn=function(e,t){return Mn(e,e,tn(),t)},Xn=function(e){return Yn(e,$n)},Gn=function(e,t){return Mn(e,e,tn(),On(t))},Kn=function(e){return Mn(e,e,nn(),Pn())},Jn=function(e,t){return Mn(e,e,nn(),On(t))},Zn=function(e,t){return Mn(e,e,nn(),Rn(t))},Qn=function(e,t){return Mn(e,e,en(t),Pn())},er=function(e,t,n){return Mn(e,e,en(t),n)},tr=function(e,t){return Dn(e,t)},nr=function(e){if(!yn(e,"can")&&!yn(e,"abort")&&!yn(e,"run"))throw new Error("EventHandler defined by: "+Cn(e,null,2)+" does not have can, abort, or run!");return zn("Extracting event.handler",Rn([Qn("can",r(!0)),Qn("abort",r(!1)),Qn("run",t)]),e)},rr=function(e){return vn(e)},or=function(e,t){return{key:e,value:nr({abort:t})}},ir=function(e,t){return{key:e,value:nr({run:t})}},ar=function(e,t,n){return{key:e,value:nr({run:function(e){t.apply(void 0,[e].concat(n))}})}},ur=function(e){return function(t){return{key:e,value:nr({run:function(e,n){var r;r=n,Dt(e.element(),r.event().target())&&t(e,n)}})}}},sr=function(e,t,n){var r,o,i=t.partUids()[n];return o=i,ir(r=e,(function(e,t){e.getSystem().getByUid(o).each((function(e){var n,o,i,a;o=(n=e).element(),i=r,a=t,n.getSystem().triggerEvent(i,o,a.event())}))}))},cr=function(e){return ir(e,(function(e,t){t.cut()}))},lr=ur(Ke()),fr=ur(Je()),dr=ur(Xe()),mr=(f=je(),function(e){return ir(f,e)}),hr=function(e){return be(e,(function(e){return n="/*",r=(t=e).length-"/*".length,""!==n&&(t.length<n.length||t.substr(r,r+n.length)!==n)?e:e.substring(0,e.length-"/*".length);var t,n,r}))},gr=function(e,t){var n=e.toString(),r=n.indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:hr(i)}},e},pr=Et(["tag"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),vr=Et([],["classes","attributes","styles","value","innerHtml","defChildren","domChildren"]),br=function(e,t,n){return t.fold((function(){return n.fold((function(){return{}}),(function(t){return pn(e,t)}))}),(function(t){return n.fold((function(){return pn(e,t)}),(function(t){return pn(e,t)}))}))},yr=function(e,t,n){return dr((function(r,o){n(r,e,t)}))},xr=function(e){return{key:e,value:void 0}},wr=function(e,t,n,o,a,u,s){var c=function(e){return yn(e,n)?e[n]():A.none()},l=M(a,(function(e,t){return function(e,t,n){var o,i,a,u,s,c;return o=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var u=[o].concat(i);return o.config({name:r(e)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(function(e){var n=Array.prototype.slice.call(u,1);return t.apply(void 0,[o,e.config,e.state].concat(n))}))},i=n,u=(a=t.toString()).indexOf(")")+1,s=a.indexOf("("),c=a.substring(s+1,u-1).split(/,\s*/),o.toFunctionAnnotation=function(){return{name:i,parameters:hr(c.slice(0,1).concat(c.slice(3)))}},o}(n,e,t)})),f=M(u,(function(e,t){return gr(e,t)})),d=E(f,l,{revoke:i(xr,n),config:function(t){var r=Wn(n+"-config",e,t);return{key:n,value:{config:r,me:d,configAsRaw:K((function(){return zn(n+"-config",e,t)})),initialConfig:t,state:s}}},schema:function(){return t},exhibit:function(e,t){return c(e).bind((function(e){return gn(o,"exhibit").map((function(n){return n(t,e.config,e.state)}))})).getOr(vr({}))},name:function(){return n},handlers:function(e){return c(e).bind((function(e){return gn(o,"events").map((function(t){return t(e.config,e.state)}))})).getOr({})}});return d},Cr=function(e,t){return kr(e,t,{validate:C,label:"function"})},kr=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return Tt("required",t),St(t),function(r){var o=P(r);_e(t,(function(e){return ve(o,e)}))||Ct(t,o),e(t,o);var i=xe(t,(function(e){return!n.validate(r[e],e)}));return 0<i.length&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+wt(e).join(", ")+") were not.")}(i,n.label),r}},Tr=function(e,t){var n=xe(t,(function(t){return!ve(e,t)}));0<n.length&&kt(n)},Sr=t,Er=function(e){return Cr(Tr,e)},_r={init:function(){return Nr({readState:function(){return"No State required"}})}},Nr=function(e){return Cr(Sr,["readState"])(e),e},Rr=function(e){return vn(e)},Or=Rn([qn("fields"),qn("name"),Qn("active",{}),Qn("apis",{}),Qn("state",_r),Qn("extra",{})]),Ar=function(e){var t,n,r,o,i,a,u,s,c=zn("Creating behaviour: "+e.name,Or,e);return t=c.fields,n=c.name,r=c.active,o=c.apis,i=c.extra,a=c.state,u=Rn(t),s=Jn(n,[Zn("config",t)]),wr(u,s,n,r,o,i,a)},Pr=Rn([qn("branchKey"),qn("branches"),qn("name"),Qn("active",{}),Qn("apis",{}),Qn("state",_r),Qn("extra",{})]),Dr=r(void 0),Mr=function(t,n,r){if(!(b(r)||w(r)||k(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},Br=function(e,t,n){Mr(e.dom(),t,n)},Ir=function(e,t){var n=e.dom();D(t,(function(e,t){Mr(n,t,e)}))},Lr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Hr=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Fr=function(e,t){e.dom().removeAttribute(t)},zr=function(e,t){var n=Lr(e,t);return void 0===n||""===n?[]:n.split(" ")},Wr=function(e){return void 0!==e.dom().classList},Ur=function(e){return zr(e,"class")},jr=function(e,t){return r=t,o=zr(n=e,"class").concat([r]),Br(n,"class",o.join(" ")),!0;var n,r,o},Vr=function(e,t){return o=t,0<(i=xe(zr(n=e,r="class"),(function(e){return e!==o}))).length?Br(n,r,i.join(" ")):Fr(n,r),!1;var n,r,o,i},$r=function(e,t){Wr(e)?e.dom().classList.add(t):jr(e,t)},qr=function(e,t){var n;Wr(e)?e.dom().classList.remove(t):Vr(e,t),0===(Wr(n=e)?n.dom().classList:Ur(n)).length&&Fr(n,"class")},Yr=function(e,t){return Wr(e)&&e.dom().classList.contains(t)},Xr=function(e,t,n){qr(e,n),$r(e,t)},Gr=Object.freeze({toAlpha:function(e,t,n){Xr(e.element(),t.alpha(),t.omega())},toOmega:function(e,t,n){Xr(e.element(),t.omega(),t.alpha())},isAlpha:function(e,t,n){return Yr(e.element(),t.alpha())},isOmega:function(e,t,n){return Yr(e.element(),t.omega())},clear:function(e,t,n){qr(e.element(),t.alpha()),qr(e.element(),t.omega())}}),Kr=[qn("alpha"),qn("omega")],Jr=Ar({fields:Kr,name:"swapping",apis:Gr}),Zr=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Zr(n())}}};function Qr(e,t,n,r,o){return e(n,r)?A.some(n):C(o)&&o(n)?A.none():t(n,r,o)}var eo=function(e,t,n){for(var o=e.dom(),i=C(n)?n:r(!1);o.parentNode;){o=o.parentNode;var a=ut(o);if(t(a))return A.some(a);if(i(a))break}return A.none()},to=function(e,t,n){return Qr((function(e,t){return t(e)}),eo,e,t,n)},no=function(e){e.dom().focus()},ro=function(e){e.dom().blur()},oo=function(t){var n=void 0!==t?t.dom():e.document;return A.from(n.activeElement).map(ut)},io=function(e){return oo(Mt(e)).filter((function(t){return e.dom().contains(t.dom())}))},ao=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),uo=tinymce.util.Tools.resolve("tinymce.ThemeManager"),so=function(t){var n=e.document.createElement("a");n.target="_blank",n.href=t.href,n.rel="noreferrer noopener";var r=e.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.document.body.appendChild(n),n.dispatchEvent(r),e.document.body.removeChild(n)},co={formatChanged:r("formatChanged"),orientationChanged:r("orientationChanged"),dropupDismissed:r("dropupDismissed")},lo=function(e){return e.dom().innerHTML},fo=function(e){var t,n,r;return t=function(e){return!1,ut(e.dom().cloneNode(!1))}(e),n=it("div"),r=ut(t.dom().cloneNode(!0)),Ft(n,r),lo(n)},mo=function(e){return fo(e)},ho=Object.freeze({events:function(e){return rr([ir(Ue(),(function(t,n){var r,o,i=e.channels(),a=(r=P(i),(o=n).universal()?r:xe(r,(function(e){return ve(o.channels(),e)})));ye(a,(function(e){var r=i[e](),o=r.schema(),a=Wn("channel["+e+"] data\nReceiver: "+mo(t.element()),o,n.data());r.onReceive()(t,a)}))}))])}}),go=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},po=[],vo=["alloy/data/Fields","alloy/debugging/Debugging"],bo={logEventCut:t,logEventStopped:t,logNoParent:t,logEventNoHandlers:t,logEventResponse:t,write:t},yo=function(t,n,r){var o,i="*"===po||ve(po,t)?(o=[],{logEventCut:function(e,t,n){o.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){o.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){o.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){o.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){o.push({outcome:"response",purpose:n,target:t})},write:function(){ve(["mousemove","mouseover","mouseout",Xe()],t)||e.console.log(t,{event:t,target:n.dom(),sequence:be(o,(function(e){return ve(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+mo(e.target)+")":e.outcome}))})}}):bo,a=r(i);return i.write(),a},xo=r([qn("menu"),qn("selectedMenu")]),wo=r([qn("item"),qn("selectedItem")]),Co=(r(Rn(wo().concat(xo()))),r(Rn(wo()))),ko=Gn("initSize",[qn("numColumns"),qn("numRows")]),To=function(e,t,n){var r;return function(){var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");ke(t,(function(e){return 0<e.indexOf("alloy")&&!function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}(vo,(function(t){return-1<e.indexOf(t)}))})).getOr("unknown")}}(),Mn(t,t,n,(r=function(e){return Jt.value((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)}))},Nn((function(e){return r(e)}))))},So=function(e){return To(0,e,en(t))},Eo=function(e){return To(0,e,en(A.none))},_o=function(e){return To(0,e,tn())},No=function(e){return To(0,e,tn())},Ro=function(e,t){return tr(e,r(t))},Oo=function(e){return tr(e,o)},Ao=r(ko),Po=[Yn("channels",An(Jt.value,Rn([_o("onReceive"),Qn("schema",Vn())])))],Do=Ar({fields:Po,name:"receiving",active:ho}),Mo=function(e,t){var n=Ho(e,t),r=t.aria();r.update()(e,r,n)},Bo=function(e,t,n){(function(e,t){return Wr(e)?e.dom().classList.toggle(t):(r=t,ve(Ur(n=e),r)?Vr(n,r):jr(n,r));var n,r})(e.element(),t.toggleClass()),Mo(e,t)},Io=function(e,t,n){$r(e.element(),t.toggleClass()),Mo(e,t)},Lo=function(e,t,n){qr(e.element(),t.toggleClass()),Mo(e,t)},Ho=function(e,t){return Yr(e.element(),t.toggleClass())},Fo=function(e,t,n){(t.selected()?Io:Lo)(e,t,n)},zo=Object.freeze({onLoad:Fo,toggle:Bo,isOn:Ho,on:Io,off:Lo}),Wo=Object.freeze({exhibit:function(e,t,n){return vr({})},events:function(e,t){var n,r,o,i=(n=e,r=t,o=Bo,mr((function(e){o(e,n,r)}))),a=yr(e,t,Fo);return rr(Se([e.toggleOnExecute()?[i]:[],[a]]))}}),Uo=function(e,t,n){Br(e.element(),"aria-expanded",n)},jo=[Qn("selected",!1),qn("toggleClass"),Qn("toggleOnExecute",!0),er("aria",{mode:"none"},jn("mode",{pressed:[Qn("syncWithExpanded",!1),Ro("update",(function(e,t,n){Br(e.element(),"aria-pressed",n),t.syncWithExpanded()&&Uo(e,0,n)}))],checked:[Ro("update",(function(e,t,n){Br(e.element(),"aria-checked",n)}))],expanded:[Ro("update",Uo)],selected:[Ro("update",(function(e,t,n){Br(e.element(),"aria-selected",n)}))],none:[Ro("update",t)]}))],Vo=Ar({fields:jo,name:"toggling",active:Wo,apis:zo}),$o=function(e,t){return Do.config({channels:pn(co.formatChanged(),{onReceive:function(n,r){r.command===e&&t(n,r.state)}})})},qo=function(e){return Do.config({channels:pn(co.orientationChanged(),{onReceive:e})})},Yo=function(e,t){return{key:e,value:{onReceive:t}}},Xo="tinymce-mobile",Go={resolve:function(e){return Xo+"-"+e},prefix:r(Xo)},Ko=function(e,t){t.ignore()||(no(e.element()),t.onFocus()(e))},Jo=Object.freeze({focus:Ko,blur:function(e,t){t.ignore()||ro(e.element())},isFocused:function(e){return t=e.element(),n=Mt(t).dom(),t.dom()===n.activeElement;var t,n}}),Zo=Object.freeze({exhibit:function(e,t){return t.ignore()?vr({}):vr({attributes:{tabindex:"-1"}})},events:function(e){return rr([ir(ze(),(function(t,n){Ko(t,e),n.stop()}))])}}),Qo=[So("onFocus"),Qn("ignore",!1)],ei=Ar({fields:Qo,name:"focusing",active:Zo,apis:Jo}),ti=function(e){return void 0!==e.style&&C(e.style.getPropertyValue)},ni=function(t,n,r){if(!b(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);ti(t)&&t.style.setProperty(n,r)},ri=function(e,t,n){var r=e.dom();ni(r,t,n)},oi=function(e,t){var n=e.dom();D(t,(function(e,t){ni(n,t,e)}))},ii=function(t,n){var r=t.dom(),o=e.window.getComputedStyle(r).getPropertyValue(n),i=""!==o||vt(t)?o:ai(r,n);return null===i?void 0:i},ai=function(e,t){return ti(e)?e.style.getPropertyValue(t):""},ui=function(e,t){var n=e.dom(),r=ai(n,t);return A.from(r).filter((function(e){return 0<e.length}))},si=function(e,t){var n,r,o=e.dom();r=t,ti(n=o)&&n.style.removeProperty(r),Hr(e,"style")&&""===Lr(e,"style").replace(/^\s+|\s+$/g,"")&&Fr(e,"style")},ci=function(e){return e.dom().offsetWidth};function li(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var o=ii(n,e);return parseFloat(o)||0}return r},r=function(e,t){return Ce(t,(function(t,n){var r=ii(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,n){if(!k(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom();ti(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return o<t?t-o:0}}}var fi,di,mi=li("height",(function(e){var t=e.dom();return vt(e)?t.getBoundingClientRect().height:t.offsetHeight})),hi=function(e){return mi.get(e)},gi=function(e,t){return At(t,e)},pi=function(e){return Pt(e)},vi=function(e,t,n){return eo(e,(function(e){return Rt(e,t)}),n)},bi=function(e,t){return Pt(t,e)},yi=function(e,t,n){return Qr(Rt,vi,e,t,n)},xi=function(e,t,n){var r=Ne(e.slice(0,t)),o=Ne(e.slice(t+1));return ke(r.concat(o),n)},wi=function(e,t,n){var r=Ne(e.slice(0,t));return ke(r,n)},Ci=function(e,t,n){var r=e.slice(0,t),o=e.slice(t+1);return ke(o.concat(r),n)},ki=function(e,t,n){var r=e.slice(t+1);return ke(r,n)},Ti=function(e){return function(t){var n=t.raw();return ve(e,n.which)}},Si=function(e){return function(t){return _e(e,(function(e){return e(t)}))}},Ei=function(e){return!0===e.raw().shiftKey},_i=function(e){return!0===e.raw().ctrlKey},Ni=d(Ei),Ri=function(e,t){return{matches:e,classification:t}},Oi=function(e,t,n,r){var o=e+t;return r<o?n:o<n?r:o},Ai=function(e,t,n){return e<=t?t:n<=e?n:e},Pi=function(e,t,n){var r=gi(e.element(),"."+t.highlightClass());ye(r,(function(n){qr(n,t.highlightClass()),e.getSystem().getByDom(n).each((function(n){t.onDehighlight()(e,n)}))}))},Di=function(e,t,n,r){var o=Mi(e,t,n,r);Pi(e,t),$r(r.element(),t.highlightClass()),o||t.onHighlight()(e,r)},Mi=function(e,t,n,r){return Yr(r.element(),t.highlightClass())},Bi=function(e,t,n){return bi(e.element(),"."+t.itemClass()).bind((function(t){return e.getSystem().getByDom(t).toOption()}))},Ii=function(e,t,n){var r=gi(e.element(),"."+t.itemClass());return(0<r.length?A.some(r[r.length-1]):A.none()).bind((function(t){return e.getSystem().getByDom(t).toOption()}))},Li=function(e,t,n,r){var o=gi(e.element(),"."+t.itemClass());return Te(o,(function(e){return Yr(e,t.highlightClass())})).bind((function(t){var n=Oi(t,r,0,o.length-1);return e.getSystem().getByDom(o[n]).toOption()}))},Hi=Object.freeze({dehighlightAll:Pi,dehighlight:function(e,t,n,r){var o=Mi(e,t,n,r);qr(r.element(),t.highlightClass()),o&&t.onDehighlight()(e,r)},highlight:Di,highlightFirst:function(e,t,n){Bi(e,t).each((function(r){Di(e,t,n,r)}))},highlightLast:function(e,t,n){Ii(e,t).each((function(r){Di(e,t,n,r)}))},highlightAt:function(e,t,n,r){(function(e,t,n,r){var o=gi(e.element(),"."+t.itemClass());return A.from(o[r]).fold((function(){return Jt.error("No element found with index "+r)}),e.getSystem().getByDom)})(e,t,0,r).fold((function(e){throw new Error(e)}),(function(r){Di(e,t,n,r)}))},highlightBy:function(e,t,n,r){var o=gi(e.element(),"."+t.itemClass()),i=go(be(o,(function(t){return e.getSystem().getByDom(t).toOption()})));ke(i,r).each((function(r){Di(e,t,n,r)}))},isHighlighted:Mi,getHighlighted:function(e,t,n){return bi(e.element(),"."+t.highlightClass()).bind((function(t){return e.getSystem().getByDom(t).toOption()}))},getFirst:Bi,getLast:Ii,getPrevious:function(e,t,n){return Li(e,t,0,-1)},getNext:function(e,t,n){return Li(e,t,0,1)}}),Fi=[qn("highlightClass"),qn("itemClass"),So("onHighlight"),So("onDehighlight")],zi=Ar({fields:Fi,name:"highlighting",apis:Hi}),Wi=function(){return{get:function(e){return io(e.element())},set:function(e,t){e.getSystem().triggerFocus(t,e.element())}}},Ui=function(e,t,n,r,o,i){var a=function(e,t,r,o){var i,a;return(i=n(e,t,r,o),a=t.event(),ke(i,(function(e){return e.matches(a)})).map((function(e){return e.classification}))).bind((function(n){return n(e,t,r,o)}))},u={schema:function(){return e.concat([Qn("focusManager",Wi()),Ro("handler",u),Ro("state",t)])},processKey:a,toEvents:function(e,t){var n=r(e,t),o=rr(i.map((function(n){return ir(ze(),(function(r,o){n(r,e,t,o),o.stop()}))})).toArray().concat([ir(V(),(function(n,r){a(n,r,e,t).each((function(e){r.stop()}))}))]));return E(n,o)},toApis:o};return u},ji=function(e){var t=[Kn("onEscape"),Kn("onEnter"),Qn("selector",'[data-alloy-tabstop="true"]'),Qn("firstTabstop",0),Qn("useTabstopAt",r(!0)),Kn("visibilitySelector")].concat([e]),n=function(e,t){var n=e.visibilitySelector().bind((function(e){return yi(t,e)})).getOr(t);return 0<hi(n)},o=function(e,t,r,o,i){return i(t,r,(function(e){return n(t=o,r=e)&&t.useTabstopAt()(r);var t,r})).fold((function(){return o.cyclic()?A.some(!0):A.none()}),(function(t){return o.focusManager().set(e,t),A.some(!0)}))},a=function(e,t,n,r){var a,u,s=gi(e.element(),n.selector());return(a=e,u=n,u.focusManager().get(a).bind((function(e){return yi(e,u.selector())}))).bind((function(t){return Te(s,i(Dt,t)).bind((function(t){return o(e,s,t,n,r)}))}))},u=r([Ri(Si([Ei,Ti([9])]),(function(e,t,n,r){var o=n.cyclic()?xi:wi;return a(e,0,n,o)})),Ri(Ti([9]),(function(e,t,n,r){var o=n.cyclic()?Ci:ki;return a(e,0,n,o)})),Ri(Ti([27]),(function(e,t,n,r){return n.onEscape().bind((function(n){return n(e,t)}))})),Ri(Si([Ni,Ti([13])]),(function(e,t,n,r){return n.onEnter().bind((function(n){return n(e,t)}))}))]),s=r({}),c=r({});return Ui(t,_r.init,u,s,c,A.some((function(e,t){var r,o,i,a;(r=e,o=t,i=gi(r.element(),o.selector()),a=xe(i,(function(e){return n(o,e)})),A.from(a[o.firstTabstop()])).each((function(n){t.focusManager().set(e,n)}))})))},Vi=ji(tr("cyclic",r(!1))),$i=ji(tr("cyclic",r(!0))),qi=function(e){return"input"===mt(e)&&"radio"!==Lr(e,"type")||"textarea"===mt(e)},Yi=function(e,t,n){return qi(n)&&Ti([32])(t.event())?A.none():(tt(e,n,je()),A.some(!0))},Xi=[Qn("execute",Yi),Qn("useSpace",!1),Qn("useEnter",!0),Qn("useControlEnter",!1),Qn("useDown",!1)],Gi=function(e,t,n){return n.execute()(e,t,e.element())},Ki=r({}),Ji=r({}),Zi=Ui(Xi,_r.init,(function(e,t,n,r){var o=n.useSpace()&&!qi(e.element())?[32]:[],i=n.useEnter()?[13]:[],a=n.useDown()?[40]:[],u=o.concat(i).concat(a);return[Ri(Ti(u),Gi)].concat(n.useControlEnter()?[Ri(Si([_i,Ti([13])]),Gi)]:[])}),Ki,Ji,A.none()),Qi=function(e){var t=Zr(A.none());return Nr({readState:r({}),setGridSize:function(e,n){t.set(A.some({numRows:r(e),numColumns:r(n)}))},getNumRows:function(){return t.get().map((function(e){return e.numRows()}))},getNumColumns:function(){return t.get().map((function(e){return e.numColumns()}))}})},ea=Object.freeze({flatgrid:Qi,init:function(e){return e.state()(e)}}),ta=function(e,t){return function(n){return"rtl"===na(n)?t:e}},na=function(e){return"rtl"===ii(e,"direction")?"rtl":"ltr"},ra=function(e){return function(t,n,r,o){var i=e(t.element());return ua(i,t,n,r,o)}},oa=function(e,t){var n=ta(e,t);return ra(n)},ia=function(e,t){var n=ta(t,e);return ra(n)},aa=function(e){return function(t,n,r,o){return ua(e,t,n,r,o)}},ua=function(e,t,n,r,o){return r.focusManager().get(t).bind((function(n){return e(t.element(),n,r,o)})).map((function(e){return r.focusManager().set(t,e),!0}))},sa=aa,ca=aa,la=aa,fa=function(e){var t;return!((t=e.dom()).offsetWidth<=0&&t.offsetHeight<=0)},da=Et(["index","candidates"],[]),ma=function(e,t,n){return ha(e,t,n)},ha=function(e,t,n,r){var o,a=i(Dt,t),u=gi(e,n),s=xe(u,fa);return Te(o=s,a).map((function(e){return da({index:e,candidates:o})}))},ga=function(e,t){return Te(e,(function(e){return Dt(t,e)}))},pa=function(e,t,n,r){return r(Math.floor(t/n),t%n).bind((function(t){var r=t.row()*n+t.column();return 0<=r&&r<e.length?A.some(e[r]):A.none()}))},va=function(e,t,n,o,i){return pa(e,t,o,(function(t,a){var u=t===n-1?e.length-t*o:o,s=Oi(a,i,0,u-1);return A.some({row:r(t),column:r(s)})}))},ba=function(e,t,n,o,i){return pa(e,t,o,(function(t,a){var u=Oi(t,i,0,n-1),s=u===n-1?e.length-u*o:o,c=Ai(a,0,s-1);return A.some({row:r(u),column:r(c)})}))},ya=[qn("selector"),Qn("execute",Yi),Eo("onEscape"),Qn("captureTab",!1),Ao()],xa=function(e){return function(t,n,r,o){return ma(t,n,r.selector()).bind((function(t){return e(t.candidates(),t.index(),o.getNumRows().getOr(r.initSize().numRows()),o.getNumColumns().getOr(r.initSize().numColumns()))}))}},wa=function(e,t,n,r){return n.captureTab()?A.some(!0):A.none()},Ca=xa((function(e,t,n,r){return va(e,t,n,r,-1)})),ka=xa((function(e,t,n,r){return va(e,t,n,r,1)})),Ta=xa((function(e,t,n,r){return ba(e,t,n,r,-1)})),Sa=xa((function(e,t,n,r){return ba(e,t,n,r,1)})),Ea=r([Ri(Ti([37]),oa(Ca,ka)),Ri(Ti([39]),ia(Ca,ka)),Ri(Ti([38]),sa(Ta)),Ri(Ti([40]),ca(Sa)),Ri(Si([Ei,Ti([9])]),wa),Ri(Si([Ni,Ti([9])]),wa),Ri(Ti([27]),(function(e,t,n,r){return n.onEscape()(e,t)})),Ri(Ti([32].concat([13])),(function(e,t,n,r){return(o=e,i=n,i.focusManager().get(o).bind((function(e){return yi(e,i.selector())}))).bind((function(r){return n.execute()(e,t,r)}));var o,i}))]),_a=r({}),Na=Ui(ya,Qi,Ea,_a,{},A.some((function(e,t,n){bi(e.element(),t.selector()).each((function(n){t.focusManager().set(e,n)}))}))),Ra=function(e,t,n,r){return ma(e,n,t).bind((function(e){var t=e.index(),n=e.candidates(),o=Oi(t,r,0,n.length-1);return A.from(n[o])}))},Oa=[qn("selector"),Qn("getInitial",A.none),Qn("execute",Yi),Qn("executeOnMove",!1),Qn("allowVertical",!0)],Aa=function(e,t,n){return(r=e,o=n,o.focusManager().get(r).bind((function(e){return yi(e,o.selector())}))).bind((function(r){return n.execute()(e,t,r)}));var r,o},Pa=function(e,t,n){return Ra(e,n.selector(),t,-1)},Da=function(e,t,n){return Ra(e,n.selector(),t,1)},Ma=function(e){return function(t,n,r){return e(t,n,r).bind((function(){return r.executeOnMove()?Aa(t,n,r):A.some(!0)}))}},Ba=r({}),Ia=r({}),La=Ui(Oa,_r.init,(function(e,t,n,r){var o=[37].concat(n.allowVertical()?[38]:[]),i=[39].concat(n.allowVertical()?[40]:[]);return[Ri(Ti(o),Ma(oa(Pa,Da))),Ri(Ti(i),Ma(ia(Pa,Da))),Ri(Ti([13]),Aa),Ri(Ti([32]),Aa)]}),Ba,Ia,A.some((function(e,t){t.getInitial()(e).or(bi(e.element(),t.selector())).each((function(n){t.focusManager().set(e,n)}))}))),Ha=Et(["rowIndex","columnIndex","cell"],[]),Fa=function(e,t,n){return A.from(e[t]).bind((function(e){return A.from(e[n]).map((function(e){return Ha({rowIndex:t,columnIndex:n,cell:e})}))}))},za=function(e,t,n,r){var o=e[t].length,i=Oi(n,r,0,o-1);return Fa(e,t,i)},Wa=function(e,t,n,r){var o=Oi(n,r,0,e.length-1),i=e[o].length,a=Ai(t,0,i-1);return Fa(e,o,a)},Ua=function(e,t,n,r){var o=e[t].length,i=Ai(n+r,0,o-1);return Fa(e,t,i)},ja=function(e,t,n,r){var o=Ai(n+r,0,e.length-1),i=e[o].length,a=Ai(t,0,i-1);return Fa(e,o,a)},Va=[Gn("selectors",[qn("row"),qn("cell")]),Qn("cycles",!0),Qn("previousSelector",A.none),Qn("execute",Yi)],$a=function(e,t){return function(n,r,o){var i=o.cycles()?e:t;return yi(r,o.selectors().row()).bind((function(e){var t=gi(e,o.selectors().cell());return ga(t,r).bind((function(t){var r=gi(n,o.selectors().row());return ga(r,e).bind((function(e){var n,a=(n=o,be(r,(function(e){return gi(e,n.selectors().cell())})));return i(a,e,t).map((function(e){return e.cell()}))}))}))}))}},qa=$a((function(e,t,n){return za(e,t,n,-1)}),(function(e,t,n){return Ua(e,t,n,-1)})),Ya=$a((function(e,t,n){return za(e,t,n,1)}),(function(e,t,n){return Ua(e,t,n,1)})),Xa=$a((function(e,t,n){return Wa(e,n,t,-1)}),(function(e,t,n){return ja(e,n,t,-1)})),Ga=$a((function(e,t,n){return Wa(e,n,t,1)}),(function(e,t,n){return ja(e,n,t,1)})),Ka=r([Ri(Ti([37]),oa(qa,Ya)),Ri(Ti([39]),ia(qa,Ya)),Ri(Ti([38]),sa(Xa)),Ri(Ti([40]),ca(Ga)),Ri(Ti([32].concat([13])),(function(e,t,n){return io(e.element()).bind((function(r){return n.execute()(e,t,r)}))}))]),Ja=r({}),Za=r({}),Qa=Ui(Va,_r.init,Ka,Ja,Za,A.some((function(e,t){t.previousSelector()(e).orThunk((function(){var n=t.selectors();return bi(e.element(),n.cell())})).each((function(n){t.focusManager().set(e,n)}))}))),eu=[qn("selector"),Qn("execute",Yi),Qn("moveOnTab",!1)],tu=function(e,t,n){return n.focusManager().get(e).bind((function(r){return n.execute()(e,t,r)}))},nu=function(e,t,n){return Ra(e,n.selector(),t,-1)},ru=function(e,t,n){return Ra(e,n.selector(),t,1)},ou=r([Ri(Ti([38]),la(nu)),Ri(Ti([40]),la(ru)),Ri(Si([Ei,Ti([9])]),(function(e,t,n){return n.moveOnTab()?la(nu)(e,t,n):A.none()})),Ri(Si([Ni,Ti([9])]),(function(e,t,n){return n.moveOnTab()?la(ru)(e,t,n):A.none()})),Ri(Ti([13]),tu),Ri(Ti([32]),tu)]),iu=r({}),au=r({}),uu=Ui(eu,_r.init,ou,iu,au,A.some((function(e,t){bi(e.element(),t.selector()).each((function(n){t.focusManager().set(e,n)}))}))),su=[Eo("onSpace"),Eo("onEnter"),Eo("onShiftEnter"),Eo("onLeft"),Eo("onRight"),Eo("onTab"),Eo("onShiftTab"),Eo("onUp"),Eo("onDown"),Eo("onEscape"),Kn("focusIn")],cu=Ui(su,_r.init,(function(e,t,n){return[Ri(Ti([32]),n.onSpace()),Ri(Si([Ni,Ti([13])]),n.onEnter()),Ri(Si([Ei,Ti([13])]),n.onShiftEnter()),Ri(Si([Ei,Ti([9])]),n.onShiftTab()),Ri(Si([Ni,Ti([9])]),n.onTab()),Ri(Ti([38]),n.onUp()),Ri(Ti([40]),n.onDown()),Ri(Ti([37]),n.onLeft()),Ri(Ti([39]),n.onRight()),Ri(Ti([32]),n.onSpace()),Ri(Ti([27]),n.onEscape())]}),(function(){return{}}),(function(){return{}}),A.some((function(e,t){return t.focusIn().bind((function(n){return n(e,t)}))}))),lu=Vi.schema(),fu=$i.schema(),du=La.schema(),mu=Na.schema(),hu=Qa.schema(),gu=Zi.schema(),pu=uu.schema(),vu=cu.schema(),bu=function(e,t,n,r,o,i){var a,u,s=e,c=Jn(t,[(a="config",u=e,Mn(a,a,nn(),u))]);return wr(s,c,t,n,r,o,i)}(jn((di=zn("Creating behaviour: "+(fi={branchKey:"mode",branches:Object.freeze({acyclic:lu,cyclic:fu,flow:du,flatgrid:mu,matrix:hu,execution:gu,menu:pu,special:vu}),name:"keying",active:{events:function(e,t){return e.handler().toEvents(e,t)}},apis:{focusIn:function(e){e.getSystem().triggerFocus(e.element(),e.element())},setGridSize:function(t,n,r,o,i){yn(r,"setGridSize")?r.setGridSize(o,i):e.console.error("Layout does not support setGridSize")}},state:ea}).name,Pr,fi)).branchKey,di.branches),di.name,di.active,di.apis,di.extra,di.state),yu=function(e,t){return n=e,r={},i=be(t,(function(t){return n=t.name(),r="Cannot configure "+t.name()+" for "+e,Mn(n,n,nn(),Nn((function(e){return Jt.error("The field: "+n+" is forbidden. "+r)})));var n,r})).concat([tr("dump",o)]),Mn(n,n,en(r),On(i));var n,r,i},xu=function(e){return e.dump()},wu="placeholder",Cu=Zt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ku=function(e,t,n,o){return function(e,t,n,o){return n.uiType===wu?(a=n,u=o,(i=e).exists((function(e){return e!==a.owner}))?Cu.single(!0,r(a)):gn(u,a.name).fold((function(){throw new Error("Unknown placeholder component: "+a.name+"\nKnown: ["+P(u)+"]\nNamespace: "+i.getOr("none")+"\nSpec: "+Cn(a,null,2))}),(function(e){return e.replace()}))):Cu.single(!1,r(n));var i,a,u}(e,0,n,o).fold((function(r,i){var a=i(t,n.config,n.validated),u=gn(a,"components").getOr([]),s=Ee(u,(function(n){return ku(e,t,n,o)}));return[E(a,{components:s})]}),(function(e,r){return r(t,n.config,n.validated)}))},Tu=Cu.single,Su=Cu.multiple,Eu=r(wu),_u=0,Nu=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++_u+String(t)},Ru=Zt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ou=Qn("factory",{sketch:o}),Au=Qn("schema",[]),Pu=qn("name"),Du=Mn("pname","pname",rn((function(e){return"<alloy."+Nu(e.name)+">"})),Vn()),Mu=Qn("defaults",r({})),Bu=Qn("overrides",r({})),Iu=On([Ou,Au,Pu,Du,Mu,Bu]),Lu=On([Ou,Au,Pu,Du,Mu,Bu]),Hu=On([Ou,Au,Pu,qn("unit"),Du,Mu,Bu]),Fu=function(e){var t=function(e){return e.name()};return e.fold(t,t,t,t)},zu=function(e,t){return function(n){var r=Wn("Converting part type",t,n);return e(r)}},Wu=zu(Ru.required,Iu),Uu=zu(Ru.optional,Lu),ju=zu(Ru.group,Hu),Vu=r("entirety"),$u=function(e,t,n,r){var o=n;return E(t.defaults()(e,n,r),n,{uid:e.partUids()[t.name()]},t.overrides()(e,n,r),{"debug.sketcher":pn("part-"+t.name(),o)})},qu=function(e,t){return{uiType:Eu(),owner:e,name:t}},Yu=function(e,t,n){return o=t,i={},a={},ye(n,(function(e){e.fold((function(e){i[e.pname()]=Tu(!0,(function(t,n,r){return e.factory().sketch($u(t,e,n,r))}))}),(function(e){var t=o.parts()[e.name()]();a[e.name()]=r($u(o,e,t[Vu()]()))}),(function(e){i[e.pname()]=Tu(!1,(function(t,n,r){return e.factory().sketch($u(t,e,n,r))}))}),(function(e){i[e.pname()]=Su(!0,(function(t,n,r){var o=t[e.name()]();return be(o,(function(n){return e.factory().sketch(E(e.defaults()(t,n),n,e.overrides()(t,n)))}))}))}))})),{internals:r(i),externals:r(a)};var o,i,a},Xu=function(e,t,n){return function(e,t,n,o){var i,a,u,s=M(o,(function(e,t){return o=e,i=!1,{name:r(n=t),required:function(){return o.fold((function(e,t){return e}),(function(e,t){return e}))},used:function(){return i},replace:function(){if(!0===i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,o}};var n,o,i})),c=(i=e,a=t,u=s,Ee(n,(function(e){return ku(i,a,e,u)})));return D(s,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+Cn(t.components(),null,2))})),c}(A.some(e),t,t.components(),n)},Gu=function(e,t,n){var r=t.partUids()[n];return e.getSystem().getByUid(r).toOption()},Ku=function(e,t,n){return Gu(e,t,n).getOrDie("Could not find part: "+n)},Ju=function(e){return Mn("partUids","partUids",on((function(t){return function(e,t){var n=be(t,Fu);return vn(be(n,(function(t){return{key:t,value:e+"-"+t}})))}(t.uid,e)})),Vn())},Zu=Nu("alloy-premade"),Qu=Nu("api"),es=function(e){return pn(Zu,e)},ts=function(e){return t=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.config(Qu);return e.apply(void 0,[o].concat([t].concat(n)))},r=(n=e.toString()).indexOf(")")+1,o=n.indexOf("("),i=n.substring(o+1,r-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:hr(i.slice(1))}},t;var t,n,r,o,i},ns=r(Qu),rs=r("alloy-id-"),os=r("data-alloy-id"),is=rs(),as=os(),us=function(e){var t=gt(e)?Lr(e,as):null;return A.from(t)},ss=function(e){return Nu(e)},cs=function(e,t,n,r,o){var i,a,u=(a=o,(0<(i=r).length?[Gn("parts",i)]:[]).concat([qn("uid"),Qn("dom",{}),Qn("components",[]),Oo("originalSpec"),Qn("debug.sketcher",{})]).concat(a));return Wn(e+" [SpecSchema]",Rn(u.concat(t)),n)},ls=function(e,t,n,r,o){var i=fs(o),a=Ee(n,(function(e){return e.fold(A.none,A.some,A.none,A.none).map((function(e){return Gn(e.name(),e.schema().concat([Oo(Vu())]))})).toArray()})),u=Ju(n),s=cs(e,t,i,a,[u]),c=Yu(0,s,n),l=Xu(e,s,c.internals());return E(r(s,l,i,c.externals()),{"debug.sketcher":pn(e,o)})},fs=function(e){return E({uid:ss("uid")},e)},ds=Rn([qn("name"),qn("factory"),qn("configFields"),Qn("apis",{}),Qn("extraApis",{})]),ms=Rn([qn("name"),qn("factory"),qn("configFields"),qn("partFields"),Qn("apis",{}),Qn("extraApis",{})]),hs=function(e){var t=zn("Sketcher for "+e.name,ds,e),n=M(t.apis,ts),o=M(t.extraApis,(function(e,t){return gr(e,t)}));return E({name:r(t.name),partFields:r([]),configFields:r(t.configFields),sketch:function(e){return n=t.name,r=t.configFields,o=t.factory,a=fs(i=e),u=cs(n,r,a,[],[]),E(o(u,a),{"debug.sketcher":pn(n,i)});var n,r,o,i,a,u}},n,o)},gs=function(e){var t=zn("Sketcher for "+e.name,ms,e),n=function(e,t){var n={};return ye(t,(function(t){var r;(r=t,r.fold(A.some,A.none,A.some,A.some)).each((function(t){var r=qu(e,t.pname());n[t.name()]=function(n){var o=zn("Part: "+t.name()+" in "+e,On(t.schema()),n);return E(r,{config:n,validated:o})}}))})),n}(t.name,t.partFields),o=M(t.apis,ts),i=M(t.extraApis,(function(e,t){return gr(e,t)}));return E({name:r(t.name),partFields:r(t.partFields),configFields:r(t.configFields),sketch:function(e){return ls(t.name,t.configFields,t.partFields,t.factory,e)},parts:r(n)},o,i)},ps=hs({name:"Button",factory:function(e){var t,n,r,o=(t=e.action(),n=function(e,t){t.stop(),et(e)},r=He.detect().deviceType.isTouch()?[ir($e(),n)]:[ir(Y(),n),ir(z(),(function(e,t){t.cut()}))],rr(Se([t.map((function(e){return ir(je(),(function(t,n){e(t),n.stop()}))})).toArray(),r]))),i=gn(e.dom(),"attributes").bind(mn("type")),a=gn(e.dom(),"tag");return{uid:e.uid(),dom:e.dom(),components:e.components(),events:o,behaviours:E(Rr([ei.config({}),bu.config({mode:"execution",useSpace:!0,useEnter:!0})]),xu(e.buttonBehaviours())),domModification:{attributes:E(i.fold((function(){return a.is("button")?{type:"button"}:{}}),(function(e){return{}})),{role:e.role().getOr("button")})},eventOrder:e.eventOrder()}},configFields:[Qn("uid",void 0),qn("dom"),Qn("components",[]),yu("buttonBehaviours",[ei,bu]),Kn("action"),Kn("role"),Qn("eventOrder",{})]}),vs=Ar({fields:[],name:"unselecting",active:Object.freeze({events:function(e){return rr([or(G(),r(!0))])},exhibit:function(e,t){return vr({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),bs=function(e){var t,n;return function(e){var t,n,r,o=ot(e),i=Lt(o),a=(n=void 0!==(t=o).dom().attributes?t.dom().attributes:[],Ce(n,(function(e,t){return"class"===t.name?e:E(e,pn(t.name,t.value))}),{})),u=(r=o,Array.prototype.slice.call(r.dom().classList,0)),s=0===i.length?{}:{innerHtml:lo(o)};return E({tag:mt(o),classes:u,attributes:a},s)}((t=e,n={prefix:Go.prefix()},t.replace(/\$\{([^{}]*)\}/g,(function(e,t){var r,o=n[t];return"string"==(r=typeof o)||"number"===r?o.toString():e}))))},ys=function(e){return{dom:bs(e)}},xs=function(e){return Rr([Vo.config({toggleClass:Go.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),$o(e,(function(e,t){(t?Vo.on:Vo.off)(e)}))])},ws=function(e,t,n){return ps.sketch({dom:bs('<span class="${prefix}-toolbar-button ${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:t,buttonBehaviours:E(Rr([vs.config({})]),n)})},Cs=ws,ks=function(e,t){return ws(t,(function(){e.execCommand(t)}),{})},Ts=function(e,t,n,r){var o=xs(n);return ws(t,r,o)},Ss=function(e,t){var n=xs(t);return ws(t,(function(){e.execCommand(t)}),n)},Es=function(e,t){return{left:r(e),top:r(t),translate:function(n,r){return Es(e+n,t+r)}}},_s=Es,Ns=function(e,t,n){return Math.max(t,Math.min(n,e))},Rs="slider.change.value",Os=He.detect().deviceType.isTouch(),As=function(e,t){Qe(e,Rs,{value:t})},Ps=function(e,t,n,r){return function(e){return function(e){var t=e.event().raw();if(Os){var n=t;return void 0!==n.touches&&1===n.touches.length?A.some(n.touches[0]).map((function(e){return _s(e.clientX,e.clientY)})):A.none()}var r=t;return void 0!==r.clientX?A.some(r).map((function(e){return _s(e.clientX,e.clientY)})):A.none()}(e).map((function(e){return e.left()}))}(r).map((function(r){var o,i,a,u;return o=e,a=r,u=function(e,t,n,r,o,i,a){var u=n-t;if(r<e.left)return t-1;if(r>e.right)return n+1;var s,c,l,f,d=Math.min(e.right,Math.max(r,e.left))-e.left,m=Ns(d/e.width*u+t,t-1,n+1),h=Math.round(m);return i&&t<=m&&m<=n?(s=m,c=t,l=n,f=o,a.fold((function(){var e=s-c,t=Math.round(e/f)*f;return Ns(c+t,c-1,l+1)}),(function(e){var t=(s-e)%f,n=Math.round(t/f),r=Math.floor((s-e)/f),o=Math.floor((l-e)/f),i=e+Math.min(o,r+n)*f;return Math.max(e,i)}))):h}(n,(i=t).min(),i.max(),a,i.stepSize(),i.snapToGrid(),i.snapStart()),As(o,u),r}))},Ds=He.detect().deviceType.isTouch(),Ms=function(e,t){return Uu({name:e+"-edge",overrides:function(e){var n=rr([ar(L(),t,[e])]),r=rr([ar(z(),t,[e]),ar(W(),(function(e,n){n.mouseIsDown().get()&&t(e,n)}),[e])]);return{events:Ds?n:r}}})},Bs=[Ms("left",(function(e,t){As(e,t.min()-1)})),Ms("right",(function(e,t){As(e,t.max()+1)})),Wu({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:rr([sr(L(),e,"spectrum"),sr(H(),e,"spectrum"),sr(F(),e,"spectrum")])}}}),Wu({schema:[tr("mouseIsDown",(function(){return Zr(!1)}))],name:"spectrum",overrides:function(e){var t=function(t,n){var r=t.element().dom().getBoundingClientRect();Ps(t,e,r,n)},n=rr([ir(L(),t),ir(H(),t)]),r=rr([ir(z(),t),ir(W(),(function(n,r){e.mouseIsDown().get()&&t(n,r)}))]);return{behaviours:Rr(Ds?[]:[bu.config({mode:"special",onLeft:function(t){return function(e,t){var n,r,o,i,a=(n=t.value().get(),r=t.min(),o=t.max(),i=t.stepSize(),n<r?n:o<n?o:n===r?r-1:Math.max(r,n-i));As(e,a)}(t,e),A.some(!0)},onRight:function(t){return function(e,t){var n,r,o,i,a=(n=t.value().get(),r=t.min(),o=t.max(),i=t.stepSize(),o<n?n:n<r?r:n===o?o+1:Math.min(o,n+i));As(e,a)}(t,e),A.some(!0)}}),ei.config({})]),events:Ds?n:r}}})],Is=function(e,t,n){t.store().manager().onLoad(e,t,n)},Ls=function(e,t,n){t.store().manager().onUnload(e,t,n)},Hs=Object.freeze({onLoad:Is,onUnload:Ls,setValue:function(e,t,n,r){t.store().manager().setValue(e,t,n,r)},getValue:function(e,t,n){return t.store().manager().getValue(e,t,n)}}),Fs=Object.freeze({events:function(e,t){var n=e.resetOnDom()?[lr((function(n,r){Is(n,e,t)})),fr((function(n,r){Ls(n,e,t)}))]:[yr(e,t,Is)];return rr(n)}}),zs=function(){var e=Zr(null);return Nr({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})},Ws=function(){var e=Zr({});return Nr({readState:function(){return{mode:"dataset",dataset:e.get()}},set:e.set,get:e.get})},Us=Object.freeze({memory:zs,dataset:Ws,manual:function(){return Nr({readState:function(){}})},init:function(e){return e.store().manager().state(e)}}),js=function(e,t,n,r){t.store().getDataKey(),n.set({}),t.store().setData()(e,r),t.onSetValue()(e,r)},Vs=[Kn("initialValue"),qn("getFallbackEntry"),qn("getDataKey"),qn("setData"),Ro("manager",{setValue:js,getValue:function(e,t,n){var r=t.store().getDataKey()(e),o=n.get();return gn(o,r).fold((function(){return t.store().getFallbackEntry()(r)}),(function(e){return e}))},onLoad:function(e,t,n){t.store().initialValue().each((function(r){js(e,t,n,r)}))},onUnload:function(e,t,n){n.set({})},state:Ws})],$s=[qn("getValue"),Qn("setValue",t),Kn("initialValue"),Ro("manager",{setValue:function(e,t,n,r){t.store().setValue()(e,r),t.onSetValue()(e,r)},getValue:function(e,t,n){return t.store().getValue()(e)},onLoad:function(e,t,n){t.store().initialValue().each((function(n){t.store().setValue()(e,n)}))},onUnload:t,state:_r.init})],qs=[er("store",{mode:"memory"},jn("mode",{memory:[Kn("initialValue"),Ro("manager",{setValue:function(e,t,n,r){n.set(r),t.onSetValue()(e,r)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store().initialValue().each((function(e){n.isNotSet()&&n.set(e)}))},onUnload:function(e,t,n){n.clear()},state:zs})],manual:$s,dataset:Vs})),So("onSetValue"),Qn("resetOnDom",!1)],Ys=Ar({fields:qs,name:"representing",active:Fs,apis:Hs,extra:{setValueFrom:function(e,t){var n=Ys.getValue(t);Ys.setValue(e,n)}},state:Us}),Xs=He.detect().deviceType.isTouch(),Gs=[qn("min"),qn("max"),Qn("stepSize",1),Qn("onChange",t),Qn("onInit",t),Qn("onDragStart",t),Qn("onDragEnd",t),Qn("snapToGrid",!1),Kn("snapStart"),qn("getInitialValue"),yu("sliderBehaviours",[bu,Ys]),tr("value",(function(e){return Zr(e.min)}))].concat(Xs?[]:[tr("mouseIsDown",(function(){return Zr(!1)}))]),Ks=li("width",(function(e){return e.dom().offsetWidth})),Js=function(e,t){Ks.set(e,t)},Zs=function(e){return Ks.get(e)},Qs=He.detect().deviceType.isTouch(),ec=gs({name:"Slider",configFields:Gs,partFields:Bs,factory:function(e,t,n,o){var i=e.max()-e.min(),a=function(e){var t=e.element().dom().getBoundingClientRect();return(t.left+t.right)/2},u=function(t){return Ku(t,e,"thumb")},s=function(t){var n=function(t){var n,r,o,u,s=Ku(t,e,"spectrum").element().dom().getBoundingClientRect(),c=t.element().dom().getBoundingClientRect(),l=(n=t,r=s,(u=(o=e).value().get())<o.min()?Gu(n,o,"left-edge").fold((function(){return 0}),(function(e){return a(e)-r.left})):u>o.max()?Gu(n,o,"right-edge").fold((function(){return r.width}),(function(e){return a(e)-r.left})):(o.value().get()-o.min())/i*r.width);return s.left-c.left+l}(t),r=u(t),o=Zs(r.element())/2;ri(r.element(),"left",n-o+"px")},c=function(t,n){var r=e.value().get(),o=u(t);return r!==n||ui(o.element(),"left").isNone()?(e.value().set(n),s(t),e.onChange()(t,o,n),A.some(!0)):A.none()},l=Qs?[ir(L(),(function(t,n){e.onDragStart()(t,u(t))})),ir(F(),(function(t,n){e.onDragEnd()(t,u(t))}))]:[ir(z(),(function(t,n){n.stop(),e.onDragStart()(t,u(t)),e.mouseIsDown().set(!0)})),ir(U(),(function(t,n){e.onDragEnd()(t,u(t)),e.mouseIsDown().set(!1)}))];return{uid:e.uid(),dom:e.dom(),components:t,behaviours:E(Rr(Se([Qs?[]:[bu.config({mode:"special",focusIn:function(t){return Gu(t,e,"spectrum").map(bu.focusIn).map(r(!0))}})],[Ys.config({store:{mode:"manual",getValue:function(t){return e.value().get()}}})]])),xu(e.sliderBehaviours())),events:rr([ir(Rs,(function(e,t){c(e,t.event().value())})),lr((function(t,n){e.value().set(e.getInitialValue()());var r=u(t);s(t),e.onInit()(t,r,e.value().get())}))].concat(l)),apis:{resetToMin:function(t){c(t,e.min())},resetToMax:function(t){c(t,e.max())},refresh:s},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),tc=function(e,t,n){return Cs(t,(function(){var r=n();e.setContextToolbar([{label:t+" group",items:r}])}),{})},nc=function(e,t){var n={onChange:function(e,n,r){t.undoManager.transact((function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()}))},getInitialValue:function(){return-1}};return tc(e,"color",(function(){return function(e){return[(t=e,n=function(e){return e<0?"black":360<e?"white":"hsl("+e+", 100%, 50%)"},ec.sketch({dom:bs('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[ec.parts()["left-edge"](ys('<div class="${prefix}-hue-slider-black"></div>')),ec.parts().spectrum({dom:bs('<div class="${prefix}-slider-gradient-container"></div>'),components:[ys('<div class="${prefix}-slider-gradient"></div>')],behaviours:Rr([Vo.config({toggleClass:Go.resolve("thumb-active")})])}),ec.parts()["right-edge"](ys('<div class="${prefix}-hue-slider-white"></div>')),ec.parts().thumb({dom:bs('<div class="${prefix}-slider-thumb"></div>'),behaviours:Rr([Vo.config({toggleClass:Go.resolve("thumb-active")})])})],onChange:function(e,r,o){var i=n(o);ri(r.element(),"background-color",i),t.onChange(e,r,i)},onDragStart:function(e,t){Vo.on(t)},onDragEnd:function(e,t){Vo.off(t)},onInit:function(e,t,r){var o=n(r);ri(t.element(),"background-color",o)},stepSize:10,min:0,max:360,getInitialValue:t.getInitialValue,sliderBehaviours:Rr([qo(ec.refresh)])}))];var t,n}(n)}))},rc=Rn([qn("getInitialValue"),qn("onChange"),qn("category"),qn("sizes")]),oc=function(e){var t=zn("SizeSlider",rc,e);return ec.sketch({dom:{tag:"div",classes:[Go.resolve("slider-"+t.category+"-size-container"),Go.resolve("slider"),Go.resolve("slider-size-container")]},onChange:function(e,n,r){var o;0<=(o=r)&&o<t.sizes.length&&t.onChange(r)},onDragStart:function(e,t){Vo.on(t)},onDragEnd:function(e,t){Vo.off(t)},min:0,max:t.sizes.length-1,stepSize:1,getInitialValue:t.getInitialValue,snapToGrid:!0,sliderBehaviours:Rr([qo(ec.refresh)]),components:[ec.parts().spectrum({dom:bs('<div class="${prefix}-slider-size-container"></div>'),components:[ys('<div class="${prefix}-slider-size-line"></div>')]}),ec.parts().thumb({dom:bs('<div class="${prefix}-slider-thumb"></div>'),behaviours:Rr([Vo.config({toggleClass:Go.resolve("thumb-active")})])})]})},ic=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],ac=function(e){var t,n,r=e.selection.getStart(),o=ut(r),i=ut(e.getBody()),a=(t=function(e){return Dt(i,e)},(gt(n=o)?A.some(n):It(n).filter(gt)).map((function(e){return to(e,(function(e){return ui(e,"font-size").isSome()}),t).bind((function(e){return ui(e,"font-size")})).getOrThunk((function(){return ii(e,"font-size")}))})).getOr(""));return ke(ic,(function(e){return a===e})).getOr("medium")},uc={candidates:r(ic),get:function(e){var t,n=ac(e);return(t=n,Te(ic,(function(e){return e===t}))).getOr(2)},apply:function(e,t){var n;(n=t,A.from(ic[n])).each((function(t){var n,r;r=t,ac(n=e)!==r&&n.execCommand("fontSize",!1,r)}))}},sc=uc.candidates(),cc=function(e){var t=void 0!==e.uid&&yn(e,"uid")?e.uid:ss("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).fold(A.none,A.some)},asSpec:function(){return E(e,{uid:t})}}},lc=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(a,this),r(u,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){return e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;null!==this._state?n((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(a,this),r(u,this))}this._state=!0,this._value=e,s.call(this)}catch(e){u.call(this,e)}}function u(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];i.call(this,n)}this._deferreds=[]}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){i.call(r,new c(e,n,t,o))}))},t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(1===e.length&&o(e[0])?e[0]:e);return new t((function(e,t){if(0===r.length)return e([]);var n=r.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),t)}r[i]=a,0==--n&&e(r)}catch(e){t(e)}}for(var i=0;i<r.length;i++)o(i,r[i])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=0,o=e;r<o.length;r++)o[r].then(t,n)}))},t}();var fc,dc,mc,hc,gc,pc=function(t,n){var r;(r=n,function(t){return(n=t,new lc((function(t){var r=new e.FileReader;r.onloadend=function(){t(r.result)},r.readAsDataURL(n)}))).then((function(e){return e.split(",")[1]}));var n}(r)).then((function(e){t.undoManager.transact((function(){var r=t.editorUpload.blobCache,o=r.create(Nu("mceu"),n,e);r.add(o);var i=t.dom.createHTML("img",{src:o.blobUri()});t.insertContent(i)}))}))},vc=function(e){return e.dom().textContent},bc=function(e){return 0<e.length},yc=function(e){return null==e?"":e},xc=function(e){var t=ut(e.selection.getStart());return yi(t,"a")},wc=function(e){return xc(e).fold((function(){return{url:"",text:e.selection.getContent({format:"text"}),title:"",target:"",link:A.none()}}),(function(e){return n=vc(t=e),r=Lr(t,"href"),o=Lr(t,"title"),i=Lr(t,"target"),{url:yc(r),text:n!==r?yc(n):"",title:yc(o),target:yc(i),link:A.some(t)};var t,n,r,o,i}))},Cc=function(e,t){t.url.filter(bc).fold((function(){var n;n=e,t.link.bind(o).each((function(e){n.execCommand("unlink")}))}),(function(n){var r,i,a=(r=t,(i={}).href=n,r.title.filter(bc).each((function(e){i.title=e})),r.target.filter(bc).each((function(e){i.target=e})),i);t.link.bind(o).fold((function(){var r=t.text.filter(bc).getOr(n);e.insertContent(e.dom.createHTML("a",a,e.dom.encode(r)))}),(function(e){var r=function(e,t,n){return n.text.filter(bc).fold((function(){return Lr(n=e,"href")===vc(n)?A.some(t):A.none();var n}),A.some)}(e,n,t);Ir(e,a),r.each((function(t){var n;n=t,e.dom().textContent=n}))}))}))},kc=xc,Tc=He.detect(),Sc=function(e,t){var n=t.selection.getRng();e(),t.selection.setRng(n)},Ec=function(e,t){(Tc.os.isAndroid()?Sc:h)(t,e)},_c=function(e,t){var n,o;return{key:e,value:{config:{},me:(n=e,o=rr(t),Ar({fields:[qn("enabled")],name:n,active:{events:r(o)}})),configAsRaw:r({}),initialConfig:{},state:_r}}},Nc=Object.freeze({getCurrent:function(e,t,n){return t.find()(e)}}),Rc=[qn("find")],Oc=Ar({fields:Rc,name:"composing",apis:Nc}),Ac=hs({name:"Container",factory:function(e){return{uid:e.uid(),dom:E({tag:"div",attributes:{role:"presentation"}},e.dom()),components:e.components(),behaviours:xu(e.containerBehaviours()),events:e.events(),domModification:e.domModification(),eventOrder:e.eventOrder()}},configFields:[Qn("components",[]),yu("containerBehaviours",[]),Qn("events",{}),Qn("domModification",{}),Qn("eventOrder",{})]}),Pc=hs({name:"DataField",factory:function(e){return{uid:e.uid(),dom:e.dom(),behaviours:E(Rr([Ys.config({store:{mode:"memory",initialValue:e.getInitialValue()()}}),Oc.config({find:A.some})]),xu(e.dataBehaviours())),events:rr([lr((function(t,n){Ys.setValue(t,e.getInitialValue()())}))])}},configFields:[qn("uid"),qn("dom"),qn("getInitialValue"),yu("dataBehaviours",[Ys,Oc])]}),Dc=function(e){return e.dom().value},Mc=function(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom().value=t},Bc=r([Kn("data"),Qn("inputAttributes",{}),Qn("inputStyles",{}),Qn("type","input"),Qn("tag","input"),Qn("inputClasses",[]),So("onSetValue"),Qn("styles",{}),Kn("placeholder"),Qn("eventOrder",{}),yu("inputBehaviours",[Ys,ei]),Qn("selectOnFocus",!0)]),Ic=function(e){return E(Rr([Ys.config({store:{mode:"manual",initialValue:e.data().getOr(void 0),getValue:function(e){return Dc(e.element())},setValue:function(e,t){Dc(e.element())!==t&&Mc(e.element(),t)}},onSetValue:e.onSetValue()})]),(n=e,Rr([ei.config({onFocus:!1===n.selectOnFocus()?t:function(e){var t=e.element(),n=Dc(t);t.dom().setSelectionRange(0,n.length)}})])),xu(e.inputBehaviours()));var n},Lc=hs({name:"Input",configFields:Bc(),factory:function(e,t){return{uid:e.uid(),dom:(n=e,{tag:n.tag(),attributes:E(vn([{key:"type",value:n.type()}].concat(n.placeholder().map((function(e){return{key:"placeholder",value:e}})).toArray())),n.inputAttributes()),styles:n.inputStyles(),classes:n.inputClasses()}),components:[],behaviours:Ic(e),eventOrder:e.eventOrder()};var n}}),Hc=Object.freeze({exhibit:function(e,t){return vr({attributes:vn([{key:t.tabAttr(),value:"true"}])})}}),Fc=[Qn("tabAttr","data-alloy-tabstop")],zc=Ar({fields:Fc,name:"tabstopping",active:Hc}),Wc=function(e,t){var n=cc(Lc.sketch({placeholder:t,onSetValue:function(e,t){Ze(e,$())},inputBehaviours:Rr([Oc.config({find:A.some}),zc.config({}),bu.config({mode:"execution"})]),selectOnFocus:!1})),r=cc(ps.sketch({dom:bs('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(e){var t=n.get(e);Ys.setValue(t,"")}}));return{name:e,spec:Ac.sketch({dom:bs('<div class="${prefix}-input-container"></div>'),components:[n.asSpec(),r.asSpec()],containerBehaviours:Rr([Vo.config({toggleClass:Go.resolve("input-container-empty")}),Oc.config({find:function(e){return A.some(n.get(e))}}),_c("input-clearing",[ir($(),(function(e){var t=n.get(e);(0<Ys.getValue(t).length?Vo.off:Vo.on)(e)}))])])})}},Uc=["input","button","textarea"],jc=function(e,t,n){t.disabled()&&Gc(e,t)},Vc=function(e){return ve(Uc,mt(e.element()))},$c=function(e){Br(e.element(),"disabled","disabled")},qc=function(e){Fr(e.element(),"disabled")},Yc=function(e){Br(e.element(),"aria-disabled","true")},Xc=function(e){Br(e.element(),"aria-disabled","false")},Gc=function(e,t,n){t.disableClass().each((function(t){$r(e.element(),t)})),(Vc(e)?$c:Yc)(e)},Kc=function(e){return Vc(e)?Hr(e.element(),"disabled"):"true"===Lr(e.element(),"aria-disabled")},Jc=Object.freeze({enable:function(e,t,n){t.disableClass().each((function(t){qr(e.element(),t)})),(Vc(e)?qc:Xc)(e)},disable:Gc,isDisabled:Kc,onLoad:jc}),Zc=Object.freeze({exhibit:function(e,t,n){return vr({classes:t.disabled()?t.disableClass().map(Re).getOr([]):[]})},events:function(e,t){return rr([or(je(),(function(e,t){return Kc(e)})),yr(e,t,jc)])}}),Qc=[Qn("disabled",!1),Kn("disableClass")],el=Ar({fields:Qc,name:"disabling",active:Zc,apis:Jc}),tl=[yu("formBehaviours",[Ys])],nl=function(e){return"<alloy.field."+e+">"},rl=function(e,t,n){return E({"debug.sketcher":{Form:n},uid:e.uid(),dom:e.dom(),components:t,behaviours:E(Rr([Ys.config({store:{mode:"manual",getValue:function(t){var n,o,i=(n=e,o=t.getSystem(),M(n.partUids(),(function(e,t){return r(o.getByUid(e))})));return M(i,(function(e,t){return e().bind(Oc.getCurrent).map(Ys.getValue)}))},setValue:function(t,n){D(n,(function(n,r){Gu(t,e,r).each((function(e){Oc.getCurrent(e).each((function(e){Ys.setValue(e,n)}))}))}))}}})]),xu(e.formBehaviours())),apis:{getField:function(t,n){return Gu(t,e,n).bind(Oc.getCurrent)}}})},ol=(ts((function(e,t,n){return e.getField(t,n)})),function(e){var t,n=(t=[],{field:function(e,n){return t.push(e),"form",r=nl(e),o=n,{uiType:Eu(),owner:"form",name:r,config:o,validated:{}};var r,o},record:function(){return t}}),r=e(n),o=n.record(),i=be(o,(function(e){return Wu({name:e,pname:nl(e)})}));return ls("form",tl,i,rl,r)}),il=function(){var e=Zr(A.none()),t=function(){e.get().each((function(e){e.destroy()}))};return{clear:function(){t(),e.set(A.none())},isSet:function(){return e.get().isSome()},set:function(n){t(),e.set(A.some(n))},run:function(t){e.get().each(t)}}},al=function(){var e=Zr(A.none());return{clear:function(){e.set(A.none())},set:function(t){e.set(A.some(t))},isSet:function(){return e.get().isSome()},on:function(t){e.get().each(t)}}},ul=function(e){var t="navigateEvent",n=On([qn("fields"),Qn("maxFieldIndex",e.fields.length-1),qn("onExecute"),qn("getInitialValue"),tr("state",(function(){return{dialogSwipeState:al(),currentScreen:Zr(0)}}))]),r=zn("SerialisedDialog",n,e),o=function(e,n,r){return ps.sketch({dom:bs('<span class="${prefix}-icon-'+n+' ${prefix}-icon"></span>'),action:function(n){Qe(n,t,{direction:e})},buttonBehaviours:Rr([el.config({disableClass:Go.resolve("toolbar-navigation-disabled"),disabled:!r})])})},i=function(e,t){var n=gi(e.element(),"."+Go.resolve("serialised-dialog-screen"));bi(e.element(),"."+Go.resolve("serialised-dialog-chain")).each((function(e){0<=r.state.currentScreen.get()+t&&r.state.currentScreen.get()+t<n.length&&(ui(e,"left").each((function(r){var o=parseInt(r,10),i=Zs(n[0]);ri(e,"left",o-t*i+"px")})),r.state.currentScreen.set(r.state.currentScreen.get()+t))}))},a=function(e){var t=gi(e.element(),"input");A.from(t[r.state.currentScreen.get()]).each((function(t){e.getSystem().getByDom(t).each((function(t){var n,r;n=e,r=t.element(),n.getSystem().triggerFocus(r,n.element())}))}));var n=s.get(e);zi.highlightAt(n,r.state.currentScreen.get())},u=cc(ol((function(e){return{dom:bs('<div class="${prefix}-serialised-dialog"></div>'),components:[Ac.sketch({dom:bs('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:be(r.fields,(function(t,n){return n<=r.maxFieldIndex?Ac.sketch({dom:bs('<div class="${prefix}-serialised-dialog-screen"></div>'),components:Se([[o(-1,"previous",0<n)],[e.field(t.name,t.spec)],[o(1,"next",n<r.maxFieldIndex)]])}):e.field(t.name,t.spec)}))})],formBehaviours:Rr([qo((function(e,t){var n;n=t,bi(e.element(),"."+Go.resolve("serialised-dialog-chain")).each((function(e){ri(e,"left",-r.state.currentScreen.get()*n.width+"px")}))})),bu.config({mode:"special",focusIn:function(e){a(e)},onTab:function(e){return i(e,1),A.some(!0)},onShiftTab:function(e){return i(e,-1),A.some(!0)}}),_c("form-events",[lr((function(e,t){r.state.currentScreen.set(0),r.state.dialogSwipeState.clear();var n=s.get(e);zi.highlightFirst(n),r.getInitialValue(e).each((function(t){Ys.setValue(e,t)}))})),mr(r.onExecute),ir(X(),(function(e,t){"left"===t.event().raw().propertyName&&a(e)})),ir(t,(function(e,t){var n=t.event().direction();i(e,n)}))])])}}))),s=cc({dom:bs('<div class="${prefix}-dot-container"></div>'),behaviours:Rr([zi.config({highlightClass:Go.resolve("dot-active"),itemClass:Go.resolve("dot-item")})]),components:Ee(r.fields,(function(e,t){return t<=r.maxFieldIndex?[ys('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]}))});return{dom:bs('<div class="${prefix}-serializer-wrapper"></div>'),components:[u.asSpec(),s.asSpec()],behaviours:Rr([bu.config({mode:"special",focusIn:function(e){var t=u.get(e);bu.focusIn(t)}}),_c("serializer-wrapper-events",[ir(L(),(function(e,t){var n=t.event();r.state.dialogSwipeState.set(function(e){return{xValue:e,points:[]}}(n.touches[0].clientX))})),ir(H(),(function(e,t){var n=t.event();r.state.dialogSwipeState.on((function(e){t.event().prevent(),r.state.dialogSwipeState.set(function(e,t){if(t===e.xValue)return e;var n=0<t-e.xValue?1:-1,r={direction:n,xValue:t};return{xValue:t,points:(0===e.points.length?[]:e.points[e.points.length-1].direction===n?e.points.slice(0,e.points.length-1):e.points).concat([r])}}(e,n.raw().touches[0].clientX))}))})),ir(F(),(function(e){r.state.dialogSwipeState.on((function(t){var n=u.get(e),r=-1*function(e){if(0===e.points.length)return 0;var t=e.points[0].direction,n=e.points[e.points.length-1].direction;return-1===t&&-1===n?-1:1===t&&1===n?1:0}(t);i(n,r)}))}))])])}},sl=K((function(e,t){return[{label:"the link group",items:[ul({fields:[Wc("url","Type or paste URL"),Wc("text","Link text"),Wc("title","Link title"),Wc("target","Link target"),("link",{name:"link",spec:Pc.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return A.none()}})})],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return A.some(wc(t))},onExecute:function(n){var r=Ys.getValue(n);Cc(t,r),e.restoreToolbar(),t.focus()}})]}]})),cl=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],ll=rr([(fc=ze(),dc=function(t,n){var r,o,i=n.event().originator(),a=n.event().target();return o=a,!(Dt(r=i,t.element())&&!Dt(r,o)&&(e.console.warn(ze()+" did not get interpreted by the desired target. \nOriginator: "+mo(i)+"\nTarget: "+mo(a)+"\nCheck the "+ze()+" event handlers"),1))},{key:fc,value:nr({can:dc})})]),fl=Object.freeze({events:ll}),dl=o,ml=Er(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn","isConnected"]),hl=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+mo(e().element())+" is not in context.")}};return ml({debugInfo:r("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),isConnected:r(!1)})},gl=function(e,t){var n={};return D(e,(function(e,r){D(e,(function(e,o){var i=hn(o,[])(n);n[o]=i.concat([t(r,e)])}))})),n},pl=function(e,t){return 1<e.length?Jt.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+Cn(be(e,(function(e){return e.name()})))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===e.length?Jt.value({}):Jt.value(e[0].modification().fold((function(){return{}}),(function(e){return pn(t,e)})))},vl=function(e,t){return Ce(e,(function(n,r){var o=r.modification().getOr({});return n.bind((function(n){var r=I(o,(function(r,o){return void 0!==n[o]?(i=t,a=o,u=e,Jt.error("Mulitple behaviours have tried to change the _"+a+'_ "'+i+'". The guilty behaviours are: '+Cn(Ee(u,(function(e){return void 0!==e.modification().getOr({})[a]?[e.name()]:[]})),null,2)+". This is not currently supported.")):Jt.value(pn(o,r));var i,a,u}));return bn(r,n)}))}),Jt.value({})).map((function(e){return pn(t,e)}))},bl={classes:function(e,t){var n=Ee(e,(function(e){return e.modification().getOr([])}));return Jt.value(pn(t,n))},attributes:vl,styles:vl,domChildren:pl,defChildren:pl,innerHtml:pl,value:pl},yl=function(e){return e.cHandler},xl=function(e,t){return{name:r(e),handler:r(t)}},wl=function(e,t,n){var r,o,i=t[n];return i?function(e,t,n,r){var o=n.slice(0);try{var i=o.sort((function(n,o){var i=n[t](),a=o[t](),u=r.indexOf(i),s=r.indexOf(a);if(-1===u)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+Cn(r,null,2));if(-1===s)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+Cn(r,null,2));return u<s?-1:s<u?1:0}));return Jt.value(i)}catch(e){return Jt.error([e])}}("Event: "+n,"name",e,i).map((function(e){return function(e){var t,n,r,o,i=(t=e,n=function(e){return e.can},function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Ce(t,(function(t,r){return t&&n(r).apply(void 0,e)}),!0)}),a=(r=e,o=function(e){return e.abort},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ce(r,(function(t,n){return t||o(n).apply(void 0,e)}),!1)});return nr({can:i,abort:a,run:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ye(e,(function(e){e.run.apply(void 0,t)}))}})}(be(e,(function(e){return e.handler()})))})):(r=n,o=e,Jt.error(["The event ("+r+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+Cn(be(o,(function(e){return e.name()})),null,2)]))},Cl=function(e,t){var n=I(e,(function(e,n){return(1===e.length?Jt.value(e[0].handler()):wl(e,t,n)).map((function(o){var i=function(e){var t,n=C(t=e)?{can:r(!0),abort:r(!1),run:t}:t;return function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=[e,t].concat(r);n.abort.apply(void 0,i)?t.stop():n.can.apply(void 0,i)&&n.run.apply(void 0,i)}}(o),a=1<e.length?xe(t,(function(t){return ve(e,(function(e){return e.name()===t}))})).join(" > "):e[0].name();return pn(n,{handler:i,purpose:r(a)})}))}));return bn(n,{})},kl=function(e,t){ye(t,(function(t){$r(e,t)}))},Tl=function(e,t){ye(t,(function(t){qr(e,t)}))},Sl=function(e){if(e.domChildren().isSome()&&e.defChildren().isSome())throw new Error("Cannot specify children and child specs! Must be one or the other.\nDef: "+(t=function(e){return{tag:e.tag(),classes:e.classes().getOr([]),attributes:e.attributes().getOr({}),styles:e.styles().getOr({}),value:e.value().getOr("<none>"),innerHtml:e.innerHtml().getOr("<none>"),defChildren:e.defChildren().fold((function(){return"<none>"}),(function(e){return Cn(e,null,2)})),domChildren:e.domChildren().fold((function(){return"<none>"}),(function(e){return 0===e.length?"0 children, but still specified":String(e.length)}))}}(e),Cn(t,null,2)));return e.domChildren().fold((function(){var t=e.defChildren().getOr([]);return be(t,_l)}),(function(e){return e}));var t},El=function(t){var n=it(t.tag());Ir(n,t.attributes().getOr({})),kl(n,t.classes().getOr([])),oi(n,t.styles().getOr({})),function(t,n){var r,o,i=Mt(t).dom(),a=ut(i.createDocumentFragment()),u=(r=n,(o=(i||e.document).createElement("div")).innerHTML=r,Lt(ut(o)));zt(a,u),Wt(t),Ft(t,a)}(n,t.innerHtml().getOr(""));var r=Sl(t);return zt(n,r),t.value().each((function(e){Mc(n,e)})),n},_l=function(e){var t=pr(e);return El(t)},Nl=function(e){var t,n;return function(e,t){return n=e,o=be(r=t,(function(e){return Jn(e.name(),[qn("config"),Qn("state",_r)])})),i=Hn("component.behaviours",On(o),n.behaviours).fold((function(e){throw new Error(Un(e)+"\nComplete spec:\n"+Cn(n,null,2))}),(function(e){return e})),{list:r,data:M(i,(function(e){var t=e().map((function(e){return{config:e.config(),state:e.state().init(e.config())}}));return function(){return t}}))};var n,r,o,i}(e,(t=gn(e,"behaviours").getOr({}),n=xe(P(t),(function(e){return void 0!==t[e]})),be(n,(function(e){return t[e].me}))))},Rl=Er(["getSystem","config","hasConfigured","spec","connect","disconnect","element","syncComponents","readState","components","events"]),Ol=function(e,t,n){var r,o,i,a,u=function(e){var t,n={tag:e.dom().tag(),classes:e.dom().classes(),attributes:E((t=e,pn(os(),t.uid())),e.dom().attributes()),styles:e.dom().styles(),domChildren:be(e.components(),(function(e){return e.element()}))};return pr(E(n,e.dom().innerHtml().map((function(e){return pn("innerHtml",e)})).getOr({}),e.dom().value().map((function(e){return pn("value",e)})).getOr({})))}(e);return i=function(e,t,n,r){var o=E({},t);ye(n,(function(t){o[t.name()]=t.exhibit(e,r)}));var i=gl(o,(function(e,t){return{name:function(){return e},modification:t}})),a=M(i,(function(e,t){return Ee(e,(function(e){return e.modification().fold((function(){return[]}),(function(t){return[e]}))}))})),u=I(a,(function(e,t){return gn(bl,t).fold((function(){return Jt.error("Unknown field type: "+t)}),(function(n){return n(e,t)}))}));return bn(u,{}).map(vr)}(n,{"alloy.base.modification":(r=e,r.domModification().fold((function(){return vr({})}),vr))},t,u).getOrDie(),a=E({tag:(o=u).tag(),classes:i.classes().getOr([]).concat(o.classes().getOr([])),attributes:_(o.attributes().getOr({}),i.attributes().getOr({})),styles:_(o.styles().getOr({}),i.styles().getOr({}))},i.innerHtml().or(o.innerHtml()).map((function(e){return pn("innerHtml",e)})).getOr({}),br("domChildren",i.domChildren(),o.domChildren()),br("defChildren",i.defChildren(),o.defChildren()),i.value().or(o.value()).map((function(e){return pn("value",e)})).getOr({})),pr(a)},Al=function(e,t,n){var r,o,i,a,u,s,c={"alloy.base.behaviour":(r=e,r.events())};return(o=n,i=e.eventOrder(),a=t,u=c,s=function(e,t,n){var r,o,i=E(n,(r=e,o={},ye(t,(function(e){o[e.name()]=e.handlers(r)})),o));return gl(i,xl)}(o,a,u),Cl(s,i)).getOrDie()},Pl=function(e){var t,n,o,i,a,u,s,c,l,f,d,m,h,g,p=dl(e),v=(t=p,n=hn("components",[])(t),be(n,Bl)),y=E(fl,p,pn("components",v));return Jt.value((o=y,a=Zr(hl(i=function(){return g})),u=Fn(function(e){return Hn("custom.definition",Rn([Mn("dom","dom",tn(),Rn([qn("tag"),Qn("styles",{}),Qn("classes",[]),Qn("attributes",{}),Kn("value"),Kn("innerHtml")])),qn("components"),qn("uid"),Qn("events",{}),Qn("apis",r({})),Mn("eventOrder","eventOrder",(t={"alloy.execute":["disabling","alloy.base.behaviour","toggling"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"]},Qt.mergeWithThunk(r(t))),Vn()),Kn("domModification"),Oo("originalSpec"),Qn("debug.sketcher","unknown")]),e);var t}(E(o,{behaviours:void 0}))),c=(s=Nl(o)).list,l=s.data,f=Ol(u,c,l),d=El(f),m=Al(u,c,l),h=Zr(u.components()),g=Rl({getSystem:a.get,config:function(e){if(e===ns())return u.apis();if(b(e))throw new Error("Invalid input: only API constant is allowed");var t=l;return(C(t[e.name()])?t[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+Cn(o,null,2))})()},hasConfigured:function(e){return C(l[e.name()])},spec:r(o),readState:function(e){return l[e]().map((function(e){return e.state.readState()})).getOr("not enabled")},connect:function(e){a.set(e)},disconnect:function(){a.set(hl(i))},element:r(d),syncComponents:function(){var e=Lt(d),t=Ee(e,(function(e){return a.get().getByDom(e).fold((function(){return[]}),(function(e){return[e]}))}));h.set(t)},components:h.get,events:r(m)})))},Dl=function(e){var t=at(e);return Ml({element:t})},Ml=function(e){var n=Wn("external.component",Rn([qn("element"),Kn("uid")]),e),o=Zr(hl());n.uid().each((function(e){var t;t=n.element(),Br(t,as,e)}));var i=Rl({getSystem:o.get,config:A.none,hasConfigured:r(!1),connect:function(e){o.set(e)},disconnect:function(){o.set(hl((function(){return i})))},element:r(n.element()),spec:r(e),readState:r("No state"),syncComponents:t,components:r([]),events:r({})});return es(i)},Bl=function(e){return(t=e,gn(t,Zu)).fold((function(){var t=E({uid:ss("")},e);return Pl(t).getOrDie()}),(function(e){return e}));var t},Il=es,Ll="alloy.item-hover",Hl="alloy.item-focus",Fl=function(e){(io(e.element()).isNone()||ei.isFocused(e))&&(ei.isFocused(e)||ei.focus(e),Qe(e,Ll,{item:e}))},zl=function(e){Qe(e,Hl,{item:e})},Wl=r(Ll),Ul=r(Hl),jl=[qn("data"),qn("components"),qn("dom"),Kn("toggling"),Qn("itemBehaviours",{}),Qn("ignoreFocus",!1),Qn("domModification",{}),Ro("builder",(function(e){return{dom:E(e.dom(),{attributes:{role:e.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:E(Rr([e.toggling().fold(Vo.revoke,(function(e){return Vo.config(E({aria:{mode:"checked"}},e))})),ei.config({ignore:e.ignoreFocus(),onFocus:function(e){zl(e)}}),bu.config({mode:"execution"}),Ys.config({store:{mode:"memory",initialValue:e.data()}})]),e.itemBehaviours()),events:rr([(t=qe(),n=et,ir(t,(function(e,t){var r=t.event();e.getSystem().getByDom(r.target()).each((function(r){n(e,r,t)}))}))),cr(z()),ir(j(),Fl),ir(Ve(),ei.focus)]),components:e.components(),domModification:e.domModification(),eventOrder:e.eventOrder()};var t,n})),Qn("eventOrder",{})],Vl=[qn("dom"),qn("components"),Ro("builder",(function(e){return{dom:e.dom(),components:e.components(),events:rr([(t=Ve(),ir(t,(function(e,t){t.stop()})))])};var t}))],$l=r([Wu({name:"widget",overrides:function(e){return{behaviours:Rr([Ys.config({store:{mode:"manual",getValue:function(t){return e.data()},setValue:function(){}}})])}}})]),ql=jn("type",{widget:[qn("uid"),qn("data"),qn("components"),qn("dom"),Qn("autofocus",!1),Qn("domModification",{}),Ju($l()),Ro("builder",(function(e){var t=Yu(0,e,$l()),n=Xu("item-widget",e,t.internals()),r=function(t){return Gu(t,e,"widget").map((function(e){return bu.focusIn(e),e}))},o=function(t,n){return qi(n.event().target())||e.autofocus()&&n.setSource(t.element()),A.none()};return E({dom:e.dom(),components:n,domModification:e.domModification(),events:rr([mr((function(e,t){r(e).each((function(e){t.stop()}))})),ir(j(),Fl),ir(Ve(),(function(t,n){e.autofocus()?r(t):ei.focus(t)}))]),behaviours:Rr([Ys.config({store:{mode:"memory",initialValue:e.data()}}),ei.config({onFocus:function(e){zl(e)}}),bu.config({mode:"special",focusIn:e.autofocus()?function(e){r(e)}:Dr(),onLeft:o,onRight:o,onEscape:function(t,n){return ei.isFocused(t)||e.autofocus()?(e.autofocus()&&n.setSource(t.element()),A.none()):(ei.focus(t),A.some(!0))}})])})}))],item:jl,separator:Vl}),Yl=r([ju({factory:{sketch:function(e){var t=Wn("menu.spec item",ql,e);return t.builder()(t)}},name:"items",unit:"item",defaults:function(e,t){var n=ss("");return E({uid:n},t)},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus(),domModification:{classes:[e.markers().item()]}}}})]),Xl=r([qn("value"),qn("items"),qn("dom"),qn("components"),Qn("eventOrder",{}),yu("menuBehaviours",[zi,Ys,Oc,bu]),er("movement",{mode:"menu",moveOnTab:!0},jn("mode",{grid:[Ao(),Ro("config",(function(e,t){return{mode:"flatgrid",selector:"."+e.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:e.focusManager()}}))],menu:[Qn("moveOnTab",!0),Ro("config",(function(e,t){return{mode:"menu",selector:"."+e.markers().item(),moveOnTab:t.moveOnTab(),focusManager:e.focusManager()}}))]})),Yn("markers",Co()),Qn("fakeFocus",!1),Qn("focusManager",Wi()),So("onHighlight")]),Gl=r("alloy.menu-focus"),Kl=gs({name:"Menu",configFields:Xl(),partFields:Yl(),factory:function(e,t,n,r){return E({dom:E(e.dom(),{attributes:{role:"menu"}}),uid:e.uid(),behaviours:E(Rr([zi.config({highlightClass:e.markers().selectedItem(),itemClass:e.markers().item(),onHighlight:e.onHighlight()}),Ys.config({store:{mode:"memory",initialValue:e.value()}}),Oc.config({find:A.some}),bu.config(e.movement().config()(e,e.movement()))]),xu(e.menuBehaviours())),events:rr([ir(Ul(),(function(e,t){var n=t.event();e.getSystem().getByDom(n.target()).each((function(n){zi.highlight(e,n),t.stop(),Qe(e,Gl(),{menu:e,item:n})}))})),ir(Wl(),(function(e,t){var n=t.event().item();zi.highlight(e,n)}))]),components:t,eventOrder:e.eventOrder()})}}),Jl=function(e,t,n,r){var o=e.getSystem().build(r);qt(e,o,n)},Zl=function(e,t){return e.components()},Ql=Ar({fields:[],name:"replacing",apis:Object.freeze({append:function(e,t,n,r){Jl(e,0,Ft,r)},prepend:function(e,t,n,r){Jl(e,0,Ht,r)},remove:function(e,t,n,r){var o=Zl(e);ke(o,(function(e){return Dt(r.element(),e.element())})).each(Xt)},set:function(e,n,r,o){var i,a;a=(i=e).components(),ye(a,Yt),Wt(i.element()),i.syncComponents(),function(e,n){var r=Mt(n),o=oo(r).bind((function(e){var t,r,o=function(t){return Dt(e,t)};return o(n)?A.some(n):(t=o,(r=function(e){for(var n=0;n<e.childNodes.length;n++){var o=ut(e.childNodes[n]);if(t(o))return A.some(o);var i=r(e.childNodes[n]);if(i.isSome())return i}return A.none()})(n.dom()))})),i=e(n);o.each((function(e){oo(r).filter((function(t){return Dt(t,e)})).fold((function(){no(e)}),t)}))}((function(){var t=be(o,e.getSystem().build);ye(t,(function(t){$t(e,t)}))}),e.element())},contents:Zl})}),ef=function(e,t,n,r){return gn(n,r).bind((function(r){return gn(e,r).bind((function(r){var o=ef(e,t,n,r);return A.some([r].concat(o))}))})).getOr([])},tf=function(){var e=Zr({}),t=Zr({}),n=Zr({}),r=Zr(A.none()),o=Zr({}),i=function(e){return gn(t.get(),e)};return{setContents:function(i,a,u,s){r.set(A.some(i)),e.set(u),t.set(a),o.set(s);var c=function(e,t){var n={};D(e,(function(e,t){ye(e,(function(e){n[e]=t}))}));var r=t,o=B(t,(function(e,t){return{k:e,v:t}})),i=M(o,(function(e,t){return[t].concat(ef(n,r,o,t))}));return M(n,(function(e){return gn(i,e).getOr([e])}))}(s,u);n.set(c)},expand:function(t){return gn(e.get(),t).map((function(e){var r=gn(n.get(),t).getOr([]);return[e].concat(r)}))},refresh:function(e){return gn(n.get(),e)},collapse:function(e){return gn(n.get(),e).bind((function(e){return 1<e.length?A.some(e.slice(1)):A.none()}))},lookupMenu:i,otherMenus:function(e){var t,n,r=o.get();return t=P(r),n=e,xe(t,(function(e){return!ve(n,e)}))},getPrimary:function(){return r.get().bind(i)},getMenus:function(){return t.get()},clear:function(){e.set({}),t.set({}),n.set({}),r.set(A.none())},isClear:function(){return r.get().isNone()}}},nf=r("collapse-item"),rf=hs({name:"TieredMenu",configFields:[No("onExecute"),No("onEscape"),_o("onOpenMenu"),_o("onOpenSubmenu"),So("onCollapseMenu"),Qn("openImmediately",!0),Gn("data",[qn("primary"),qn("menus"),qn("expansions")]),Qn("fakeFocus",!1),So("onHighlight"),So("onHover"),Gn("markers",[qn("backgroundMenu")].concat(xo()).concat(wo())),qn("dom"),Qn("navigateOnHover",!0),Qn("stayInDom",!1),yu("tmenuBehaviours",[bu,zi,Oc,Ql]),Qn("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)}},factory:function(e,n){var r=function(r,o){return M(o,(function(o,i){var a=Kl.sketch(E(o,{value:i,items:o.items,markers:dn(n.markers,["item","selectedItem"]),fakeFocus:e.fakeFocus(),onHighlight:e.onHighlight(),focusManager:e.fakeFocus()?{get:function(e){return zi.getHighlighted(e).map((function(e){return e.element()}))},set:function(e,n){e.getSystem().getByDom(n).fold(t,(function(t){zi.highlight(e,t)}))}}:Wi()}));return r.getSystem().build(a)}))},o=tf(),i=function(e){return Ys.getValue(e).value},a=function(e,t){zi.highlight(e,t),zi.getHighlighted(t).orThunk((function(){return zi.getFirst(t)})).each((function(t){tt(e,t.element(),Ve())}))},u=function(e,t){return go(be(t,e.lookupMenu))},s=function(t,n,r){return A.from(r[0]).bind(n.lookupMenu).map((function(o){var i=u(n,r.slice(1));ye(i,(function(t){$r(t.element(),e.markers().backgroundMenu())})),vt(o.element())||Ql.append(t,Il(o)),Tl(o.element(),[e.markers().backgroundMenu()]),a(t,o);var s=u(n,n.otherMenus(r));return ye(s,(function(n){Tl(n.element(),[e.markers().backgroundMenu()]),e.stayInDom()||Ql.remove(t,n)})),o}))},c=function(t,n){var r=i(n);return o.expand(r).bind((function(r){return A.from(r[0]).bind(o.lookupMenu).each((function(r){vt(r.element())||Ql.append(t,Il(r)),e.onOpenSubmenu()(t,n,r),zi.highlightFirst(r)})),s(t,o,r)}))},l=function(t,n){var r=i(n);return o.collapse(r).bind((function(r){return s(t,o,r).map((function(r){return e.onCollapseMenu()(t,n,r),r}))}))},f=function(t){return function(n,r){return yi(r.getSource(),"."+e.markers().item()).bind((function(e){return n.getSystem().getByDom(e).toOption().bind((function(e){return t(n,e).map((function(){return!0}))}))}))}},d=rr([ir(Gl(),(function(e,t){var n=t.event().menu();zi.highlight(e,n)})),mr((function(t,n){var r=n.event().target();t.getSystem().getByDom(r).each((function(n){0===i(n).indexOf("collapse-item")&&l(t,n),c(t,n).fold((function(){e.onExecute()(t,n)}),(function(){}))}))})),lr((function(t,n){var i,u,s;(i=t,u=r(i,e.data().menus()),s=M(e.data().menus(),(function(e,t){return Ee(e.items,(function(e){return"separator"===e.type?[]:[e.data.value]}))})),o.setContents(e.data().primary(),u,e.data().expansions(),s),o.getPrimary()).each((function(n){Ql.append(t,Il(n)),e.openImmediately()&&(a(t,n),e.onOpenMenu()(t,n))}))}))].concat(e.navigateOnHover()?[ir(Wl(),(function(t,n){var r,a,u=n.event().item();r=t,a=i(u),o.refresh(a).bind((function(e){return s(r,o,e)})),c(t,u),e.onHover()(t,u)}))]:[]));return{uid:e.uid(),dom:e.dom(),behaviours:E(Rr([bu.config({mode:"special",onRight:f((function(e,t){return qi(t.element())?A.none():c(e,t)})),onLeft:f((function(e,t){return qi(t.element())?A.none():l(e,t)})),onEscape:f((function(t,n){return l(t,n).orThunk((function(){return e.onEscape()(t,n).map((function(){return t}))}))})),focusIn:function(e,t){o.getPrimary().each((function(t){tt(e,t.element(),Ve())}))}}),zi.config({highlightClass:e.markers().selectedMenu(),itemClass:e.markers().menu()}),Oc.config({find:function(e){return zi.getHighlighted(e)}}),Ql.config({})]),xu(e.tmenuBehaviours())),eventOrder:e.eventOrder(),apis:{collapseMenu:function(e){zi.getHighlighted(e).each((function(t){zi.getHighlighted(t).each((function(t){l(e,t)}))}))}},events:d}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:pn(e,t),expansions:{}}},collapseItem:function(e){return{value:Nu(nf()),text:e}}}}),of=function(e,t,n,r){return gn(t.routes(),r.start()).map(h).bind((function(e){return gn(e,r.destination()).map(h)}))},af=function(e,t,n,o){return of(0,t,0,o).bind((function(e){return e.transition().map((function(t){return{transition:r(t),route:r(e)}}))}))},uf=function(e,t,n){var r,o;(r=e,o=t,n,sf(r,o).bind((function(e){return af(0,o,0,e)}))).each((function(n){var r=n.transition();qr(e.element(),r.transitionClass()),Fr(e.element(),t.destinationAttr())}))},sf=function(e,t,n){var o=e.element();return Hr(o,t.destinationAttr())?A.some({start:r(Lr(e.element(),t.stateAttr())),destination:r(Lr(e.element(),t.destinationAttr()))}):A.none()},cf=function(e,t,n,r){uf(e,t,n),Hr(e.element(),t.stateAttr())&&Lr(e.element(),t.stateAttr())!==r&&t.onFinish()(e,r),Br(e.element(),t.stateAttr(),r)},lf=Object.freeze({findRoute:of,disableTransition:uf,getCurrentRoute:sf,jumpTo:cf,progressTo:function(e,t,n,o){var i,a;a=t,Hr((i=e).element(),a.destinationAttr())&&(Br(i.element(),a.stateAttr(),Lr(i.element(),a.destinationAttr())),Fr(i.element(),a.destinationAttr()));var u,s,c=(u=t,s=o,{start:r(Lr(e.element(),u.stateAttr())),destination:r(s)});af(0,t,0,c).fold((function(){cf(e,t,n,o)}),(function(r){uf(e,t,n);var i=r.transition();$r(e.element(),i.transitionClass()),Br(e.element(),t.destinationAttr(),o)}))},getState:function(e,t,n){var r=e.element();return Hr(r,t.stateAttr())?A.some(Lr(r,t.stateAttr())):A.none()}}),ff=Object.freeze({events:function(e,t){return rr([ir(X(),(function(n,r){var o=r.event().raw();sf(n,e).each((function(r){of(0,e,0,r).each((function(i){i.transition().each((function(i){o.propertyName===i.property()&&(cf(n,e,t,r.destination()),e.onTransition()(n,r))}))}))}))})),lr((function(n,r){cf(n,e,t,e.initialState())}))])}}),df=[Qn("destinationAttr","data-transitioning-destination"),Qn("stateAttr","data-transitioning-state"),qn("initialState"),So("onTransition"),So("onFinish"),Yn("routes",An(Jt.value,An(Jt.value,Rn([Zn("transition",[qn("property"),qn("transitionClass")])]))))],mf=Ar({fields:df,name:"transitioning",active:ff,apis:lf,extra:{createRoutes:function(e){var t={};return D(e,(function(e,n){var r=n.split("<->");t[r[0]]=pn(r[1],e),t[r[1]]=pn(r[0],e)})),t},createBistate:function(e,t,n){return vn([{key:e,value:pn(t,n)},{key:t,value:pn(e,n)}])},createTristate:function(e,t,n,r){return vn([{key:e,value:vn([{key:t,value:r},{key:n,value:r}])},{key:t,value:vn([{key:e,value:r},{key:n,value:r}])},{key:n,value:vn([{key:e,value:r},{key:t,value:r}])}])}}}),hf=Go.resolve("scrollable"),gf={register:function(e){$r(e,hf)},deregister:function(e){qr(e,hf)},scrollable:r(hf)},pf=function(e){return gn(e,"format").getOr(e.title)},vf=function(e,t,n,r,o){return{data:{value:e,text:t},type:"item",dom:{tag:"div",classes:o?[Go.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Go.resolve("format-matches"),selected:n},itemBehaviours:Rr(o?[]:[$o(e,(function(e,t){(t?Vo.on:Vo.off)(e)}))]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},bf=function(e,t,n,r){return{value:e,dom:{tag:"div"},components:[ps.sketch({dom:{tag:"div",classes:[Go.resolve("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[Go.resolve("styles-collapse-icon")]}},Dl(e)]:[Dl(e)],action:function(e){if(r){var t=n().get(e);rf.collapseMenu(t)}}}),{dom:{tag:"div",classes:[Go.resolve("styles-menu-items-container")]},components:[Kl.parts().items({})],behaviours:Rr([_c("adhoc-scrollable-menu",[lr((function(e,t){ri(e.element(),"overflow-y","auto"),ri(e.element(),"-webkit-overflow-scrolling","touch"),gf.register(e.element())})),fr((function(e){si(e.element(),"overflow-y"),si(e.element(),"-webkit-overflow-scrolling"),gf.deregister(e.element())}))])])}],items:t,menuBehaviours:Rr([mf.config({initialState:"after",routes:mf.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},yf=function(e){return yn(e,"items")?(n=E(function(e,t){return n=t,r={},D(e,(function(e,t){ve(n,t)||(r[t]=e)})),r;var n,r}(t=e,["items"]),{menu:!0}),r=xf(t.items),{item:n,menus:E(r.menus,pn(t.title,r.items)),expansions:E(r.expansions,pn(t.title,t.title))}):{item:e,menus:{},expansions:{}};var t,n,r},xf=function(e){return we(e,(function(e,t){var n=yf(t);return{menus:E(e.menus,n.menus),items:[n.item].concat(e.items),expansions:E(e.expansions,n.expansions)}}),{menus:{},expansions:{},items:[]})},wf={expand:xf},Cf=function(e,t,n){var r,o,i;return function(e){var t,n,r,o,i,a=(t=e.formats,n=function(){return u},r=bf("Styles",[].concat(be(t.items,(function(e){return vf(pf(e),e.title,e.isSelected(),e.getPreview(),yn(t.expansions,pf(e)))}))),n,!1),o=M(t.menus,(function(e,r){var o=be(e,(function(e){return vf(pf(e),e.title,void 0!==e.isSelected&&e.isSelected(),void 0!==e.getPreview?e.getPreview():"",yn(t.expansions,pf(e)))}));return bf(r,o,n,!0)})),i=E(o,pn("styles",r)),{tmenu:rf.tieredData("styles",i,t.expansions)}),u=cc(rf.sketch({dom:{tag:"div",classes:[Go.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,n){var r=Ys.getValue(n);return e.handle(n,r.value),A.none()},onEscape:function(){return A.none()},onOpenMenu:function(e,t){var n=Zs(e.element());Js(t.element(),n),mf.jumpTo(t,"current")},onOpenSubmenu:function(e,t,n){var r=Zs(e.element()),o=vi(t.element(),'[role="menu"]').getOrDie("hacky"),i=e.getSystem().getByDom(o).getOrDie();Js(n.element(),r),mf.progressTo(i,"before"),mf.jumpTo(n,"after"),mf.progressTo(n,"current")},onCollapseMenu:function(e,t,n){var r=vi(t.element(),'[role="menu"]').getOrDie("hacky"),o=e.getSystem().getByDom(r).getOrDie();mf.progressTo(o,"after"),mf.progressTo(n,"current")},navigateOnHover:!1,openImmediately:!0,data:a.tmenu,markers:{backgroundMenu:Go.resolve("styles-background-menu"),menu:Go.resolve("styles-menu"),selectedMenu:Go.resolve("styles-selected-menu"),item:Go.resolve("styles-item"),selectedItem:Go.resolve("styles-selected-item")}}));return u.asSpec()}({formats:(r=e,i=(o=function(e){return Ee(e,(function(e){return void 0!==e.items?0<o(e.items).length?[e]:[]:!yn(e,"format")||r.formatter.canApply(e.format)?[e]:[]}))})(t),wf.expand(i)),handle:function(t,r){e.undoManager.transact((function(){Vo.isOn(t)?e.formatter.remove(r):e.formatter.apply(r)})),n()}})},kf=["undo","bold","italic","link","image","bullist","styleselect"],Tf=function(e){var t=e.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]},Sf=function(e){return Ee(e,(function(e){return x(e)?Sf(e):Tf(e)}))},Ef=function(e,t){var n=function(e){return function(){return ks(t,e)}},o=function(e){return function(){return Ss(t,e)}},i=function(e,n,r){return function(){return Ts(t,e,n,r)}},a=n("undo"),u=n("redo"),s=o("bold"),c=o("italic"),l=o("underline"),f=n("removeformat"),d=i("unlink","link",(function(){t.execCommand("unlink",null,!1)})),m=i("unordered-list","ul",(function(){t.execCommand("InsertUnorderedList",null,!1)})),h=i("ordered-list","ol",(function(){t.execCommand("InsertOrderedList",null,!1)})),g=function(e,t){var n=function(t){return function(){return e.formatter.match(t)}},o=function(t){return function(){return e.formatter.getCssText(t)}},i=gn(t,"style_formats").getOr(cl),a=function(t){return be(t,(function(t){if(yn(t,"items")){var i=a(t.items);return E(E(t,{isSelected:r(!1),getPreview:r("")}),{items:i})}return yn(t,"format")?E(l=t,{isSelected:n(l.format),getPreview:o(l.format)}):(s=Nu((u=t).title),c=E(u,{format:s,isSelected:n(s),getPreview:o(s)}),e.formatter.register(s,c),c);var u,s,c,l}))};return a(i)}(t,t.settings),p=function(){return Cf(t,g,(function(){t.fire("scrollIntoView")}))},v=function(e,n){return{isSupported:function(){return e.forall((function(e){return yn(t.buttons,e)}))},sketch:n}};return{undo:v(A.none(),a),redo:v(A.none(),u),bold:v(A.none(),s),italic:v(A.none(),c),underline:v(A.none(),l),removeformat:v(A.none(),f),link:v(A.none(),(function(){return n=e,Ts(r=t,"link","link",(function(){var e=sl(n,r);n.setContextToolbar(e),Ec(r,(function(){n.focusToolbar()})),kc(r).each((function(e){r.selection.select(e.dom())}))}));var n,r})),unlink:v(A.none(),d),image:v(A.none(),(function(){return function(e){var t=cc({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:rr([cr(Y()),ir(q(),(function(t,n){var r,o,i;(r=n,o=r.event(),i=o.raw().target.files||o.raw().dataTransfer.files,A.from(i[0])).each((function(t){pc(e,t)}))}))])});return ps.sketch({dom:bs('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[t.asSpec()],action:function(e){t.get(e).element().dom().click()}})}(t)})),bullist:v(A.some("bullist"),m),numlist:v(A.some("numlist"),h),fontsizeselect:v(A.none(),(function(){return n=t,r={onChange:function(e){uc.apply(n,e)},getInitialValue:function(){return uc.get(n)}},tc(e,"font-size",(function(){return function(e){return[ys('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(t=e,oc({onChange:t.onChange,sizes:sc,category:"font",getInitialValue:t.getInitialValue})),ys('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')];var t}(r)}));var n,r})),forecolor:v(A.none(),(function(){return nc(e,t)})),styleselect:v(A.none(),(function(){return Cs("style-formats",(function(n){t.fire("toReading"),e.dropup().appear(p,Vo.on,n)}),Rr([Vo.config({toggleClass:Go.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Do.config({channels:vn([Yo(co.orientationChanged(),Vo.off),Yo(co.dropupDismissed(),Vo.off)])})]))}))}},_f=function(e,t){var n=function(e){var t=void 0!==e.toolbar?e.toolbar:kf;return x(t)?Sf(t):Tf(t)}(e),r={};return Ee(n,(function(e){var n=!yn(r,e)&&yn(t,e)&&t[e].isSupported()?[t[e].sketch()]:[];return r[e]=!0,n}))},Nf=function(e,t,o,a,u){var s=function(e,t){return function(o){if(e(o)){var i,a,u,s,c,l,f,d=ut(o.target),m=function(){o.stopPropagation()},h=function(){o.preventDefault()},g=n(h,m),p=(i=d,a=o.clientX,u=o.clientY,s=m,c=h,l=g,f=o,{target:r(i),x:r(a),y:r(u),stop:s,prevent:c,kill:l,raw:r(f)});t(p)}}}(o,a);return e.dom().addEventListener(t,s,u),{unbind:i(Rf,e,t,s,u)}},Rf=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},Of=r(!0),Af=function(e,t,n){return Nf(e,t,Of,n,!1)},Pf=function(e,t,n){return Nf(e,t,Of,n,!0)},Df=function(e){var t=e.matchMedia("(orientation: portrait)").matches;return{isPortrait:r(t)}},Mf=Df,Bf=function(e,t){var n=ut(e),r=null,o=Af(n,"orientationchange",(function(){clearInterval(r);var n=Df(e);t.onChange(n),i((function(){t.onReady(n)}))})),i=function(t){clearInterval(r);var n=e.innerHeight,o=0;r=setInterval((function(){n!==e.innerHeight?(clearInterval(r),t(A.some(e.innerHeight))):20<o&&(clearInterval(r),t(A.none())),o++}),50)};return{onAdjustment:i,destroy:function(){o.unbind()}}},If=function(e){var t=He.detect().os.isiOS(),n=Df(e).isPortrait();return t&&!n?e.screen.height:e.screen.width},Lf=function(e){var t=e.raw();return void 0===t.touches||1!==t.touches.length?A.none():A.some(t.touches[0])},Hf=function(t){var n,o,i=Zr(A.none()),a=(n=function(e){i.set(A.none()),t.triggerEvent(Ye(),e)},400,o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},schedule:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o=e.setTimeout((function(){n.apply(null,t),o=null}),400)}}),u=vn([{key:L(),value:function(e){return Lf(e).each((function(t){a.cancel();var n={x:r(t.clientX),y:r(t.clientY),target:e.target};a.schedule(e),i.set(A.some(n))})),A.none()}},{key:H(),value:function(e){return a.cancel(),Lf(e).each((function(e){i.get().each((function(t){var n,r,o,a;n=e,r=t,o=Math.abs(n.clientX-r.x()),a=Math.abs(n.clientY-r.y()),(5<o||5<a)&&i.set(A.none())}))})),A.none()}},{key:F(),value:function(e){return a.cancel(),i.get().filter((function(t){return Dt(t.target(),e.target())})).map((function(n){return t.triggerEvent($e(),e)}))}}]);return{fireIfReady:function(e,t){return gn(u,t).bind((function(t){return t(e)}))}}},Ff=function(e){var t=Hf({triggerEvent:function(t,n){e.onTapContent(n)}});return{fireTouchstart:function(e){t.fireIfReady(e,"touchstart")},onTouchend:function(){return Af(e.body(),"touchend",(function(e){t.fireIfReady(e,"touchend")}))},onTouchmove:function(){return Af(e.body(),"touchmove",(function(e){t.fireIfReady(e,"touchmove")}))}}},zf=6<=He.detect().os.version.major,Wf=function(e,t){var n=parseInt(Lr(e,t),10);return isNaN(n)?0:n},Uf=(mc=pt,"text",{get:function(e){if(!mc(e))throw new Error("Can only get text value of a text node");return hc(e).getOr("")},getOption:hc=function(e){return mc(e)?A.from(e.dom().nodeValue):A.none()},set:function(e,t){if(!mc(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),jf={create:xt("start","soffset","finish","foffset")},Vf=Zt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$f={before:Vf.before,on:Vf.on,after:Vf.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(o,o,o)}},qf=Zt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yf={domRange:qf.domRange,relative:qf.relative,exact:qf.exact,exactFromRange:function(e){return qf.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return ut(e.startContainer)},relative:function(e,t){return $f.getStart(e)},exact:function(e,t,n,r){return e}});return Bt(t)},range:jf.create},Xf=function(e,t,n){var r,o,i=e.document.createRange();return r=i,t.fold((function(e){r.setStartBefore(e.dom())}),(function(e,t){r.setStart(e.dom(),t)}),(function(e){r.setStartAfter(e.dom())})),o=i,n.fold((function(e){o.setEndBefore(e.dom())}),(function(e,t){o.setEnd(e.dom(),t)}),(function(e){o.setEndAfter(e.dom())})),i},Gf=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},Kf=function(e){return{left:r(e.left),top:r(e.top),right:r(e.right),bottom:r(e.bottom),width:r(e.width),height:r(e.height)}},Jf=Zt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zf=function(e,t,n){return t(ut(n.startContainer),n.startOffset,ut(n.endContainer),n.endOffset)},Qf=function(e,t){var n,o,i,a=(n=e,t.match({domRange:function(e){return{ltr:r(e),rtl:A.none}},relative:function(e,t){return{ltr:K((function(){return Xf(n,e,t)})),rtl:K((function(){return A.some(Xf(n,t,e))}))}},exact:function(e,t,r,o){return{ltr:K((function(){return Gf(n,e,t,r,o)})),rtl:K((function(){return A.some(Gf(n,r,o,e,t))}))}}}));return(i=(o=a).ltr()).collapsed?o.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Jf.rtl(ut(e.endContainer),e.endOffset,ut(e.startContainer),e.startOffset)})).getOrThunk((function(){return Zf(0,Jf.ltr,i)})):Zf(0,Jf.ltr,i)},ed=function(e,t){var n=mt(e);return"input"===n?$f.after(e):ve(["br","img"],n)?0===t?$f.before(e):$f.after(e):$f.on(e,t)},td=function(e,t,n,r,o){var i,a,u=Gf(e,t,n,r,o);i=e,a=u,A.from(i.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(a)}))},nd=function(e){var t=ut(e.anchorNode),n=ut(e.focusNode);return function(e,t,n,r){var o,i,a,u,s,c=(i=t,a=n,u=r,(s=Mt(o=e).dom().createRange()).setStart(o.dom(),i),s.setEnd(a.dom(),u),s),l=Dt(e,n)&&t===r;return c.collapsed&&!l}(t,e.anchorOffset,n,e.focusOffset)?A.some(jf.create(t,e.anchorOffset,n,e.focusOffset)):function(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return A.some(jf.create(ut(t.startContainer),t.startOffset,ut(n.endContainer),n.endOffset))}return A.none()}(e)},rd=function(e){return A.from(e.getSelection()).filter((function(e){return 0<e.rangeCount})).bind(nd)},od=function(e,t){var n,r,o,i,a=Qf(n=e,t).match({ltr:function(e,t,r,o){var i=n.document.createRange();return i.setStart(e.dom(),t),i.setEnd(r.dom(),o),i},rtl:function(e,t,r,o){var i=n.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),t),i}});return 0<(i=0<(o=(r=a).getClientRects()).length?o[0]:r.getBoundingClientRect()).width||0<i.height?A.some(i).map(Kf):A.none()},id=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:r(2),height:e.height}},ad=function(e){return{left:r(e.left),top:r(e.top),right:r(e.right),bottom:r(e.bottom),width:r(e.width),height:r(e.height)}},ud=function(e){var t=e.getSelection();return void 0!==t&&0<t.rangeCount?function(e){if(e.collapsed){var t=ut(e.startContainer);return It(t).bind((function(n){var r=Yf.exact(t,e.startOffset,n,function(e){return"img"===mt(e)?1:(t=e,Uf.getOption(t)).fold((function(){return Lt(e).length}),(function(e){return e.length}));var t}(n));return od(e.startContainer.ownerDocument.defaultView,r).map(id).map(Re)})).getOr([])}return be(e.getClientRects(),ad)}(t.getRangeAt(0)):[]},sd="data-"+Go.resolve("last-outer-height"),cd=function(e,t){Br(e,sd,t)},ld=function(e){return{top:r(e.top()),bottom:r(e.top()+e.height())}},fd=function(e,t){var n=ut(t.document.body),r=Af(ut(e),"resize",(function(){(function(e,t){var n=Wf(t,sd),r=e.innerHeight;return r<n?A.some(n-r):A.none()})(e,n).each((function(e){var n,r;(n=t,r=ud(n),0<r.length?A.some(r[0]).map(ld):A.none()).each((function(n){var r,o,i,a=(r=t,i=e,(o=n).top()>r.innerHeight||o.bottom()>r.innerHeight?Math.min(i,o.bottom()-r.innerHeight+50):0);0!==a&&t.scrollTo(t.pageXOffset,t.pageYOffset+a)}))})),cd(n,e.innerHeight)}));return cd(n,e.innerHeight),{toEditing:function(){!function(e){e.focus();var t=ut(e.document.body);(oo().exists((function(e){return ve(["input","textarea"],mt(e))}))?function(e){setTimeout((function(){e()}),0)}:h)((function(){oo().each(ro),no(t)}))}(t)},destroy:function(){r.unbind()}}},dd=function(e){return A.some(ut(e.dom().contentWindow.document.body))},md=function(e){return A.some(ut(e.dom().contentWindow.document))},hd=function(e){return A.from(e.dom().contentWindow)},gd=function(e){return hd(e).bind(rd)},pd=function(e){return e.getFrame()},vd=function(e,t){return function(n){return n[e].getOrThunk((function(){var e=pd(n);return function(){return t(e)}}))()}},bd=function(e,t,n,r){return e[n].getOrThunk((function(){return function(e){return Af(t,r,e)}}))},yd=function(e){return{left:r(e.left),top:r(e.top),right:r(e.right),bottom:r(e.bottom),width:r(e.width),height:r(e.height)}},xd={getBody:vd("getBody",dd),getDoc:vd("getDoc",md),getWin:vd("getWin",hd),getSelection:vd("getSelection",gd),getFrame:pd,getActiveApi:function(e){var t=pd(e);return dd(t).bind((function(n){return md(t).bind((function(o){return hd(t).map((function(a){var u=ut(o.dom().documentElement),s=e.getCursorBox.getOrThunk((function(){return function(){return(e=a,rd(e).map((function(e){return Yf.exact(e.start(),e.soffset(),e.finish(),e.foffset())}))).bind((function(e){return od(a,e).orThunk((function(){return rd(a).filter((function(e){return Dt(e.start(),e.finish())&&e.soffset()===e.foffset()})).bind((function(e){var t=e.start().dom().getBoundingClientRect();return 0<t.width||0<t.height?A.some(t).map(yd):A.none()}))}))}));var e}})),c=e.setSelection.getOrThunk((function(){return function(e,t,n,r){!function(e,t,n,r,o){var i,a,u,s,c,l=(i=r,a=o,u=ed(t,n),s=ed(i,a),Yf.relative(u,s));Qf(c=e,l).match({ltr:function(e,t,n,r){td(c,e,t,n,r)},rtl:function(e,t,n,r){var o,i,a,u,s,l=c.getSelection();if(l.setBaseAndExtent)l.setBaseAndExtent(e.dom(),t,n.dom(),r);else if(l.extend)try{i=e,a=t,u=n,s=r,(o=l).collapse(i.dom(),a),o.extend(u.dom(),s)}catch(o){td(c,n,r,e,t)}else td(c,n,r,e,t)}})}(a,e,t,n,r)}})),l=e.clearSelection.getOrThunk((function(){return function(){a.getSelection().removeAllRanges()}}));return{body:r(n),doc:r(o),win:r(a),html:r(u),getSelection:i(gd,t),setSelection:c,clearSelection:l,frame:r(t),onKeyup:bd(e,o,"onKeyup","keyup"),onNodeChanged:bd(e,o,"onNodeChanged","selectionchange"),onDomChanged:e.onDomChanged,onScrollToCursor:e.onScrollToCursor,onScrollToElement:e.onScrollToElement,onToReading:e.onToReading,onToEditing:e.onToEditing,onToolbarScrollStart:e.onToolbarScrollStart,onTouchContent:e.onTouchContent,onTapContent:e.onTapContent,onTouchToolstrip:e.onTouchToolstrip,getCursorBox:s}}))}))}))}},wd="data-ephox-mobile-fullscreen-style",Cd="position:absolute!important;",kd="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Td=He.detect().os.isAndroid(),Sd=function(e,t){var n,r=function(e){return function(t){var n=Lr(t,"style"),r=void 0===n?"no-styles":n.trim();r!==e&&(Br(t,wd,r),Br(t,"style",e))}},o=("*",function(e,t,n){return xe(function(e,t){for(var n=C(t)?t:g,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=ut(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,n),t)}(e,(function(e){return Rt(e,"*")}),void 0)),i=Ee(o,(function(e){return"*",function(e,t){return xe(It(n=e).map(Lt).map((function(e){return xe(e,(function(e){return!Dt(n,e)}))})).getOr([]),t);var n}(e,(function(e){return Rt(e,"*")}))})),a=void 0!==(n=ii(t,"background-color"))&&""!==n?"background-color:"+n+"!important":"background-color:rgb(255,255,255)!important;";ye(i,r("display:none!important;")),ye(o,r(Cd+kd+a)),r((!0===Td?"":Cd)+kd+a)(e)},Ed=function(){var e=At("["+wd+"]");ye(e,(function(e){var t=Lr(e,wd);"no-styles"!==t?Br(e,"style",t):Fr(e,"style"),Fr(e,wd)}))},_d=function(){var e=pi("head").getOrDie(),t=pi('meta[name="viewport"]').getOrThunk((function(){var t=it("meta");return Br(t,"name","viewport"),Ft(e,t),t})),n=Lr(t,"content");return{maximize:function(){Br(t,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=n&&0<n.length?Br(t,"content",n):Br(t,"content","user-scalable=yes")}}},Nd=function(e,n){var r=_d(),o=il(),i=il();return{enter:function(){n.hide(),$r(e.container,Go.resolve("fullscreen-maximized")),$r(e.container,Go.resolve("android-maximized")),r.maximize(),$r(e.body,Go.resolve("android-scroll-reload")),o.set(fd(e.win,xd.getWin(e.editor).getOrDie("no"))),xd.getActiveApi(e.editor).each((function(n){Sd(e.container,n.body()),i.set(function(e,n,r){var o=Ff(e),i=Mt(n),a=function(e){return!Dt(e.start(),e.finish())||e.soffset()!==e.foffset()},u=function(){var t=e.doc().dom().hasFocus()&&e.getSelection().exists(a);r.getByDom(n).each(!0===(t||oo(i).filter((function(e){return"input"===mt(e)})).exists((function(e){return e.dom().selectionStart!==e.dom().selectionEnd})))?Vo.on:Vo.off)},s=[Af(e.body(),"touchstart",(function(t){e.onTouchContent(),o.fireTouchstart(t)})),o.onTouchmove(),o.onTouchend(),Af(n,"touchstart",(function(t){e.onTouchToolstrip()})),e.onToReading((function(){ro(e.body())})),e.onToEditing(t),e.onScrollToCursor((function(t){t.preventDefault(),e.getCursorBox().each((function(t){var n=e.win(),r=t.top()>n.innerHeight||t.bottom()>n.innerHeight?t.bottom()-n.innerHeight+50:0;0!==r&&n.scrollTo(n.pageXOffset,n.pageYOffset+r)}))}))].concat(!0===zf?[]:[Af(ut(e.win()),"blur",(function(){r.getByDom(n).each(Vo.off)})),Af(i,"select",u),Af(e.doc(),"selectionchange",u)]);return{destroy:function(){ye(s,(function(e){e.unbind()}))}}}(n,e.toolstrip,e.alloy))}))},exit:function(){r.restore(),n.show(),qr(e.container,Go.resolve("fullscreen-maximized")),qr(e.container,Go.resolve("android-maximized")),Ed(),qr(e.body,Go.resolve("android-scroll-reload")),i.clear(),o.clear()}}},Rd=function(t,n){var r=null;return{cancel:function(){null!==r&&(e.clearTimeout(r),r=null)},throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&e.clearTimeout(r),r=e.setTimeout((function(){t.apply(null,o),r=null}),n)}}},Od=function(t,n){var r,o,i=cc(Ac.sketch({dom:bs('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:Rr([Vo.config({toggleClass:Go.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),a=(r=t,200,o=null,{cancel:function(){null!==o&&(e.clearTimeout(o),o=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===o&&(o=e.setTimeout((function(){r.apply(null,t),o=null}),200))}});return Ac.sketch({dom:bs('<div class="${prefix}-disabled-mask"></div>'),components:[Ac.sketch({dom:bs('<div class="${prefix}-content-container"></div>'),components:[ps.sketch({dom:bs('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(e){a.throttle()},buttonBehaviours:Rr([Vo.config({toggleClass:Go.resolve("mask-tap-icon-selected")})])})]})]})},Ad=On([Gn("editor",[qn("getFrame"),Kn("getBody"),Kn("getDoc"),Kn("getWin"),Kn("getSelection"),Kn("setSelection"),Kn("clearSelection"),Kn("cursorSaver"),Kn("onKeyup"),Kn("onNodeChanged"),Kn("getCursorBox"),qn("onDomChanged"),Qn("onTouchContent",t),Qn("onTapContent",t),Qn("onTouchToolstrip",t),Qn("onScrollToCursor",r({unbind:t})),Qn("onScrollToElement",r({unbind:t})),Qn("onToEditing",r({unbind:t})),Qn("onToReading",r({unbind:t})),Qn("onToolbarScrollStart",o)]),qn("socket"),qn("toolstrip"),qn("dropup"),qn("toolbar"),qn("container"),qn("alloy"),tr("win",(function(e){return Mt(e.socket).dom().defaultView})),tr("body",(function(e){return ut(e.socket.dom().ownerDocument.body)})),Qn("translate",o),Qn("setReadOnly",t),Qn("readOnlyOnInit",r(!0))]),Pd=r([Qn("shell",!0),yu("toolbarBehaviours",[Ql])]),Dd=r([Uu({name:"groups",overrides:function(e){return{behaviours:Rr([Ql.config({})])}}})]),Md=gs({name:"Toolbar",configFields:Pd(),partFields:Dd(),factory:function(t,n,r,o){var i=function(e){return t.shell()?A.some(e):Gu(e,t,"groups")},a=t.shell()?{behaviours:[Ql.config({})],components:[]}:{behaviours:[],components:n};return{uid:t.uid(),dom:t.dom(),components:a.components,behaviours:E(Rr(a.behaviours),xu(t.toolbarBehaviours())),apis:{setGroups:function(t,n){i(t).fold((function(){throw e.console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(e){Ql.set(e,n)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),Bd=r([qn("items"),(gc=["itemClass"],Gn("markers",be(gc,qn))),yu("tgroupBehaviours",[bu])]),Id=r([ju({name:"items",unit:"item",overrides:function(e){return{domModification:{classes:[e.markers().itemClass()]}}}})]),Ld=gs({name:"ToolbarGroup",configFields:Bd(),partFields:Id(),factory:function(e,t,n,r){return E({dom:{attributes:{role:"toolbar"}}},{uid:e.uid(),dom:e.dom(),components:t,behaviours:E(Rr([bu.config({mode:"flow",selector:"."+e.markers().itemClass()})]),xu(e.tgroupBehaviours())),"debug.sketcher":n["debug.sketcher"]})}}),Hd="data-"+Go.resolve("horizontal-scroll"),Fd=function(e){return"true"===Lr(e,Hd)?0<(n=e).dom().scrollLeft||function(e){e.dom().scrollLeft=1;var t=0!==e.dom().scrollLeft;return e.dom().scrollLeft=0,t}(n):0<(t=e).dom().scrollTop||function(e){e.dom().scrollTop=1;var t=0!==e.dom().scrollTop;return e.dom().scrollTop=0,t}(t);var t,n},zd=function(e,n){return Af(e,"touchmove",(function(e){yi(e.target(),n).filter(Fd).fold((function(){e.raw().preventDefault()}),t)}))},Wd=function(e){Br(e,Hd,"true")};function Ud(){var e=function(e){var t=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:bs('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:Rr([_c("adhoc-scrollable-toolbar",!0===e.scrollable?[dr((function(e,t){ri(e.element(),"overflow-x","auto"),Wd(e.element()),gf.register(e.element())}))]:[])]),components:[Ac.sketch({components:[Ld.parts().items({})]})],markers:{itemClass:Go.resolve("toolbar-group-item")},items:e.items}},t=Bl(Md.sketch({dom:bs('<div class="${prefix}-toolbar"></div>'),components:[Md.parts().groups({})],toolbarBehaviours:Rr([Vo.config({toggleClass:Go.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),bu.config({mode:"cyclic"})]),shell:!0})),o=Bl(Ac.sketch({dom:{classes:[Go.resolve("toolstrip")]},components:[Il(t)],containerBehaviours:Rr([Vo.config({toggleClass:Go.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),i=function(){Md.setGroups(t,a.get()),Vo.off(t)},a=Zr([]);return{wrapper:r(o),toolbar:r(t),createGroups:function(t){return be(t,n(Ld.sketch,e))},setGroups:function(e){a.set(e),i()},setContextToolbar:function(e){Vo.on(t),Md.setGroups(t,e)},restoreToolbar:function(){Vo.isOn(t)&&i()},refresh:function(){},focus:function(){bu.focusIn(t)}}}var jd=function(e,t){Ql.append(e,Il(t))},Vd=function(e,t){Ql.remove(e,t)},$d=function(e){return Bl(ps.sketch({dom:bs('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){e.run((function(e){e.setReadOnly(!1)}))}}))},qd=function(){return Bl(Ac.sketch({dom:bs('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:Rr([Ql.config({})])}))},Yd=function(e,t,n,r){(!0===n?Jr.toAlpha:Jr.toOmega)(r),(n?jd:Vd)(e,t)},Xd=function(e,t){return t.getAnimationRoot().fold((function(){return e.element()}),(function(t){return t(e)}))},Gd=function(e){return e.dimension().property()},Kd=function(e,t){return e.dimension().getDimension()(t)},Jd=function(e,t){var n=Xd(e,t);Tl(n,[t.shrinkingClass(),t.growingClass()])},Zd=function(e,t){qr(e.element(),t.openClass()),$r(e.element(),t.closedClass()),ri(e.element(),Gd(t),"0px"),ci(e.element())},Qd=function(e,t){qr(e.element(),t.closedClass()),$r(e.element(),t.openClass()),si(e.element(),Gd(t))},em=function(e,t,n){n.setCollapsed(),ri(e.element(),Gd(t),Kd(t,e.element())),ci(e.element());var r=Xd(e,t);$r(r,t.shrinkingClass()),Zd(e,t),t.onStartShrink()(e)},tm=function(e,t,n){var r=function(e,t){Qd(e,t);var n=Kd(t,e.element());return Zd(e,t),n}(e,t),o=Xd(e,t);$r(o,t.growingClass()),Qd(e,t),ri(e.element(),Gd(t),r),n.setExpanded(),t.onStartGrow()(e)},nm=function(e,t,n){var r=Xd(e,t);return!0===Yr(r,t.growingClass())},rm=function(e,t,n){var r=Xd(e,t);return!0===Yr(r,t.shrinkingClass())},om=Object.freeze({grow:function(e,t,n){n.isExpanded()||tm(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&em(e,t,n)},immediateShrink:function(e,t,n){var r,o;n.isExpanded()&&(r=e,o=t,n.setCollapsed(),ri(r.element(),Gd(o),Kd(o,r.element())),ci(r.element()),Jd(r,o),Zd(r,o),o.onStartShrink()(r),o.onShrunk()(r))},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:nm,isShrinking:rm,isTransitioning:function(e,t,n){return!0===nm(e,t)||!0===rm(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?em:tm)(e,t,n)},disableTransitions:Jd}),im=Object.freeze({exhibit:function(e,t){var n=t.expanded();return vr(n?{classes:[t.openClass()],styles:{}}:{classes:[t.closedClass()],styles:pn(t.dimension().property(),"0px")})},events:function(e,t){return rr([ir(X(),(function(n,r){r.event().raw().propertyName===e.dimension().property()&&(Jd(n,e),t.isExpanded()&&si(n.element(),e.dimension().property()),(t.isExpanded()?e.onGrown():e.onShrunk())(n))}))])}}),am=[qn("closedClass"),qn("openClass"),qn("shrinkingClass"),qn("growingClass"),Kn("getAnimationRoot"),So("onShrunk"),So("onStartShrink"),So("onGrown"),So("onStartGrow"),Qn("expanded",!1),Yn("dimension",jn("property",{width:[Ro("property","width"),Ro("getDimension",(function(e){return Zs(e)+"px"}))],height:[Ro("property","height"),Ro("getDimension",(function(e){return hi(e)+"px"}))]}))],um=Ar({fields:am,name:"sliding",active:im,apis:om,state:Object.freeze({init:function(e){var t=Zr(e.expanded());return Nr({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:i(t.set,!1),setExpanded:i(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),sm=function(n,o){var i=Bl(Ac.sketch({dom:{tag:"div",classes:[Go.resolve("dropup")]},components:[],containerBehaviours:Rr([Ql.config({}),um.config({closedClass:Go.resolve("dropup-closed"),openClass:Go.resolve("dropup-open"),shrinkingClass:Go.resolve("dropup-shrinking"),growingClass:Go.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){n(),o(),Ql.set(e,[])},onGrown:function(e){n(),o()}}),qo((function(e,n){a(t)}))])})),a=function(t){e.window.requestAnimationFrame((function(){t(),um.shrink(i)}))};return{appear:function(t,n,r){!0===um.hasShrunk(i)&&!1===um.isTransitioning(i)&&e.window.requestAnimationFrame((function(){n(r),Ql.set(i,[t()]),um.grow(i)}))},disappear:a,component:r(i),element:i.element}},cm=He.detect().browser.isFirefox(),lm=Rn([Xn("triggerEvent"),Xn("broadcastEvent"),Qn("stopBackspace",!0)]),fm=function(e,t){var n=gn(e,"target").map((function(e){return e()})).getOr(t);return Zr(n)},dm=Zt([{stopped:[]},{resume:["element"]},{complete:[]}]),mm=function(e,t,n,o,i,a){var u,s,c,l,f=e(t,o),d=(u=n,s=i,c=Zr(!1),l=Zr(!1),{stop:function(){c.set(!0)},cut:function(){l.set(!0)},isStopped:c.get,isCut:l.get,event:r(u),setSource:s.set,getSource:s.get});return f.fold((function(){return a.logEventNoHandlers(t,o),dm.complete()}),(function(e){var n=e.descHandler();return yl(n)(d),d.isStopped()?(a.logEventStopped(t,e.element(),n.purpose()),dm.stopped()):d.isCut()?(a.logEventCut(t,e.element(),n.purpose()),dm.complete()):It(e.element()).fold((function(){return a.logNoParent(t,e.element(),n.purpose()),dm.complete()}),(function(r){return a.logEventResponse(t,e.element(),n.purpose()),dm.resume(r)}))}))},hm=function(e,t,n,r,o,i){return mm(e,t,n,r,o,i).fold((function(){return!0}),(function(r){return hm(e,t,n,r,o,i)}),(function(){return!1}))},gm=function(e,n,o){var i,a,u=(i=n,a=Zr(!1),{stop:function(){a.set(!0)},cut:t,isStopped:a.get,isCut:r(!1),event:r(i),setSource:m("Cannot set source of a broadcasted event"),getSource:m("Cannot get source of a broadcasted event")});return ye(e,(function(e){var t=e.descHandler();yl(t)(u)})),u.isStopped()},pm=function(e,t,n,r,o){var i=fm(n,r);return hm(e,t,n,r,i,o)},vm=xt("element","descHandler");function bm(){var e={};return{registerId:function(t,n,o){D(o,(function(o,a){var u=void 0!==e[a]?e[a]:{};u[n]=function(e,t){return n=i.apply(void 0,[e.handler].concat(t)),o=e.purpose(),{cHandler:n,purpose:r(o)};var n,o}(o,t),e[a]=u}))},unregisterId:function(t){D(e,(function(e,n){e.hasOwnProperty(t)&&delete e[t]}))},filterByType:function(t){return gn(e,t).map((function(e){return I(e,(function(e,t){return function(e,t){return{id:r(e),descHandler:r(t)}}(t,e)}))})).getOr([])},find:function(t,n,r){var o=mn(n)(e);return function(e,t,n){return to(e,(function(e){return t(e).isSome()}),n).bind(t)}(r,(function(e){return t=o,us(n=e).fold((function(){return A.none()}),(function(e){var r=mn(e);return t.bind(r).map((function(e){return vm(n,e)}))}));var t,n}),t)}}}function ym(){var e=bm(),t={},n=function(n){us(n.element()).each((function(n){t[n]=void 0,e.unregisterId(n)}))};return{find:function(t,n,r){return e.find(t,n,r)},filter:function(t){return e.filterByType(t)},register:function(r){var o=function(e){var t=e.element();return us(t).fold((function(){return"uid-",t=e.element(),n=Nu(is+"uid-"),Br(t,as,n),n;var t,n}),(function(e){return e}))}(r);yn(t,o)&&function(e,r){var o=t[r];if(o!==e)throw new Error('The tagId "'+r+'" is already used by: '+mo(o.element())+"\nCannot use it for: "+mo(e.element())+"\nThe conflicting element is"+(vt(o.element())?" ":" not ")+"already in the DOM");n(e)}(r,o);var i=[r];e.registerId(i,o,r.events()),t[o]=r},unregister:n,getById:function(e){return mn(e)(t)}}}var xm=function(n){var o=function(e){return It(n.element()).fold((function(){return!0}),(function(t){return Dt(e,t)}))},i=ym(),a=function(e,t){return i.find(o,e,t)},u=function(t,n){var r,o,i,a,u=zn("Getting GUI events settings",lm,n),s=He.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=Hf(u),l=be(s.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop"]),(function(e){return Af(t,e,(function(t){c.fireIfReady(t,e).each((function(e){e&&t.kill()})),u.triggerEvent(e,t)&&t.kill()}))})),f=Af(t,"keydown",(function(e){var t;u.triggerEvent("keydown",e)?e.kill():!0!==u.stopBackspace||8!==(t=e).raw().which||ve(["input","textarea"],mt(t.target()))||e.prevent()})),d=(r=t,o=function(e){u.triggerEvent("focusin",e)&&e.kill()},cm?Pf(r,"focus",o):Af(r,"focusin",o)),m=(i=t,a=function(t){u.triggerEvent("focusout",t)&&t.kill(),e.setTimeout((function(){u.triggerEvent(We(),t)}),0)},cm?Pf(i,"blur",a):Af(i,"focusout",a)),h=Bt(t),g=Af(h,"scroll",(function(e){u.broadcastEvent(Ge(),e)&&e.kill()}));return{unbind:function(){ye(l,(function(e){e.unbind()})),f.unbind(),d.unbind(),m.unbind(),g.unbind()}}}(n.element(),{triggerEvent:function(e,t){return yo(e,t.target(),(function(n){return r=a,o=e,u=n,s=(i=t).target(),pm(r,o,i,s,u);var r,o,i,u,s}))},broadcastEvent:function(e,t){var n=i.filter(e);return gm(n,t)}}),s=ml({debugInfo:r("real"),triggerEvent:function(e,t,n){yo(e,t,(function(r){pm(a,e,n,t,r)}))},triggerFocus:function(e,n){us(e).fold((function(){no(e)}),(function(o){yo(ze(),e,(function(o){var i,u,s,c,l,f;i=a,u=ze(),s={originator:r(n),kill:t,prevent:t,target:r(e)},l=o,f=fm(s,c=e),mm(i,u,s,c,f,l)}))}))},triggerEscape:function(e,t){s.triggerEvent("keydown",e.element(),t.event())},getByUid:function(e){return p(e)},getByDom:function(e){return v(e)},build:Bl,addToGui:function(e){f(e)},removeFromGui:function(e){d(e)},addToWorld:function(e){c(e)},removeFromWorld:function(e){l(e)},broadcast:function(e){h(e)},broadcastOn:function(e,t){g(e,t)},isConnected:r(!0)}),c=function(e){e.connect(s),pt(e.element())||(i.register(e),ye(e.components(),c),s.triggerEvent(Xe(),e.element(),{target:r(e.element())}))},l=function(e){pt(e.element())||(ye(e.components(),l),i.unregister(e)),e.disconnect()},f=function(e){$t(n,e)},d=function(e){Xt(e)},m=function(e){var t=i.filter(Ue());ye(t,(function(t){var n=t.descHandler();yl(n)(e)}))},h=function(e){m({universal:r(!0),data:r(e)})},g=function(e,t){m({universal:r(!1),channels:r(e),data:r(t)})},p=function(e){return i.getById(e).fold((function(){return Jt.error(new Error('Could not find component with uid: "'+e+'" in system.'))}),Jt.value)},v=function(e){var t=us(e).getOr("not found");return p(t)};return c(n),{root:r(n),element:n.element,destroy:function(){u.unbind(),Ut(n.element())},add:f,remove:d,getByUid:p,getByDom:v,addToWorld:c,removeFromWorld:l,broadcast:h,broadcastOn:g}},wm=r(Go.resolve("readonly-mode")),Cm=r(Go.resolve("edit-mode"));function km(e){var t=Bl(Ac.sketch({dom:{classes:[Go.resolve("outer-container")].concat(e.classes)},containerBehaviours:Rr([Jr.config({alpha:wm(),omega:Cm()})])}));return xm(t)}var Tm,Sm,Em,_m=function(e,t){var n=it("input");oi(n,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Ft(e,n),no(n),t(n),Ut(n)},Nm=function(e){var t=e.getSelection();if(0<t.rangeCount){var n=t.getRangeAt(0),r=e.document.createRange();r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),t.removeAllRanges(),t.addRange(r)}},Rm=function(e,t){oo().each((function(e){Dt(e,t)||ro(e)})),e.focus(),no(ut(e.document.body)),Nm(e)},Om={stubborn:function(e,t,n,r){var o=function(){Rm(t,r)},i=Af(n,"keydown",(function(e){ve(["input","textarea"],mt(e.target()))||o()}));return{toReading:function(){_m(e,ro)},toEditing:o,onToolbarTouch:function(){},destroy:function(){i.unbind()}}},timid:function(e,n,r,o){var i=function(){ro(o)};return{toReading:function(){i()},toEditing:function(){Rm(n,o)},onToolbarTouch:function(){i()},destroy:t}}},Am={},Pm={exports:Am};Tm=void 0,Sm=Am,Em=Pm,function(e){"object"==typeof Sm&&void 0!==Em?Em.exports=e():"function"==typeof Tm&&Tm.amd?Tm([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var c,l=[],f=!1,d=-1;function m(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!f){var e=s(m);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||f||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}u(t.promise,r)}else(1===e._state?u:s)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}var r,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new l(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}catch(e){n(e)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,o((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}));var Dm=Pm.exports.boltExport,Mm=function(t){var n=A.none(),r=[],o=function(e){i()?a(e):r.push(e)},i=function(){return n.isSome()},a=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(e){n=A.some(e),function(e){ye(e,a)}(r),r=[]})),{get:o,map:function(e){return Mm((function(t){o((function(n){t(e(n))}))}))},isReady:i}},Bm={nu:Mm,pure:function(e){return Mm((function(t){t(e)}))}},Im=function(t){e.setTimeout((function(){throw t}),0)},Lm=function(e){var t=function(t){e().then(t,Im)};return{map:function(t){return Lm((function(){return e().then(t)}))},bind:function(t){return Lm((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return Lm((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return Bm.nu(t)},toCached:function(){var t=null;return Lm((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},Hm=function(e){return Lm((function(){return new Dm(e)}))},Fm=function(e){var t,n=Mf(e).isPortrait(),r=function(e,t){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r.isSome())return r}return A.none()}([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],(function(n){return r=e<=n.width&&t<=n.height,o=n.keyboard,r?A.some(o):A.none();var r,o})).getOr({portrait:t/5,landscape:e/4})}((t=e).screen.width,t.screen.height),o=n?r.portrait:r.landscape;return(n?e.screen.height:e.screen.width)-e.innerHeight>o?0:o},zm=function(e,t){var n=Mt(e).dom().defaultView;return hi(e)+hi(t)-Fm(n)},Wm=zm,Um=function(e,t,n){var r=zm(t,n),o=hi(t)+hi(n)-r;ri(e,"padding-bottom",o+"px")},jm=Zt([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),Vm="data-"+Go.resolve("position-y-fixed"),$m="data-"+Go.resolve("y-property"),qm="data-"+Go.resolve("scrolling"),Ym="data-"+Go.resolve("last-window-height"),Xm=function(e){return Wf(e,Vm)},Gm=function(e,t){var n=Lr(e,$m);return jm.fixed(e,n,t)},Km=function(e,t){return jm.scroller(e,t)},Jm=function(e){var t=Xm(e);return("true"===Lr(e,qm)?Km:Gm)(e,t)},Zm=function(e,t,n){var r=Mt(e).dom().defaultView.innerHeight;return Br(e,Ym,r+"px"),r-t-n},Qm=Xm,eh=function(){var e=null;return{animate:function(t,n,r,o,i,a){var u=!1,s=function(e){u=!0,i(e)};clearInterval(e);var c=function(t){clearInterval(e),s(t)};e=setInterval((function(){var i=t();(function(e,t,n){return Math.abs(e-t)<=n?A.none():e<t?A.some(e+n):A.some(e-n)})(i,n,r).fold((function(){clearInterval(e),s(n)}),(function(r){if(o(r,c),!u){var a=t();(a!==r||Math.abs(a-n)>Math.abs(i-n))&&(clearInterval(e),s(n))}}))}),a)}}}(),th="data-"+Go.resolve("last-scroll-top"),nh=function(e){var t=ui(e,"top").getOr("0");return parseInt(t,10)},rh=function(e){return parseInt(e.dom().scrollTop,10)},oh=function(e,t){var n=t+Qm(e)+"px";ri(e,"top",n)},ih=function(e,t){return Hm((function(n){var r=i(rh,e);Br(e,th,r());var o=Math.abs(t-r()),a=Math.ceil(o/10);eh.animate(r,t,a,(function(t,n){Wf(e,th)!==e.dom().scrollTop?n(e.dom().scrollTop):(e.dom().scrollTop=t,Br(e,th,t))}),(function(){e.dom().scrollTop=t,Br(e,th,t),n(t)}),10)}))},ah=function(e,t){return Hm((function(n){var r=i(nh,e),o=function(t){ri(e,"top",t+"px")},a=Math.abs(t-r()),u=Math.ceil(a/10);eh.animate(r,t,u,o,(function(){o(t),n(t)}),10)}))},uh=function(e,t,n,r,o){var a=Wm(t,n),u=i(Nm,e);a<r||a<o?ih(t,t.dom().scrollTop-a+o).get(u):r<0&&ih(t,t.dom().scrollTop+r).get(u)},sh=function(e,t){return e.fold((function(e,n,r){return ri(e,n,t+(o=r)+"px"),function(e){return Lm((function(){return Dm.resolve(e)}))}(o);var o}),(function(e,n){return a=t+(o=n),u=ui(r=e,"top").getOr(o),s=a-parseInt(u,10),c=r.dom().scrollTop+s,function(e,t,n){return Hm((function(r){var o=i(rh,e);eh.animate(o,t,15,(function(t){e.dom().scrollTop=t,ri(e,"top",nh(e)+15+"px")}),(function(){e.dom().scrollTop=t,ri(e,"top",n+"px"),r(t)}),10)}))}(r,c,a);var r,o,a,u,s,c}))},ch=function(e,t){var n=function(e){var t=gi(e,"["+Vm+"]");return be(t,Jm)}(e);return function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):ye(e,(function(o,i){var a;o.get((a=i,function(o){n[a]=o,++r>=e.length&&t(n)}))}))}))}(be(n,(function(e){return sh(e,t)})),Hm)},lh=function(e,t,n,i,a,u){var s,c,l=(s=function(n){return function(e,t,n){var r=Mt(e).dom().defaultView;return Hm((function(o){oh(e,n),oh(t,n),r.scrollTo(0,n),o(n)}))}(e,t,n)},c=Zr(Bm.pure({})),{start:function(e){var t=Bm.nu((function(t){return s(e).get(t)}));c.set(t)},idle:function(e){c.get().get((function(){e()}))}}),f=Rd((function(){l.idle((function(){ch(n,i.pageYOffset).get((function(){var e;(e=ud(u),A.from(e[0]).bind((function(e){var n=e.top()-t.dom().scrollTop;return n>i.innerHeight+5||n<-5?A.some({top:r(n),bottom:r(n+e.height())}):A.none()}))).each((function(e){t.dom().scrollTop=t.dom().scrollTop+e.top()})),l.start(0),a.refresh()}))}))}),1e3),d=Af(ut(i),"scroll",(function(){i.pageYOffset<0||f.throttle()}));return ch(n,i.pageYOffset).get(o),{unbind:d.unbind}},fh=function(e){var n=e.cWin(),r=e.ceBody(),i=e.socket(),a=e.toolstrip(),u=e.toolbar(),s=e.contentElement(),c=e.keyboardType(),l=e.outerWindow(),f=e.dropup(),m=function(e,t,n,r){var o,i,a,u,s,c,l,f,m=Mt(e).dom().defaultView,h=(f=Lr(l=n,"style"),oi(l,{position:"absolute",top:"0px"}),Br(l,Vm,"0px"),Br(l,$m,"top"),{restore:function(){Br(l,"style",f||""),Fr(l,Vm),Fr(l,$m)}}),g=hi(n),p=hi(r),v=(u=Zm(e,a=g,p),c=Lr(s=e,"style"),gf.register(s),oi(s,{position:"absolute",height:u+"px",width:"100%",top:a+"px"}),Br(s,Vm,a+"px"),Br(s,qm,"true"),Br(s,$m,"top"),{restore:function(){gf.deregister(s),Br(s,"style",c||""),Fr(s,Vm),Fr(s,qm),Fr(s,$m)}}),b=(i=Lr(o=r,"style"),oi(o,{position:"absolute",bottom:"0px"}),Br(o,Vm,"0px"),Br(o,$m,"bottom"),{restore:function(){Br(o,"style",i||""),Fr(o,Vm),Fr(o,$m)}}),y=!0,x=function(){var t=m.innerHeight;return Wf(e,Ym)<t},w=function(){if(y){var o=hi(n),i=hi(r),a=Zm(e,o,i);Br(e,Vm,o+"px"),ri(e,"height",a+"px"),Um(t,e,r)}};return Um(t,e,r),{setViewportOffset:function(t){Br(e,Vm,t+"px"),w()},isExpanding:x,isShrinking:d(x),refresh:w,restore:function(){y=!1,h.restore(),v.restore(),b.restore()}}}(i,r,a,f),h=c(e.outerBody(),n,bt(),s,a,u),g=Bf(l,{onChange:t,onReady:m.refresh});g.onAdjustment((function(){m.refresh()}));var p=Af(ut(l),"resize",(function(){m.isExpanding()&&m.refresh()})),v=lh(a,i,e.outerBody(),l,m,n),b=function(e,t){var n=e.document,r=it("div");$r(r,Go.resolve("unfocused-selections")),Ft(ut(n.documentElement),r);var o=Af(r,"touchstart",(function(n){n.prevent(),Rm(e,t),a()})),i=function(e){var t=it("span");return kl(t,[Go.resolve("layer-editor"),Go.resolve("unfocused-selection")]),oi(t,{left:e.left()+"px",top:e.top()+"px",width:e.width()+"px",height:e.height()+"px"}),t},a=function(){Wt(r)};return{update:function(){a();var t=ud(e),n=be(t,i);zt(r,n)},isActive:function(){return 0<Lt(r).length},destroy:function(){o.unbind(),Ut(r)},clear:a}}(n,s),y=function(){b.clear()};return{toEditing:function(){h.toEditing(),y()},toReading:function(){h.toReading()},onToolbarTouch:function(e){h.onToolbarTouch(e)},refreshSelection:function(){b.isActive()&&b.update()},clearSelection:y,highlightSelection:function(){b.update()},scrollIntoView:function(e,t){uh(n,i,f,e,t)},updateToolbarPadding:t,setViewportOffset:function(e){m.setViewportOffset(e),ah(i,e).get(o)},syncHeight:function(){ri(s,"height",s.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:m.refresh,destroy:function(){m.restore(),g.destroy(),v.unbind(),p.unbind(),h.destroy(),b.destroy(),_m(bt(),ro)}}},dh=function(n,r){var o=_d(),i=al(),a=al(),u=il(),s=il();return{enter:function(){r.hide();var c=ut(e.document);xd.getActiveApi(n.editor).each((function(r){i.set({socketHeight:ui(n.socket,"height"),iframeHeight:ui(r.frame(),"height"),outerScroll:e.document.body.scrollTop}),a.set({exclusives:zd(c,"."+gf.scrollable())}),$r(n.container,Go.resolve("fullscreen-maximized")),Sd(n.container,r.body()),o.maximize(),ri(n.socket,"overflow","scroll"),ri(n.socket,"-webkit-overflow-scrolling","touch"),no(r.body());var l=Et(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);u.set(fh(l({cWin:r.win(),ceBody:r.body(),socket:n.socket,toolstrip:n.toolstrip,toolbar:n.toolbar,dropup:n.dropup.element(),contentElement:r.frame(),cursor:t,outerBody:n.body,outerWindow:n.win,keyboardType:Om.stubborn,isScrolling:function(){return a.get().exists((function(e){return e.socket.isScrolling()}))}}))),u.run((function(e){e.syncHeight()})),s.set(function(e,t,n,r,o){var i=function(){t.run((function(e){e.refreshSelection()}))},a=function(e,n){var o=e-r.dom().scrollTop;t.run((function(e){e.scrollIntoView(o,o+n)}))},u=function(){t.run((function(e){e.clearSelection()}))},s=function(){e.getCursorBox().each((function(e){a(e.top(),e.height())})),t.run((function(e){e.syncHeight()}))},c=Ff(e),l=Rd(s,300),f=[e.onKeyup((function(){u(),l.throttle()})),e.onNodeChanged(i),e.onDomChanged(l.throttle),e.onDomChanged(i),e.onScrollToCursor((function(e){e.preventDefault(),l.throttle()})),e.onScrollToElement((function(e){e.element(),a(t,r)})),e.onToEditing((function(){t.run((function(e){e.toEditing()}))})),e.onToReading((function(){t.run((function(e){e.toReading()}))})),Af(e.doc(),"touchend",(function(t){Dt(e.html(),t.target())||Dt(e.body(),t.target())})),Af(n,"transitionend",(function(e){var r;"height"===e.raw().propertyName&&(r=hi(n),t.run((function(e){e.setViewportOffset(r)})),i(),s())})),Pf(n,"touchstart",(function(n){var r;t.run((function(e){e.highlightSelection()})),r=n,t.run((function(e){e.onToolbarTouch(r)})),e.onTouchToolstrip()})),Af(e.body(),"touchstart",(function(t){u(),e.onTouchContent(),c.fireTouchstart(t)})),c.onTouchmove(),c.onTouchend(),Af(e.body(),"click",(function(e){e.kill()})),Af(n,"touchmove",(function(){e.onToolbarScrollStart()}))];return{destroy:function(){ye(f,(function(e){e.unbind()}))}}}(r,u,n.toolstrip,n.socket,n.dropup))}))},refreshStructure:function(){u.run((function(e){e.refreshStructure()}))},exit:function(){o.restore(),s.clear(),u.clear(),r.show(),i.on((function(t){t.socketHeight.each((function(e){ri(n.socket,"height",e)})),t.iframeHeight.each((function(e){ri(n.editor.getFrame(),"height",e)})),e.document.body.scrollTop=t.scrollTop})),i.clear(),a.on((function(e){e.exclusives.unbind()})),a.clear(),qr(n.container,Go.resolve("fullscreen-maximized")),Ed(),gf.deregister(n.toolbar),si(n.socket,"overflow"),si(n.socket,"-webkit-overflow-scrolling"),ro(n.editor.getFrame()),xd.getActiveApi(n.editor).each((function(e){e.clearSelection()}))}}},mh=tinymce.util.Tools.resolve("tinymce.EditorManager"),hh=function(e,t,n){e.system().broadcastOn([co.formatChanged()],{command:t,state:n})},gh=(r(["x-small","small","medium","large","x-large"]),function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}),ph=r("toReading"),vh=r("toEditing");uo.add("mobile",(function(e){return{getNotificationManagerImpl:function(){return{open:r({progressBar:{value:t},close:t}),close:t,reposition:t,getArgs:o}},renderUI:function(n){var o=function(e){var t=gn(e.settings,"skin_url").fold((function(){return mh.baseURL+"/skins/lightgray"}),(function(e){return e}));return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}}(e);0==(!1===e.settings.skin)?(e.contentCSS.push(o.content),ao.DOM.styleSheetLoader.load(o.ui,gh(e))):gh(e)();var i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C=function(){e.fire("scrollIntoView")},k=it("div"),T=He.detect().os.isAndroid()?(d=C,m=km({classes:[Go.resolve("android-container")]}),h=Ud(),g=il(),p=$d(g),v=qd(),b=sm(t,d),m.add(h.wrapper()),m.add(v),m.add(b.component()),{system:r(m),element:m.element,init:function(e){g.set(function(e){var n=zn("Getting AndroidWebapp schema",Ad,e);ri(n.toolstrip,"width","100%");var r=Bl(Od((function(){n.setReadOnly(n.readOnlyOnInit()),i.enter()}),n.translate));n.alloy.add(r);var o={show:function(){n.alloy.add(r)},hide:function(){n.alloy.remove(r)}};Ft(n.container,r.element());var i=Nd(n,o);return{setReadOnly:n.setReadOnly,refreshStructure:t,enter:i.enter,exit:i.exit,destroy:t}}(e))},exit:function(){g.run((function(e){e.exit(),Ql.remove(v,p)}))},setToolbarGroups:function(e){var t=h.createGroups(e);h.setGroups(t)},setContextToolbar:function(e){var t=h.createGroups(e);h.setContextToolbar(t)},focusToolbar:function(){h.focus()},restoreToolbar:function(){h.restoreToolbar()},updateMode:function(e){Yd(v,p,e,m.root())},socket:r(v),dropup:r(b)}):(i=C,a=km({classes:[Go.resolve("ios-container")]}),u=Ud(),s=il(),c=$d(s),l=qd(),f=sm((function(){s.run((function(e){e.refreshStructure()}))}),i),a.add(u.wrapper()),a.add(l),a.add(f.component()),{system:r(a),element:a.element,init:function(e){s.set(function(e){var n=zn("Getting IosWebapp schema",Ad,e);ri(n.toolstrip,"width","100%"),ri(n.container,"position","relative");var r=Bl(Od((function(){n.setReadOnly(n.readOnlyOnInit()),o.enter()}),n.translate));n.alloy.add(r);var o=dh(n,{show:function(){n.alloy.add(r)},hide:function(){n.alloy.remove(r)}});return{setReadOnly:n.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:t}}(e))},exit:function(){s.run((function(e){Ql.remove(l,c),e.exit()}))},setToolbarGroups:function(e){var t=u.createGroups(e);u.setGroups(t)},setContextToolbar:function(e){var t=u.createGroups(e);u.setContextToolbar(t)},focusToolbar:function(){u.focus()},restoreToolbar:function(){u.restoreToolbar()},updateMode:function(e){Yd(l,c,e,a.root())},socket:r(l),dropup:r(f)}),S=ut(n.targetNode);xt("element","offset"),x=k,(w=y=S,A.from(w.dom().nextSibling).map(ut)).fold((function(){It(y).each((function(e){Ft(e,x)}))}),(function(e){var t,n;n=x,It(t=e).each((function(e){e.dom().insertBefore(n.dom(),t.dom())}))})),function(e,t){Ft(e,t.element());var n=Lt(t.element());ye(n,(function(e){t.getByDom(e).each(Vt)}))}(k,T.system());var E=n.targetNode.ownerDocument.defaultView,_=Bf(E,{onChange:function(){T.system().broadcastOn([co.orientationChanged()],{width:If(E)})},onReady:t}),N=function(t,n,r,o){!1===o&&e.selection.collapse();var i=R(t,n,r);T.setToolbarGroups(!0===o?i.readOnly:i.main),e.setMode(!0===o?"readonly":"design"),e.fire(!0===o?ph():vh()),T.updateMode(o)},R=function(e,t,n){var r=e.get();return{readOnly:r.backToMask.concat(t.get()),main:r.backToMask.concat(n.get())}},O=function(t,n){return e.on(t,n),{unbind:function(){e.off(t)}}};return e.on("init",(function(){T.init({editor:{getFrame:function(){return ut(e.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:t}},onToReading:function(e){return O(ph(),e)},onToEditing:function(e){return O(vh(),e)},onScrollToCursor:function(t){return e.on("scrollIntoView",(function(e){t(e)})),{unbind:function(){e.off("scrollIntoView"),_.destroy()}}},onTouchToolstrip:function(){n()},onTouchContent:function(){var t;(t=ut(e.editorContainer.querySelector("."+Go.resolve("toolbar"))),io(t).bind((function(e){return T.system().getByDom(e).toOption()}))).each(et),T.restoreToolbar(),n()},onTapContent:function(t){var n=t.target();"img"===mt(n)?(e.selection.select(n.dom()),t.kill()):"a"===mt(n)&&T.system().getByDom(ut(e.editorContainer)).each((function(e){Jr.isAlpha(e)&&so(n.dom())}))}},container:ut(e.editorContainer),socket:ut(e.contentAreaContainer),toolstrip:ut(e.editorContainer.querySelector("."+Go.resolve("toolstrip"))),toolbar:ut(e.editorContainer.querySelector("."+Go.resolve("toolbar"))),dropup:T.dropup(),alloy:T.system(),translate:t,setReadOnly:function(e){N(l,c,s,e)},readOnlyOnInit:function(){return!1}});var n=function(){T.dropup().disappear((function(){T.system().broadcastOn([co.dropupDismissed()],{})}))},r={label:"The first group",scrollable:!1,items:[Cs("back",(function(){e.selection.collapse(),T.exit()}),{})]},o={label:"Back to read only",scrollable:!1,items:[Cs("readonly-back",(function(){N(l,c,s,!0)}),{})]},i=Ef(T,e),a=_f(e.settings,i),u={label:"The extra group",scrollable:!1,items:[]},s=Zr([{label:"the action group",scrollable:!0,items:a},u]),c=Zr([{label:"The read only mode group",scrollable:!0,items:[]},u]),l=Zr({backToMask:[r],backToReadOnly:[o]});!function(e,t){var n=P(t.formatter.get());ye(n,(function(n){t.formatter.formatChanged(n,(function(t){hh(e,n,t)}))})),ye(["ul","ol"],(function(n){t.selection.selectorChanged(n,(function(t,r){hh(e,n,t)}))}))}(T,e)})),e.on("remove",(function(){T.exit()})),e.on("detach",(function(){var e,t;e=T.system(),t=Lt(e.element()),ye(t,(function(t){e.getByDom(t).each(jt)})),Ut(e.element()),T.system().destroy(),Ut(k)})),{iframeContainer:T.socket().element().dom(),editorContainer:T.element().dom()}}}}))}(window),function(e){"use strict";var t,n,r,o,i=tinymce.util.Tools.resolve("tinymce.ThemeManager"),a=tinymce.util.Tools.resolve("tinymce.EditorManager"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(e){return!1!==c(e)},c=function(e){return e.getParam("menubar")},l=function(e){return e.getParam("toolbar_items_size")},f=function(e){return e.getParam("menu")},d=function(e){return!1===e.settings.skin},m=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.ui.Factory"),p=tinymce.util.Tools.resolve("tinymce.util.I18n"),v=function(e){return e.fire("ResizeEditor")},b=function(e){return e.fire("BeforeRenderUI")},y=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},x=function(e,t){e.shortcuts.add("Alt+F9","",y(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",y(t,"toolbar")),e.shortcuts.add("Alt+F11","",y(t,"elementpath")),t.on("cancel",(function(){e.focus()}))},w=tinymce.util.Tools.resolve("tinymce.geom.Rect"),C=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=function(){},T=function(e){return function(){return e}},S=T(!1),E=T(!0),_=function(){return N},N=(t=function(e){return e.isNone()},o={fold:function(e,t){return e()},is:S,isSome:S,isNone:E,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:T(null),getOrUndefined:T(void 0),or:r,orThunk:n,map:_,each:k,bind:_,exists:S,forall:E,filter:_,equals:t,equals_:t,toArray:function(){return[]},toString:T("none()")},Object.freeze&&Object.freeze(o),o),R=function(e){var t=T(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:E,isNone:S,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return R(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:N},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(S,(function(t){return n(e,t)}))}};return o},O={some:R,none:_,from:function(e){return null==e?N:R(e)}},A=function(e){return e?e.getRoot().uiContainer:null},P=function(e){var t=A(e);if(t&&"static"!==h.DOM.getStyle(t,"position",!0)){var n=h.DOM.getPos(t),r=t.scrollLeft-n.x,o=t.scrollTop-n.y;return O.some({x:r,y:o})}return O.none()},D=function(e,t){var n=h.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},M=A,B=function(e,t){return t.uiContainer=A(e)},I=function(e,t,n){var r,o=[];if(t)return u.each(t.split(/[ ,]/),(function(t){var i,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,(function(e){t.active(e)}),!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,(function(e){t.disabled(e)}))};"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},o.push(r)),e.buttons[t]&&(i=t,"function"==typeof(t=e.buttons[i])&&(t=t()),t.type=t.type||"button",t.size=n,t=g.create(t),r.items.push(t),e.initialized?a():e.on("init",a)))})),{type:"toolbar",layout:"flow",items:o}},L=I,H=function(e,t){var n,r,o=[];if(u.each(!1===(r=(n=e).getParam("toolbar"))?[]:u.isArray(r)?u.grep(r,(function(e){return 0<e.length})):function(e,t){for(var n=[],r=1;r<10;r++){var o=e["toolbar"+r];if(!o)break;n.push(o)}var i=e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"];return 0<n.length?n:i}(n.settings),(function(n){var r;(r=n)&&o.push(I(e,r,t))})),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}},F=h.DOM,z=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},W=function(e,t){e.moveTo(t.left,t.top)},U=function(e,t,n,r,o,i){return i=z({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:z(r),contentAreaRect:z(o),panelRect:i})),i},j=function(e){var t,n=function(){return e.contextToolbars||[]},r=function(t,n){var r,o,i,a,s,c,l,f=e.getParam("inline_toolbar_position_handler");if(!e.removed){if(!t||!t.toolbar.panel)return d=e,void u.each(d.contextToolbars,(function(e){e.panel&&e.panel.hide()}));var d,m,h,g,p;l=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],s=t.toolbar.panel,n&&s.show(),m=t.element,h=F.getPos(e.getContentAreaContainer()),g=e.dom.getRect(m),"BODY"===(p=e.dom.getRoot()).nodeName&&(g.x-=p.ownerDocument.documentElement.scrollLeft||p.scrollLeft,g.y-=p.ownerDocument.documentElement.scrollTop||p.scrollTop),g.x+=h.x,g.y+=h.y,i=g,o=F.getRect(s.getEl()),a=F.getRect(e.getContentAreaContainer()||e.getBody());var v,b,y,x=P(s).getOr({x:0,y:0});if(i.x+=x.x,i.y+=x.y,o.x+=x.x,o.y+=x.y,a.x+=x.x,a.y+=x.y,"inline"!==F.getStyle(t.element,"display",!0)){var C=t.element.getBoundingClientRect();i.w=C.width,i.h=C.height}e.inline||(a.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&i.w<25&&(i=w.inflate(i,0,8)),r=w.findBestRelativePosition(o,i,a,l),i=w.clamp(i,a),r?(c=w.relativePosition(o,i,r),W(s,U(f,c.x,c.y,i,a,o))):(a.h+=o.h,(i=w.intersect(a,i))?(r=w.findBestRelativePosition(o,i,a,["bc-tc","bl-tl","br-tr"]))?(c=w.relativePosition(o,i,r),W(s,U(f,c.x,c.y,i,a,o))):W(s,U(f,i.x,i.y,i,a,o)):s.hide()),v=s,y=function(e,t){return e===t},b=(b=r)?b.substr(0,2):"",u.each({t:"down",b:"up"},(function(e,t){v.classes.toggle("arrow-"+e,y(t,b.substr(0,1)))})),u.each({l:"left",r:"right"},(function(e,t){v.classes.toggle("arrow-"+e,y(t,b.substr(1,1)))}))}},o=function(t){return function(){C.requestAnimationFrame((function(){e.selection&&r(a(e.selection.getNode()),t)}))}},i=function(){u.each(n(),(function(e){e.panel&&e.panel.hide()}))},a=function(t){var r,o,i,a=n();for(r=(i=e.$(t).parents().add(t)).length-1;0<=r;r--)for(o=a.length-1;0<=o;o--)if(a[o].predicate(i[r]))return{toolbar:a[o],element:i[r]};return null};e.on("click keyup setContent ObjectResized",(function(n){("setcontent"!==n.type||n.selection)&&C.setEditorTimeout(e,(function(){var n;(n=a(e.selection.getNode()))?(i(),function(n){var i;if(n.toolbar.panel)return n.toolbar.panel.show(),void r(n);i=g.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:L(e,n.toolbar.items),oncancel:function(){e.focus()}}),D(e,i),function(n){if(!t){var r=o(!0),i=M(n);t=e.selection.getScrollContainer()||e.getWin(),F.bind(t,"scroll",r),F.bind(i,"scroll",r),e.on("remove",(function(){F.unbind(t,"scroll",r),F.unbind(i,"scroll",r)}))}}(i),(n.toolbar.panel=i).renderTo().reflow(),r(n)}(n)):i()}))})),e.on("blur hide contextmenu",i),e.on("ObjectResizeStart",(function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()})),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",(function(){u.each(n(),(function(e){e.panel&&e.panel.remove()})),e.contextToolbars={}})),e.shortcuts.add("ctrl+F9","",(function(){var t=a(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()}))},V=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},$=V("array"),q=V("function"),Y=V("number"),X=(Array.prototype.slice,Array.prototype.indexOf),G=Array.prototype.push,K=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},J=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},Z=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},Q=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},ee=(q(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),te=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},ne=function(e){return e&&"|"===e.item.text},re=function(e,t,n,r){var o,i,a,s,c,l,f;return t?(i=t[r],s=!0):i=ee[r],i&&(o={text:i.title},a=[],u.each((i.items||"").split(/[ ,]/),(function(t){var n=te(t,e[t]);n&&a.push(n)})),s||u.each(e,(function(e,t){e.context!==r||function(e,t){return function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return O.some(n);return O.none()}(e,(function(e){return e.name===t})).isSome()}(a,t)||("before"===e.separator&&a.push({name:"|",item:{text:"|"}}),e.prependToContext?a.unshift(te(t,e)):a.push(te(t,e)),"after"===e.separator&&a.push({name:"|",item:{text:"|"}}))})),o.menu=J((c=n,l=Q(a,(function(e){return!1===c.hasOwnProperty(e.name)})),f=Q(l,(function(e,t){return!ne(e)||!ne(l[t-1])})),Q(f,(function(e,t){return!ne(e)||0<t&&t<f.length-1}))),(function(e){return e.item})),!o.menu.length)?null:o},oe=function(e){for(var t,n=[],r=function(e){var t,n=[],r=f(e);if(r)for(t in r)n.push(t);else for(t in ee)n.push(t);return n}(e),o=u.makeMap((t=e,t.getParam("removed_menuitems","")).split(/[ ,]/)),i=c(e),a="string"==typeof i?i.split(/[ ,]/):r,s=0;s<a.length;s++){var l=a[s],d=re(e.menuItems,f(e),o,l);d&&n.push(d)}return n},ie=h.DOM,ae=function(e){return{width:e.clientWidth,height:e.clientHeight}},ue=function(e,t,n){var r,o,i,a;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=ae(r),a=ae(o),null!==t&&(t=Math.max(e.getParam("min_width",100,"number"),t),t=Math.min(e.getParam("max_width",65535,"number"),t),ie.setStyle(r,"width",t+(i.width-a.width)),ie.setStyle(o,"width",t)),n=Math.max(e.getParam("min_height",100,"number"),n),n=Math.min(e.getParam("max_height",65535,"number"),n),ie.setStyle(o,"height",n),v(e)},se=ue,ce=tinymce.util.Tools.resolve("tinymce.Env"),le=function(e,t,n){var r,o=e.settings[n];o&&o((r=t.getEl("body"),{element:function(){return r}}))},fe=function(e,t,n){return function(r){var o,i,a,s,c,l=r.control,f=l.parents().filter("panel")[0],d=f.find("#"+t)[0],m=(o=n,i=t,u.grep(o,(function(e){return e.name===i}))[0]);a=t,s=f,c=n,u.each(c,(function(e){var t=s.items().filter("#"+e.name)[0];t&&t.visible()&&e.name!==a&&(le(e,t,"onhide"),t.visible(!1))})),l.parent().items().each((function(e){e.active(!1)})),d&&d.visible()?(le(m,d,"onhide"),d.hide(),l.active(!1)):(d?d.show():(d=g.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),f.prepend(d),le(m,d,"onrender")),le(m,d,"onshow"),l.active(!0)),v(e)}},de=function(e){return!(ce.ie&&!(11<=ce.ie)||!e.sidebars)&&0<e.sidebars.length},me=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:u.map(e.sidebars,(function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:fe(e,t.name,e.sidebars)}}))}]}},he=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},ge=h.DOM,pe=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},ve=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),be=0,ye={id:function(){return"mceu_"+be++},create:function(t,n,r){var o=e.document.createElement(t);return h.DOM.setAttribs(o,n),"string"==typeof r?o.innerHTML=r:u.each(r,(function(e){e.nodeType&&o.appendChild(e)})),o},createFragment:function(e){return h.DOM.createFragment(e)},getWindowSize:function(){return h.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return h.DOM.getPos(e,t||ye.getContainer())},getContainer:function(){return ce.container?ce.container:e.document.body},getViewPort:function(e){return h.DOM.getViewPort(e)},get:function(t){return e.document.getElementById(t)},addClass:function(e,t){return h.DOM.addClass(e,t)},removeClass:function(e,t){return h.DOM.removeClass(e,t)},hasClass:function(e,t){return h.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return h.DOM.toggleClass(e,t,n)},css:function(e,t,n){return h.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return h.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return h.DOM.bind(e,t,n,r)},off:function(e,t,n){return h.DOM.unbind(e,t,n)},fire:function(e,t,n){return h.DOM.fire(e,t,n)},innerHtml:function(e,t){h.DOM.setHTML(e,t)}},xe=function(e){return"static"===ye.getRuntimeStyle(e,"position")},we=function(e){return e.state.get("fixed")};function Ce(t,n,r){var o,i,a,u,s,c,l,f,d,m;return d=ke(),a=(i=ye.getPos(n,M(t))).x,u=i.y,we(t)&&xe(e.document.body)&&(a-=d.x,u-=d.y),o=t.getEl(),s=(m=ye.getSize(o)).width,c=m.height,l=(m=ye.getSize(n)).width,f=m.height,"b"===(r=(r||"").split(""))[0]&&(u+=f),"r"===r[1]&&(a+=l),"c"===r[0]&&(u+=Math.round(f/2)),"c"===r[1]&&(a+=Math.round(l/2)),"b"===r[3]&&(u-=c),"r"===r[4]&&(a-=s),"c"===r[3]&&(u-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(s/2)),{x:a,y:u,w:s,h:c}}var ke=function(){var t=e.window;return{x:Math.max(t.pageXOffset,e.document.body.scrollLeft,e.document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,e.document.body.scrollTop,e.document.documentElement.scrollTop),w:t.innerWidth||e.document.documentElement.clientWidth,h:t.innerHeight||e.document.documentElement.clientHeight}},Te=function(e){var t,n=M(e);return n&&!we(e)?{x:0,y:0,w:(t=n).scrollWidth-1,h:t.scrollHeight-1}:ke()},Se={testMoveRel:function(e,t){for(var n=Te(this),r=0;r<t.length;r++){var o=Ce(this,e,t[r]);if(we(this)){if(0<o.x&&o.x+o.w<n.w&&0<o.y&&o.y+o.h<n.h)return t[r]}else if(o.x>n.x&&o.x+o.w<n.w+n.x&&o.y>n.y&&o.y+o.h<n.h+n.y)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=Ce(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){var n=this;function r(e,t,n){return e<0||t<e+n&&(e=t-n)<0?0:e}if(n.settings.constrainToViewport){var o=Te(this),i=n.layoutRect();e=r(e,o.w+o.x,i.w),t=r(t,o.h+o.y,i.h)}var a=M(n);return a&&xe(a)&&!we(n)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),n.state.get("rendered")?n.layoutRect({x:e,y:t}).repaint():(n.settings.x=e,n.settings.y=t),n.fire("move",{x:e,y:t}),n}},Ee=tinymce.util.Tools.resolve("tinymce.util.Class"),_e=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Ne=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Re=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,(function(e){return"-"+e})),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function Oe(){}function Ae(e){this.cls=[],this.cls._map={},this.onchange=e||Oe,this.prefix=""}u.extend(Ae.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Ae.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e};var Pe,De,Me,Be=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Ie=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Le=/^\s*|\s*$/g,He=Ee.extend({init:function(e){var t=this.match;function n(e,n,o){var i;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((i=Be.exec(e.replace(Le,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(i[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(i[3])),a(function(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?0<=o.indexOf(n):"~="===t?0<=(" "+o+" ").indexOf(" "+n+" "):"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}(i[4],i[5],i[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=r(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(i[7])),n.pseudo=!!i[7],n.direct=o,n}function r(e,t){var o,i,a,u=[];do{if(Ie.exec(""),(i=Ie.exec(e))&&(e=i[3],u.push(i[1]),i[2])){o=i[3];break}}while(i);for(o&&r(o,t),e=[],a=0;a<u.length;a++)">"!==u[a]&&e.push(n(u[a],[],">"===u[a-1]));return t.push(e),t}this._selectors=r(e,[])},match:function(e,t){var n,r,o,i,a,u,s,c,l,f,d,m,h;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(h=e,m=0,o=(i=(a=t[n]).length)-1;0<=o;o--)for(c=a[o];h;){if(c.pseudo)for(l=f=(d=h.parent().items()).length;l--&&d[l]!==h;);for(u=0,s=c.length;u<s;u++)if(!c[u](h,l,f)){u=s+1;break}if(u===s){m++;break}if(o===i-1)break;h=h.parent()}if(m===i)return!0}return!1},find:function(e){var t,n,r=[],o=this._selectors;function i(e,t,n){var o,a,u,s,c,l=t[n];for(o=0,a=e.length;o<a;o++){for(c=e[o],u=0,s=l.length;u<s;u++)if(!l[u](c,o,a)){u=s+1;break}if(u===s)n===t.length-1?r.push(c):c.items&&i(c.items(),t,n+1);else if(l.direct)return;c.items&&i(c.items(),t,n)}}if(e.items){for(t=0,n=o.length;t<n;t++)i(e.items(),o[t],0);1<n&&(r=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Pe||(Pe=He.Collection),new Pe(r)}}),Fe=Array.prototype.push,ze=Array.prototype.slice;Me={length:0,init:function(e){e&&this.add(e)},add:function(e){return u.isArray(e)?Fe.apply(this,e):e instanceof De?this.add(e.toArray()):Fe.call(this,e),this},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(e){var t,n,r,o,i=[];for("string"==typeof e?(e=new He(e),o=function(t){return e.match(t)}):o=e,t=0,n=this.length;t<n;t++)o(r=this[t])&&i.push(r);return new De(i)},slice:function(){return new De(ze.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return u.each(this,e),this},toArray:function(){return u.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new De(u.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each((function(n){n[e]&&n[e](t)})),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=u.toArray(arguments).slice(1);return this.each((function(n){n[e]&&n[e].apply(n,t)})),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each((function(t){t.classes.add(e)}))},removeClass:function(e){return this.each((function(t){t.classes.remove(e)}))}},u.each("fire on off show hide append prepend before after reflow".split(" "),(function(e){Me[e]=function(){var t=u.toArray(arguments);return this.each((function(n){e in n&&n[e].apply(n,t)})),this}})),u.each("text name disabled active selected checked visible parent value data".split(" "),(function(e){Me[e]=function(t){return this.prop(e,t)}})),De=Ee.extend(Me);var We=He.Collection=De,Ue=function(e){this.create=e.create};Ue.create=function(e,t){return new Ue({create:function(n,r){var o,i=function(e){n.set(r,e.value)};return n.on("change:"+r,(function(n){e.set(t,n.value)})),e.on("change:"+t,i),(o=n._bindings)||(o=n._bindings=[],n.on("destroy",(function(){for(var e=o.length;e--;)o[e]()}))),o.push((function(){e.off("change:"+t,i)})),e.get(t)}})};var je=tinymce.util.Tools.resolve("tinymce.util.Observable");function Ve(e){return 0<e.nodeType}var $e,qe,Ye=Ee.extend({Mixins:[je],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof Ue&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r,o=this.data[e];if(t instanceof Ue&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var r,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(u.isArray(n)){if(t.length!==n.length)return!1;for(r=t.length;r--;)if(!e(t[r],n[r]))return!1}if(Ve(t)||Ve(n))return t===n;for(r in o={},n){if(!e(t[r],n[r]))return!1;o[r]=!0}for(r in t)if(!o[r]&&!e(t[r],n[r]))return!1;return!0}(o,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return Ue.create(this,e)},destroy:function(){this.fire("destroy")}}),Xe={},Ge={add:function(t){var n=t.parent();if(n){if(!n._layout||n._layout.isNative())return;Xe[n._id]||(Xe[n._id]=n),$e||($e=!0,C.requestAnimationFrame((function(){var e,t;for(e in $e=!1,Xe)(t=Xe[e]).state.get("rendered")&&t.reflow();Xe={}}),e.document.body))}},remove:function(e){Xe[e._id]&&delete Xe[e._id]}},Ke="onmousewheel"in e.document,Je=0,Ze={Statics:{classPrefix:"mce-"},isRtl:function(){return qe.rtl},classPrefix:"mce-",init:function(e){var t,n,r=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)r.classes.add(e[t])}r.settings=e=u.extend({},r.Defaults,e),r._id=e.id||"mceu_"+Je++,r._aria={role:e.role},r._elmCache={},r.$=ve,r.state=new Ye({visible:!0,active:!1,disabled:!1,value:""}),r.data=new Ye(e.data),r.classes=new Ae((function(){r.state.get("rendered")&&(r.getEl().className=this.toString())})),r.classes.prefix=r.classPrefix,(t=e.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&t!==n&&o(n),o(t)),u.each("title text name visible disabled active value".split(" "),(function(t){t in e&&r[t](e[t])})),r.on("click",(function(){if(r.disabled())return!1})),r.settings=e,r.borderBox=Ne(e.border),r.paddingBox=Ne(e.padding),r.marginBox=Ne(e.margin),e.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){return M(this)||ye.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,u,s,c,l=this,f=l.settings,d=l.getEl();e=l.borderBox=l.borderBox||Re(d,"border"),l.paddingBox=l.paddingBox||Re(d,"padding"),l.marginBox=l.marginBox||Re(d,"margin"),c=ye.getSize(d),u=f.minWidth,s=f.minHeight,o=u||c.width,i=s||c.height,n=f.width,r=f.height,a=void 0!==(a=f.autoResize)?a:!n&&!r,n=n||o,r=r||i;var m=e.left+e.right,h=e.top+e.bottom,g=f.maxWidth||65535,p=f.maxHeight||65535;return l._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:r,deltaW:m,deltaH:h,contentW:n-m,contentH:r-h,innerW:n-m,innerH:r-h,startMinWidth:u||0,startMinHeight:s||0,minW:Math.min(o,g),minH:Math.min(i,p),maxW:g,maxH:p,autoResize:a,scrollW:0},l._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,i,a=this,u=a._layoutRect;return u||(u=a.initLayoutRect()),e?(r=u.deltaW,o=u.deltaH,void 0!==e.x&&(u.x=e.x),void 0!==e.y&&(u.y=e.y),void 0!==e.minW&&(u.minW=e.minW),void 0!==e.minH&&(u.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<u.minW?u.minW:n)>u.maxW?u.maxW:n,u.w=n,u.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<u.minH?u.minH:n)>u.maxH?u.maxH:n,u.h=n,u.innerH=n-o),void 0!==(n=e.innerW)&&(n=(n=n<u.minW-r?u.minW-r:n)>u.maxW-r?u.maxW-r:n,u.innerW=n,u.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<u.minH-o?u.minH-o:n)>u.maxH-o?u.maxH-o:n,u.innerH=n,u.h=n+o),void 0!==e.contentW&&(u.contentW=e.contentW),void 0!==e.contentH&&(u.contentH=e.contentH),(t=a._lastLayoutRect).x===u.x&&t.y===u.y&&t.w===u.w&&t.h===u.h||((i=qe.repaintControls)&&i.map&&!i.map[a._id]&&(i.push(a),i.map[a._id]=!0),t.x=u.x,t.y=u.y,t.w=u.w,t.h=u.h),a):u},repaint:function(){var t,n,r,o,i,a,u,s,c,l,f=this;c=e.document.createRange?function(e){return e}:Math.round,t=f.getEl().style,o=f._layoutRect,s=f._lastRepaintRect||{},a=(i=f.borderBox).left+i.right,u=i.top+i.bottom,o.x!==s.x&&(t.left=c(o.x)+"px",s.x=o.x),o.y!==s.y&&(t.top=c(o.y)+"px",s.y=o.y),o.w!==s.w&&(l=c(o.w-a),t.width=(0<=l?l:0)+"px",s.w=o.w),o.h!==s.h&&(l=c(o.h-u),t.height=(0<=l?l:0)+"px",s.h=o.h),f._hasBody&&o.innerW!==s.innerW&&(l=c(o.innerW),(r=f.getEl("body"))&&((n=r.style).width=(0<=l?l:0)+"px"),s.innerW=o.innerW),f._hasBody&&o.innerH!==s.innerH&&(l=c(o.innerH),(r=r||f.getEl("body"))&&((n=n||r.style).height=(0<=l?l:0)+"px"),s.innerH=o.innerH),f._lastRepaintRect=s,f.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,ye.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n,r,o,i=this;return Qe(i).on(e,"string"!=typeof(n=t)?n:function(e){return r||i.parentsAndSelf().each((function(e){var t=e.settings.callbacks;if(t&&(r=t[n]))return o=e,!1})),r?r.call(o,e):(e.action=n,void this.fire("execute",e))}),i},off:function(e,t){return Qe(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Qe(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Qe(this).has(e)},parents:function(e){var t,n=new We;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new We(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=ve("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))},translate:function(e){return qe.translate?qe.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,r=n.getEl(),o=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}o&&o.items&&(e=[],o.items().each((function(t){t!==n&&e.push(t)})),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&ve(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return ve(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return ve(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i=this,a=i.settings;for(r in i.$el=ve(i.getEl()),i.state.set("rendered",!0),a)0===r.indexOf("on")&&i.on(r.substr(2),a[r]);if(i._eventsRoot){for(n=i.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)i._nativeEvents[r]=!0}et(i),a.style&&(e=i.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var u=i.getRoot();for(var s in u.controlIdLookup||(u.controlIdLookup={}),(u.controlIdLookup[i._id]=i)._aria)i.aria(s,i._aria[s]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",(function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===n?"none":"",i.getEl().getBoundingClientRect()),(t=i.parent())&&(t._lastRect=null),i.fire(n?"show":"hide"),Ge.add(i)})),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,u=this.getEl(),s=u.parentNode,c=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(u,s);return t=c.x,n=c.y,r=u.offsetWidth,o=u.offsetHeight,i=s.clientWidth,a=s.clientHeight,"end"===e?(t-=i-r,n-=a-o):"center"===e&&(t-=i/2-r/2,n-=a/2-o/2),s.scrollLeft=t,s.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),t=(e=t).parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){Ge.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Qe(e){return e._eventDispatcher||(e._eventDispatcher=new _e({scope:e,toggleEvent:function(t,n){n&&_e.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&et(e))}})),e._eventDispatcher}function et(e){var t,n,r,o,i,a;function u(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function s(){var e=o._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each((function(e){e.fire("mouseleave",{target:e.getEl()})})),o._lastHoverCtrl=null)}function c(t){var n,r,i,a=e.getParentCtrl(t.target),u=o._lastHoverCtrl,s=0;if(a!==u){if((r=(o._lastHoverCtrl=a).parents().toArray().reverse()).push(a),u){for((i=u.parents().toArray().reverse()).push(u),s=0;s<i.length&&r[s]===i[s];s++);for(n=i.length-1;s<=n;n--)(u=i[n]).fire("mouseleave",{target:u.getEl()})}for(n=s;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function l(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(i=e._nativeEvents){for((r=e.parents().toArray()).unshift(e),t=0,n=r.length;!o&&t<n;t++)o=r[t]._eventsRoot;for(o||(o=r[r.length-1]||e),e._eventsRoot=o,n=t,t=0;t<n;t++)r[t]._eventsRoot=o;var f=o._delegates;for(a in f||(f=o._delegates={}),i){if(!i)return!1;"wheel"!==a?("mouseenter"===a||"mouseleave"===a?o._hasMouseEnter||(ve(o.getEl()).on("mouseleave",s).on("mouseover",c),o._hasMouseEnter=1):f[a]||(ve(o.getEl()).on(a,u),f[a]=!0),i[a]=!1):Ke?ve(e.getEl()).on("mousewheel",l):ve(e.getEl()).on("DOMMouseScroll",l)}}}u.each("text title visible disabled active value".split(" "),(function(e){Ze[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}));var tt=qe=Ee.extend(Ze),nt=function(e){return!!e.getAttribute("data-mce-tabstop")};function rt(t){var n,r,o=t.root;function i(e){return e&&1===e.nodeType}try{n=e.document.activeElement}catch(t){n=e.document.body}function a(e){return i(e=e||n)?e.getAttribute("role"):null}function u(e){for(var t,r=e||n;r=r.parentNode;)if(t=a(r))return t}function s(e){var t=n;if(i(t))return t.getAttribute("aria-"+e)}function c(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function l(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){var r;(c(r=n)&&!r.hidden||nt(r)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(a(r)))&&t.push(n);for(var o=0;o<n.childNodes.length;o++)e(n.childNodes[o])}}(e||o.getEl()),t}function f(e){var t,n;(n=(e=e||r).parents().toArray()).unshift(e);for(var o=0;o<n.length&&!(t=n[o]).settings.ariaRoot;o++);return t}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function m(e,t){var r=-1,o=f();t=t||l(o.getEl());for(var i=0;i<t.length;i++)t[i]===n&&(r=i);r+=e,o.lastAriaIndex=d(r,t)}function h(){"tablist"===u()?m(-1,l(n.parentNode)):r.parent().submenu?b():m(-1)}function g(){var e=a(),t=u();"tablist"===t?m(1,l(n.parentNode)):"menuitem"===e&&"menu"===t&&s("haspopup")?y():m(1)}function p(){m(-1)}function v(){var e=a(),t=u();"menuitem"===e&&"menubar"===t?y():"button"===e&&s("haspopup")?y({key:"down"}):m(1)}function b(){r.fire("cancel")}function y(e){e=e||{},r.fire("click",{target:n,aria:e})}return r=o.getParentCtrl(n),o.on("keydown",(function(e){function t(e,t){c(n)||nt(n)||"slider"!==a(n)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,h);break;case 39:t(e,g);break;case 38:t(e,p);break;case 40:t(e,v);break;case 27:b();break;case 14:case 13:case 32:t(e,y);break;case 9:!function(e){if("tablist"===u()){var t=l(r.getEl("body"))[0];t&&t.focus()}else m(e.shiftKey?-1:1)}(e),e.preventDefault()}})),o.on("focusin",(function(e){n=e.target,r=e.control})),{focusFirst:function(e){var t=f(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?d(t.lastAriaIndex,n):d(0,n)}}}var ot={},it=tt.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new We,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Ae((function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())})),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=g.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=ot[e]=ot[e]||new He(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r,o=this;if(!e||!(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav))return r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each((function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)})),t&&t.focus(),o;n.focusFirst(o)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}0<=o&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return u.isArray(e)||(e=[e]),u.each(e,(function(e){e&&(e instanceof tt||("string"==typeof e&&(e={type:e}),t=u.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=g.create(t)),r.push(e))})),r},renderNew:function(){var e=this;return e.items().each((function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?ve(r.childNodes[n]).before(t.renderHtml()):ve(r).append(t.renderHtml()),t.postRender(),Ge.add(t))})),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,o,i;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each((function(t){var n=t.name(),r=t.value();n&&void 0!==r&&(e[n]=r)})),e},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=rt({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(Ge.remove(this),this.visible()){for(tt.repaintControls=[],tt.repaintControls.map={},this.recalc(),e=tt.repaintControls.length;e--;)tt.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),tt.repaintControls=[]}return this}});function at(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function ut(t,n){var r,o,i,a,u,s,c,l=n.document||e.document;n=n||{};var f=l.getElementById(n.handle||t);i=function(t){var i,d,m,h,g,p,v,b,y,x,w,C=(i=l,y=Math.max,d=i.documentElement,m=i.body,h=y(d.scrollWidth,m.scrollWidth),g=y(d.clientWidth,m.clientWidth),p=y(d.offsetWidth,m.offsetWidth),v=y(d.scrollHeight,m.scrollHeight),b=y(d.clientHeight,m.clientHeight),{width:h<p?g:h,height:v<y(d.offsetHeight,m.offsetHeight)?b:v});at(t),t.preventDefault(),o=t.button,x=f,s=t.screenX,c=t.screenY,w=e.window.getComputedStyle?e.window.getComputedStyle(x,null).getPropertyValue("cursor"):x.runtimeStyle.cursor,r=ve("<div></div>").css({position:"absolute",top:0,left:0,width:C.width,height:C.height,zIndex:2147483647,opacity:1e-4,cursor:w}).appendTo(l.body),ve(l).on("mousemove touchmove",u).on("mouseup touchend",a),n.start(t)},u=function(e){if(at(e),e.button!==o)return a(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-c,e.preventDefault(),n.drag(e)},a=function(e){at(e),ve(l).off("mousemove touchmove",u).off("mouseup touchend",a),r.remove(),n.stop&&n.stop(e)},this.destroy=function(){ve(f).off()},ve(f).on("mousedown touchstart",i)}var st,ct,lt,ft,dt={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this;function t(){var t,n,r;function o(r,o,i,a,u,s){var c,l,f,d,m,h,g,p;if(l=e.getEl("scroll"+r)){if(g=o.toLowerCase(),p=i.toLowerCase(),ve(e.getEl("absend")).css(g,e.layoutRect()[a]-1),!u)return void ve(l).css("display","none");ve(l).css("display","block"),c=e.getEl("body"),f=e.getEl("scroll"+r+"t"),d=c["client"+i]-4,m=(d-=t&&n?l["client"+s]:0)/c["scroll"+i],(h={})[g]=c["offset"+o]+2,h[p]=d,ve(l).css(h),(h={})[g]=c["scroll"+o]*m,h[p]=d*m,ve(f).css(h)}}r=e.getEl("body"),t=r.scrollWidth>r.clientWidth,n=r.scrollHeight>r.clientHeight,o("h","Left","Width","contentW",t,"Height"),o("v","Top","Height","contentH",n,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function t(t,n,r,o,i){var a,u=e._id+"-scroll"+t,s=e.classPrefix;ve(e.getEl()).append('<div id="'+u+'" class="'+s+"scrollbar "+s+"scrollbar-"+t+'"><div id="'+u+'t" class="'+s+'scrollbar-thumb"></div></div>'),e.draghelper=new ut(u+"t",{start:function(){a=e.getEl("body")["scroll"+n],ve("#"+u).addClass(s+"active")},drag:function(u){var s,c,l,f,d=e.layoutRect();c=d.contentW>d.innerW,l=d.contentH>d.innerH,f=e.getEl("body")["client"+r]-4,s=(f-=c&&l?e.getEl("scroll"+t)["client"+i]:0)/e.getEl("body")["scroll"+r],e.getEl("body")["scroll"+n]=a+u["delta"+o]/s},stop:function(){ve("#"+u).removeClass(s+"active")}})}e.classes.add("scroll"),t("v","Top","Height","Y","Width"),t("h","Left","Width","X","Height")}(),e.on("wheel",(function(n){var r=e.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,t()})),ve(e.getEl("body")).on("scroll",t)),t())}},mt=it.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[dt],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),ht={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ye.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},gt=[],pt=[];function vt(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function bt(e){var t=ye.getViewPort().y;function n(t,n){for(var r,o=0;o<gt.length;o++)if(gt[o]!==e)for(r=gt[o].parent();r&&(r=r.parent());)r===e&&gt[o].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function yt(e,t){var n,r,o=xt.zIndex||65535;if(e)pt.push(t);else for(n=pt.length;n--;)pt[n]===t&&pt.splice(n,1);if(pt.length)for(n=0;n<pt.length;n++)pt[n].modal&&(o++,r=pt[n]),pt[n].getEl().style.zIndex=o,pt[n].zIndex=o,o++;var i=ve("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?ve(i).css("z-index",r.zIndex-1):i&&(i.parentNode.removeChild(i),ft=!1),xt.currentZIndex=o}var xt=mt.extend({Mixins:[Se,ht],init:function(t){var n=this;n._super(t),(n._eventsRoot=n).classes.add("floatpanel"),t.autohide&&(st||(st=function(e){2!==e.button&&function(e){for(var t=gt.length;t--;){var n=gt[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(vt(r,n)||n.parent()===r))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},ve(e.document).on("click touchstart",st)),function(){if(!lt){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;lt=function(){e.document.all&&n===t.clientWidth&&r===t.clientHeight||(n=t.clientWidth,r=t.clientHeight,xt.hideAll())},ve(e.window).on("resize",lt)}}(),gt.push(n)),t.autofix&&(ct||(ct=function(){var e;for(e=gt.length;e--;)bt(gt[e])},ve(e.window).on("scroll",ct)),n.on("move",(function(){bt(this)}))),n.on("postrender show",(function(e){if(e.control===n){var t,r=n.classPrefix;n.modal&&!ft&&((t=ve("#"+r+"modal-block",n.getContainerElm()))[0]||(t=ve('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(n.getContainerElm())),C.setTimeout((function(){t.addClass(r+"in"),ve(n.getEl()).addClass(r+"in")})),ft=!0),yt(!0,n)}})),n.on("show",(function(){n.parents().each((function(e){if(e.state.get("fixed"))return n.fixed(!0),!1}))})),t.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.classes.add("popover").add("bottom").add(n.isRtl()?"end":"start")),n.aria("label",t.ariaLabel),n.aria("labelledby",n._id),n.aria("describedby",n.describedBy||n._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=ye.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this._super();for(e=gt.length;e--&&gt[e]!==this;);return-1===e&&gt.push(this),t},hide:function(){return wt(this),yt(!1,this),this._super()},hideAll:function(){xt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),yt(!1,this)),this},remove:function(){wt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function wt(e){var t;for(t=gt.length;t--;)gt[t]===e&&gt.splice(t,1);for(t=pt.length;t--;)pt[t]===e&&pt.splice(t,1)}xt.hideAll=function(){for(var e=gt.length;e--;){var t=gt[e];t&&t.settings.autohide&&(t.hide(),gt.splice(e,1))}};function Ct(e,t){var n,r,o=this,i=tt.classPrefix;o.show=function(a,u){function s(){n&&(ve(e).append('<div class="'+i+"throbber"+(t?" "+i+"throbber-inline":"")+'"></div>'),u&&u())}return o.hide(),n=!0,a?r=C.setTimeout(s,a):s(),o},o.hide=function(){var t=e.lastChild;return C.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}var kt=function(e,t,n){var r=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var o=n||"lightgray";r=r?e.documentBaseURI.toAbsolute(r):a.baseURL+"/skins/"+o}return r}(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),function(e,t){var n;e.on("ProgressState",(function(e){n=n||new Ct(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()}))}(e,t),e.getParam("inline",!1,"boolean")?function(e,t,n){var r,o,i=h.DOM,a=e.getParam("fixed_toolbar_container");a&&(o=i.select(a)[0]);var u=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,a=0;if(t){var u=i.getPos(n),s=i.getPos(t);o=Math.max(0,s.x-u.x),a=Math.max(0,s.y-u.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,a)}},c=function(){r&&(r.show(),u(),i.addClass(e.getBody(),"mce-edit-focus"))},f=function(){r&&(r.hide(),xt.hideAll(),i.removeClass(e.getBody(),"mce-edit-focus"))},m=function(){var n,i;r?r.visible()||c():(r=t.panel=g.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:(n=o,i=e,!(!n||i.settings.ui_container)),border:1,items:[!1===s(e)?null:{type:"menubar",border:"0 0 1 0",items:oe(e)},H(e,l(e))]}),D(e,r),b(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),x(e,r),c(),j(e),e.on("nodeChange",u),e.on("ResizeWindow",u),e.on("activate",c),e.on("deactivate",f),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",(function(){!1===d(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,m,m):m()})),e.on("blur hide",f),e.on("remove",(function(){r&&(r.remove(),r=null)})),!1===d(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,he(e)):he(e)(),{}}(e,t,n):function(e,t,n){var r,o,i,a,u;if(!1===d(e)&&n.skinUiCss?ge.styleSheetLoader.load(n.skinUiCss,he(e)):he(e)(),r=t.panel=g.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===s(e)?null:{type:"menubar",border:"0 0 1 0",items:oe(e)},H(e,l(e))]},de(e)?(a=e,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[pe("0"),me(a)]}):pe("1 0 0 0")]}),D(e,r),"none"!==m(e)&&(o={type:"resizehandle",direction:m(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;i={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===m(e)?se(e,i.width+t.deltaX,i.height+t.deltaY):se(e,null,i.height+t.deltaY)}}),e.getParam("statusbar",!0,"boolean")){var c=p.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">Tiny</a>']),f=e.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+c}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,f]})}return b(e),e.on("SwitchMode",(u=r,function(e){u.find("*").disabled("readonly"===e.mode)})),r.renderBefore(n.targetNode).reflow(),e.getParam("readonly",!1,"boolean")&&e.setMode("readonly"),n.width&&ge.setStyle(r.getEl(),"width",n.width),e.on("remove",(function(){r.remove(),r=null})),x(e,r),j(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}}(e,t,n)},Tt=tt.extend({Mixins:[Se],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)})),e._super()},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),St=tt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==St.tooltips&&(t.on("mouseenter",(function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(t.getEl(),o)}else r.hide()})),t.on("mouseleave mousedown click",(function(){t.tooltip().remove(),t._tooltip=null}))),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Tt({type:"tooltip"}),B(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",(function(e){t(e.value)})),e.state.on("change:active",(function(e){n(e.value)})),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Et=St.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",(function(e){t(e.value)})),t(e.state.get("value")),e._super()}}),_t=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Nt=tt.extend({Mixins:[Se],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Et),t.on("click",(function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()}))},renderHtml:function(){var e,t=this,n=t.classPrefix,r="",o="",i="";return t.icon&&(r='<i class="'+n+"ico "+n+"i-"+t.icon+'"></i>'),e=' style="max-width: '+t.maxWidth+"px;"+(t.color?"background-color: "+t.color+';"':'"'),t.closeButton&&(o='<button type="button" class="'+n+'close" aria-hidden="true">×</button>'),t.progressBar&&(i=t.progressBar.renderHtml()),'<div id="'+t._id+'" class="'+t.classes+'"'+e+' role="presentation">'+r+'<div class="'+n+'notification-inner">'+t.state.get("text")+"</div>"+i+o+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return C.setTimeout((function(){e.$el.addClass(e.classPrefix+"in"),_t(e,e.state.get("text"))}),100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl().firstChild.innerHTML=t.value,_t(e,t.value)})),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",(function(t){_t(e,e.state.get("text"))}))),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});var Rt=[],Ot="";function At(t){var n,r=ve("meta[name=viewport]")[0];!1!==ce.overrideViewPort&&(r||((r=e.document.createElement("meta")).setAttribute("name","viewport"),e.document.getElementsByTagName("head")[0].appendChild(r)),(n=r.getAttribute("content"))&&void 0!==Ot&&(Ot=n),r.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Ot))}var Pt=xt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new mt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",(function(e){var n=t.classPrefix+"close";(ye.hasClass(e.target,n)||ye.hasClass(e.target.parentNode,n))&&t.close()})),t.on("cancel",(function(){t.close()})),t.on("move",(function(e){e.control===t&&xt.hideAll()})),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(ye.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=ye.getSize(e);n.headerW=o.width,n.headerH=o.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var i=ye.getWindowSize();return n.x=t.settings.x||Math.max(0,i.w/2-n.w/2),n.y=t.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",u=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(u='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===u&&(u=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+u+"</div>"+a+"</div></div>"},fullscreen:function(t){var n,r,o=this,i=e.document.documentElement,a=o.classPrefix;if(t!==o._fullscreen)if(ve(e.window).on("resize",(function(){var e;if(o._fullscreen)if(n)o._timer||(o._timer=C.setTimeout((function(){var e=ye.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0}),50));else{e=(new Date).getTime();var t=ye.getWindowSize();o.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)}})),r=o.layoutRect(),o._fullscreen=t){o._initial={x:r.x,y:r.y,w:r.w,h:r.h},o.borderBox=Ne("0"),o.getEl("head").style.display="none",r.deltaH-=r.headerH+2,ve([i,e.document.body]).addClass(a+"fullscreen"),o.classes.add("fullscreen");var u=ye.getWindowSize();o.moveTo(0,0).resizeTo(u.w,u.h)}else o.borderBox=Ne(o.settings.border),o.getEl("head").style.display="",r.deltaH+=r.headerH,ve([i,e.document.body]).removeClass(a+"fullscreen"),o.classes.remove("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout((function(){t.classes.add("in"),t.fire("open")}),0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new ut(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",(function(e){e.isDefaultPrevented()||t.close()})),Rt.push(t),At(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),function(t,n){(function(){for(var e=0;e<Rt.length;e++)if(Rt[e]._fullscreen)return!0;return!1})()&&!1===n&&ve([e.document.documentElement,e.document.body]).removeClass(t+"fullscreen")}(n.classPrefix,!1),t=Rt.length;t--;)Rt[t]===n&&Rt.splice(t,1);At(0<Rt.length)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!ce.desktop){var t={w:e.window.innerWidth,h:e.window.innerHeight};C.setInterval((function(){var n=e.window.innerWidth,r=e.window.innerHeight;t.w===n&&t.h===r||(t={w:n,h:r},ve(e.window).trigger("resize"))}),100)}ve(e.window).on("resize",(function(){var e,t,n=ye.getWindowSize();for(e=0;e<Rt.length;e++)t=Rt[e].layoutRect(),Rt[e].moveTo(Rt[e].settings.x||Math.max(0,n.w/2-t.w/2),Rt[e].settings.y||Math.max(0,n.h/2-t.h/2))}))}();var Dt,Mt,Bt,It=Pt.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var n,r=t.callback||function(){};function o(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}switch(t.buttons){case It.OK_CANCEL:n=[o("Ok",!0,!0),o("Cancel",!1)];break;case It.YES_NO:case It.YES_NO_CANCEL:n=[o("Yes",1,!0),o("No",0)],t.buttons===It.YES_NO_CANCEL&&n.push(o("Cancel",-1));break;default:n=[o("Ok",!0,!0)]}return new Pt({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){r(!1)}}).renderTo(e.document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,It.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=It.OK_CANCEL,It.msgBox(e)}}}),Lt=function(t){return{renderUI:function(e){return kt(t,this,e)},resizeTo:function(e,n){return se(t,e,n)},resizeBy:function(e,n){return function(e,t,n){var r=e.getContentAreaContainer();ue(e,r.clientWidth+t,r.clientHeight+n)}(t,e,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,r){var o,i=u.extend(n,{maxWidth:(o=t(e),ye.getSize(o).width)}),a=new Nt(i);return 0<(a.args=i).timeout&&(a.timer=setTimeout((function(){a.close(),r()}),i.timeout)),a.on("close",(function(){r()})),a.renderTo(),a},close:function(e){e.close()},reposition:function(n){Z(n,(function(e){e.moveTo(0,0)})),function(n){if(0<n.length){var r=n.slice(0,1)[0],o=t(e);r.moveRel(o,"tc-tc"),Z(n,(function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")}))}}(n)},getArgs:function(e){return e.args}}}(t)},getWindowManagerImpl:function(){return{open:function(t,n,r){var o;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),(o=new Pt(t)).on("close",(function(){r(o)})),t.data&&o.on("postRender",(function(){this.find("*").each((function(e){var n=e.name();n in t.data&&e.value(t.data[n])}))})),o.features=t||{},o.params=n||{},o=o.renderTo(e.document.body).reflow()},alert:function(e,t,n){var r;return(r=It.alert(e,(function(){t()}))).on("close",(function(){n(r)})),r},confirm:function(e,t,n){var r;return(r=It.confirm(e,(function(e){t(e)}))).on("close",(function(){n(r)})),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Ht=Ee.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=u.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,i=this.settings;t=i.firstControlClass,n=i.lastControlClass,e.each((function(e){e.classes.remove(t).remove(n).add(i.controlClass),e.visible()&&(r||(r=e),o=e)})),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each((function(e){t+=e.renderHtml()})),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Ft=Ht.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each((function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()}))},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),zt=St.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",(function(e){e.preventDefault()})),n.on("touchstart",(function(e){n.fire("click",e),e.preventDefault()})),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var t,n,r=this,o=r._id,i=r.classPrefix,a=r.state.get("icon"),u=r.state.get("text"),s="",c=r.settings;return(t=c.image)?(a="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",u&&(r.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+r.encode(u)+"</span>"),a=a?i+"ico "+i+"i-"+a:"",n="boolean"==typeof c.active?' aria-pressed="'+c.active+'"':"",'<div id="'+o+'" class="'+r.classes+'" tabindex="-1"'+n+'><button id="'+o+'-button" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+s+"</button></div>"},bindStates:function(){var t=this,n=t.$,r=t.classPrefix+"txt";function o(e){var o=n("span."+r,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),o=n("span."+r,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}return t.state.on("change:text",(function(e){o(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,i=t.classPrefix;r=(t.settings.icon=r)?i+"ico "+i+"i-"+t.settings.icon:"";var a=t.getEl().firstChild,u=a.getElementsByTagName("i")[0];r?(u&&u===a.firstChild||(u=e.document.createElement("i"),a.insertBefore(u,a.firstChild)),u.className=r):u&&a.removeChild(u),o(t.state.get("text"))})),t._super()}}),Wt=zt.extend({init:function(e){e=u.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=ye.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),ve(t).on("change",(function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)})),ve(t).on("click",(function(e){e.stopPropagation()})),ve(e.getEl("button")).on("click touchstart",(function(e){e.stopPropagation(),t.click(),e.preventDefault()})),e.getEl().appendChild(t)},remove:function(){ve(this.getEl("button")).off(),ve(this.getEl("input")).off(),this._super()}}),Ut=it.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),jt=St.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",(function(e){e.preventDefault()})),t.on("click",(function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())})),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function n(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",(function(e){t.getEl("al").firstChild.data=t.translate(e.value)})),t.state.on("change:checked change:value",(function(e){t.fire("change"),n(e.value)})),t.state.on("change:icon",(function(n){var r=n.value,o=t.classPrefix;if(void 0===r)return t.settings.icon;r=(t.settings.icon=r)?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a===i.firstChild||(a=e.document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a)})),t.state.get("checked")&&n(!0),t._super()}}),Vt=tinymce.util.Tools.resolve("tinymce.util.VK"),$t=St.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",(function(n){var r=n.target,o=t.getEl();if(ve.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode})),t.on("keydown",(function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}})),t.on("mouseover",(function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}}))},statusLevel:function(e){return 0<arguments.length&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return 0<arguments.length&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||((e=n.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=g.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",(function(e){e.control===t.menu&&t.focus()})),t.menu.on("show hide",(function(e){e.control.items().each((function(e){e.active(e.value()===t.value())}))})).fire("show"),t.menu.on("select",(function(e){t.value(e.control.value())})),t.on("focusin",(function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()})),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,n,r=this,o=r.getEl(),i=r.getEl("open"),a=r.layoutRect(),u=0,s=o.firstChild;r.statusLevel()&&"none"!==r.statusLevel()&&(u=parseInt(ye.getRuntimeStyle(s,"padding-right"),10)-parseInt(ye.getRuntimeStyle(s,"padding-left"),10)),t=i?a.w-ye.getSize(i).width-10:a.w-10;var c=e.document;return c.all&&(!c.documentMode||c.documentMode<=8)&&(n=r.layoutRect().h-2+"px"),ve(s).css({width:t-u,lineHeight:n}),r._super(),r},postRender:function(){var e=this;return ve(this.getEl("inp")).on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)})),e._super()},renderHtml:function(){var e,t,n,r=this,o=r._id,i=r.settings,a=r.classPrefix,u=r.state.get("value")||"",s="",c="";return"spellcheck"in i&&(c+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(c+=' maxlength="'+i.maxLength+'"'),i.size&&(c+=' size="'+i.size+'"'),i.subtype&&(c+=' type="'+i.subtype+'"'),n='<i id="'+o+'-status" class="mce-status mce-ico" style="display: none"></i>',r.disabled()&&(c+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=a+"ico "+a+"i-"+i.icon),t=r.state.get("text"),(e||t)&&(s='<div id="'+o+'-open" class="'+a+"btn "+a+'open" tabIndex="-1" role="button"><button id="'+o+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+a+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",r.classes.add("has-open")),'<div id="'+o+'" class="'+r.classes+'"><input id="'+o+'-inp" class="'+a+'textbox" value="'+r.encode(u,!1)+'" hidefocus="1"'+c+' placeholder="'+r.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=g.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),u.each(e,(function(e){var r,o;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(r=e.value,o=e.title,function(){n.fire("selectitem",{title:o,value:r})})})})),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()}));var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",(function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl("inp").disabled=t.value})),e.state.on("change:statusLevel",(function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;ye.css(n,"display","none"===o?"none":""),ye.toggleClass(n,r+"i-checkmark","ok"===o),ye.toggleClass(n,r+"i-warning","warn"===o),ye.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()})),ye.on(e.getEl("status"),"mouseleave",(function(){e.tooltip().hide()})),e.on("cancel",(function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())}));var t=function(e,t){t&&0<t.items().length&&t.items().eq(e)[0].focus()};return e.on("keydown",(function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Vt.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===Vt.UP&&(n.preventDefault(),t(-1,e.menu)))})),e._super()},remove:function(){ve(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),qt=$t.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",(function(){t.repaintColor(t.value())}))},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.state.get("rendered")&&e.repaintColor(t.value)})),e._super()}}),Yt=zt.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new xt(n).on("hide",(function(){e.classes.remove("opened")})).on("cancel",(function(t){t.stopPropagation(),e.focus(),e.hidePanel()})).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===r.substr(-1)),e.panel.classes.toggle("end","r"===r.substr(-1));var o="t"===r.substr(0,1);e.panel.classes.toggle("bottom",!o),e.panel.classes.toggle("top",o),e.panel.moveRel(e.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",(function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))})),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Xt=h.DOM,Gt=Yt.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",(function(n){n.aria&&"down"===n.aria.key||n.control!==e||Xt.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))})),delete e.settings.onclick,e._super()}}),Kt=tinymce.util.Tools.resolve("tinymce.util.Color"),Jt=St.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,r,o,i=this,a=i.color();function u(e,t){var n,r,o=ye.getPos(e);return n=t.pageX-o.x,r=t.pageY-o.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:r=Math.max(0,Math.min(r/e.clientHeight,1))}}function s(e,t){var a=(360-e.h)/360;ye.css(n,{top:100*a+"%"}),t||ye.css(o,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=Kt({s:100,v:100,h:e.h}).toHex(),i.color().parse({s:e.s,v:e.v,h:e.h})}function c(t){var n;n=u(r,t),e.s=100*n.x,e.v=100*(1-n.y),s(e),i.fire("change")}function l(n){var r;r=u(t,n),(e=a.toHsv()).h=360*(1-r.y),s(e,!0),i.fire("change")}t=i.getEl("h"),n=i.getEl("hp"),r=i.getEl("sv"),o=i.getEl("svp"),i._repaint=function(){s(e=a.toHsv())},i._super(),i._svdraghelper=new ut(i._id+"-sv",{start:c,drag:c}),i._hdraghelper=new ut(i._id+"-h",{start:l,drag:l}),i._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=Kt()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var e,t,o,i,a="";for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(i=r.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+i[e]+",endColorstr="+i[e+1]+");-ms-"+o+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),Zt=St.extend({init:function(e){e=u.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},t=ye.create("div",e,"<span>"+this.translate(n.text)+"</span>"),n.height&&ye.css(t,"height",n.height+"px"),n.width&&ye.css(t,"width",n.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",(function(e){e.preventDefault()})),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",(function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return u.grep(t,(function(e){return r.test(e.name)}))}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}}))},remove:function(){this.$el.off(),this._super()}}),Qt=St.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",(function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})})),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",(function(t){e.innerHtml(e._getDataPathHtml(t.value))})),e._super()},_getDataPathHtml:function(e){var t,n,r=e||[],o="",i=this.classPrefix;for(t=0,n=r.length;t<n;t++)o+=(0<t?'<div class="'+i+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+i+"path-item"+(t===n-1?" "+i+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return o||(o='<div class="'+i+'path-item"> </div>'),o}}),en=Qt.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",(function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()})),t.on("nodeChange",(function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1===i[a].nodeType&&!n(i[a])){var u=t.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(u.isDefaultPrevented()||o.push({name:u.name,element:i[a]}),u.isPropagationStopped())break}e.row(o)}))),e._super()}}),tn=it.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),nn=it.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each((function(t){var n,r=t.settings.label;r&&((n=new tn(u.extend({items:{type:"label",id:t._id+"-l",text:r,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))}))},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,r=0,o=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each((function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=r<n?n:r,o.push(t)})),n=e.settings.labelGap||0,t=o.length;t--;)o[t].settings.minWidth=r+n}e._super(),e.on("show",t),t()}}),rn=nn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),on=0,an=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:T(e)}},un=an,sn=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE),cn=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ln=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return dn(r(1),r(2))}),fn=function(){return dn(0,0)},dn=function(e,t){return{major:e,minor:t}},mn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?fn():ln(e,n)},hn=fn,gn="Firefox",pn=function(e,t){return function(){return t===e}},vn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:pn("Edge",t),isChrome:pn("Chrome",t),isIE:pn("IE",t),isOpera:pn("Opera",t),isFirefox:pn(gn,t),isSafari:pn("Safari",t)}},bn=function(){return vn({current:void 0,version:hn()})},yn=vn,xn=(T("Edge"),T("Chrome"),T("IE"),T("Opera"),T(gn),T("Safari"),"Windows"),wn="Android",Cn="Solaris",kn="FreeBSD",Tn=function(e,t){return function(){return t===e}},Sn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Tn(xn,t),isiOS:Tn("iOS",t),isAndroid:Tn(wn,t),isOSX:Tn("OSX",t),isLinux:Tn("Linux",t),isSolaris:Tn(Cn,t),isFreeBSD:Tn(kn,t)}},En=function(){return Sn({current:void 0,version:hn()})},_n=Sn,Nn=(T(xn),T("iOS"),T(wn),T("Linux"),T("OSX"),T(Cn),T(kn),function(e,t){var n=String(t).toLowerCase();return function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o))return O.some(o)}return O.none()}(e,(function(e){return e.search(n)}))}),Rn=function(e,t){return-1!==e.indexOf(t)},On=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,An=function(e){return function(t){return Rn(t,e)}},Pn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Rn(e,"edge/")&&Rn(e,"chrome")&&Rn(e,"safari")&&Rn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,On],search:function(e){return Rn(e,"chrome")&&!Rn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Rn(e,"msie")||Rn(e,"trident")}},{name:"Opera",versionRegexes:[On,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:An("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:An("firefox")},{name:"Safari",versionRegexes:[On,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Rn(e,"safari")||Rn(e,"mobile/"))&&Rn(e,"applewebkit")}}],Dn=[{name:"Windows",search:An("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Rn(e,"iphone")||Rn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:An("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:An("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:An("linux"),versionRegexes:[]},{name:"Solaris",search:An("sunos"),versionRegexes:[]},{name:"FreeBSD",search:An("freebsd"),versionRegexes:[]}],Mn={browsers:T(Pn),oses:T(Dn)},Bn=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=Mn.browsers(),m=Mn.oses(),h=function(e,t){return Nn(e,t).map((function(e){var n=mn(e.versionRegexes,t);return{current:e.name,version:n}}))}(d,e).fold(bn,yn),g=function(e,t){return Nn(e,t).map((function(e){var n=mn(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(En,_n);return{browser:h,os:g,deviceType:(n=h,r=e,o=(t=g).isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,s=o||a||u&&!0===/mobile/i.test(r),c=t.isiOS()||t.isAndroid(),l=c&&!s,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:T(o),isiPhone:T(i),isTablet:T(s),isPhone:T(l),isTouch:T(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:T(f)})}},In=(Bt=!(Dt=function(){var t=e.navigator.userAgent;return Bn(t)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bt||(Bt=!0,Mt=Dt.apply(null,e)),Mt}),Ln=cn,Hn=sn,Fn=function(e){return e.nodeType!==Ln&&e.nodeType!==Hn||0===e.childElementCount},zn=(In().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),u.trim),Wn=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Un=Wn("true"),jn=Wn("false"),Vn=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},$n=function(e){return e.innerText||e.textContent},qn=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)&&Xn(e);var t},Yn=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Xn=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Un(e)}return!1}(e)&&!jn(e)},Gn=function(e){return Yn(e)&&Xn(e)},Kn=function(e){var t,n=function(e){return e.id?e.id:("h",t=(new Date).getTime(),"h_"+Math.floor(1e9*Math.random())+ ++on+String(t));var t}(e);return Vn("header",$n(e),"#"+n,Yn(t=e)?parseInt(t.nodeName.substr(1),10):0,(function(){e.id=n}))},Jn=function(e){var t=e.id||e.name,n=$n(e);return Vn("anchor",n||"#"+t,"#"+t,0,k)},Zn=function(e){return 0<zn(e.title).length},Qn=function(t){var n,r=function(t){var n,r,o;return"h1,h2,h3,h4,h5,h6,a:not([href])",n=t,J((In().browser.isIE(),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),"h1,h2,h3,h4,h5,h6,a:not([href])",o=void 0===(r=un(n))?e.document:r.dom(),Fn(o)?[]:J(o.querySelectorAll("h1,h2,h3,h4,h5,h6,a:not([href])"),un)),(function(e){return e.dom()}))}(t);return Q((n=r,J(Q(n,Gn),Kn)).concat(J(Q(r,qn),Jn)),Zn)},er={},tr=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},nr=function(e,t){return{title:e,value:{title:e,url:t,attach:k}}},rr=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},or=function(e,t){var n=e.toLowerCase(),r=u.grep(t,(function(e){return-1!==e.title.toLowerCase().indexOf(n)}));return 1===r.length&&r[0].title===e?[]:r},ir=function(e,t,n,r){var o=function(o){var i=function(e,t,n,r){var o,i,a,s,c,l,f={title:"-"},d=function(e){var r=e.hasOwnProperty(n)?e[n]:[],o=Q(r,(function(e){return n=e,!K(t,(function(e){return e.url===n}));var n}));return u.map(o,(function(e){return{title:e,value:{title:e,url:e,attach:k}}}))},m=function(e){var n;return n=Q(t,(function(t){return t.type===e})),u.map(n,tr)};return!1===r.typeahead_urls?[]:"file"===n?(o=[or(e,d(er)),or(e,m("header")),or(e,(s=m("anchor"),c=rr(r,"anchor_top","#top"),l=rr(r,"anchor_bottom","#bottom"),null!==c&&s.unshift(nr("<top>",c)),null!==l&&s.push(nr("<bottom>",l)),s))],i=function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(f,t)},a=[],Z(o,(function(e){a=i(a,e)})),a):or(e,d(er))}(o,Qn(n),r,t);e.showAutoComplete(i,o)};e.on("autocomplete",(function(){o(e.value())})),e.on("selectitem",(function(t){var n=t.value;e.value(n.url);var o,i=(o=n.title).raw?o.raw:o;"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()})),e.on("click",(function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&o("")})),e.on("PostRender",(function(){e.getRoot().on("submit",(function(t){var n,o,i;t.isDefaultPrevented()||(n=e.value(),i=er[o=r],/^https?/.test(n)&&(i?function(e,t){var n,r,o=(n=e,r=t,X.call(n,r));return-1===o?O.none():O.some(o)}(i,n).isNone()&&(er[o]=i.slice(0,5).concat(n)):er[o]=[n]))}))}))},ar=$t.extend({Statics:{clearHistory:function(){er={}}},init:function(e){var t,n,r,o=this,i=window.tinymce?window.tinymce.activeEditor:a.activeEditor,s=i.settings,c=e.filetype;e.spellcheck=!1,(r=s.file_picker_types||s.file_browser_callback_types)&&(r=u.makeMap(r,/[, ]/)),r&&!r[c]||(!(n=s.file_picker_callback)||r&&!r[c]?!(n=s.file_browser_callback)||r&&!r[c]||(t=function(){n(o.getEl("inp").id,o.value(),c,window)}):t=function(){var e=o.fire("beforecall").meta;e=u.extend({filetype:c},e),n.call(i,(function(e,t){o.value(e).fire("change",{meta:t})}),o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),ir(o,s,i.getBody(),c),function(e,t,n){var r=t.filepicker_validator_handler;r&&e.state.on("change:value",(function(t){var o;0!==(o=t.value).length?r({url:o,type:n},(function(t){var n,r,o,i=(r=(n=t).status,o=n.message,"valid"===r?{status:"ok",message:o}:"unknown"===r||"invalid"===r?{status:"warn",message:o}:{status:"none",message:""});e.statusMessage(i.message),e.statusLevel(i.status)})):e.statusLevel("none")}))}(o,s,c)}}),ur=Ft.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each((function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()}))}}),sr=Ft.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R,O,A,P,D,M,B,I,L,H=[],F=Math.max,z=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,u=a.align,s=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(T="y",C="h",k="minH",S="maxH",_="innerH",E="top",N="deltaH",R="contentH",M="left",P="w",O="x",A="innerW",D="minW",B="right",I="deltaW",L="contentW"):(T="x",C="w",k="minW",S="maxW",_="innerW",E="left",N="deltaW",R="contentW",M="top",P="h",O="y",A="innerH",D="minH",B="bottom",I="deltaH",L="contentH"),f=o[_]-i[E]-i[E],w=l=0,t=0,n=r.length;t<n;t++)h=(m=r[t]).layoutRect(),f-=t<n-1?c:0,0<(g=m.settings.flex)&&(l+=g,h[S]&&H.push(m),h.flex=g),f-=h[k],w<(p=i[M]+h[D]+i[B])&&(w=p);if((y={})[k]=f<0?o[k]-f+o[N]:o[_]-f+o[N],y[D]=w+o[I],y[R]=o[_]-f,y[L]=w,y.minW=z(y.minW,o.maxW),y.minH=z(y.minH,o.maxH),y.minW=F(y.minW,o.startMinWidth),y.minH=F(y.minH,o.startMinHeight),!o.autoResize||y.minW===o.minW&&y.minH===o.minH){for(b=f/l,t=0,n=H.length;t<n;t++)(v=(h=(m=H[t]).layoutRect())[S])<(p=h[k]+h.flex*b)?(f-=h[S]-h[k],l-=h.flex,h.flex=0,h.maxFlexSize=v):h.maxFlexSize=0;for(b=f/l,x=i[E],y={},0===l&&("end"===s?x=f+i[E]:"center"===s?(x=Math.round(o[_]/2-(o[_]-f)/2)+i[E])<0&&(x=i[E]):"justify"===s&&(x=i[E],c=Math.floor(f/(r.length-1)))),y[O]=i[M],t=0,n=r.length;t<n;t++)p=(h=(m=r[t]).layoutRect()).maxFlexSize||h[k],"center"===u?y[O]=Math.round(o[A]/2-h[P]/2):"stretch"===u?(y[P]=F(h[D]||0,o[A]-i[M]-i[B]),y[O]=i[M]):"end"===u&&(y[O]=o[A]-h[P]-i.top),0<h.flex&&(p+=h.flex*b),y[C]=p,y[T]=x,m.layoutRect(y),m.recalc&&m.recalc(),x+=p+c}else if(y.w=y.minW,y.h=y.minH,e.layoutRect(y),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}}),cr=Ht.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each((function(e){e.recalc&&e.recalc()}))},isNative:function(){return!0}}),lr=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},fr=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",(function(){e.formatter.formatChanged(t,r)}))},dr=function(e,t){return function(n){fr(e,t,(function(e){n.control.active(e)}))}},mr=function(e){return e?e.split(",")[0]:""},hr=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",(function(r){var o,i,a,s,c=e.queryCommandValue("FontName"),l=(o=t,s=(i=c)?i.toLowerCase():"",u.each(o,(function(e){e.value.toLowerCase()===s&&(a=e.value)})),u.each(o,(function(e){a||mr(e.value).toLowerCase()!==mr(s).toLowerCase()||(a=e.value)})),a);n.value(l||null),!l&&c&&n.text(mr(c))}))}},gr=function(e){!function(e){e.addButton("fontselect",(function(){var t,n=(t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),u.map(t,(function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:hr(e,n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}))}(e)},pr=function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,r=t||0,o=Math.pow(10,r),Math.round(n*o)/o+"pt"):e;var n,r,o},vr=function(e,t,n){var r;return u.each(e,(function(e){e.value===n?r=n:e.value===t&&(r=t)})),r},br=function(e){!function(e){e.addButton("fontsizeselect",(function(){var t,n,r,o=(t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",u.map(t.split(" "),(function(e){var t=e,n=e,r=e.split("=");return 1<r.length&&(t=r[0],n=r[1]),{text:t,value:n}})));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:o,fixedWidth:!0,onPostRender:(n=e,r=o,function(){var e=this;n.on("init nodeChange",(function(t){var o,i,a,u;if(o=n.queryCommandValue("FontSize"))for(a=3;!u&&0<=a;a--)i=pr(o,a),u=vr(r,i,o);e.value(u||null),u||e.text(i)}))}),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}))}(e)},yr=function(e,t){var n=t.length;return u.each(t,(function(t){t.menu&&(t.hidden=0===yr(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--})),n},xr=function(e,t){var n=t.items().length;return t.items().each((function(t){t.menu&&t.visible(0<xr(e,t.menu)),!t.menu&&t.settings.menu&&t.visible(0<yr(e,t.settings.menu));var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--})),n},wr=function(e){var t,n,r=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:(t=e,n=r,u.map(n,(function(e){return{text:e[0],onclick:lr(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})))}),e.addButton("formatselect",function(e,t){return function(){var n,r,o=[];return u.each(t,(function(t){o.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})})),{type:"listbox",text:t[0][0],values:o,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();lr(e,n)()}},onPostRender:(n=e,r=o,function(){var e=this;n.on("nodeChange",(function(t){var o=n.formatter,i=null;u.each(t.parents,(function(e){if(u.each(r,(function(t){if(o.matchNode(e,t.value)&&(i=t.value),i)return!1})),i)return!1})),e.value(i)}))})}}}(e,r))},Cr=function(e,t){var n,r;if("string"==typeof t)r=t.split(" ");else if(u.isArray(t))return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!$(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);G.apply(t,e[n])}return t}(u.map(t,(function(t){return Cr(e,t)})));return n=u.grep(r,(function(t){return"|"===t||t in e.menuItems})),u.map(n,(function(t){return"|"===t?{text:"-"}:e.menuItems[t]}))},kr=function(e){return e&&"-"===e.text},Tr=function(e){var t,n,r,o=e.settings.insert_button_items;return function(e){var t=Q(e,(function(t,n){return!kr(t)||!kr(e[n-1])}));return Q(t,(function(e,n){return!kr(e)||0<n&&n<t.length-1}))}(o?Cr(e,o):(t=e,"insert",n=[{text:"-"}],r=u.grep(t.menuItems,(function(e){return"insert"===e.context})),u.each(r,(function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})})),n))},Sr=function(e){var t;(function(e){var t,n,r;t=e,u.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},(function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:dr(t,n),onclick:lr(t,n)})})),n=e,u.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},(function(e,t){n.addButton(t,{tooltip:e[0],cmd:e[1]})})),r=e,u.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},(function(e,t){r.addButton(t,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:dr(r,t)})}))})(e),t=e,u.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},(function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})})),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:lr(t,"code")})},Er=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(){n.disabled(e.readonly||!r())}))}},_r={setup:function(t){var n;t.rtl&&(tt.rtl=!0),t.on("mousedown progressstate",(function(){xt.hideAll()})),(n=t).settings.ui_container&&(ce.container=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),Fn(i)?O.none():O.from(i.querySelector(r)).map(un);var r,o,i}(un(e.document.body),n.settings.ui_container).fold(T(null),(function(e){return e.dom()}))),St.tooltips=!ce.iOS,tt.translate=function(e){return a.translate(e)},wr(t),function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n="alignleft",r=[{text:"Left",icon:"alignleft",onclick:lr(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:lr(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:lr(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:lr(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:r}),e.addButton("align",{type:"menubutton",icon:n,menu:r,onShowMenu:function(n){var r=n.control.menu;u.each(t,(function(t,n){r.items().eq(n).each((function(n){return n.active(e.formatter.match(t))}))}))},onPostRender:function(r){var o=r.control;u.each(t,(function(t,r){fr(e,t,(function(e){o.icon(n),e&&o.icon(t)}))}))}}),u.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},(function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:dr(e,n)})}))}(t),Sr(t),function(e){var t,n;(t=e).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Er(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Er(t,"redo"),cmd:"redo"}),(n=e).addButton("undo",{tooltip:"Undo",onPostRender:Er(n,"undo"),cmd:"undo"}),n.addButton("redo",{tooltip:"Redo",onPostRender:Er(n,"redo"),cmd:"redo"})}(t),br(t),gr(t),function(e){var t,n,r,o,i,a,s,c,l=(n=0,r=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(e){var t=[];if(e)return u.each(e,(function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=i(e.items);else{var a=e.format||"custom"+n++;e.format||(e.name=a,r.push(e)),o.format=a,o.cmd=e.cmd}t.push(o)})),t},(t=e).on("init",(function(){u.each(r,(function(e){t.formatter.register(e.name,e)}))})),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?i(o.concat(t.settings.style_formats)):i(o):i(t.settings.style_formats||o),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",(function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))}))},onclick:function(){this.settings.format&&lr(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}});a=l,e.addMenuItem("formats",{text:"Formats",menu:a}),c=l,(s=e).addButton("styleselect",{type:"menubutton",text:"Formats",menu:c,onShowMenu:function(){s.settings.style_formats_autohide&&xr(s,this.menu)}})}(t),function(e){var t,n;(t=e).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(n=t,function(){var e=this;n.on("VisualAid",(function(t){e.active(t.hasVisual)})),e.active(n.hasVisual)}),cmd:"mceToggleVisualAid"})}(t),function(e){var t;(t=e).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Tr(t)),this.menu.renderNew()}})}(t)}},Nr=Ft.extend({recalc:function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R=[],O=[];t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,x=t.alignH||t.align,w=t.alignV||t.align,p=e.paddingBox,N="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(f=0;f<r;f++)R.push(0);for(d=0;d<n;d++)O.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(l=o[d*r+f]);f++)T=(c=l.layoutRect()).minW,S=c.minH,R[f]=T>R[f]?T:R[f],O[d]=S>O[d]?S:O[d];for(E=i.innerW-p.left-p.right,f=C=0;f<r;f++)C+=R[f]+(0<f?b:0),E-=(0<f?b:0)+R[f];for(_=i.innerH-p.top-p.bottom,d=k=0;d<n;d++)k+=O[d]+(0<d?y:0),_-=(0<d?y:0)+O[d];if(C+=p.left+p.right,k+=p.top+p.bottom,(s={}).minW=C+(i.w-i.innerW),s.minH=k+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW===i.minW&&s.minH===i.minH){var A;i.autoResize&&((s=e.layoutRect(s)).contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH),A="start"===t.packV?0:0<_?Math.floor(_/n):0;var P=0,D=t.flexWidths;if(D)for(f=0;f<D.length;f++)P+=D[f];else P=r;var M=E/P;for(f=0;f<r;f++)R[f]+=D?D[f]*M:M;for(h=p.top,d=0;d<n;d++){for(m=p.left,u=O[d]+A,f=0;f<r&&(l=o[N?d*r+r-1-f:d*r+f]);f++)g=l.settings,c=l.layoutRect(),a=Math.max(R[f],c.startMinWidth),c.x=m,c.y=h,"center"===(v=g.alignH||(x?x[f]||x[0]:null))?c.x=m+a/2-c.w/2:"right"===v?c.x=m+a-c.w:"stretch"===v&&(c.w=a),"center"===(v=g.alignV||(w?w[f]||w[0]:null))?c.y=h+u/2-c.h/2:"bottom"===v?c.y=h+u-c.h:"stretch"===v&&(c.h=u),l.layoutRect(c),m+=a+b,l.recalc&&l.recalc();h+=u+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}}),Rr=St.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):C.setTimeout((function(){n.html(e)})),this}}),Or=St.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e.state.on("change:help",(function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Ar=St.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(ye.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,ye.getSize(e.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",(function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()})),e._super()}}),Pr=it.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each((function(e){e.classes.add("toolbar-item")})),this._super()}}),Dr=Pr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Mr=zt.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=g.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",(function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())})),n.menu.on("select",(function(){n.focus()})),n.menu.on("show hide",(function(e){"hide"===e.type&&e.control.parent()===n&&n.classes.remove("opened-under"),e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)})).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=n.menu.layoutRect(),o=n.$el.offset().top+n.layoutRect().h;o>r.y&&o<r.y+r.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var t,n=this,r=n._id,o=n.classPrefix,i=n.settings.icon,a=n.state.get("text"),u="";return(t=n.settings.image)?(i="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a&&(n.classes.add("btn-has-text"),u='<span class="'+o+'txt">'+n.encode(a)+"</span>"),i=n.settings.icon?o+"ico "+o+"i-"+i:"",n.aria("role",n.parent()instanceof Dr?"menuitem":"button"),'<div id="'+r+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+r+'"><button id="'+r+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+u+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",(function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())})),e.on("mouseenter",(function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof Mr&&r.parent()===o&&(o.items().filter("MenuButton").each((function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())})),n&&(r.focus(),r.showMenu()))})),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",(function(){e.menu&&e.menu.remove(),e.menu=null})),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Br=xt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=u.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==ce.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new Ct(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,(function(){t.items().remove(),t.fire("loading")})),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory((function(r){0!==r.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(r),t.renderNew(),t.fire("loaded")):t.hide()})))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each((function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return!(e._hasIcons=!0)})),e.settings.itemsFactory&&e.on("postrender",(function(){e.settings.itemsFactory&&e.load()})),e.on("show hide",(function(t){t.control===e&&("show"===t.type?C.setTimeout((function(){e.classes.add("in")}),0):e.classes.remove("in"))})),e._super()}}),Ir=Mr.extend({init:function(e){var t,n,r,o,i=this;i._super(e),e=i.settings,i._values=t=e.values,t&&(void 0!==e.value&&function t(o){for(var a=0;a<o.length;a++){if(n=o[a].selected||e.value===o[a].value)return r=r||o[a].text,i.state.set("value",o[a].value),!0;if(o[a].menu&&t(o[a].menu))return!0}}(t),!n&&0<t.length&&(r=t[0].text,i.state.set("value",t[0].value)),i.state.set("menu",t)),i.state.set("text",e.text||r),i.classes.add("listbox"),i.on("select",(function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):i.value(t.control.value()),o=n}))},value:function(e){return 0===arguments.length?this.state.get("value"):(void 0===e||(this.settings.values&&!function t(n){return K(n,(function(n){return n.menu?t(n.menu):n.value===e}))}(this.settings.values)?null===e&&this.state.set("value",null):this.state.set("value",e)),this)},bindStates:function(){var e=this;return e.on("show",(function(t){var n,r;n=t.control,r=e.value(),n instanceof Br&&n.items().each((function(e){e.hasMenus()||e.active(e.value()===r)}))})),e.state.on("change:value",(function(t){var n=function e(t,n){var r;if(t)for(var o=0;o<t.length;o++){if(t[o].value===n)return t[o];if(t[o].menu&&(r=e(t[o].menu,n)))return r}}(e.state.get("menu"),t.value);n?e.text(n.text):e.text(e.settings.text)})),e._super()}}),Lr=St.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",(function(e){e.preventDefault()})),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each((function(e){e!==t&&e.hideMenu()})),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),(e=t.menu=g.create(e).parent(t).renderTo()).reflow(),e.on("cancel",(function(n){n.stopPropagation(),t.focus(),e.hide()})),e.on("show hide",(function(e){e.control.items&&e.control.items().each((function(e){e.active(e.settings.selected)}))})).fire("show"),e.on("hide",(function(n){n.control===e&&t.classes.remove("selected")})),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),o="menu-sub-"+(e.rel=o),e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each((function(e){e.hideMenu&&e.hideMenu()})),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e,t=this,n=t._id,r=t.settings,o=t.classPrefix,i=t.state.get("text"),a=t.settings.icon,u="",s=r.shortcut,c=t.encode(r.url);function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=r.match||"";return t?e.replace(new RegExp(l(t),"gi"),(function(e){return"!mce~match["+e+"]mce~match!"})):e}function d(e){return e.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return a&&t.parent().classes.add("menu-has-icons"),r.image&&(u=" style=\"background-image: url('"+r.image+"')\""),s&&(s=function(e){var t,n,r;for(r=ce.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(s)),a=o+"ico "+o+"i-"+(t.settings.icon||"none"),e="-"!==i?'<i class="'+a+'"'+u+"></i> ":"",i=d(t.encode(f(i))),c=d(t.encode(f(c))),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1">'+e+("-"!==i?'<span id="'+n+'-text" class="'+o+'text">'+i+"</span>":"")+(s?'<div id="'+n+'-shortcut" class="'+o+'menu-shortcut">'+s+"</div>":"")+(r.menu?'<div class="'+o+'caret"></div>':"")+(c?'<div class="'+o+'menu-item-link">'+c+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",(function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),C.requestAnimationFrame((function(){e.parent().hideAll()}))))})),e._super(),e},hover:function(){return this.parent().items().each((function(e){e.classes.remove("selected")})),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Hr=jt.extend({Defaults:{classes:"radio",role:"radio"}}),Fr=St.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new ut(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function zr(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Wr=St.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))}))},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=zr(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",(function(t){e.getEl().innerHTML=zr(t.value)})),e._super()}});function Ur(e,t,n){return e<t&&(e=t),n<e&&(e=n),e}function jr(e,t,n){e.setAttribute("aria-"+t,n)}function Vr(e,t){var n,r,o,i,a;"v"===e.settings.orientation?(o="top",r="height",n="h"):(o="left",r="width",n="w"),a=e.getEl("handle"),i=((e.layoutRect()[n]||100)-ye.getSize(a)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[o]=i,a.style.height=e.layoutRect().h+"px",jr(a,"valuenow",t),jr(a,"valuetext",""+e.settings.previewFilter(t)),jr(a,"valuemin",e._minValue),jr(a,"valuemax",e._maxValue)}var $r=St.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=Y(e.minValue)?e.minValue:0,t._maxValue=Y(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,o,i,a,u,s,c,l,f,d,m,h=this;e=h._minValue,t=h._maxValue,"v"===h.settings.orientation?(n="screenY",r="top",o="height",i="h"):(n="screenX",r="left",o="width",i="w"),h._super(),function(e,t){function n(n){var r,o,i,a;r=Ur(r=(((r=h.value())+(a=o=e))/((i=t)-a)+.05*n)*(i-o)-o,e,t),h.value(r),h.fire("dragstart",{value:r}),h.fire("drag",{value:r}),h.fire("dragend",{value:r})}h.on("keydown",(function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}}))}(e,t),a=e,u=t,s=h.getEl("handle"),h._dragHelper=new ut(h._id,{handle:h._id+"-handle",start:function(e){c=e[n],l=parseInt(h.getEl("handle").style[r],10),f=(h.layoutRect()[i]||100)-ye.getSize(s)[o],h.fire("dragstart",{value:m})},drag:function(e){var t=e[n]-c;d=Ur(l+t,0,f),s.style[r]=d+"px",m=a+d/f*(u-a),h.value(m),h.tooltip().text(""+h.settings.previewFilter(m)).show().moveRel(s,"bc tc"),h.fire("drag",{value:m})},stop:function(){h.tooltip().hide(),h.fire("dragend",{value:m})}})},repaint:function(){this._super(),Vr(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){Vr(e,t.value)})),e._super()}}),qr=St.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Yr=Mr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this.getEl(),r=this.layoutRect();return this._super(),e=n.firstChild,t=n.lastChild,ve(e).css({width:r.w-ye.getSize(t).width,height:r.h-2}),ve(t).css({height:r.h-2}),this},activeMenu:function(e){ve(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var t,n,r=this,o=r._id,i=r.classPrefix,a=r.state.get("icon"),u=r.state.get("text"),s=r.settings,c="";return(t=s.image)?(a="none","string"!=typeof t&&(t=e.window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",a=s.icon?i+"ico "+i+"i-"+a:"",u&&(r.classes.add("btn-has-text"),c='<span class="'+i+'txt">'+r.encode(u)+"</span>"),n="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+o+'" class="'+r.classes+'" role="button"'+n+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(a?'<i class="'+a+'"'+t+"></i>":"")+c+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(r._menuBtnText?(a?" ":"")+r._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",(function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}})),delete this.settings.onclick,this._super()}}),Xr=cr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),Gr=mt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),ve(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),ve(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each((function(t,n){e!==n&&t.hide()}))},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each((function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"})),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",(function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)}))},initLayoutRect:function(){var e,t,n,r=this;t=(t=ye.getSize(r.getEl("head")).width)<0?0:t,n=0,r.items().each((function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)})),r.items().each((function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})}));var o=ye.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=n+o,(e=r._super()).deltaH+=o,e.innerH=e.h-e.deltaH,e}}),Kr=St.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",(function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each((function(e){if(e.toJSON)return n=e,!1})),t.fire("submit",{data:n.toJSON()}))})),t.on("keyup",(function(e){t.state.set("value",e.target.value)})))},repaint:function(){var t,n,r,o,i,a=this,u=0;t=a.getEl().style,n=a._layoutRect,i=a._lastRepaintRect||{};var s=e.document;return!a.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(t.lineHeight=n.h-u+"px"),o=(r=a.borderBox).left+r.right+8,u=r.top+r.bottom+(a.settings.multiline?8:0),n.x!==i.x&&(t.left=n.x+"px",i.x=n.x),n.y!==i.y&&(t.top=n.y+"px",i.y=n.y),n.w!==i.w&&(t.width=n.w-o+"px",i.w=n.w),n.h!==i.h&&(t.height=n.h-u+"px",i.h=n.h),a._lastRepaintRect=i,a.fire("repaint",{},!1),a},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},u.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],(function(t){e[t]=r[t]})),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),(t=ye.create(r.multiline?"textarea":"input",e)).value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",(function(t){e.state.set("value",t.target.value),e.fire("change",t)}))},bindStates:function(){var e=this;return e.state.on("change:value",(function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)})),e.state.on("change:disabled",(function(t){e.getEl().disabled=t.value})),e._super()},remove:function(){this.$el.off(),this._super()}}),Jr=function(){return{Selector:He,Collection:We,ReflowQueue:Ge,Control:tt,Factory:g,KeyboardNavigation:rt,Container:it,DragHelper:ut,Scrollable:dt,Panel:mt,Movable:Se,Resizable:ht,FloatPanel:xt,Window:Pt,MessageBox:It,Tooltip:Tt,Widget:St,Progress:Et,Notification:Nt,Layout:Ht,AbsoluteLayout:Ft,Button:zt,ButtonGroup:Ut,Checkbox:jt,ComboBox:$t,ColorBox:qt,PanelButton:Yt,ColorButton:Gt,ColorPicker:Jt,Path:Qt,ElementPath:en,FormItem:tn,Form:nn,FieldSet:rn,FilePicker:ar,FitLayout:ur,FlexLayout:sr,FlowLayout:cr,FormatControls:_r,GridLayout:Nr,Iframe:Rr,InfoBox:Or,Label:Ar,Toolbar:Pr,MenuBar:Dr,MenuButton:Mr,MenuItem:Lr,Throbber:Ct,Menu:Br,ListBox:Ir,Radio:Hr,ResizeHandle:Fr,SelectBox:Wr,Slider:$r,Spacer:qr,SplitButton:Yr,StackLayout:Xr,TabPanel:Gr,TextBox:Kr,DropZone:Zt,BrowseButton:Wt}};u.each(Jr(),(function(e,t){g.add(t,e)})),function(e){e.ui?u.each(Jr(),(function(t,n){e.ui[n]=t})):e.ui=Jr()}(window.tinymce?window.tinymce:{}),i.add("modern",(function(e){return _r.setup(e),Lt(e)}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},o=function(e){return t.map(e,(function(e){return{text:e.replace(/\-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()})),data:"default"===e?"":e}}))},i=function(e,n){return function(o){var i=o.control;e.on("NodeChange",(function(o){var a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(o.parents,r),u=-1!==a?o.parents.slice(0,a):o.parents,s=t.grep(u,function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&(r=t,(n=e).$.contains(n.getBody(),r));var n,r}}(e));i.active(0<s.length&&s[0].nodeName===n)}))}},a=function(e,t,r,a,u,s){var c;e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:o(s),onPostRender:i(e,u),onshow:(c=e,function(e){var t=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""}(c);e.control.items().each((function(e){e.active(e.settings.data===t)}))}),onselect:function(t){n(e,u,t.control.settings.data)},onclick:function(){e.execCommand(a)}})},u=function(e,t,n,r,o,u){var s,c,l,f,d;0<u.length?a(e,t,n,r,o,u):(c=t,l=n,f=r,d=o,(s=e).addButton(c,{active:!1,type:"button",tooltip:l,onPostRender:i(s,d),onclick:function(){s.execCommand(f)}}))},s=function(e){u(e,"numlist","Numbered list","InsertOrderedList","OL",function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]}(e)),u(e,"bullist","Bullet list","InsertUnorderedList","UL",function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]}(e))};e.add("advlist",(function(e){var r,o;o=(r=e).settings.plugins?r.settings.plugins:"",-1!==t.inArray(o.split(/[ ,]/),"lists")&&(s(e),function(e){e.addCommand("ApplyUnorderedListStyle",(function(t,r){n(e,"UL",r["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",(function(t,r){n(e,"OL",r["list-style-type"])}))}(e))}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return function(t){for(var n=0;n<t.length;n++)(r=t[n]).attr("href")||!r.attr("id")&&!r.attr("name")||r.firstChild||t[n].attr("contenteditable",e);var r}};e.add("anchor",(function(e){(function(e){e.on("PreInit",(function(){e.parser.addNodeFilter("a",t("false")),e.serializer.addNodeFilter("a",t(null))}))})(e),function(e){e.addCommand("mceAnchor",(function(){!function(e){var t=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""}(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var n,r,o=t.data.id;n=e,(function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)}(r=o)?(function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t,e.undoManager.add()):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}(n,r),0):(n.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),1))&&t.preventDefault()}})}(e)}))}(e),function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;n<t&&(t=n)}return t},r=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,n(t,r)):e.setStartBefore(t)},o=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,n(t,r)):e.setEndAfter(t)},i=function(e,t,n){var i,a,u,s,c,l,f,d,m,h,g=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)}(e),p=function(e){return e.getParam("default_link_target","")}(e);if("A"!==e.selection.getNode().tagName){if((i=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(d=i.endContainer.previousSibling)){if(!i.endContainer.firstChild||!i.endContainer.firstChild.nextSibling)return;d=i.endContainer.firstChild.nextSibling}if(m=d.length,r(i,d,m),o(i,d,m),i.endOffset<5)return;a=i.endOffset,s=d}else{if(3!==(s=i.endContainer).nodeType&&s.firstChild){for(;3!==s.nodeType&&s.firstChild;)s=s.firstChild;3===s.nodeType&&(r(i,s,0),o(i,s,s.nodeValue.length))}a=1===i.endOffset?2:i.endOffset-1-t}for(u=a;r(i,s,2<=a?a-2:0),o(i,s,1<=a?a-1:0),a-=1," "!==(h=i.toString())&&""!==h&&160!==h.charCodeAt(0)&&0<=a-2&&h!==n;);var v;(v=i.toString())===n||" "===v||160===v.charCodeAt(0)?(r(i,s,a),o(i,s,u),a+=1):(0===i.startOffset?r(i,s,0):r(i,s,a),o(i,s,u)),"."===(l=i.toString()).charAt(l.length-1)&&o(i,s,u-1),(f=(l=i.toString().trim()).match(g))&&("www."===f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),c=e.selection.getBookmark(),e.selection.setRng(i),e.execCommand("createlink",!1,f[1]+f[2]),p&&e.dom.setAttrib(e.selection.getNode(),"target",p),e.selection.moveToBookmark(c),e.nodeChanged())}};e.add("autolink",(function(e){!function(e){var n;e.on("keydown",(function(t){13!==t.keyCode||i(e,-1,"")})),t.ie?e.on("focus",(function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}})):(e.on("keypress",(function(t){41!==t.keyCode||i(e,-1,"(")})),e.on("keyup",(function(t){32!==t.keyCode||i(e,0,"")})))}(e)}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},i=function(e,t,n,o,a){r.setEditorTimeout(e,(function(){u(e,t),n--?i(e,t,n,o,a):a&&a()}),o)},a=function(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},u=function(e,t){var r,i,s,c,l,f,d,m,h,g,p,v=e.dom;if(i=e.getDoc())if((b=e).plugins.fullscreen&&b.plugins.fullscreen.isFullscreen())a(e,!0);else{var b;s=i.body,c=o(e),f=v.getStyle(s,"margin-top",!0),d=v.getStyle(s,"margin-bottom",!0),m=v.getStyle(s,"padding-top",!0),h=v.getStyle(s,"padding-bottom",!0),g=v.getStyle(s,"border-top-width",!0),p=v.getStyle(s,"border-bottom-width",!0),l=s.offsetHeight+parseInt(f,10)+parseInt(d,10)+parseInt(m,10)+parseInt(h,10)+parseInt(g,10)+parseInt(p,10),(isNaN(l)||l<=0)&&(l=n.ie?s.scrollHeight:n.webkit&&0===s.clientHeight?0:s.offsetHeight),l>o(e)&&(c=l);var y=function(e){return parseInt(e.getParam("autoresize_max_height",0),10)}(e);y&&y<l?(c=y,a(e,!0)):a(e,!1),c!==t.get()&&(r=c-t.get(),v.setStyle(e.iframeElement,"height",c+"px"),t.set(c),n.webkit&&r<0&&u(e,t))}},s={setup:function(e,t){e.on("init",(function(){var t,n,r=e.dom;t=function(e){return e.getParam("autoresize_overflow_padding",1)}(e),n=function(e){return e.getParam("autoresize_bottom_margin",50)}(e),!1!==t&&r.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==n&&r.setStyles(e.getBody(),{paddingBottom:n})})),e.on("nodechange setcontent keyup FullscreenStateChanged",(function(n){u(e,t)})),function(e){return e.getParam("autoresize_on_init",!0)}(e)&&e.on("init",(function(){i(e,t,20,100,(function(){i(e,t,5,1e3)}))}))},resize:u};t.add("autoresize",(function(t){if(!t.inline){var n=e(0);(function(e,t){e.addCommand("mceAutoResize",(function(){s.resize(e,t)}))})(t,n),s.setup(t,n)}}))}(),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e,t){var n=e||t,r=/^(\d+)([ms]?)$/.exec(""+n);return(r[2]?{s:1e3,m:6e4}[r[2]]:1)*parseInt(n,10)},a=function(t){var n=t.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return(n=(n=(n=n.replace(/\{path\}/g,e.document.location.pathname)).replace(/\{query\}/g,e.document.location.search)).replace(/\{hash\}/g,e.document.location.hash)).replace(/\{id\}/g,t.id)},u=function(e,t){var n=e.settings.forced_root_block;return""===(t=o.trim(void 0===t?e.getBody().innerHTML:t))||new RegExp("^<"+n+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(t)},s=function(e){var t=parseInt(r.getItem(a(e)+"time"),10)||0;return!((new Date).getTime()-t>i(e.settings.autosave_retention,"20m")&&(c(e,!1),1))},c=function(e,t){var n=a(e);r.removeItem(n+"draft"),r.removeItem(n+"time"),!1!==t&&e.fire("RemoveDraft")},l=function(e){var t=a(e);!u(e)&&e.isDirty()&&(r.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),r.setItem(t+"time",(new Date).getTime().toString()),e.fire("StoreDraft"))},f=function(e){var t=a(e);s(e)&&(e.setContent(r.getItem(t+"draft"),{format:"raw"}),e.fire("RestoreDraft"))},d=function(e){e.undoManager.transact((function(){f(e),c(e)})),e.focus()};function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var h=tinymce.util.Tools.resolve("tinymce.EditorManager");h._beforeUnloadHandler=function(){var e;return o.each(h.get(),(function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))})),e};var g=function(e,t){return function(n){var r=n.control;r.disabled(!s(e)),e.on("StoreDraft RestoreDraft RemoveDraft",(function(){r.disabled(!s(e))})),function(e,t){var n=i(e.settings.autosave_interval,"30s");t.get()||(setInterval((function(){e.removed||l(e)}),n),t.set(!0))}(e,t)}};n.add("autosave",(function(n){var r,o,i,a=t(!1);return e.window.onbeforeunload=h._beforeUnloadHandler,o=a,(r=n).addButton("restoredraft",{title:"Restore last draft",onclick:function(){d(r)},onPostRender:g(r,o)}),r.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){d(r)},onPostRender:g(r,o),context:"file"}),n.on("init",(function(){n.getParam("autosave_restore_when_empty",!1)&&n.dom.isEmpty(n.getBody())&&f(n)})),{hasDraft:m(s,i=n),storeDraft:m(l,i),restoreDraft:m(f,i),removeDraft:m(c,i),isEmpty:m(u,i)}}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){e=t.trim(e);var n=function(t,n){e=e.replace(t,n)};return n(/\n/gi,"<br />"),n(/\[b\]/gi,"<strong>"),n(/\[\/b\]/gi,"</strong>"),n(/\[i\]/gi,"<em>"),n(/\[\/i\]/gi,"</em>"),n(/\[u\]/gi,"<u>"),n(/\[\/u\]/gi,"</u>"),n(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),n(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),n(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),n(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),n(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),n(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e};e.add("bbcode",(function(){return{init:function(e){e.on("beforeSetContent",(function(e){e.content=n(e.content)})),e.on("postProcess",(function(e){e.set&&(e.content=n(e.content)),e.get&&(e.content=function(e){e=t.trim(e);var n=function(t,n){e=e.replace(t,n)};return n(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),n(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),n(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),n(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),n(/<font>(.*?)<\/font>/gi,"$1"),n(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),n(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),n(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),n(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),n(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),n(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),n(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),n(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),n(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),n(/<\/(strong|b)>/gi,"[/b]"),n(/<(strong|b)>/gi,"[b]"),n(/<\/(em|i)>/gi,"[/i]"),n(/<(em|i)>/gi,"[i]"),n(/<\/u>/gi,"[/u]"),n(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),n(/<u>/gi,"[u]"),n(/<blockquote[^>]*>/gi,"[quote]"),n(/<\/blockquote>/gi,"[/quote]"),n(/<br \/>/gi,"\n"),n(/<br\/>/gi,"\n"),n(/<br>/gi,"\n"),n(/<p>/gi,""),n(/<\/p>/gi,"\n"),n(/&nbsp;|\u00a0/gi," "),n(/&quot;/gi,'"'),n(/&lt;/gi,"<"),n(/&gt;/gi,">"),n(/&amp;/gi,"&"),e}(e.content))}))}}}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n=function(e,t){return e.fire("insertCustomChar",{chr:t})}(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=n.isArray,o=function(e){return r(e)?[].concat((t=e,n.grep(t,(function(e){return r(e)&&2===e.length})))):"function"==typeof e?e():[];var t},i=function(e){return function(e,t){var n=function(e){return e.settings.charmap}(e);n&&(t=o(n));var r=function(e){return e.settings.charmap_append}(e);return r?[].concat(t).concat(o(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},a=function(e){var t,n,r,o=Math.min(e.length,25),i=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(t+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<e.length){var u=e[a],s=parseInt(u[0],10),c=u?String.fromCharCode(s):"&nbsp;";t+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button" data-chr="'+s+'">'+c+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+"</tbody></table>"},u=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},s=function(e){e.addCommand("mceShowCharmap",(function(){!function(e){var n,r={type:"container",html:a(i(e)),onclick:function(r){var o=r.target;if(/^(TD|DIV)$/.test(o.nodeName)){var i=u(o).firstChild;if(i&&i.hasAttribute("data-chr")){var a=i.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||t(e,String.fromCharCode(s)),r.ctrlKey||n.close()}}},onmouseover:function(e){var t=u(e.target);t&&t.firstChild?(n.find("#preview").text(t.firstChild.firstChild.data),n.find("#previewTitle").text(t.title)):(n.find("#preview").text(" "),n.find("#previewTitle").text(" "))}};n=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){n.close()}}]})}(e)}))};e.add("charmap",(function(e){return s(e),function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})}(e),function(e){return{getCharMap:function(){return i(e)},insertChar:function(n){t(e,n)}}}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},r=function(e){var t=function(e){return e.getParam("code_dialog_width",600)}(e),r=n(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:r,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){!function(e,t){e.focus(),e.undoManager.transact((function(){e.setContent(t)})),e.selection.setCursorLocation(),e.nodeChanged()}(e,t.data.code)}}).find("#code").value(function(e){return e.getContent({source_view:!0})}(e))};e.add("code",(function(e){return function(e){e.addCommand("mceCodeEditor",(function(){r(e)}))}(e),function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){r(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){r(e)}})}(e),{}}))}(),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(e){return Math.min(r.DOM.getViewPort().w,e.getParam("codesample_dialog_width",800))},i=function(e){return Math.min(r.DOM.getViewPort().w,e.getParam("codesample_dialog_height",650))},a={},u=a,s=void 0!==a?a:"undefined"!=typeof WorkerGlobalScope&&e.self instanceof WorkerGlobalScope?e.self:{},c=function(){var t=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=s.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map&&e.map((function(e){return n.util.clone(e)}))}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var o in t)r[o]=t[o];return r},insertBefore:function(e,t,r,o){var i=(o=o||n.languages)[e];if(2===arguments.length){for(var a in r=t)r.hasOwnProperty(a)&&(i[a]=r[a]);return i}var u={};for(var s in i)if(i.hasOwnProperty(s)){if(s===t)for(var a in r)r.hasOwnProperty(a)&&(u[a]=r[a]);u[s]=i[s]}return n.languages.DFS(n.languages,(function(t,n){n===o[e]&&t!==e&&(this[t]=u)})),o[e]=u},DFS:function(e,t,r){for(var o in e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],r||o),"Object"===n.util.type(e[o])?n.languages.DFS(e[o],t):"Array"===n.util.type(e[o])&&n.languages.DFS(e[o],t,o))}},plugins:{},highlightAll:function(t,r){for(var o=e.document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0,a=void 0;a=o[i++];)n.highlightElement(a,!0===t,r)},highlightElement:function(r,o,i){for(var a,u,c=r;c&&!t.test(c.className);)c=c.parentNode;c&&(a=(c.className.match(t)||[,""])[1],u=n.languages[a]),r.className=r.className.replace(t,"").replace(/\s+/g," ")+" language-"+a,c=r.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(t,"").replace(/\s+/g," ")+" language-"+a);var l=r.textContent,f={element:r,language:a,grammar:u,code:l};if(l&&u)if(n.hooks.run("before-highlight",f),o&&s.Worker){var d=new e.Worker(n.filename);d.onmessage=function(e){f.highlightedCode=e.data,n.hooks.run("before-insert",f),f.element.innerHTML=f.highlightedCode,i&&i.call(f.element),n.hooks.run("after-highlight",f),n.hooks.run("complete",f)},d.postMessage(JSON.stringify({language:f.language,code:f.code,immediateClose:!0}))}else f.highlightedCode=n.highlight(f.code,f.grammar,f.language),n.hooks.run("before-insert",f),f.element.innerHTML=f.highlightedCode,i&&i.call(r),n.hooks.run("after-highlight",f),n.hooks.run("complete",f);else n.hooks.run("complete",f)},highlight:function(e,t,o){var i=n.tokenize(e,t);return r.stringify(n.util.encode(i),o)},tokenize:function(e,t,r){var o=n.Token,i=[e],a=t.rest;if(a){for(var u in a)t[u]=a[u];delete t.rest}e:for(var u in t)if(t.hasOwnProperty(u)&&t[u]){var s=t[u];s="Array"===n.util.type(s)?s:[s];for(var c=0;c<s.length;++c){var l=s[c],f=l.inside,d=!!l.lookbehind,m=0,h=l.alias;l=l.pattern||l;for(var g=0;g<i.length;g++){var p=i[g];if(i.length>e.length)break e;if(!(p instanceof o)){l.lastIndex=0;var v=l.exec(p);if(v){d&&(m=v[1].length);var b=v.index-1+m,y=b+(v=v[0].slice(m)).length,x=p.slice(0,b+1),w=p.slice(y+1),C=[g,1];x&&C.push(x);var k=new o(u,f?n.tokenize(v,f):v,h);C.push(k),w&&C.push(w),Array.prototype.splice.apply(i,C)}}}}}return i},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var o=0,i=void 0;i=r[o++];)i(t)}}},r=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(r.stringify=function(e,t,o){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map((function(n){return r.stringify(n,t,e)})).join("");var i={type:e.type,content:r.stringify(e.content,t,o),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:o};if("comment"===i.type&&(i.attributes.spellcheck="true"),e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}n.hooks.run("wrap",i);var u="";for(var s in i.attributes)u+=(u?" ":"")+s+'="'+(i.attributes[s]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+u+">"+i.content+"</"+i.tag+">"},!s.document)return s.addEventListener&&s.addEventListener("message",(function(e){var t=JSON.parse(e.data),r=t.language,o=t.code,i=t.immediateClose;s.postMessage(n.highlight(o,n.languages[r],r)),i&&s.close()}),!1),s.Prism}();void 0!==u&&(u.Prism=c),c.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},c.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),c.languages.xml=c.languages.markup,c.languages.html=c.languages.markup,c.languages.mathml=c.languages.markup,c.languages.svg=c.languages.markup,c.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},c.languages.css.atrule.inside.rest=c.util.clone(c.languages.css),c.languages.markup&&(c.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:c.languages.markup.tag.inside},rest:c.languages.css},alias:"language-css"}}),c.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:c.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:c.languages.css}},alias:"language-css"}},c.languages.markup.tag)),c.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},c.languages.javascript=c.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),c.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),c.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:c.languages.javascript}},string:/[\s\S]+/}}}),c.languages.markup&&c.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:c.languages.markup.tag.inside},rest:c.languages.javascript},alias:"language-javascript"}}),c.languages.js=c.languages.javascript,c.languages.c=c.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),c.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete c.languages.c["class-name"],delete c.languages.c.boolean,c.languages.csharp=c.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),c.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),c.languages.cpp=c.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),c.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),c.languages.java=c.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),c.languages.php=c.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),c.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),c.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),c.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),c.languages.markup&&(c.hooks.add("before-highlight",(function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,(function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"})))})),c.hooks.add("before-insert",(function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)})),c.hooks.add("after-highlight",(function(e){if("php"===e.language){for(var t=0,n=void 0;n=e.tokenStack[t];t++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(t+1)+"}}}",c.highlight(n,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}})),c.hooks.add("wrap",(function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))})),c.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:c.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),c.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(c);var l=function(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")},f=function(e){return function(t,n){return e(n)}},d=function(e){var t=e.selection.getNode();return l(t)?t:null},m=d,h=function(e,t,n){e.undoManager.transact((function(){var o=d(e);n=r.DOM.encode(n),o?(e.dom.setAttrib(o,"class","language-"+t),o.innerHTML=n,c.highlightElement(o),e.selection.select(o)):(e.insertContent('<pre id="__new" class="language-'+t+'">'+n+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0]))}))},g=function(e){return function(e){return e.settings.codesample_languages}(e)||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]},p=function(e){var t=o(e),n=i(e),r=function(e){var t,n=m(e);return n&&(t=n.className.match(/language-(\w+)/))?t[1]:""}(e),a=g(e),u=function(e){var t=d(e);return t?t.textContent:""}(e);e.windowManager.open({title:"Insert/Edit code sample",minWidth:t,minHeight:n,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:a},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:u,autofocus:!0}],onSubmit:function(t){h(e,t.data.language,t.data.code)}})},v=t(!1);n.add("codesample",(function(e,n){var r=t(!1);(function(e){var t=e.$;e.on("PreProcess",(function(e){t("pre[contenteditable=false]",e.node).filter(f(l)).each((function(e,n){var r=t(n),o=n.textContent;r.attr("class",t.trim(r.attr("class"))),r.removeAttr("contentEditable"),r.empty().append(t("<code></code>").each((function(){this.textContent=o})))}))})),e.on("SetContent",(function(){var n=t("pre").filter(f(l)).filter((function(e,t){return"false"!==t.contentEditable}));n.length&&e.undoManager.transact((function(){n.each((function(n,r){t(r).find("br").each((function(t,n){n.parentNode.replaceChild(e.getDoc().createTextNode("\n"),n)})),r.contentEditable=!1,r.innerHTML=e.dom.encode(r.textContent),c.highlightElement(r),r.className=t.trim(r.className)}))}))}))})(e),function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})}(e),function(e){e.addCommand("codesample",(function(){var t=e.selection.getNode();e.selection.isCollapsed()||l(t)?p(e):e.formatter.toggle("code")}))}(e),e.on("init",(function(){!function(e,t,n,r){var o,i=function(e){return e.settings.codesample_content_css}(e);e.inline&&n.get()||!e.inline&&r.get()||(e.inline?n.set(!0):r.set(!0),!1!==i&&(o=e.dom.create("link",{rel:"stylesheet",href:i||t+"/css/prism.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(o)))}(e,n,v,r)})),e.on("dblclick",(function(t){l(t.target)&&p(e)}))}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Color"),n=function(e,t){e.find("#preview")[0].getEl().style.background=t},r=function(e,r){var o=t(r),i=o.toRgb();e.fromJSON({r:i.r,g:i.g,b:i.b,hex:o.toHex().substr(1)}),n(e,o.toHex())};e.add("colorpicker",(function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,o){!function(e,t,o){var i=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();i&&(i.find("#r").value(e.r),i.find("#g").value(e.g),i.find("#b").value(e.b),i.find("#hex").value(this.value().substr(1)),n(i,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=i.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return r(i,t="#"+t),void n.value(t);t={r:i.find("#r").value(),g:i.find("#g").value(),b:i.find("#b").value()},n.value(t),r(i,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+i.toJSON().hex)}});r(i,o)}(e,t,o)})}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return n.DOM.select(e.settings.ui_container)[0]},o=function(e,t){return{x:e,y:t}},i=function(e,t,n){return o(e.x+t,e.y+n)},a=function(e,t){if(e&&"static"!==n.DOM.getStyle(e,"position",!0)){var r=n.DOM.getPos(e),o=r.x-e.scrollLeft,a=r.y-e.scrollTop;return i(t,-o,-a)}return i(t,0,0)},u=tinymce.util.Tools.resolve("tinymce.ui.Factory"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(e,t,c){e.on("contextmenu",(function(l){var f;f=e,(!l.ctrlKey||function(e){return e.settings.contextmenu_never_use_native}(f))&&(l.preventDefault(),function(e,t,n,o){null===o.get()?o.set(function(e,t){var n,o,i=[];o=function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}(e),s.each(o.split(/[ ,]/),(function(t){var n=e.menuItems[t];"|"===t&&(n={text:t}),n&&(n.shortcut="",i.push(n))}));for(var a=0;a<i.length;a++)"|"===i[a].text&&(0!==a&&a!==i.length-1||i.splice(a,1));return(n=u.create("menu",{items:i,context:"contextmenu",classes:"contextmenu"})).uiContainer=r(e),n.renderTo(r(e)),n.on("hide",(function(e){e.control===this&&t.set(!1)})),e.on("remove",(function(){n.remove(),n=null})),n}(e,n)):o.get().show(),o.get().moveTo(t.x,t.y),n.set(!0)}(e,function(e,t){if(e.inline)return a(r(e),o((f=t).pageX,f.pageY));var u,s,c,l,f,d=(u=e.getContentAreaContainer(),s=o((l=t).clientX,l.clientY),c=n.DOM.getPos(u),i(s,c.x,c.y));return a(r(e),d)}(e,l),t,c))}))};t.add("contextmenu",(function(t){var n=e(null),r=e(!1);return c(t,r,n),function(e){return{isContextMenuVisible:function(){return e.get()}}}(r)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,n){var r,o=e.dom,i=e.selection.getSelectedBlocks();i.length&&(r=o.getAttrib(i[0],"dir"),t.each(i,(function(e){o.getParent(e.parentNode,'*[dir="'+n+'"]',o.getRoot())||o.setAttrib(e,"dir",r!==n?n:null)})),e.nodeChanged())},r=function(e){var n=[];return t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),(function(t){n.push(t+"[dir="+e+"]")})),n.join(",")};e.add("directionality",(function(e){(function(e){e.addCommand("mceDirectionLTR",(function(){n(e,"ltr")})),e.addCommand("mceDirectionRTL",(function(){n(e,"rtl")}))})(e),function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:r("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:r("rtl")})}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],r=function(e){var r;return r='<table role="list" class="mce-grid">',t.each(n,(function(n){r+="<tr>",t.each(n,(function(t){var n=e+"/img/smiley-"+t+".gif";r+='<td><a href="#" data-mce-url="'+n+'" data-mce-alt="'+t+'" tabindex="-1" role="option" aria-label="'+t+'"><img src="'+n+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'})),r+="</tr>"})),r+="</table>"};e.add("emoticons",(function(e,t){!function(e,t){var n=r(t);e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n,r,o,i=e.dom.getParent(t.target,"a");i&&(n=e,r=i.getAttribute("data-mce-url"),o=i.getAttribute("data-mce-alt"),n.insertContent(n.dom.createHTML("img",{src:r,alt:o})),this.hide())}},tooltip:"Emoticons"})}(e,t)}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.html.DomParser"),o=tinymce.util.Tools.resolve("tinymce.html.Node"),i=tinymce.util.Tools.resolve("tinymce.html.Serializer"),a=function(e){return e.getParam("fullpage_hide_in_source_view")},u=function(e){return e.getParam("fullpage_default_encoding")},s=function(e){return e.getParam("fullpage_default_font_family")},c=function(e){return e.getParam("fullpage_default_font_size")},l=function(e){return r({validate:!1,root_name:"#document"}).parse(e)},f=l,d=function(e,t){var r=function(e,t){var r,o,i=l(t),a={};function u(e,t){return e.attr(t)||""}return a.fontface=s(e),a.fontsize=c(e),7===(r=i.firstChild).type&&(a.xml_pi=!0,(o=/encoding="([^"]+)"/.exec(r.value))&&(a.docencoding=o[1])),(r=i.getAll("#doctype")[0])&&(a.doctype="<!DOCTYPE"+r.value+">"),(r=i.getAll("title")[0])&&r.firstChild&&(a.title=r.firstChild.value),n.each(i.getAll("meta"),(function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?a[n.toLowerCase()]=e.attr("content"):"Content-Type"===r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(a.docencoding=t[1])})),(r=i.getAll("html")[0])&&(a.langcode=u(r,"lang")||u(r,"xml:lang")),a.stylesheets=[],n.each(i.getAll("link"),(function(e){"stylesheet"===e.attr("rel")&&a.stylesheets.push(e.attr("href"))})),(r=i.getAll("body")[0])&&(a.langdir=u(r,"dir"),a.style=u(r,"style"),a.visited_color=u(r,"vlink"),a.link_color=u(r,"link"),a.active_color=u(r,"alink")),a}(e,t.get());e.windowManager.open({title:"Document properties",data:r,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(a){var u=function(e,t,r){var a,u,s,c,f,d=e.dom;function m(e,t,n){e.attr(t,n||void 0)}function h(e){u.firstChild?u.insert(e,u.firstChild):u.append(e)}a=l(r),(u=a.getAll("head")[0])||(c=a.getAll("html")[0],u=new o("head",1),c.firstChild?c.insert(u,c.firstChild,!0):c.append(u)),c=a.firstChild,t.xml_pi?(f='version="1.0"',t.docencoding&&(f+=' encoding="'+t.docencoding+'"'),7!==c.type&&(c=new o("xml",7),a.insert(c,a.firstChild,!0)),c.value=f):c&&7===c.type&&c.remove(),c=a.getAll("#doctype")[0],t.doctype?(c||(c=new o("#doctype",10),t.xml_pi?a.insert(c,a.firstChild):h(c)),c.value=t.doctype.substring(9,t.doctype.length-1)):c&&c.remove(),c=null,n.each(a.getAll("meta"),(function(e){"Content-Type"===e.attr("http-equiv")&&(c=e)})),t.docencoding?(c||((c=new o("meta",1)).attr("http-equiv","Content-Type"),c.shortEnded=!0,h(c)),c.attr("content","text/html; charset="+t.docencoding)):c&&c.remove(),c=a.getAll("title")[0],t.title?(c?c.empty():h(c=new o("title",1)),c.append(new o("#text",3)).value=t.title):c&&c.remove(),n.each("keywords,description,author,copyright,robots".split(","),(function(e){var n,r,i=a.getAll("meta"),u=t[e];for(n=0;n<i.length;n++)if((r=i[n]).attr("name")===e)return void(u?r.attr("content",u):r.remove());u&&((c=new o("meta",1)).attr("name",e),c.attr("content",u),c.shortEnded=!0,h(c))}));var g={};return n.each(a.getAll("link"),(function(e){"stylesheet"===e.attr("rel")&&(g[e.attr("href")]=e)})),n.each(t.stylesheets,(function(e){g[e]||((c=new o("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),c.shortEnded=!0,h(c)),delete g[e]})),n.each(g,(function(e){e.remove()})),(c=a.getAll("body")[0])&&(m(c,"dir",t.langdir),m(c,"style",t.style),m(c,"vlink",t.visited_color),m(c,"link",t.link_color),m(c,"alink",t.active_color),d.setAttribs(e.getBody(),{style:t.style,dir:t.dir,vLink:t.visited_color,link:t.link_color,aLink:t.active_color})),(c=a.getAll("html")[0])&&(m(c,"lang",t.langcode),m(c,"xml:lang",t.langcode)),u.firstChild||u.remove(),(s=i({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(a)).substring(0,s.indexOf("</body>"))}(e,n.extend(r,a.data),t.get());t.set(u)}})},m=function(e,t){e.addCommand("mceFullPageProperties",(function(){d(e,t)}))},h=n.each,g=function(e){return e.replace(/<\/?[A-Z]+/g,(function(e){return e.toLowerCase()}))},p=function(e){var t,n="",r="";(function(e){return e.getParam("fullpage_default_xml_pi")})(e)&&(n+='<?xml version="1.0" encoding="'+(u(e)||"ISO-8859-1")+'" ?>\n');return n+=function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}(e),n+="\n<html>\n<head>\n",(t=function(e){return e.getParam("fullpage_default_title")}(e))&&(n+="<title>"+t+"</title>\n"),(t=u(e))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=s(e))&&(r+="font-family: "+t+";"),(t=c(e))&&(r+="font-size: "+t+";"),(t=function(e){return e.getParam("fullpage_default_text_color")}(e))&&(r+="color: "+t+";"),n+"</head>\n<body"+(r?' style="'+r+'"':"")+">\n"},v=function(e,t,r){e.on("BeforeSetContent",(function(o){!function(e,t,r,o){var i,u,s,c,l,d="",m=e.dom;if(!(o.selection||(s=function(e,t){return n.each(e,(function(e){t=t.replace(e,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))})),t}(e.settings.protect,o.content),"raw"===o.format&&t.get()||o.source_view&&a(e)))){0!==s.length||o.source_view||(s=n.trim(t.get())+"\n"+n.trim(s)+"\n"+n.trim(r.get())),-1!==(i=(s=s.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(i=s.indexOf(">",i),t.set(g(s.substring(0,i+1))),-1===(u=s.indexOf("</body",i))&&(u=s.length),o.content=n.trim(s.substring(i+1,u)),r.set(g(s.substring(u)))):(t.set(p(e)),r.set("\n</body>\n</html>")),c=f(t.get()),h(c.getAll("style"),(function(e){e.firstChild&&(d+=e.firstChild.value)})),(l=c.getAll("body")[0])&&m.setAttribs(e.getBody(),{style:l.attr("style")||"",dir:l.attr("dir")||"",vLink:l.attr("vlink")||"",link:l.attr("link")||"",aLink:l.attr("alink")||""}),m.remove("fullpage_styles");var v=e.getDoc().getElementsByTagName("head")[0];d&&(m.add(v,"style",{id:"fullpage_styles"},d),(l=m.get("fullpage_styles")).styleSheet&&(l.styleSheet.cssText=d));var b={};n.each(v.getElementsByTagName("link"),(function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(b[e.href]=e)})),n.each(c.getAll("link"),(function(e){var t=e.attr("href");if(!t)return!0;b[t]||"stylesheet"!==e.attr("rel")||m.add(v,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete b[t]})),n.each(b,(function(e){e.parentNode.removeChild(e)}))}}(e,t,r,o)})),e.on("GetContent",(function(o){var i,u,s,c;i=e,u=t.get(),s=r.get(),(c=o).selection||c.source_view&&a(i)||(c.content=function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,(function(e,t){return unescape(t)}))}(n.trim(u)+"\n"+n.trim(c.content)+"\n"+n.trim(s)))}))};t.add("fullpage",(function(t){var n=e(""),r=e("");m(t,n),function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})}(t),v(t,n,r)}))}(),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(e,t){e.fire("FullscreenStateChanged",{state:t})},i=r.DOM,a=function(t,n){t.addCommand("mceFullScreen",(function(){!function(t,n){var r,a,u,s,c,l,f=e.document.body,d=e.document.documentElement,m=n.get(),h=function(){var t,n,r,o;i.setStyle(u,"height",(r=e.window,o=e.document.body,o.offsetWidth&&(t=o.offsetWidth,n=o.offsetHeight),r.innerWidth&&r.innerHeight&&(t=r.innerWidth,n=r.innerHeight),{w:t,h:n}).h-(a.clientHeight-u.clientHeight))},g=function(){i.unbind(e.window,"resize",h)};if(r=(a=t.getContainer()).style,s=(u=t.getContentAreaContainer().firstChild).style,m)s.width=m.iframeWidth,s.height=m.iframeHeight,m.containerWidth&&(r.width=m.containerWidth),m.containerHeight&&(r.height=m.containerHeight),i.removeClass(f,"mce-fullscreen"),i.removeClass(d,"mce-fullscreen"),i.removeClass(a,"mce-fullscreen"),c=m.scrollPos,e.window.scrollTo(c.x,c.y),i.unbind(e.window,"resize",m.resizeHandler),t.off("remove",m.removeHandler),n.set(null),o(t,!1);else{var p={scrollPos:(l=i.getViewPort(),{x:l.x,y:l.y}),containerWidth:r.width,containerHeight:r.height,iframeWidth:s.width,iframeHeight:s.height,resizeHandler:h,removeHandler:g};s.width=s.height="100%",r.width=r.height="",i.addClass(f,"mce-fullscreen"),i.addClass(d,"mce-fullscreen"),i.addClass(a,"mce-fullscreen"),i.bind(e.window,"resize",h),t.on("remove",g),h(),n.set(p),o(t,!0)}}(t,n)}))},u=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",(function(e){n.active(e.state)}))}};n.add("fullscreen",(function(e){var n=t(null);return e.settings.inline||(a(e,n),function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:u(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:u(e)})}(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen")),function(e){return{isFullscreen:function(){return null!==e.get()}}}(n)}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e){return function(){return e}};function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var r,o,i,a,u=t(!1),s=t(!0),c=function(){return l},l=(r=function(e){return e.isNone()},a={fold:function(e,t){return e()},is:u,isSome:u,isNone:s,getOr:i=function(e){return e},getOrThunk:o=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:t(null),getOrUndefined:t(void 0),or:i,orThunk:o,map:c,each:function(){},bind:c,exists:u,forall:s,filter:c,equals:r,equals_:r,toArray:function(){return[]},toString:t("none()")},Object.freeze&&Object.freeze(a),a),f=function(e){var n=t(e),r=function(){return i},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:s,isNone:u,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:r,orThunk:r,map:function(t){return f(t(e))},each:function(t){t(e)},bind:o,exists:o,forall:o,filter:function(t){return t(e)?i:l},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,(function(t){return n(e,t)}))}};return i},d={some:f,none:c,from:function(e){return null==e?l:f(e)}},m=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),h=(Array.prototype.slice,Array.prototype.indexOf),g=function(e,t){return n=e,r=t,-1<h.call(n,r);var n,r},p=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},v=(m(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.I18n")),b=tinymce.util.Tools.resolve("tinymce.Env"),y=b.mac?"⌘":"Ctrl",x=b.mac?"Ctrl + Alt":"Shift + Alt",w={shortcuts:[{shortcut:y+" + B",action:"Bold"},{shortcut:y+" + I",action:"Italic"},{shortcut:y+" + U",action:"Underline"},{shortcut:y+" + A",action:"Select all"},{shortcut:y+" + Y or "+y+" + Shift + Z",action:"Redo"},{shortcut:y+" + Z",action:"Undo"},{shortcut:x+" + 1",action:"Header 1"},{shortcut:x+" + 2",action:"Header 2"},{shortcut:x+" + 3",action:"Header 3"},{shortcut:x+" + 4",action:"Header 4"},{shortcut:x+" + 5",action:"Header 5"},{shortcut:x+" + 6",action:"Header 6"},{shortcut:x+" + 7",action:"Paragraph"},{shortcut:x+" + 8",action:"Div"},{shortcut:x+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + F9",action:"Focus to contextual toolbar"},{shortcut:y+" + K",action:"Insert link (if link plugin activated)"},{shortcut:y+" + S",action:"Save (if save plugin activated)"},{shortcut:y+" + F",action:"Find (if searchreplace plugin activated)"}]},C=function(){var e=p(w.shortcuts,(function(e){return'<tr data-mce-tabstop="1" tabindex="-1" aria-label="Action: '+(t=e).action+", Shortcut: "+t.shortcut.replace(/Ctrl/g,"Control")+'"><td>'+v.translate(e.action)+"</td><td>"+e.shortcut+"</td></tr>";var t})).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+v.translate("Action")+"</th><th>"+v.translate("Shortcut")+"</th></thead>"+e+"</table></div>"}]}},k=Object.keys,T=[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}],S=n((function(e,t){return e.replace(/\$\{([^{}]*)\}/g,(function(e,n){var r,o=t[n];return"string"==(r=typeof o)||"number"===r?o.toString():e}))}),'<a href="${url}" target="_blank" rel="noopener">${name}</a>'),E=function(e){var t,r,o,i=(o=k((t=e).plugins),void 0===t.settings.forced_plugins?o:function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}(o,(r=n(g,t.settings.forced_plugins),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!r.apply(null,e)}))),a=p(i,(function(t){return"<li>"+function(e,t){return function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o))return d.some(o)}return d.none()}(T,(function(e){return e.key===t})).fold((function(){var n=e.plugins[t].getMetadata;return"function"==typeof n?S(n()):t}),(function(e){return S({name:e.name,url:"https://www.tinymce.com/docs/plugins/"+e.key})}))}(e,t)+"</li>"})),u=a.length,s=a.join("");return"<p><b>"+v.translate(["Plugins installed ({0}):",u])+"</b></p><ul>"+s+"</ul>"},_=function(e){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[(t=e,{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+E(t)+"</div>",flex:1}),{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+v.translate("Premium plugins:")+'</b></p><ul><li>PowerPaste</li><li>Spell Checker Pro</li><li>Accessibility Checker</li><li>Advanced Code Editor</li><li>Enhanced Media Embed</li><li>Link Checker</li></ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+v.translate("Learn more...")+"</a></p></div>",flex:1}]};var t},N=tinymce.util.Tools.resolve("tinymce.EditorManager"),R=function(){var e,t,n='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+(e=N.majorVersion,t=N.minorVersion,(0===e.indexOf("@")?"X.X.X":e+"."+t)+"</a>");return[{type:"label",html:v.translate(["You are using {0}",n])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]},O=function(e,t){return function(){e.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[C(),_(e)],buttons:R(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+t+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}};e.add("help",(function(e,t){(function(e,t){e.addButton("help",{icon:"help",onclick:O(e,t)}),e.addMenuItem("help",{text:"Help",icon:"help",context:"help",onclick:O(e,t)})})(e,t),function(e,t){e.addCommand("mceHelp",O(e,t))}(e,t),e.shortcuts.add("Alt+0","Open help dialog","mceHelp")}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("hr",(function(e){(function(e){e.addCommand("InsertHorizontalRule",(function(){e.execCommand("mceInsertContent",!1,"<hr />")}))})(e),function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}(e)}))}(),function(e){"use strict";var t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return!1!==e.settings.image_dimensions},o=function(e){return!0===e.settings.image_advtab},i=function(e){return e.getParam("image_class_list")},a=function(e){return e.getParam("images_upload_url",!1)},u=function(e){return e.getParam("images_upload_handler",!1)},s=function(e){return e.getParam("images_upload_url")},c=function(e){return e.getParam("images_upload_handler")},l=function(e){return e.getParam("images_upload_base_path")},f=function(e){return e.getParam("images_upload_credentials")},d=void 0!==e.window?e.window:Function("return this;")(),m=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:d,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},h=tinymce.util.Tools.resolve("tinymce.util.Promise"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=tinymce.util.Tools.resolve("tinymce.util.XHR"),v=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},b=function(t,n){var r=e.document.createElement("img");function o(e,t){r.parentNode&&r.parentNode.removeChild(r),n({width:e,height:t})}r.onload=function(){o(v(r.width,r.clientWidth),v(r.height,r.clientHeight))},r.onerror=function(){o(0,0)};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",e.document.body.appendChild(r),r.src=t},y=function(e,t,n){return function e(n,r){return r=r||[],g.each(n,(function(n){var o={text:n.text||n.title};n.menu?o.menu=e(n.menu):(o.value=n.value,t(o)),r.push(o)})),r}(e,n||[])},x=function(e){return e&&(e=e.replace(/px$/,"")),e},w=function(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e},C=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},k=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=Object.prototype.hasOwnProperty,S=(t=function(e,t){return t},function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var a in i)T.call(i,a)&&(r[a]=t(r[a],i[a]))}return r}),E=k.DOM,_=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?x(e.style.marginLeft):""},N=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?x(e.style.marginTop):""},R=function(e){return e.style.borderWidth?x(e.style.borderWidth):""},O=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},A=function(e,t){return e.style[t]?e.style[t]:""},P=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},D=function(e,t,n){e.setAttribute(t,n)},M=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");0<r.length?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},B=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=w(r),M(e,t)):D(e,n,r)}},I=function(e,t){return e.style[t]?x(e.style[t]):O(e,t)},L=function(e,t){var n=w(t);e.style.marginLeft=n,e.style.marginRight=n},H=function(e,t){var n=w(t);e.style.marginTop=n,e.style.marginBottom=n},F=function(e,t){var n=w(t);e.style.borderWidth=n},z=function(e,t){e.style.borderStyle=t},W=function(e){return"FIGURE"===e.nodeName},U=function(e,t){return{src:O(t,"src"),alt:O(t,"alt"),title:O(t,"title"),width:I(t,"width"),height:I(t,"height"),class:O(t,"class"),style:e(O(t,"style")),caption:P(t),hspace:_(t),vspace:N(t),border:R(t),borderStyle:A(t,"borderStyle")}},j=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},V=function(e,t){return function(n,r,o){e(n,o),M(n,t)}},$=function(e,t,n){var r=U(e,n);j(n,r,t,"caption",(function(e,t,n){return function(e){var t,n,r,o;P(e)?(o=(r=e).parentNode,E.insertAfter(r,o),E.remove(o)):(t=e,n=E.create("figure",{class:"image"}),E.insertAfter(n,t),n.appendChild(t),n.appendChild(E.create("figcaption",{contentEditable:!0},"Caption")),n.contentEditable="false")}(e)})),j(n,r,t,"src",D),j(n,r,t,"alt",D),j(n,r,t,"title",D),j(n,r,t,"width",B(0,e)),j(n,r,t,"height",B(0,e)),j(n,r,t,"class",D),j(n,r,t,"style",V((function(e,t){return D(e,"style",t)}),e)),j(n,r,t,"hspace",V(L,e)),j(n,r,t,"vspace",V(H,e)),j(n,r,t,"border",V(F,e)),j(n,r,t,"borderStyle",V(z,e))},q=function(e,t){var n=e.dom.styles.parse(t),r=C(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},Y=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},X=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,(function(t){return e.schema.getTextBlockElements()[t.nodeName]}),e.getBody());return r?n.split(r,t):t},G=function(e){var t=Y(e);return t?U((function(t){return q(e,t)}),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},K=function(t,n){var o=Y(t);o?n.src?function(e,t){var n,o=Y(e);if($((function(t){return q(e,t)}),t,o),n=o,e.dom.setAttrib(n,"src",n.getAttribute("src")),W(o.parentNode)){var i=o.parentNode;X(e,i),e.selection.select(o.parentNode)}else e.selection.select(o),function(e,t,n){function o(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!r(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),o()},n.onerror=o}(e,t,o)}(t,n):function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(t,o):n.src&&function(t,n){var r=function(t,n){var r=e.document.createElement("img");if($(t,S(n,{caption:!1}),r),D(r,"alt",n.alt),n.caption){var o=E.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(E.create("figcaption",{contentEditable:!0},"Caption")),o.contentEditable="false",o}return r}((function(e){return q(t,e)}),n);t.dom.setAttrib(r,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(r.outerHTML);var o=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(o,"data-mce-id",null),W(o)){var i=X(t,o);t.selection.select(i)}else t.selection.select(o)}(t,n)},J=function(t,n){n.find("#style").each((function(r){var o=function(t,n){var r=e.document.createElement("img");return D(r,"style",n.style),(_(r)||""!==n.hspace)&&L(r,n.hspace),(N(r)||""!==n.vspace)&&H(r,n.vspace),(R(r)||""!==n.border)&&F(r,n.border),(A(r,"borderStyle")||""!==n.borderStyle)&&z(r,n.borderStyle),t(r.getAttribute("style"))}((function(e){return q(t,e)}),S({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},n.toJSON()));r.value(o)}))},Z=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},Q=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},ee=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),Z(e,t)},te=function(e){Q(e,ee)},ne=function(e){Q(e,Z)},re=te,oe=function(e){e.meta=e.control.rootControl.toJSON()},ie=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){var n,o,i,a,u,s,c,l,f;o=e,s=(n=t).meta||{},c=n.control,(f=(l=c.rootControl).find("#image-list")[0])&&f.value(o.convertURL(c.value(),"src")),g.each(s,(function(e,t){l.find("#"+t).value(e)})),s.width||s.height||(i=o.convertURL(c.value(),"src"),a=function(e){return e.getParam("image_prepend_url","")}(o),u=new RegExp("^(?:[a-z]+:)?//","i"),a&&!u.test(i)&&i.substring(0,a.length)!==a&&(i=a+i),c.value(i),b(o.documentBaseURI.toAbsolute(c.value()),(function(e){e.width&&e.height&&r(o)&&(l.find("#width").value(e.width),l.find("#height").value(e.height),ne(l))})))},onbeforecall:oe},t];return function(e){return!1!==e.settings.image_description}(e)&&n.push({name:"alt",type:"textbox",label:"Image description"}),function(e){return!0===e.settings.image_title}(e)&&n.push({name:"title",type:"textbox",label:"Image Title"}),r(e)&&n.push(function(){var e=function(e){te(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}}()),i(e)&&n.push({name:"class",type:"listbox",label:"Class",values:y(i(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})}))}),function(e){return!0===e.settings.image_caption}(e)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},ae=function(e,t){return{title:"General",type:"form",items:ie(e,t)}},ue=ie,se=function(){return m("URL")},ce=tinymce.util.Tools.resolve("tinymce.ui.Factory"),le=function(){};function fe(t){var n=function(n,r,o,i){var a,u;(a=new(m("XMLHttpRequest"))).open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e,n,i;a.status<200||300<=a.status?o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?r((n=t.basePath,i=e.location,n?n.replace(/\/$/,"")+"/"+i.replace(/^\//,""):i)):o("Invalid JSON: "+a.responseText)},(u=new e.FormData).append("file",n.blob(),n.filename()),a.send(u)};return t=g.extend({credentials:!1,handler:n},t),{upload:function(e){return t.url||t.handler!==n?(r=e,o=t.handler,new h((function(e,t){try{o(r,e,t,le)}catch(e){t(e.message)}}))):h.reject("Upload url missing from the settings.");var r,o}}}var de=function(e){return function(t){var n=ce.get("Throbber"),r=t.control.rootControl,o=new n(r.getEl()),i=t.control.value(),a=function(e){return se().createObjectURL(e)}(i),u=fe({url:s(e),basePath:l(e),credentials:f(e),handler:c(e)}),d=function(){o.hide(),function(e){se().revokeObjectURL(e)}(a)};return o.show(),function(e){return new h((function(t,n){var r=new(m("FileReader"));r.onload=function(){t(r.result)},r.onerror=function(){n(r.error.message)},r.readAsDataURL(e)}))}(i).then((function(t){var n=e.editorUpload.blobCache.create({blob:i,blobUri:a,name:i.name?i.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return u.upload(n).then((function(e){var t=r.find("#src");return t.value(e),r.find("tabpanel")[0].activateTab(0),t.fire("change"),d(),e}))})).catch((function(t){e.windowManager.alert(t),d()}))}},me=".jpg,.jpeg,.png,.gif";function he(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var ge=function(e,t){var n=t.control.getRoot();re(n),e.undoManager.transact((function(){var t=S(G(e),n.toJSON());K(e,t)})),e.editorUpload.uploadImagesAuto()};function pe(e){function t(t){var n,r,i=G(e);if(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:y(t,(function(t){t.value=e.convertURL(t.value||t.url,"src")}),[{text:"None",value:""}]),value:i.src&&e.convertURL(i.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){r=this}}),o(e)||a(e)||u(e)){var s=[ae(e,r)];o(e)&&s.push(function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:(t=e,function(e){var n=t.dom,r=e.control.rootControl;if(o(t)){var i=r.toJSON(),a=n.parseStyle(i.style);r.find("#vspace").value(""),r.find("#hspace").value(""),((a=C(a))["margin-top"]&&a["margin-bottom"]||a["margin-right"]&&a["margin-left"])&&(a["margin-top"]===a["margin-bottom"]?r.find("#vspace").value(x(a["margin-top"])):r.find("#vspace").value(""),a["margin-right"]===a["margin-left"]?r.find("#hspace").value(x(a["margin-right"])):r.find("#hspace").value("")),a["border-width"]?r.find("#border").value(x(a["border-width"])):r.find("#border").value(""),a["border-style"]?r.find("#borderStyle").value(a["border-style"]):r.find("#borderStyle").value(""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(a))))}})},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){J(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){J(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]};var t}(e)),(a(e)||u(e))&&s.push(function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:me,onchange:de(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:me,height:100,onchange:de(e)}]}}(e)),n=e.windowManager.open({title:"Insert/edit image",data:i,bodyType:"tabpanel",body:s,onSubmit:he(ge,e)})}else n=e.windowManager.open({title:"Insert/edit image",data:i,body:ue(e,r),onSubmit:he(ge,e)});ne(n)}return{open:function(){!function(e,t){var n=function(e){return e.getParam("image_list",!1)}(e);"string"==typeof n?p.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}(e,t)}}}var ve=function(e){return function(t){for(var n,r,o=t.length,i=function(t){t.attr("contenteditable",e?"true":null)};o--;)(r=(n=t[o]).attr("class"))&&/\bimage\b/.test(r)&&(n.attr("contenteditable",e?"false":null),g.each(n.getAll("figcaption"),i))}};n.add("image",(function(e){(function(e){e.on("preInit",(function(){e.parser.addNodeFilter("figure",ve(!0)),e.serializer.addNodeFilter("figure",ve(!1))}))})(e),function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:pe(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:pe(e).open,context:"insert",prependToContext:!0})}(e),function(e){e.addCommand("mceImage",pe(e).open)}(e)}))}(window),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return function(){return e}};function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var a,u,s,c,l=o(!1),f=o(!0),d=function(){return m},m=(a=function(e){return e.isNone()},c={fold:function(e,t){return e()},is:l,isSome:l,isNone:f,getOr:s=function(e){return e},getOrThunk:u=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:s,orThunk:u,map:d,each:function(){},bind:d,exists:l,forall:f,filter:d,equals:a,equals_:a,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(c),c),h=function(e){var t=o(e),n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return h(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(l,(function(t){return n(e,t)}))}};return i},g={some:h,none:d,from:function(e){return null==e?m:h(e)}};function p(t,n){return y(e.document.createElement("canvas"),t,n)}function v(e){var t=p(e.width,e.height);return b(t).drawImage(e,0,0),t}function b(e){return e.getContext("2d")}function y(e,t,n){return e.width=t,e.height=n,e}function x(e){return e.naturalWidth||e.width}function w(e){return e.naturalHeight||e.height}var C=window.Promise?window.Promise:function(){var t=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,r(a,this),r(u,this))},n=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){e.setTimeout(t,1)};function r(e,t){return function(){return e.apply(t,arguments)}}var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;null!==this._state?n((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(r(t,e),r(a,this),r(u,this))}this._state=!0,this._value=e,s.call(this)}catch(e){u.call(this,e)}}function u(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds;e<t.length;e++){var n=t[e];i.call(this,n)}this._deferreds=[]}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(e){if(r)return;r=!0,n(e)}}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){i.call(r,new c(e,n,t,o))}))},t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(1===e.length&&o(e[0])?e[0]:e);return new t((function(e,t){if(0===r.length)return e([]);var n=r.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),t)}r[i]=a,0==--n&&e(r)}catch(e){t(e)}}for(var i=0;i<r.length;i++)o(i,r[i])}))},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=0,o=e;r<o.length;r++)o[r].then(t,n)}))},t}();function k(t){return new C((function(n,r){var o=e.URL.createObjectURL(t),i=new e.Image,a=function(){i.removeEventListener("load",u),i.removeEventListener("error",s)};function u(){a(),n(i)}function s(){a(),r("Unable to load data of type "+t.type+": "+o)}i.addEventListener("load",u),i.addEventListener("error",s),i.src=o,i.complete&&u()}))}function T(t){return new C((function(n,r){(function(t){var n=t.split(","),r=/data:([^;]+)/.exec(n[0]);if(!r)return g.none();for(var o=r[1],i=n[1],a=e.atob(i),u=a.length,s=Math.ceil(u/1024),c=new Array(s),l=0;l<s;++l){for(var f=1024*l,d=Math.min(f+1024,u),m=new Array(d-f),h=f,p=0;h<d;++p,++h)m[p]=a[h].charCodeAt(0);c[l]=new Uint8Array(m)}return g.some(new e.Blob(c,{type:o}))})(t).fold((function(){r("uri is not base64: "+t)}),n)}))}function S(t,n,r){return n=n||"image/png",e.HTMLCanvasElement.prototype.toBlob?new C((function(e,o){t.toBlob((function(t){t?e(t):o()}),n,r)})):T(t.toDataURL(n,r))}function E(e,t,n){var r=t.type;function i(t,n){return e.then((function(e){return o=n,r=(r=t)||"image/png",e.toDataURL(r,o);var r,o}))}return{getType:o(r),toBlob:function(){return C.resolve(t)},toDataURL:function(){return n},toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(t,n){return e.then((function(e){return S(e,t,n)}))},toAdjustedDataURL:i,toAdjustedBase64:function(e,t){return i(e,t).then((function(e){return e.split(",")[1]}))},toCanvas:function(){return e.then(v)}}}function _(t){return(n=t,new C((function(t){var r=new e.FileReader;r.onloadend=function(){t(r.result)},r.readAsDataURL(n)}))).then((function(n){return E(function(t){return k(t).then((function(t){var n;n=t,e.URL.revokeObjectURL(n.src);var r=p(x(t),w(t));return b(r).drawImage(t,0,0),r}))}(t),t,n)}));var n}function N(e,t){return S(e,t).then((function(t){return E(C.resolve(e),t,e.toDataURL())}))}function R(e,t,n){var r="string"==typeof e?parseFloat(e):e;return n<r?r=n:r<t&&(r=t),r}var O=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function A(e,t){for(var n,r=[],o=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)r[a]=t[a+5*i];for(a=0;a<5;a++){for(var u=n=0;u<5;u++)n+=e[a+5*u]*r[u];o[a+5*i]=n}}return o}function P(e,t){return t=R(t,0,1),e.map((function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,R(e,0,1)}))}function D(e,t){return e.toCanvas().then((function(n){return r=n,o=e.getType(),i=t,u=function(e,t){for(var n,r,o,i,a=e.data,u=t[0],s=t[1],c=t[2],l=t[3],f=t[4],d=t[5],m=t[6],h=t[7],g=t[8],p=t[9],v=t[10],b=t[11],y=t[12],x=t[13],w=t[14],C=t[15],k=t[16],T=t[17],S=t[18],E=t[19],_=0;_<a.length;_+=4)n=a[_],r=a[_+1],o=a[_+2],i=a[_+3],a[_]=n*u+r*s+o*c+i*l+f,a[_+1]=n*d+r*m+o*h+i*g+p,a[_+2]=n*v+r*b+o*y+i*x+w,a[_+3]=n*C+r*k+o*T+i*S+E;return e}((a=b(r)).getImageData(0,0,r.width,r.height),i),a.putImageData(u,0,0),N(r,o);var r,o,i,a,u}))}function M(e){return function(t,n){return t.toCanvas().then((function(r){return function(t,n,r){for(var o=b(t),i=new Array(256),a=0;a<i.length;a++)i[a]=e(a,r);var u=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(o.getImageData(0,0,t.width,t.height),i);return o.putImageData(u,0,0),N(t,n)}(r,t.getType(),n)}))}}function B(e){return function(t,n){return D(t,e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function I(e){return function(t){return function(e,t){return e.toCanvas().then((function(n){return r=n,o=e.getType(),i=t,u=function(e,t,n){function r(e,t,n){return n<e?e=n:e<t&&(e=t),e}for(var o=Math.round(Math.sqrt(n.length)),i=Math.floor(o/2),a=e.data,u=t.data,s=e.width,c=e.height,l=0;l<c;l++)for(var f=0;f<s;f++){for(var d=0,m=0,h=0,g=0;g<o;g++)for(var p=0;p<o;p++){var v=r(f+p-i,0,s-1),b=4*(r(l+g-i,0,c-1)*s+v),y=n[g*o+p];d+=a[b]*y,m+=a[b+1]*y,h+=a[b+2]*y}var x=4*(l*s+f);u[x]=r(d,0,255),u[x+1]=r(m,0,255),u[x+2]=r(h,0,255)}return t}((a=b(r)).getImageData(0,0,r.width,r.height),u=a.getImageData(0,0,r.width,r.height),i),a.putImageData(u,0,0),N(r,o);var r,o,i,a,u}))}(t,e)}}var L,H=(L=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(e){return D(e,L)}),F=B((function(e,t){return A(e,[1,0,0,0,t=R(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])})),z=B((function(e,t){t=R(t,-180,180)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),o=.213,i=.715,a=.072;return A(e,[o+.787*n+r*-o,i+n*-i+r*-i,a+n*-a+.928*r,0,0,o+n*-o+.143*r,i+n*(1-i)+.14*r,a+n*-a+-.283*r,0,0,o+n*-o+-.787*r,i+n*-i+r*i,a+.928*n+r*a,0,0,0,0,0,1,0,0,0,0,0,1])})),W=B((function(e,t){var n=1+(0<(t=R(t,-1,1))?3*t:t);return A(e,[.3086*(1-n)+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])})),U=B((function(e,t){var n;return t=R(t,-1,1),A(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?O[t]:O[Math.floor(t)]*(1-n)+O[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),j=B((function(e,t){return A(e,P([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=R(t,0,1)))})),V=B((function(e,t){return A(e,P([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=R(t,0,1)))})),$=I([0,-1,0,-1,5,-1,0,-1,0]),q=I([-2,-1,0,-1,1,1,0,1,2]),Y=M((function(e,t){return 255*Math.pow(e/255,1-t)})),X=M((function(e,t){return 255*(1-Math.exp(-e/255*t))}));var G=function(e){return H(e)},K=function(e){return $(e)},J=function(e){return q(e)},Z=function(e,t){return Y(e,t)},Q=function(e,t){return X(e,t)},ee=function(e,t,n,r){return function(e,t,n,r){return D(e,(o=n,i=r,A([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[R(t,0,2),0,0,0,0,0,o=R(o,0,2),0,0,0,0,0,i=R(i,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var o,i}(e,t,n,r)},te=function(e,t){return F(e,t)},ne=function(e,t){return z(e,t)},re=function(e,t){return W(e,t)},oe=function(e,t){return U(e,t)},ie=function(e,t){return j(e,t)},ae=function(e,t){return V(e,t)},ue=function(e,t){return function(e,t){return e.toCanvas().then((function(n){return r=n,o=e.getType(),i=t,u=b(a=p(r.width,r.height)),"v"===i?(u.scale(1,-1),u.drawImage(r,0,-a.height)):(u.scale(-1,1),u.drawImage(r,-a.width,0)),N(a,o);var r,o,i,a,u}))}(e,t)},se=function(e,t,n,r,o){return function(e,t,n,r,o){return e.toCanvas().then((function(i){return a=i,u=e.getType(),s=t,c=n,b(l=p(r,o)).drawImage(a,-s,-c),N(l,u);var a,u,s,c,l}))}(e,t,n,r,o)},ce=function(e,t,n){return o=t,i=n,(r=e).toCanvas().then((function(e){return function e(t,n,r){var o=x(t),i=w(t),a=n/o,u=r/i,s=!1;(a<.5||2<a)&&(a=a<.5?.5:2,s=!0),(u<.5||2<u)&&(u=u<.5?.5:2,s=!0);var c,l,f,d=(c=t,l=a,f=u,new C((function(e){var t=x(c),n=w(c),r=Math.floor(t*l),o=Math.floor(n*f),i=p(r,o);b(i).drawImage(c,0,0,t,n,0,0,r,o),e(i)})));return s?d.then((function(t){return e(t,n,r)})):d}(e,o,i).then((function(e){return N(e,r.getType())}))}));var r,o,i},le=function(e,t){return function(e,t){return e.toCanvas().then((function(n){return r=n,o=e.getType(),i=t,u=b(a=p(r.width,r.height)),90!==(i=i<(c=s=0)?360+i:i)&&270!==i||y(a,a.height,a.width),90!==i&&180!==i||(s=a.width),270!==i&&180!==i||(c=a.height),u.translate(s,c),u.rotate(i*Math.PI/180),u.drawImage(r,0,0),N(a,o);var r,o,i,a,u,s,c}))}(e,t)},fe=function(e){return _(e)},de=void 0!==e.window?e.window:Function("return this;")(),me=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:de,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},he=function(){return me("URL")},ge=function(e){return he().createObjectURL(e)},pe=function(e){he().revokeObjectURL(e)},ve=tinymce.util.Tools.resolve("tinymce.util.Delay"),be=tinymce.util.Tools.resolve("tinymce.util.Promise"),ye=tinymce.util.Tools.resolve("tinymce.util.URI"),xe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),we=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Ce=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ke=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Te=tinymce.util.Tools.resolve("tinymce.util.Observable"),Se=tinymce.util.Tools.resolve("tinymce.util.VK"),Ee=0,_e=function(t){return new(we.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(t){var n=this,r=new e.Image;r.src=t,function(e){return new be((function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)}))}(r).then((function(){var t,o,i=n.state.get("viewRect");if((o=n.$el.find("img"))[0])o.replaceWith(r);else{var a=e.document.createElement("div");a.className="mce-imagepanel-bg",n.getEl().appendChild(a),n.getEl().appendChild(r)}t={x:0,y:0,w:r.naturalWidth,h:r.naturalHeight},n.state.set("viewRect",t),n.state.set("rect",Ce.inflate(t,-20,-20)),i&&i.w===t.w&&i.h===t.h||n.zoomFit(),n.repaintImage(),n.fire("load")}))},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i;e=this.$el.find("img"),t=this.getEl().clientWidth,n=this.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,1<=(i=Math.min((t-10)/r,(n-10)/o))&&(i=1),this.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,u,s,c,l;l=this.getEl(),s=this.zoom(),c=this.state.get("rect"),a=this.$el.find("img"),u=this.$el.find(".mce-imagepanel-bg"),o=l.offsetWidth,i=l.offsetHeight,n=a[0].naturalWidth*s,r=a[0].naturalHeight*s,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),u.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:c.x*s+e,y:c.y*s+t,w:c.w*s,h:c.h*s}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){var e=this;e.state.on("change:cropEnabled",(function(t){e.cropRect.toggleVisibility(t.value),e.repaintImage()})),e.state.on("change:zoom",(function(){e.repaintImage()})),e.state.on("change:rect",(function(t){var n=t.value;e.cropRect||function(t){e.cropRect=function(e,t,n,o,i){var a,u,s,c,l="mce-",f=l+"crid-"+Ee++;function d(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(t,r,o,i){var u,s,c,l,f;u=r.x,s=r.y,c=r.w,l=r.h,u+=o*t.deltaX,s+=i*t.deltaY,(c+=o*t.deltaW)<20&&(c=20),(l+=i*t.deltaH)<20&&(l=20),f=e=Ce.clamp({x:u,y:s,w:c,h:l},n,"move"===t.name),f=d(n,f),a.fire("updateRect",{rect:f}),p(f)}function h(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),ke("#"+f+"-"+e,o).css({left:t.x,top:t.y,width:t.w,height:t.h})}r.each(u,(function(t){ke("#"+f+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})})),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function g(t){h(e=t)}function p(e){var t,r;g((t=n,{x:(r=e).x+t.x,y:r.y+t.y,w:r.w,h:r.h}))}return u=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],c=["top","right","bottom","left"],ke('<div id="'+f+'" class="'+l+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),r.each(c,(function(e){ke("#"+f,o).append('<div id="'+f+"-"+e+'"class="'+l+'croprect-block" style="display: none" data-mce-bogus="all">')})),r.each(u,(function(e){ke("#"+f,o).append('<div id="'+f+"-"+e.name+'" class="'+l+"croprect-handle "+l+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')})),s=r.map(u,(function(t){var n;return new(we.get("DragHelper"))(f,{document:o.ownerDocument,handle:f+"-"+t.name,start:function(){n=e},drag:function(e){m(t,n,e.deltaX,e.deltaY)}})})),h(e),ke(o).on("focusin focusout",(function(e){ke(e.target).attr("aria-grabbed","focus"===e.type)})),ke(o).on("keydown",(function(t){var n;function o(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),m(n,r,o,i)}switch(r.each(u,(function(e){if(t.target.id===f+"-"+e.name)return n=e,!1})),t.keyCode){case Se.LEFT:o(t,0,e,-10,0);break;case Se.RIGHT:o(t,0,e,10,0);break;case Se.UP:o(t,0,e,0,-10);break;case Se.DOWN:o(t,0,e,0,10);break;case Se.ENTER:case Se.SPACEBAR:t.preventDefault(),i()}})),a=r.extend({toggleVisibility:function(e){var t;t=r.map(u,(function(e){return"#"+f+"-"+e.name})).concat(r.map(c,(function(e){return"#"+f+"-"+e}))).join(","),e?ke(t,o).show():ke(t,o).hide()},setClampRect:function(t){n=t,h(e)},setRect:g,getInnerRect:function(){return d(n,e)},setInnerRect:p,setViewPortRect:function(n){t=n,h(e)},destroy:function(){r.each(s,(function(e){e.destroy()})),s=[]}},Te)}(t,e.state.get("viewRect"),e.state.get("viewRect"),e.getEl(),(function(){e.fire("crop")})),e.cropRect.on("updateRect",(function(t){var n=t.rect,r=e.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},e.state.set("rect",n)})),e.on("remove",e.cropRect.destroy)}(n),e.cropRect.setRect(n)}))}}))(t)};function Ne(e){return{blob:e,url:ge(e)}}function Re(e){e&&pe(e.url)}function Oe(e){r.each(e,Re)}var Ae=function(e,t){return new be((function(n,o){return t.toBlob().then((function(t){!function(e,t,n,o){var i,a,u,s,c,l,f,d,m,h,g,p,v,b,y,x,w,C,k,T,S,E,_,N,R,O,A,P=function(){var e=[],t=-1;function n(){return 0<t}function r(){return-1!==t&&t<e.length-1}return{data:e,add:function(n){var r;return r=e.splice(++t),e.push(n),{state:n,removed:r}},undo:function(){if(n())return e[--t]},redo:function(){if(r())return e[++t]},canUndo:n,canRedo:r}}(),D=function(t){return e.rtl?t.reverse():t};function M(e){var t,n,r,o;t=i.find("#w")[0],n=i.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),i.find("#constrain")[0].checked()&&N&&R&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*O),n.value(o)):(r=Math.round(o*A),t.value(r))),N=r,R=o}function B(e){return Math.round(100*e)+"%"}function I(){i.find("#undo").disabled(!P.canUndo()),i.find("#redo").disabled(!P.canRedo()),i.statusbar.find("#save").disabled(!P.canUndo())}function L(){i.find("#undo").disabled(!0),i.find("#redo").disabled(!0)}function H(e){e&&d.imageSrc(e.url)}function F(e){return function(){var t=r.grep(_,(function(t){return t.settings.name!==e}));r.each(t,(function(e){e.hide()})),e.show(),e.focus()}}function z(e){H(s=Ne(e))}function W(e){H(t=Ne(e)),Oe(P.add(t).removed),I()}function U(){var e=d.selection();fe(t.blob).then((function(t){se(t,e.x,e.y,e.w,e.h).then(Y).then((function(e){W(e),V()}))}))}var j=function(e){var n=[].slice.call(arguments,1);return function(){fe((s||t).blob).then((function(t){e.apply(this,[t].concat(n)).then(Y).then(z)}))}};function V(){H(t),Re(s),F(a)(),I()}function $(){s?(W(s.blob),V()):function t(n,r){s?r():setTimeout((function(){0<n--?t(n,r):e.windowManager.alert("Error: failed to apply image operation.")}),10)}(100,$)}function q(e){return we.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}var Y=function(e){return e.toBlob()};function X(e,n){return q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",(function(){L(),fe(t.blob).then((function(e){return n(e)})).then(Y).then((function(e){var t=Ne(e);H(t),Re(s),s=t}))}))}function de(n,r,o,i,a){return q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){var n;n=e.value,fe(t.blob).then((function(e){return r(e,n)})).then(Y).then((function(e){var t=Ne(e);H(t),Re(s),s=t}))},minValue:e.rtl?a:i,maxValue:e.rtl?i:a,value:o,previewFilter:B},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",(function(){this.find("slider").value(o),L()}))}c=q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:U}])).hide().on("show hide",(function(e){d.toggleCropRect("show"===e.type)})).on("show",L),l=q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:M},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:M},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(e){!0===e.control.value()&&(O=R/N,A=N/R)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",(function(e){var n=parseInt(i.find("#w").value(),10),r=parseInt(i.find("#h").value(),10);e.preventDefault(),function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){fe(t.blob).then((function(t){e.apply(this,[t].concat(o)).then(Y).then(W)}))}}(ce,n,r)(),V()})).on("show",L),f=q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:j(ue,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:j(ue,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:j(le,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:j(le,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",L),g=X(0,G),k=X(0,K),T=X(0,J),p=de(0,te,0,-1,1),v=de(0,ne,180,0,360),b=de(0,re,0,-1,1),y=de(0,oe,0,-1,1),x=de(0,ie,0,0,1),w=de(0,ae,0,0,1),C=function(n,r){function o(){var e,n,o;e=i.find("#r")[0].value(),n=i.find("#g")[0].value(),o=i.find("#b")[0].value(),fe(t.blob).then((function(t){return r(t,e,n,o)})).then(Y).then((function(e){var t=Ne(e);H(t),Re(s),s=t}))}var a=e.rtl?2:0,u=e.rtl?0:2;return q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:B},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:B},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:B},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:$}])).hide().on("show",(function(){i.find("#r,#g,#b").value(1),L()}))}(0,ee),S=de(0,Z,0,-1,1),E=de(0,Q,1,0,2),u=q(D([{text:"Back",onclick:V},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:F(v)},{text:"saturate",icon:"saturate",onclick:F(b)},{text:"sepia",icon:"sepia",onclick:F(w)},{text:"emboss",icon:"emboss",onclick:F(T)},{text:"exposure",icon:"exposure",onclick:F(E)},{type:"spacer",flex:1}])).hide(),a=q(D([{tooltip:"Crop",icon:"crop",onclick:F(c)},{tooltip:"Resize",icon:"resize2",onclick:F(l)},{tooltip:"Orientation",icon:"orientation",onclick:F(f)},{tooltip:"Brightness",icon:"sun",onclick:F(p)},{tooltip:"Sharpen",icon:"sharpen",onclick:F(k)},{tooltip:"Contrast",icon:"contrast",onclick:F(y)},{tooltip:"Color levels",icon:"drop",onclick:F(C)},{tooltip:"Gamma",icon:"gamma",onclick:F(S)},{tooltip:"Invert",icon:"invert",onclick:F(g)}])),d=_e({flex:1,imageSrc:t.url}),m=we.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){H(t=P.undo()),I()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){H(t=P.redo()),I()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var e=d.zoom();e<2&&(e+=.1),d.zoom(e)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var e=d.zoom();.1<e&&(e-=.1),d.zoom(e)}}]}),h=we.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:D([m,d])}),_=[a,c,l,f,u,g,p,v,b,y,x,w,C,k,T,S,E],(i=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(xe.DOM.getViewPort().w,800),minHeight:Math.min(xe.DOM.getViewPort().h,650),title:"Edit image",items:_.concat([h]),buttons:D([{text:"Save",name:"save",subtype:"primary",onclick:function(){n(t.blob),i.close()}},{text:"Cancel",onclick:"close"}])})).on("close",(function(){o(),Oe(P.data),s=P=null})),P.add(t),I(),d.on("load",(function(){N=d.imageSize().w,R=d.imageSize().h,O=R/N,A=N/R,i.find("#w").value(N),i.find("#h").value(R)})),d.on("crop",U)}(e,Ne(t),n,o)}))}))},Pe=function(e){var t,n;function r(e){return/^[0-9\.]+px$/.test(e)}return t=e.style.width,n=e.style.height,t||n?r(t)&&r(n)?{w:parseInt(t,10),h:parseInt(n,10)}:null:(t=e.width,n=e.height,t&&n?{w:parseInt(t,10),h:parseInt(n,10)}:null)},De=function(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))},Me=function(e){return{w:e.naturalWidth,h:e.naturalHeight}},Be=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),Ie=(Array.prototype.slice,function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return g.some(o)}return g.none()});Be(Array.from)&&Array.from;var Le=function(e){return null!=e},He=function(e,t,n){return new be((function(o){var i;(i=new(me("XMLHttpRequest"))).onreadystatechange=function(){4===i.readyState&&o({status:i.status,blob:this.response})},i.open("GET",e,!0),i.withCredentials=n,r.each(t,(function(e,t){i.setRequestHeader(t,e)})),i.responseType="blob",i.send()}))},Fe=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],ze=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],We=function(e){var t=function(e){return"ImageProxy HTTP error: "+Ie(Fe,(function(t){return e===t.code})).fold(o("Unknown ImageProxy error"),(function(e){return e.message}))}(e);return be.reject(t)},Ue=function(e,t){return function(e){return new be((function(t){var n=new(me("FileReader"));n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)}))}(t).then((function(e){var t,n="ImageProxy Service error: "+((t=function(e,t){var n;return n=t.reduce((function(e,t){return Le(e)?e[t]:void 0}),e),Le(n)?n:null}(function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}(e),["error","type"]))?function(e){return Ie(ze,(function(t){return t.type===e})).fold(o("Unknown service error"),(function(e){return e.message}))}(t):"Invalid JSON in service error message");return be.reject(n)}))},je=We,Ve=function(e,t){var n,r,o,i={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return He((n=e,r=t,o=-1===n.indexOf("?")?"?":"&",/[?&]apiKey=/.test(n)||!r?n:n+o+"apiKey="+encodeURIComponent(r)),i,!1).then((function(e){return e.status<200||300<=e.status?function(e,t){return 400===(n=e)||403===n||500===n?Ue(0,t):We(e);var n}(e.status,e.blob):be.resolve(e.blob)}))},$e=function(e,t,n){return t?Ve(e,t):He(e,{},n).then((function(e){return e.status<200||300<=e.status?je(e.status):be.resolve(e.blob)}))},qe=0,Ye=function(e,t){e.notificationManager.open({text:t,type:"error"})},Xe=function(e){return e.selection.getNode()},Ge=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new ye(n).host===e.documentBaseURI.host},Ke=function(e,t){return-1!==r.inArray(e.getParam("imagetools_cors_hosts",[],"string[]"),new ye(t.src).host)},Je=function(t,n){var o,i,a,u,s=n.src;return Ke(t,n)?$e(n.src,null,(i=t,a=n,-1!==r.inArray(i.getParam("imagetools_credentials_hosts",[],"string[]"),new ye(a.src).host))):Ge(t,n)?function(t){var n,r=t.src;return 0===r.indexOf("data:")?T(r):(n=r,new C((function(t,r){var o=new e.XMLHttpRequest;o.open("GET",n,!0),o.responseType="blob",o.onload=function(){200===this.status&&t(this.response)},o.onerror=function(){var e;r(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+this.status+" downloading image"))},o.send()})))}(n):(s=t.getParam("imagetools_proxy"),s+=(-1===s.indexOf("?")?"?":"&")+"url="+encodeURIComponent(n.src),o=(u=t).getParam("api_key",u.getParam("imagetools_api_key","","string"),"string"),$e(s,o,!1))},Ze=function(e){var t;return(t=e.editorUpload.blobCache.getByUri(Xe(e).src))?be.resolve(t.blob()):Je(e,Xe(e))},Qe=function(e){clearTimeout(e.get())},et=function(e,t,n,r,o){return t.toBlob().then((function(i){var a,u,s,c,l,f,d;return s=e.editorUpload.blobCache,a=(l=Xe(e)).src,e.getParam("images_reuse_filename",!1,"boolean")&&((c=s.getByUri(a))?(a=c.uri(),u=c.name()):(f=e,u=(d=a.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i))?f.dom.encode(d[1]):null)),c=s.create({id:"imagetools"+qe++,blob:i,base64:t.toBase64(),uri:a,name:u}),s.add(c),e.undoManager.transact((function(){e.$(l).on("load",(function t(){var o,i,a;e.$(l).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(Qe(r),o=e,i=r,a=ve.setEditorTimeout(o,(function(){o.editorUpload.uploadImagesAuto()}),o.getParam("images_upload_timeout",3e4,"number")),i.set(a))})),o&&e.$(l).attr({width:o.w,height:o.h}),e.$(l).attr({src:c.blobUri()}).removeAttr("data-mce-src")})),c}))},tt=function(e,t,n,r){return function(){return e._scanForImages().then(i(Ze,e)).then(fe).then(n).then((function(n){return et(e,n,!1,t,r)}),(function(t){Ye(e,t)}))}},nt=function(e,t,n){return function(){var r=Pe(Xe(e)),o=r?{w:r.h,h:r.w}:null;return tt(e,t,(function(e){return le(e,n)}),o)()}},rt=function(e,t,n){return function(){return tt(e,t,(function(e){return ue(e,n)}))()}},ot=function(e,t){return function(){var n=Xe(e),r=Me(n),o=function(e){return new be((function(t){var o;(o=e,k(o)).then((function(o){var i=Me(o);r.w===i.w&&r.h===i.h||Pe(n)&&De(n,i),pe(o.src),t(e)}))}))};Ze(e).then(fe).then(i((function(e,n){return Ae(e,n).then(o).then(fe).then((function(n){return et(e,n,!0,t)}),(function(){}))}),e),(function(t){Ye(e,t)}))}},it=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(Ge(e,t)||Ke(e,t)||e.settings.imagetools_proxy)},at=Qe;n.add("imagetools",(function(e){var n=t(0),o=t(null);(function(e,t){r.each({mceImageRotateLeft:nt(e,t,-90),mceImageRotateRight:nt(e,t,90),mceImageFlipVertical:rt(e,t,"v"),mceImageFlipHorizontal:rt(e,t,"h"),mceEditImage:ot(e,t)},(function(t,n){e.addCommand(n,t)}))})(e,n),function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}(e),function(e){e.addContextToolbar(i(it,e),e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions"))}(e),function(e,t,n){e.on("NodeChange",(function(r){var o=n.get();o&&o.src!==r.element.src&&(at(t),e.editorUpload.uploadImagesAuto(),n.set(null)),it(e,r.element)&&n.set(r.element)}))}(e,n,o)}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return e.getParam("importcss_selector_converter")},a=function(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},u=function(e,t,i){var a=[],u={};o.each(e.contentCSS,(function(e){u[e]=!0})),i||(i=function(e,t){return t||u[e]});try{o.each(t.styleSheets,(function(t){!function t(u,s){var c,l,f,d=u.href;if(l=d,f=r.cacheSuffix,"string"==typeof l&&(l=l.replace("?"+f,"").replace("&"+f,"")),(d=l)&&i(d,s)&&(h=d,!(p=!1!==(g=(m=e).settings).skin&&(g.skin||"lightgray"))||h!==(g.skin_url?m.documentBaseURI.toAbsolute(g.skin_url):n.baseURL+"/skins/"+p)+"/content"+(m.inline?".inline":"")+".min.css")){var m,h,g,p;o.each(u.imports,(function(e){t(e,!0)}));try{c=u.cssRules||u.rules}catch(e){}o.each(c,(function(e){e.styleSheet?t(e.styleSheet,!0):e.selectorText&&o.each(e.selectorText.split(","),(function(e){a.push(o.trim(e))}))}))}}(t)}))}catch(e){}return a},s=function(e,t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var i=r[1],a=r[2].substr(1).split(".").join(" "),u=o.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||u[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:a}),!1!==function(e){return e.getParam("importcss_merge_classes")}(e)?n.classes=a:n.attributes={class:a},n}},c=function(e,t){return null===t||!1!==function(e){return e.getParam("importcss_exclusive")}(e)},l=s;e.add("importcss",(function(e){return function(e){e.on("renderFormatsMenu",(function(n){var r,l={},f=a(function(e){return e.getParam("importcss_selector_filter")}(e)),d=n.control,m=(r=function(e){return e.getParam("importcss_groups")}(e),o.map(r,(function(e){return o.extend({},e,{original:e,selectors:{},filter:a(e.filter),item:{text:e.title,menu:[]}})}))),h=function(n,r){if(y=n,w=l,!(c(e,x=r)?y in w:y in x.selectors)){p=n,b=l,c(e,v=r)?b[p]=!0:v.selectors[p]=!0;var a=(m=(f=e).plugins.importcss,h=n,((g=r)&&g.selector_converter?g.selector_converter:i(f)?i(f):function(){return s(f,h)}).call(m,h,g));if(a){var u=a.name||t.DOM.uniqueId();return e.formatter.register(u,a),o.extend({},d.settings.itemDefaults,{text:a.title,format:u})}}var f,m,h,g,p,v,b,y,x,w;return null};(function(e){return e.getParam("importcss_append")})(e)||d.items().remove(),o.each(u(e,n.doc||e.getDoc(),a(function(e){return e.getParam("importcss_file_filter")}(e))),(function(e){if(-1===e.indexOf(".mce-")&&(!f||f(e))){var t=(r=m,i=e,o.grep(r,(function(e){return!e.filter||e.filter(i)})));if(0<t.length)o.each(t,(function(t){var n=h(e,t);n&&t.item.menu.push(n)}));else{var n=h(e,null);n&&d.add(n)}}var r,i})),o.each(m,(function(e){0<e.item.menu.length&&d.add(e.item)})),n.control.renderNew()}))}(e),function(e){return{convertSelectorToFormat:function(t){return l(e,t)}}}(e)}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},r=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},o=n,i=r,a=function(e){var t=r(e);return 0<t.length?t[0]:n(e)},u="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),f=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},d=function(e,t,n){return n=n||new Date,(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",f(n.getMonth()+1,2))).replace("%d",f(n.getDate(),2))).replace("%H",""+f(n.getHours(),2))).replace("%M",""+f(n.getMinutes(),2))).replace("%S",""+f(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(l[n.getMonth()]))).replace("%b",""+e.translate(c[n.getMonth()]))).replace("%A",""+e.translate(s[n.getDay()]))).replace("%a",""+e.translate(u[n.getDay()]))).replace("%%","%")},m=function(e,t){if(function(e){return e.getParam("insertdatetime_element",!1)}(e)){var n,r=d(e,t);n=/%[HMSIp]/.test(t)?d(e,"%Y-%m-%dT%H:%M"):d(e,"%Y-%m-%d");var o=e.dom.getParent(e.selection.getStart(),"time");o?(a=o,u=n,s=r,c=(i=e).dom.create("time",{datetime:u},s),a.parentNode.insertBefore(c,a),i.dom.remove(a),i.selection.select(c,!0),i.selection.collapse(!1)):e.insertContent('<time datetime="'+n+'">'+r+"</time>")}else e.insertContent(d(e,t));var i,a,u,s,c},h=d,g=function(e){e.addCommand("mceInsertDate",(function(){m(e,function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))}(e))})),e.addCommand("mceInsertTime",(function(){m(e,o(e))}))},p=tinymce.util.Tools.resolve("tinymce.util.Tools");t.add("insertdatetime",(function(t){var n=e(null);g(t),function(e,t){var n,r,o,u=(r=t,o=i(n=e),p.map(o,(function(e){return{text:h(n,e),onclick:function(){r.set(e),m(n,e)}}})));e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:u,onclick:function(){var n=t.get();m(e,n||a(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:u,context:"insert"})}(t,n)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("legacyoutput",(function(e){var n,r;(r=e).settings.inline_styles=!1,r.on("init",(function(){var e,n,o,i;e=r,n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",o=t.explode(e.settings.font_size_style_values),i=e.schema,e.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(e){return t.inArray(o,e.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),t.each("b,i,u,strike".split(","),(function(e){i.addValidElements(e+"[*]")})),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),t.each(n.split(","),(function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))}))})),(n=e).addButton("fontsizeselect",(function(){var e=[],t=n.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return n.$.each(t.split(" "),(function(t,n){var r=n,o=n,i=n.split("=");1<i.length&&(r=i[0],o=i[1]),e.push({text:r,value:o})})),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(){var e=this;n.on("NodeChange",(function(){var t;(t=n.dom.getParent(n.selection.getNode(),"font"))?e.value(t.size):e.value("")}))},onclick:function(e){e.control.settings.value&&n.execCommand("FontSize",!1,e.control.settings.value)}}})),n.addButton("fontselect",(function(){var e=[],t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(n.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return n.$.each(t,(function(t,n){e.push({text:{raw:n[0]},value:n[1],textStyle:-1===n[1].indexOf("dings")?"font-family:"+n[1]:""})})),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:function(){var e=this;n.on("NodeChange",(function(){var t;(t=n.dom.getParent(n.selection.getNode(),"font"))?e.value(t.face):e.value("")}))},onselect:function(e){e.control.settings.value&&n.execCommand("FontName",!1,e.control.settings.value)}}}))}))}(),function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return e.target_list},o=function(e){return e.rel_list},i=function(e){return e.link_class_list},a=r,u=function(e){return!1!==r(e)},s=o,c=function(e){return void 0!==o(e)},l=i,f=function(e){return void 0!==i(e)},d=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.Env"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=function(e,t){var n,r,o=["noopener"],i=e?e.split(/\s+/):[],a=function(e){return e.filter((function(e){return-1===g.inArray(o,e)}))};return(i=t?(n=a(n=i)).length?n.concat(o):o:a(i)).length?(r=i,g.trim(r.sort().join(" "))):null},v=function(e,t){return t=t||e.selection.getNode(),y(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},b=function(e){return e&&"A"===e.nodeName&&e.href},y=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},x=function(e,t){return function(n){e.undoManager.transact((function(){var r=e.selection.getNode(),o=v(e,r),i={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};c(e.settings)||!1!==d(e.settings)||(i.rel=p(i.rel,"_blank"===i.target)),n.href===t.href&&(t.attach(),t={}),o?(e.focus(),n.hasOwnProperty("text")&&("innerText"in o?o.innerText=n.text:o.textContent=n.text),e.dom.setAttribs(o,i),e.selection.select(o),e.undoManager.add()):y(r)?function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))}(e,r,i):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",i,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,i)}))}},w=function(e){return function(){e.undoManager.transact((function(){var t=e.selection.getNode();y(t)?function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))}(e,t):e.execCommand("unlink")}))}},C=b,k=function(e){return 0<g.grep(e,b).length},T=v,S=p,E=tinymce.util.Tools.resolve("tinymce.util.Delay"),_=tinymce.util.Tools.resolve("tinymce.util.XHR"),N={},R=function(e,t,n){var r=function(e,n){return n=n||[],g.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t&&t(o)),n.push(o)})),n};return r(e,n||[])},O=function(e,t,n){var r=e.selection.getRng();E.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(r),n(t)}))}))},A=function(e,t){var n,r,o,i,m,h,p,v,b,y,C,k={},E=e.selection,_=e.dom,A=function(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())},P=function(){r||!i||k.text||this.parent().parent().find("#text")[0].value(this.value())};i=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))}(E.getContent()),n=T(e),k.text=r=function(e,t){return(t?t.innerText||t.textContent:e.getContent({format:"text"})).replace(/\uFEFF/g,"")}(e.selection,n),k.href=n?_.getAttrib(n,"href"):"",n?k.target=_.getAttrib(n,"target"):function(e){return"string"==typeof e.default_link_target}(e.settings)&&(k.target=function(e){return e.default_link_target}(e.settings)),(C=_.getAttrib(n,"rel"))&&(k.rel=C),(C=_.getAttrib(n,"class"))&&(k.class=C),(C=_.getAttrib(n,"title"))&&(k.title=C),i&&(m={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){k.text=this.value()}}),t&&(h={type:"listbox",label:"Link list",values:R(t,(function(t){t.value=e.convertURL(t.value||t.url,"href")}),[{text:"None",value:""}]),onselect:A,value:e.convertURL(k.href,"href"),onPostRender:function(){h=this}}),u(e.settings)&&(void 0===a(e.settings)&&function(e,t){e.settings.target_list=t}(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),v={name:"target",type:"listbox",label:"Target",values:R(a(e.settings))}),c(e.settings)&&(p={name:"rel",type:"listbox",label:"Rel",values:R(s(e.settings),(function(t){!1===d(e.settings)&&(t.value=S(t.value,"_blank"===k.target))}))}),f(e.settings)&&(b={name:"class",type:"listbox",label:"Class",values:R(l(e.settings),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})}))}),function(e){return!1!==e.link_title}(e.settings)&&(y={name:"title",type:"textbox",label:"Title",value:k.title}),o=e.windowManager.open({title:"Insert link",data:k,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var n=t.meta||{};h&&h.value(e.convertURL(this.value(),"href")),g.each(t.meta,(function(e,t){var n=o.find("#"+t);"text"===t?0===r.length&&(n.value(e),k.text=e):n.value(e)})),n.attach&&(N={href:this.value(),attach:n.attach}),n.text||P.call(this)},onkeyup:P,onpaste:P,onbeforecall:function(e){e.meta=o.toJSON()}},m,y,function(t){var n=[];if(g.each(e.dom.select("a:not([href])"),(function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})})),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:A}}(k.href),h,p,v,b],onSubmit:function(t){var n=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets}(e.settings),o=x(e,N),a=w(e),u=g.extend({},k,t.data),s=u.href;s?(i&&u.text!==r||delete u.text,0<s.indexOf("@")&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?O(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",(function(e){e&&(u.href="mailto:"+s),o(u)})):!0===n&&!/^\w+:/i.test(s)||!1===n&&/^\s*www[\.|\d\.]/i.test(s)?O(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",(function(e){e&&(u.href="http://"+s),o(u)})):o(u)):a()}})},P=function(e,t){return e.dom.getParent(t,"a[href]")},D=function(e){return P(e,e.selection.getStart())},M=function(t,n){if(n){var r=(i=n).getAttribute("data-mce-href")||i.getAttribute("href");if(/^#/.test(r)){var o=t.$(r);o.length&&t.selection.scrollIntoView(o[0],!0)}else!function(t){if(!h.ie||10<h.ie){var n=e.document.createElement("a");n.target="_blank",n.href=t,n.rel="noreferrer noopener";var r=e.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,e.window,0,0,0,0,0,!1,!1,!1,!1,0,null),a=n,u=r,e.document.body.appendChild(a),a.dispatchEvent(u),e.document.body.removeChild(a)}else{var o=e.window.open("","_blank");if(o){o.opener=null;var i=o.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+m.DOM.encode(t)+'">'),i.close()}}var a,u}(n.href)}var i},B=function(e){return function(){!function(e){var t,n,r;n=A,"string"==typeof(r=function(e){return e.link_list}((t=e).settings))?_.send({url:r,success:function(e){n(t,JSON.parse(e))}}):"function"==typeof r?r((function(e){n(t,e)})):n(t,r)}(e)}},I=function(e){return function(){M(e,D(e))}},L=function(e){return function(){var t=this;e.on("nodechange",(function(n){t.active(!e.readonly&&!!T(e,n.element))}))}},H=function(e){return function(){var t=this,n=function(e){k(e.parents)?t.show():t.hide()};k(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",(function(){e.off("nodechange",n)}))}},F=function(e){e.addContextToolbar&&e.addContextToolbar(function(e){return function(t){var n,r,o,i;return!!(function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar}(e.settings)&&(!(i=e.plugins.contextmenu)||!i.isContextMenuVisible())&&C(t)&&3===(o=(r=(n=e.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&0<r.startOffset&&r.startOffset<o.data.length)}}(e),"openlink | link unlink")};t.add("link",(function(e){(function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:B(e),onpostrender:L(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:w(e),onpostrender:L(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:I(e)})})(e),function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:I(e),onPostRender:H(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:B(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:w(e),stateSelector:"a[href]"})}(e),F(e),function(e){e.on("click",(function(t){var r=P(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),M(e,r))})),e.on("keydown",(function(t){var n,r=D(e);r&&13===t.keyCode&&!0===(n=t).altKey&&!1===n.shiftKey&&!1===n.ctrlKey&&!1===n.metaKey&&(t.preventDefault(),M(e,r))}))}(e),function(e){e.addCommand("mceLink",B(e))}(e),function(e){e.addShortcut("Meta+K","",B(e))}(e)}))}(window),function(e){"use strict";var t,n,r,o,i,a,u,s,c,l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),d=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),m=tinymce.util.Tools.resolve("tinymce.util.VK"),h=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),g=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),v=function(e){return e&&"BR"===e.nodeName},b=function(e){return e&&3===e.nodeType},y=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},x=function(e){return e&&/^(OL|UL)$/.test(e.nodeName)},w=function(e){return e&&/^(DT|DD)$/.test(e.nodeName)},C=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},k=v,T=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},S=function(e,t){return e&&e.nodeName in t},E=function(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r},_=function(e,t){return e.isChildOf(t,e.getRoot())},N=function(e,t){if(b(e))return{container:e,offset:t};var n=f.getNode(e,t);return b(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&b(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&b(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},R=function(e){var t=e.cloneRange(),n=N(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=N(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},O=p.DOM,A=function(e){var t={},n=function(n){var r,o,i;o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=O.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):O.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=i};return n(!0),e.collapsed||n(),t},P=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,O.remove(o),!n.hasChildNodes()&&O.isBlock(n)&&n.appendChild(O.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=O.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),R(n)},D=function(e){return function(){return e}},M=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},B=D(!1),I=D(!0),L=function(){return H},H=(t=function(e){return e.isNone()},o={fold:function(e,t){return e()},is:B,isSome:B,isNone:I,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:D(null),getOrUndefined:D(void 0),or:r,orThunk:n,map:L,each:function(){},bind:L,exists:B,forall:I,filter:L,equals:t,equals_:t,toArray:function(){return[]},toString:D("none()")},Object.freeze&&Object.freeze(o),o),F=function(e){var t=D(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:I,isNone:B,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return F(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:H},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(B,(function(t){return n(e,t)}))}};return o},z={some:F,none:L,from:function(e){return null==e?H:F(e)}},W=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},U=W("string"),j=W("array"),V=W("boolean"),$=W("function"),q=W("number"),Y=Array.prototype.slice,X=Array.prototype.push,G=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},K=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},J=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Z=function(e,t,n){return K(e,(function(e){n=t(n,e)})),n},Q=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return z.some(o)}return z.none()},ee=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!j(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);X.apply(t,e[n])}return t}(G(e,t))},te=function(e){return 0===e.length?z.none():z.some(e[0])},ne=function(e){return 0===e.length?z.none():z.some(e[e.length-1])},re=($(Array.from)&&Array.from,void 0!==e.window?e.window:Function("return this;")()),oe=function(e,t){return function(e,t){for(var n=null!=t?t:re,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)},ie=function(e,t){var n=oe(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},ae=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ue=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",ce(e,t))},se=function(e){var t,n,r,o=e.selection.getSelectedBlocks();return g.grep((t=e,n=o,r=g.map(n,(function(e){return t.dom.getParent(e,"li,dd,dt",ce(t,e))||e})),ae.unique(r)),(function(e){return function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)}(e)}))},ce=function(e,t){var n=e.dom.getParents(t,"TD,TH");return 0<n.length?n[0]:e.getBody()},le=function(e,t){var n=e.dom.getParents(t,"ol,ul",ce(e,t));return ne(n)},fe={isList:function(e){return function(e){var t;return(t=oe("ownerDocument.defaultView",e),ie("HTMLElement",t)).prototype.isPrototypeOf(e)}(ue(e))},getParentList:ue,getSelectedSubLists:function(e){var t,n,r,o=ue(e),i=e.selection.getSelectedBlocks();return r=i,(n=o)&&1===r.length&&r[0]===n?(t=o,g.grep(t.querySelectorAll("ol,ul,dl"),(function(e){return y(e)}))):g.grep(i,(function(e){return y(e)&&o!==e}))},getSelectedListItems:se,getClosestListRootElm:ce,getSelectedDlItems:function(e){return J(se(e),w)},getSelectedListRoots:function(e){var t,n,r;return function(e,t){var n=G(t,(function(t){return le(e,t).getOr(t)}));return ae.unique(n)}(e,(n=le(t=e,t.selection.getStart()),r=J(t.selection.getSelectedBlocks(),x),n.toArray().concat(r)))}},de=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:D(e)}},me=function(t,n){var r=(n||e.document).createElement(t);return de(r)},he=de,ge=function(e,t,n){return e.isSome()&&t.isSome()?z.some(n(e.getOrDie(),t.getOrDie())):z.none()},pe=Object.keys,ve=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ie("Node").DOCUMENT_POSITION_CONTAINED_BY)},be=function(){return ye(0,0)},ye=function(e,t){return{major:e,minor:t}},xe=function(e,t){var n=String(t).toLowerCase();return 0===e.length?be():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ye(r(1),r(2))}(e,n)},we=be,Ce="Firefox",ke=function(e,t){return function(){return t===e}},Te=function(e){var t=e.current;return{current:t,version:e.version,isEdge:ke("Edge",t),isChrome:ke("Chrome",t),isIE:ke("IE",t),isOpera:ke("Opera",t),isFirefox:ke(Ce,t),isSafari:ke("Safari",t)}},Se=function(){return Te({current:void 0,version:we()})},Ee=Te,_e=(D("Edge"),D("Chrome"),D("IE"),D("Opera"),D(Ce),D("Safari"),"Windows"),Ne="Android",Re="Solaris",Oe="FreeBSD",Ae=function(e,t){return function(){return t===e}},Pe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Ae(_e,t),isiOS:Ae("iOS",t),isAndroid:Ae(Ne,t),isOSX:Ae("OSX",t),isLinux:Ae("Linux",t),isSolaris:Ae(Re,t),isFreeBSD:Ae(Oe,t)}},De=function(){return Pe({current:void 0,version:we()})},Me=Pe,Be=(D(_e),D("iOS"),D(Ne),D("Linux"),D("OSX"),D(Re),D(Oe),function(e,t){var n=String(t).toLowerCase();return Q(e,(function(e){return e.search(n)}))}),Ie=function(e,t){return-1!==e.indexOf(t)},Le=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,He=function(e){return function(t){return Ie(t,e)}},Fe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Ie(e,"edge/")&&Ie(e,"chrome")&&Ie(e,"safari")&&Ie(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Le],search:function(e){return Ie(e,"chrome")&&!Ie(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Ie(e,"msie")||Ie(e,"trident")}},{name:"Opera",versionRegexes:[Le,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:He("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:He("firefox")},{name:"Safari",versionRegexes:[Le,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Ie(e,"safari")||Ie(e,"mobile/"))&&Ie(e,"applewebkit")}}],ze=[{name:"Windows",search:He("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Ie(e,"iphone")||Ie(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:He("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:He("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:He("linux"),versionRegexes:[]},{name:"Solaris",search:He("sunos"),versionRegexes:[]},{name:"FreeBSD",search:He("freebsd"),versionRegexes:[]}],We={browsers:D(Fe),oses:D(ze)},Ue=function(e){var t,n,r,o,i,a,u,s,c,l,f,d=We.browsers(),m=We.oses(),h=function(e,t){return Be(e,t).map((function(e){var n=xe(e.versionRegexes,t);return{current:e.name,version:n}}))}(d,e).fold(Se,Ee),g=function(e,t){return Be(e,t).map((function(e){var n=xe(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(De,Me);return{browser:h,os:g,deviceType:(n=h,r=e,o=(t=g).isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,s=o||a||u&&!0===/mobile/i.test(r),c=t.isiOS()||t.isAndroid(),l=c&&!s,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:D(o),isiPhone:D(i),isTablet:D(s),isPhone:D(l),isTouch:D(c),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:D(f)})}},je={detect:(i=function(){var t=e.navigator.userAgent;return Ue(t)},u=!1,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u||(u=!0,a=i.apply(null,e)),a})},Ve=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),$e=(e.Node.TEXT_NODE,e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,Ve),qe=function(e,t){return e.dom()===t.dom()},Ye=je.detect().browser.isIE()?function(e,t){return ve(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Xe=function(e,t){var n=e.dom();if(n.nodeType!==$e)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ge=function(e){return z.from(e.dom().parentNode).map(he)},Ke=function(e){return G(e.dom().childNodes,he)},Je=function(e,t){var n=e.dom().childNodes;return z.from(n[t]).map(he)},Ze=function(e){return Je(e,0)},Qe=function(e){return Je(e,e.dom().childNodes.length-1)},et=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}("element","offset"),function(e,t){Ge(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))}),tt=function(e,t){e.dom().appendChild(t.dom())},nt=function(e,t){K(t,(function(t){tt(e,t)}))},rt=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ot=function(e){return e.dom().nodeName.toLowerCase()},it=(s=Ve,function(e){return e.dom().nodeType===s}),at=function(t,n){var r=t.dom();!function(e,t){for(var n=pe(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}(n,(function(t,n){!function(t,n,r){if(!(U(r)||V(r)||q(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")}(r,n,t)}))},ut=function(e){return Z(e.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},st=function(t,n,r){if(!U(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);var o;void 0!==(o=t).style&&$(o.style.getPropertyValue)&&t.style.setProperty(n,r)},ct=function(e){return!0,he(e.dom().cloneNode(!0))},lt=function(e,t){var n,r,o,i=(n=e,r=me(t),o=ut(n),at(r,o),r);et(e,i);var a=Ke(e);return nt(i,a),rt(e),i},ft=function(e,t){tt(e.item,t.list)},dt=function(e){return Xe(e,"OL,UL")},mt=function(e){return Ze(e).map(dt).getOr(!1)},ht=function(e){return 0<e.depth},gt=function(e){return e.isSelected},pt=function(e){var t=Ke(e),n=Qe(e).map(dt).getOr(!1)?t.slice(0,-1):t;return G(n,ct)},vt=Object.prototype.hasOwnProperty,bt=(c=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)vt.call(o,i)&&(n[i]=c(n[i],o[i]))}return n}),yt=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return yt(n())}}},xt=function(e,t,n,r){return Ze(r).filter(dt).fold((function(){t.each((function(e){qe(e.start,r)&&n.set(!0)}));var o,i,a,u=(o=r,i=e,a=n.get(),Ge(o).filter(it).map((function(e){return{depth:i,isSelected:a,content:pt(o),itemAttributes:ut(o),listAttributes:ut(e),listType:ot(e)}})));t.each((function(e){qe(e.end,r)&&n.set(!1)}));var s=Qe(r).filter(dt).map((function(r){return wt(e,t,n,r)})).getOr([]);return u.toArray().concat(s)}),(function(r){return wt(e,t,n,r)}))},wt=function(e,t,n,r){return ee(Ke(r),(function(r){return(dt(r)?wt:xt)(e+1,t,n,r)}))},Ct=tinymce.util.Tools.resolve("tinymce.Env"),kt=function(e,t){var n,r,o,i,a=e.dom,u=e.schema.getBlockElements(),s=a.createFragment();if(e.settings.forced_root_block&&(o=e.settings.forced_root_block),o&&((r=a.create(o)).tagName===e.settings.forced_root_block&&a.setAttribs(r,e.settings.forced_root_block_attrs),S(t.firstChild,u)||s.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;i||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(i=!0),S(n,u)?(s.appendChild(n),r=null):o?(r||(r=a.create(o),s.appendChild(r)),r.appendChild(n)):s.appendChild(n)}return e.settings.forced_root_block?i||Ct.ie&&!(10<Ct.ie)||r.appendChild(a.create("br",{"data-mce-bogus":"1"})):s.appendChild(a.create("br")),s},Tt=function(t,n){return G(n,(function(n){var r,o,i=(r=n.content,o=e.document.createDocumentFragment(),K(r,(function(e){o.appendChild(e.dom())})),he(o));return he(kt(t,i.dom()))}))},St=function(e,t){return function(e){K(e,(function(t,n){(function(e,t){for(var n=e[t].depth,r=t-1;0<=r;r--){if(e[r].depth===n)return z.some(e[r]);if(e[r].depth<n)break}return z.none()})(e,n).each((function(e){var n,r;r=e,(n=t).listType=r.listType,n.listAttributes=bt({},r.listAttributes)}))}))}(t),(n=e.contentDocument,r=t,o=Z(r,(function(e,t){return t.depth>e.length?function(e,t,n){var r,o=function(e,t,n){for(var r,o,i,a=[],u=0;u<n;u++)a.push((r=e,o=t.listType,i={list:me(o,r),item:me("li",r)},tt(i.list,i.item),i));return a}(e,n,n.depth-t.length);return function(e){for(var t=1;t<e.length;t++)ft(e[t-1],e[t])}(o),function(e,t){for(var n=0;n<e.length-1;n++)"list-style-type","none",r=e[n].item.dom(),st(r,"list-style-type","none");var r;ne(e).each((function(e){at(e.list,t.listAttributes),at(e.item,t.itemAttributes),nt(e.item,t.content)}))}(o,n),r=o,ge(ne(t),te(r),ft),t.concat(o)}(n,e,t):function(e,t,n){var r=t.slice(0,n.depth);return ne(r).each((function(t){var r,o,i,a,u,s,c,l;s=(r=e,o=n.itemAttributes,i=n.content,a=me("li",r),at(a,o),nt(a,i),a),tt((u=t).list,s),u.item=s,l=n,ot((c=t).list)!==l.listType&&(c.list=lt(c.list,l.listType)),at(c.list,l.listAttributes)})),r}(n,e,t)}),[]),te(o).map((function(e){return e.list}))).toArray();var n,r,o},Et=function(e,t,n){var r,o,i,a=(r=t,o=function(e){var t,n,r=G(fe.getSelectedListItems(e),he);return ge(Q(r,M(mt)),Q((t=r,(n=Y.call(t,0)).reverse(),n),M(mt)),(function(e,t){return{start:e,end:t}}))}(e),i=yt(!1),G(r,(function(e){return{sourceList:e,entries:wt(0,o,i,e)}})));K(a,(function(t){var r,o,i,a,u,s;r=t.entries,o=n,K(J(r,gt),(function(e){return function(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}}(o,e)})),i=t.sourceList,u=e,s=t.entries,a=ee(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],s=t(u);s!==n&&(r.push(o),o=[]),n=s,o.push(u)}return 0!==o.length&&r.push(o),r}(s,ht),(function(e){return te(e).map(ht).getOr(!1)?St(u,e):Tt(u,e)})),K(a,(function(e){et(i,e)})),rt(t.sourceList)}))},_t=p.DOM,Nt=function(e){Xe(e,"dt")&&lt(e,"dd")},Rt=function(e,t,n){K(n,"Indent"===t?Nt:function(t){return n=e,void(Xe(r=t,"dd")?lt(r,"dt"):Xe(r,"dt")&&Ge(r).each((function(e){return function(e,t,n){var r,o,i,a,u,s;for(i=_t.select('span[data-mce-type="bookmark"]',t),u=kt(e,n),(r=_t.createRng()).setStartAfter(n),r.setEndAfter(t),a=(o=r.extractContents()).firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&e.dom.isEmpty(a)){_t.remove(a);break}e.dom.isEmpty(o)||_t.insertAfter(o,t),_t.insertAfter(u,t),E(e.dom,n.parentNode)&&(s=n.parentNode,g.each(i,(function(e){s.parentNode.insertBefore(e,n.parentNode)})),_t.remove(s)),_t.remove(n),E(e.dom,t)&&_t.remove(t)}(n,e.dom(),r.dom())})));var n,r})},Ot=function(e,t){var n=G(fe.getSelectedListRoots(e),he),r=G(fe.getSelectedDlItems(e),he),o=!1;if(n.length||r.length){var i=e.selection.getBookmark();Et(e,n,t),Rt(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(R(e.selection.getRng())),e.nodeChanged(),o=!0}return o},At=function(e){return Ot(e,"Indent")},Pt=function(e){return Ot(e,"Outdent")},Dt=function(e){return Ot(e,"Flatten")},Mt=function(e,t){g.each(t,(function(t,n){e.setAttribute(n,t)}))},Bt=function(e,t,n){var r,o,i,a,u,s,c;r=e,o=t,a=(i=n)["list-style-type"]?i["list-style-type"]:null,r.setStyle(o,"list-style-type",a),u=e,Mt(s=t,(c=n)["list-attributes"]),g.each(u.select("li",s),(function(e){Mt(e,c["list-item-attributes"])}))},It=function(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&k(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(T(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},Lt=function(e,t,n){return s=n,(u=t)&&s&&y(u)&&u.nodeName===s.nodeName&&(i=t,a=n,(o=e).getStyle(i,"list-style-type",!0)===o.getStyle(a,"list-style-type",!0))&&(r=n,t.className===r.className);var r,o,i,a,u,s},Ht=function(e,t){var n,r;if(n=t.nextSibling,Lt(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Lt(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Ft=function(e){return"list-style-type"in e},zt={toggleList:function(e,t,n){var r=fe.getParentList(e),o=fe.getSelectedSubLists(e);n=n||{},r&&0<o.length?function(e,t,n,r,o){if(t.nodeName!==r||Ft(o)){var i=A(e.selection.getRng(!0));g.each([t].concat(n),(function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);Bt(e,o,r)}else Bt(e,t,r)}(e.dom,t,r,o)})),e.selection.setRng(P(i))}else Dt(e)}(e,r,o,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||Ft(r)){var o=A(e.selection.getRng(!0));Bt(e.dom,t,r),Ht(e.dom,e.dom.rename(t,n)),e.selection.setRng(P(o))}else Dt(e);else!function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),i="LI",a=fe.getClosestListRootElm(e,e.selection.getStart(!0)),u=e.dom;"false"!==u.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(i="DT"),r=A(o),g.each(function(e,t,n){for(var r,o=[],i=e.dom,a=It(e,t,!0,n),u=It(e,t,!1,n),s=[],c=a;c&&(s.push(c),c!==u);c=c.nextSibling);return g.each(s,(function(t){if(T(e,t))return o.push(t),void(r=null);if(i.isBlock(t)||k(t))return k(t)&&i.remove(t),void(r=null);var a=t.nextSibling;h.isBookmarkNode(t)&&(T(e,a)||!a&&t.parentNode===n)?r=null:(r||(r=i.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t))})),o}(e,o,a),(function(r){var o,a,s,c,l,f,d,m;(a=r.previousSibling)&&y(a)&&a.nodeName===t&&(s=a,c=n,u.getStyle(s,"list-style-type")===(l=null===(l=c?c["list-style-type"]:"")?"":l))?(o=a,r=u.rename(r,i),a.appendChild(r)):(o=u.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=u.rename(r,i)),f=u,d=r,m=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],g.each(m,(function(e){var t;return f.setStyle(d,((t={})[e]="",t))})),Bt(u,o,n),Ht(e.dom,o)})),e.selection.setRng(P(r)))}(e,n,r)}(e,r,t,n)},mergeWithAdjacentLists:Ht},Wt=p.DOM,Ut=function(e,t){g.each(g.grep(e.select("ol,ul",t)),(function(t){!function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),E(e,r)&&Wt.remove(r)):Wt.setStyle(r,"listStyleType","none")),y(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}(e,t)}))},jt=function(e,t,n,r){var o,i,a=t.startContainer,u=t.startOffset;if(3===a.nodeType&&(n?u<a.data.length:0<u))return a;for(o=e.schema.getNonEmptyElements(),1===a.nodeType&&(a=f.getNode(a,u)),i=new d(a,r),n&&function(e,t){return!!v(t)&&!(!e.isBlock(t.nextSibling)||v(t.previousSibling))}(e.dom,a)&&i.next();a=i[n?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(o[a.nodeName])return a;if(3===a.nodeType&&0<a.data.length)return a}},Vt=function(e,t){var n=t.childNodes;return 1===n.length&&!y(n[0])&&e.isBlock(n[0])},$t=function(e,t,n){var r,o,i=t.parentNode;if(_(e,t)&&_(e,n)){y(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&k(i.previousSibling)&&e.remove(i.previousSibling),(r=n.lastChild)&&k(r)&&t.hasChildNodes()&&e.remove(r),E(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,o,i,a;if(o=Vt(e,n)?n.firstChild:n,Vt(i=e,a=t)&&i.remove(a.firstChild,!0),!E(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)}(e,t,n),o&&n.appendChild(o);var a=Ye(he(n),he(t))?e.getParents(t,y,n):[];e.remove(t),K(a,(function(t){E(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},qt=function(e,t){var n,r,o,i=e.dom,a=e.selection,u=a.getStart(),s=fe.getClosestListRootElm(e,u),c=i.getParent(a.getStart(),"LI",s);if(c){if((n=c.parentNode)===e.getBody()&&E(i,n))return!0;if(r=R(a.getRng(!0)),(o=i.getParent(jt(e,r,t,s),"LI",s))&&o!==c)return t?function(e,t,n,r){var o,i,a,u=e.dom;if(u.isEmpty(r))i=n,a=r,(o=e).dom.$(a).empty(),$t(o.dom,i,a),o.selection.setCursorLocation(a);else{var s=A(t);$t(u,n,r),e.selection.setRng(P(s))}}(e,r,o,c):function(e,t,n,r){var o=A(t);$t(e.dom,n,r);var i=P(o);e.selection.setRng(i)}(e,r,c,o),!0;if(!o&&!t)return Dt(e),!0}return!1},Yt=function(e,t){return e.selection.isCollapsed()?function(e,t){return qt(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),o=fe.getClosestListRootElm(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=R(e.selection.getRng(!0)),u=n.getParent(jt(e,a,t,o),"LI",o);if(u)return e.undoManager.transact((function(){var r,a,s,c;a=i,s=o,c=(r=n).getParent(a.parentNode,r.isBlock,s),r.remove(a),c&&r.isEmpty(c)&&r.remove(c),zt.mergeWithAdjacentLists(n,u.parentNode),e.selection.select(u,!0),e.selection.collapse(t)})),!0}return!1}(e,t)}(e,t):(r=(n=e).selection.getStart(),o=fe.getClosestListRootElm(n,r),!!(n.dom.getParent(r,"LI,DT,DD",o)||0<fe.getSelectedListItems(n).length)&&(n.undoManager.transact((function(){n.execCommand("Delete"),Ut(n.dom,n.getBody())})),!0));var n,r,o},Xt=Yt,Gt=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},Kt=function(e){var t;(function(e){return e.getParam("lists_indent_on_tab",!0)})(e)&&(t=e).on("keydown",(function(e){e.keyCode!==m.TAB||m.metaKeyPressed(e)||t.undoManager.transact((function(){(e.shiftKey?Pt(t):At(t))&&e.preventDefault()}))})),function(e){e.on("keydown",(function(t){t.keyCode===m.BACKSPACE?Yt(e,!1)&&t.preventDefault():t.keyCode===m.DELETE&&Yt(e,!0)&&t.preventDefault()}))}(e)},Jt=function(e,t){return function(n){var r=n.control;e.on("NodeChange",(function(e){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,C),o=-1!==n?e.parents.slice(0,n):e.parents,i=g.grep(o,y);r.active(0<i.length&&i[0].nodeName===t)}))}};l.add("lists",(function(e){return Kt(e),function(e){var t,n;n=(t=e).settings.plugins?t.settings.plugins:"",-1===g.inArray(n.split(/[ ,]/),"advlist")&&(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:Jt(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:Jt(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent"})}(e),function(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();"indent"===n?At(e):"outdent"===n&&Pt(e)})),e.addCommand("InsertUnorderedList",(function(t,n){zt.toggleList(e,"UL",n)})),e.addCommand("InsertOrderedList",(function(t,n){zt.toggleList(e,"OL",n)})),e.addCommand("InsertDefinitionList",(function(t,n){zt.toggleList(e,"DL",n)})),e.addCommand("RemoveList",(function(){Dt(e)})),e.addQueryStateHandler("InsertUnorderedList",Gt(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Gt(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Gt(e,"DL"))}(e),function(e){return{backspaceDelete:function(t){Xt(e,t)}}}(e)}))}(window),function(){"use strict";var e,t,n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e){return e.getParam("media_scripts")},s=function(e){return e.getParam("media_live_embeds",!0)},c=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return c(n())}}},l=function(e){return function(){return e}},f=l(!1),d=l(!0),m=function(){return h},h=(e=function(e){return e.isNone()},r={fold:function(e,t){return e()},is:f,isSome:f,isNone:d,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:t,map:m,each:function(){},bind:m,exists:f,forall:d,filter:m,equals:e,equals_:e,toArray:function(){return[]},toString:l("none()")},Object.freeze&&Object.freeze(r),r),g=function(e){var t=l(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:d,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return g(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:h},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,(function(t){return n(e,t)}))}};return o},p=m,v=Object.hasOwnProperty,b=function(e,t){return y(e,t)?function(e){return null==e?h:g(e)}(e[t]):p()},y=function(e,t){return v.call(e,t)},x=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),C=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},k=x.DOM,T=function(e){return e.replace(/px$/,"")},S=function(e,t){var n=c(!1),r={};return w({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(n.get());else if(y(o.map,"data-ephox-embed-iri"))n.set(!0),c=(s=(u=o).map.style)?k.parseStyle(s):{},r={type:"ephox-embed-iri",source1:u.map["data-ephox-embed-iri"],source2:"",poster:"",width:b(c,"max-width").map(T).getOr(""),height:b(c,"max-height").map(T).getOr("")};else{if(r.source1||"param"!==t||(r.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=a.extend(o.map,r)),"script"===t){var i=C(e,o.map.src);if(!i)return;r={type:"script",source1:o.map.src,width:i.width,height:i.height}}"source"===t&&(r.source1?r.source2||(r.source2=o.map.src):r.source1=o.map.src),"img"!==t||r.poster||(r.poster=o.map.src)}var u,s,c}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r},E=tinymce.util.Tools.resolve("tinymce.util.Promise"),_=function(e){return{mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()]||""},N=tinymce.util.Tools.resolve("tinymce.html.Schema"),R=tinymce.util.Tools.resolve("tinymce.html.Writer"),O=x.DOM,A=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},P=function(e,t){for(var n in t){var r=""+t[n];if(e.map[n])for(var o=e.length;o--;){var i=e[o];i.name===n&&(r?(e.map[n]=r,i.value=r):(delete e.map[n],e.splice(o,1)))}else r&&(e.push({name:n,value:r}),e.map[n]=r)}},D=function(e,t,n){var r,o=R(),i=c(!1),a=0;return w({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,u,s){if(i.get());else if(y(u.map,"data-ephox-embed-iri"))i.set(!0),c=t,(d=(f=(l=u).map.style)?O.parseStyle(f):{})["max-width"]=A(c.width),d["max-height"]=A(c.height),P(l,{style:O.serializeStyle(d)});else{switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&P(u,{width:t.width,height:t.height})}if(n)switch(e){case"video":P(u,{poster:t.poster,src:""}),t.source2&&P(u,{src:""});break;case"iframe":P(u,{src:t.source1});break;case"source":if(++a<=2&&(P(u,{src:t["source"+a],type:t["source"+a+"mime"]}),!t["source"+a]))return;break;case"img":if(!t.poster)return;r=!0}}var c,l,f,d;o.start(e,u,s)},end:function(e){if(!i.get()){if("video"===e&&n)for(var u=1;u<=2;u++)if(t["source"+u]){var s=[];s.map={},a<u&&(P(s,{src:t["source"+u],type:t["source"+u+"mime"]}),o.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var c=[];c.map={},P(c,{src:t.poster,width:t.width,height:t.height}),o.start("img",c,!0)}}o.end(e)}},N({})).parse(e),o.getContent()},M=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],B={},I=function(e){return function(t){return function(e,t){var n=a.extend({},t);if(!n.source1&&(a.extend(n,S(u(e),n.embed)),!n.source1))return"";n.source2||(n.source2=""),n.poster||(n.poster=""),n.source1=e.convertURL(n.source1,"source"),n.source2=e.convertURL(n.source2,"source"),n.source1mime=_(n.source1),n.source2mime=_(n.source2),n.poster=e.convertURL(n.poster,"poster");var r,o,i=(r=n.source1,0<(o=M.filter((function(e){return e.regex.test(r)}))).length?a.extend({},o[0],{url:function(e,t){for(var n=e.regex.exec(t),r=e.url,o=function(e){r=r.replace("$"+e,(function(){return n[e]?n[e]:""}))},i=0;i<n.length;i++)o(i);return r.replace(/\?$/,"")}(o[0],r)}):null);if(i&&(n.source1=i.url,n.type=i.type,n.allowFullscreen=i.allowFullscreen,n.width=n.width||i.w,n.height=n.height||i.h),n.embed)return D(n.embed,n,!0);var s=C(u(e),n.source1);s&&(n.type="script",n.width=s.width,n.height=s.height);var c,l,f,d,m,h,g,p,v=function(e){return e.getParam("audio_template_callback")}(e),b=function(e){return e.getParam("video_template_callback")}(e);return n.width=n.width||300,n.height=n.height||150,a.each(n,(function(t,r){n[r]=e.dom.encode(t)})),"iframe"===n.type?(p=(g=n).allowFullscreen?' allowFullscreen="1"':"",'<iframe src="'+g.source1+'" width="'+g.width+'" height="'+g.height+'"'+p+"></iframe>"):"application/x-shockwave-flash"===n.source1mime?(h='<object data="'+(m=n).source1+'" width="'+m.width+'" height="'+m.height+'" type="application/x-shockwave-flash">',m.poster&&(h+='<img src="'+m.poster+'" width="'+m.width+'" height="'+m.height+'" />'),h+="</object>"):-1!==n.source1mime.indexOf("audio")?(f=n,(d=v)?d(f):'<audio controls="controls" src="'+f.source1+'">'+(f.source2?'\n<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"</audio>"):"script"===n.type?'<script src="'+n.source1+'"><\/script>':(c=n,(l=b)?l(c):'<video width="'+c.width+'" height="'+c.height+'"'+(c.poster?' poster="'+c.poster+'"':"")+' controls="controls">\n<source src="'+c.source1+'"'+(c.source1mime?' type="'+c.source1mime+'"':"")+" />\n"+(c.source2?'<source src="'+c.source2+'"'+(c.source2mime?' type="'+c.source2mime+'"':"")+" />\n":"")+"</video>")}(e,t)}},L=function(e,t){var n,r,o,i,a,u=function(e){return e.getParam("media_url_resolver")}(e);return u?(o=t,i=I(e),a=u,new E((function(e,t){var n=function(t){return t.html&&(B[o.source1]=t),e({url:o.source1,html:t.html?t.html:i(o)})};B[o.source1]?n(B[o.source1]):a({url:o.source1},n,t)}))):(n=t,r=I(e),new E((function(e){e({html:r(n),url:n.source1})})))},H=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},F=function(e){return function(t,n){var r;t&&(t.style[e]=/^[0-9.]+$/.test(r=n)?r+"px":r)}},z={getMaxWidth:H("maxWidth"),getMaxHeight:H("maxHeight"),setMaxWidth:F("maxWidth"),setMaxHeight:F("maxHeight")},W=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},U=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},j=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),W(e,t)},V=function(e){U(e,j)},$=V,q=i.ie&&i.ie<=8?"onChange":"onInput",Y=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},X=function(e,t){return function(n){var r=n.html,o=e.find("#embed")[0],i=a.extend(S(u(t),r),{source1:n.url});e.fromJSON(i),o&&(o.value(r),$(e))}},G=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;0<=r;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])}(e,n),e.nodeChanged()},K=function(e){var t,n,r,o,i,s=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout((function(){L(e,t.toJSON()).then(X(t,e)).catch(Y(e))}),1)},onchange:function(n){var r,o;L(e,t.toJSON()).then(X(t,e)).catch(Y(e)),r=t,o=n.meta,a.each(o,(function(e,t){r.find("#"+t).value(e)}))},onbeforecall:function(e){e.meta=t.toJSON()}}],c=[];if(function(e){return e.getParam("media_alt_source",!0)}(e)&&c.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),function(e){return e.getParam("media_poster",!0)}(e)&&c.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),function(e){return e.getParam("media_dimensions",!0)}(e)){var l=function(e){var t=function(){e((function(e){V(e)}))};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}}((function(e){e(t),n=t.toJSON(),t.find("#embed").value(D(n.embed,n))}));s.push(l)}i=(o=(r=e).selection.getNode()).getAttribute("data-ephox-embed-iri"),n=i?{source1:i,"data-ephox-embed-iri":i,width:z.getMaxWidth(o),height:z.getMaxHeight(o)}:o.getAttribute("data-mce-object")?S(u(r),r.serializer.serialize(o,{selection:!0})):{};var f={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()}(e),multiline:!0,rows:5,label:"Source"};f[q]=function(){n=a.extend({},S(u(e),this.value())),this.parent().parent().fromJSON(n)};var d=[{title:"General",type:"form",items:s},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},f]}];0<c.length&&d.push({title:"Advanced",type:"form",items:c}),function(e){U(e,W)}(t=e.windowManager.open({title:"Insert/edit media",data:n,bodyType:"tabpanel",body:d,onSubmit:function(){var n,r;$(t),n=e,(r=t.toJSON()).embed=D(r.embed,r),r.embed&&function(e){return B.hasOwnProperty(e)}(r.source1)?G(n,r.embed):L(n,r).then((function(e){G(n,e.html)})).catch(Y(n))}}))},J=tinymce.util.Tools.resolve("tinymce.html.Node"),Z=function(e,t){if(!1===function(e){return e.getParam("media_filter_html",!0)}(e))return t;var n,r=R();return w({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,o,i){if(n=!0,"script"!==t&&"noscript"!==t&&"svg"!==t){for(var a=o.length-1;0<=a;a--){var u=o[a].name;0===u.indexOf("on")&&(delete o.map[u],o.splice(a,1)),"style"===u&&(o[a].value=e.dom.serializeStyle(e.dom.parseStyle(o[a].value),t))}r.start(t,o,i),n=!1}},end:function(e){n||r.end(e)}},N({})).parse(t),r.getContent()},Q=function(e,t){var n,r=t.name;return(n=new J("img",1)).shortEnded=!0,te(e,t,n),n.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===r?"30":"150"),style:t.attr("style"),src:i.transparentSrc,"data-mce-object":r,class:"mce-object mce-object-"+r}),n},ee=function(e,t){var n,r,o,i=t.name;return(n=new J("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":i,class:"mce-preview-object mce-object-"+i}),te(e,t,n),(r=new J(i,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(o=new J("span",1)).attr("class","mce-shim"),n.append(r),n.append(o),n},te=function(e,t,n){var r,o,i,a,u;for(a=(i=t.attributes).length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(u=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Z(e,u))),n.firstChild=null)},ne=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},re=function(e){e.on("preInit",(function(){var t=e.schema.getSpecialElements();a.each("video audio iframe object".split(" "),(function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}));var n=e.schema.getBoolAttrs();a.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(e){n[e]={}})),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(e){return function(t){for(var n,r,o=t.length;o--;)(n=t[o]).parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(r=C(u(e),n.attr("src"))))&&(r&&(r.width&&n.attr("width",r.width.toString()),r.height&&n.attr("height",r.height.toString())),"iframe"===n.name&&s(e)&&i.ceFalse?ne(n)||n.replace(ee(e,n)):ne(n)||n.replace(Q(e,n))))}}(e)),e.serializer.addAttributeFilter("data-mce-object",(function(t,n){for(var r,o,i,a,u,s,c,l,f=t.length;f--;)if((r=t[f]).parent){for(c=r.attr(n),o=new J(c,1),"audio"!==c&&"script"!==c&&((l=r.attr("class"))&&-1!==l.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),i=(a=r.attributes).length;i--;){var d=a[i].name;0===d.indexOf("data-mce-p-")&&o.attr(d.substr(11),a[i].value)}"script"===c&&o.attr("type","text/javascript"),(u=r.attr("data-mce-html"))&&((s=new J("#text",3)).raw=!0,s.value=Z(e,unescape(u)),o.append(s)),r.replace(o)}}))})),e.on("setContent",(function(){e.$("span.mce-preview-object").each((function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')}))}))};o.add("media",(function(e){return function(e){e.addCommand("mceMedia",(function(){K(e)}))}(e),function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})}(e),function(e){e.on("ResolveName",(function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))}(e),re(e),function(e){e.on("click keyup",(function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()})),e.on("objectResized",(function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(D(t,{width:e.width,height:e.height}))))}))}(e),function(e){return{showDialog:function(){K(e)}}}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n,r=(n=e).plugins.visualchars&&n.plugins.visualchars.isEnabled()?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}(r,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},n=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",(function(e){(function(e){e.addCommand("mceNonBreaking",(function(){t(e,1)}))})(e),function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})}(e),function(e){var r=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t}(e);0<r&&e.on("keydown",(function(o){if(o.keyCode===n.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),t(e,r)}}))}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},r=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},o=function(e,t,n){return function(r){var o=arguments,i=o[o.length-2],a=0<i?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){var u=t.lastIndexOf("<",i);if(-1!==u&&-1!==t.substring(u,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"}},i=function(e){var i,a,u="contenteditable";i=" "+t.trim(function(e){return e.getParam("noneditable_editable_class","mceEditable")}(e))+" ",a=" "+t.trim(n(e))+" ";var s=r(i),c=r(a),l=function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t}(e);e.on("PreInit",(function(){0<l.length&&e.on("BeforeSetContent",(function(t){!function(e,t,r){var i=t.length,a=r.content;if("raw"!==r.format){for(;i--;)a=a.replace(t[i],o(e,a,n(e)));r.content=a}}(e,l,t)})),e.parser.addAttributeFilter("class",(function(e){for(var t,n=e.length;n--;)t=e[n],s(t)?t.attr(u,"true"):c(t)&&t.attr(u,"false")})),e.serializer.addAttributeFilter(u,(function(e){for(var t,n=e.length;n--;)t=e[n],(s(t)||c(t))&&(0<l.length&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(u,null))}))}))};e.add("noneditable",(function(e){i(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_split_block",!1)},r=function(){return'<img src="'+t.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},o=r,i=function(){return"mce-pagebreak"};e.add("pagebreak",(function(e){(function(e){e.addCommand("mcePageBreak",(function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+o()+"</p>"):e.insertContent(o())}))})(e),function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}(e),function(e){var t=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(e),o=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(e){return"\\"+e})),"gi");e.on("BeforeSetContent",(function(e){e.content=e.content.replace(o,r())})),e.on("PreInit",(function(){e.serializer.addNodeFilter("img",(function(r){for(var o,i,a=r.length;a--;)if((i=(o=r[a]).attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var u=o.parent;if(e.schema.getBlockElements()[u.name]&&n(e)){u.type=3,u.value=t,u.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}}))}))}(e),function(e){e.on("ResolveName",(function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,i())&&(t.name="pagebreak")}))}(e)}))}(),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(t.settings.plugins)||!n.get("powerpaste")||(void 0!==e.window.console&&e.window.console.log&&e.window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},o=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},i=function(e){return e.getParam("paste_plaintext_inform",!0)},a=function(e){return e.getParam("paste_block_drop",!1)},u=function(e){return e.getParam("paste_data_images",!1)},s=function(e){return e.getParam("paste_filter_drop",!0)},c=function(e){return e.getParam("paste_preprocess")},l=function(e){return e.getParam("paste_postprocess")},f=function(e){return e.getParam("paste_webkit_styles")},d=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},m=function(e){return e.getParam("paste_merge_formats",!0)},h=function(e){return e.getParam("smart_paste",!0)},g=function(e){return e.getParam("paste_as_text",!1)},p=function(e){return e.getParam("paste_retain_style_properties")},v=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},b=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},y=function(e){return e.getParam("paste_enable_default_filters",!0)},x=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",(function(){!function(e,t,n){var r,a;"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),o(e,!1)):(t.pasteFormat.set("text"),o(e,!0),a=e,!1===n.get()&&i(a)&&("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",(r=e).notificationManager.open({text:r.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),type:"info"}),n.set(!0))),e.focus()}(e,t,n)})),e.addCommand("mceInsertClipboardContent",(function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)}))},w=tinymce.util.Tools.resolve("tinymce.Env"),C=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=tinymce.util.Tools.resolve("tinymce.util.Tools"),T=tinymce.util.Tools.resolve("tinymce.util.VK"),S="x-tinymce/html",E="\x3c!-- "+S+" --\x3e",_=function(e){return E+e},N=function(e){return-1!==e.indexOf(E)},R=function(){return S},O=tinymce.util.Tools.resolve("tinymce.html.Entities"),A=function(e,t,n){return t?function(e,t,n){var r=e.split(/\n\n/),o=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+O.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"}(t,n),i="</"+t+">",a=k.map(r,(function(e){return e.split(/\n/).join("<br />")}));return 1===a.length?a[0]:k.map(a,(function(e){return o+e+i})).join("")}(e,t,n):function(e){return e.replace(/\r?\n/g,"<br>")}(e)},P=tinymce.util.Tools.resolve("tinymce.html.DomParser"),D=tinymce.util.Tools.resolve("tinymce.html.Serializer"),M=tinymce.util.Tools.resolve("tinymce.html.Node"),B=tinymce.util.Tools.resolve("tinymce.html.Schema");function I(e,t){return k.each(t,(function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e}var L={filter:I,innerText:function(e){var t=B(),n=P({},t),r="",o=t.getShortEndedElements(),i=k.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements();return e=I(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,u=t;if("br"!==n){if("wbr"!==n)if(o[n]&&(r+=" "),i[n])r+=" ";else{if(3===t.type&&(r+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);a[n]&&u.next&&(r+="\n","p"===n&&(r+="\n"))}}else r+="\n"}(n.parse(e)),r},trimHtml:function(e){return I(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==e.navigator.userAgent.indexOf(" Edge/")}};function H(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),k.each(n,(function(n){if(n.test(e))return!(t=!0)})),t}function F(e,t,n,r){var o,i={},a=e.dom.parseStyle(r);return k.each(a,(function(a,u){switch(u){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(i[u]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}0!==u.indexOf("mso-comment")?0!==u.indexOf("mso-")&&("all"===p(e)||t&&t[u])&&(i[u]=a):n.remove()})),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],n.wrap(new M("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],n.wrap(new M("i",1))),(i=e.dom.serializeStyle(i,n.name))||null}var z,W,U,j,V,$,q,Y=function(e,t){return y(e)?function(e,t){var n,r;(n=p(e))&&(r=k.makeMap(n.split(/[, ]/))),t=L.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var o=v(e),i=B({valid_elements:o,valid_children:"-li[p]"});k.each(i.elements,(function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var a=P({},i);a.addAttributeFilter("style",(function(t){for(var n,o=t.length;o--;)(n=t[o]).attr("style",F(e,r,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()})),a.addAttributeFilter("class",(function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),a.addNodeFilter("del",(function(e){for(var t=e.length;t--;)e[t].remove()})),a.addNodeFilter("a",(function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}));var u=a.parse(t);return b(e)&&function(e){var t,n,r=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)for(;t+=o(e),e=e.next;);return t}function i(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!i(e,t))return!1}while(e=e.next);return!0}function a(e,o,a){var u=e._listLevel||r;u!==r&&(u<r?t&&(t=t.parent.parent):(n=t,t=null)),t&&t.name===o?t.append(e):(n=n||t,t=new M(o,1),1<a&&t.attr("start",""+a),e.wrap(t)),e.name="li",r<u&&n&&n.lastChild.append(t),r=u,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)for(;e(t),t=t.next;);}(e),i(e,/^\u00a0+/),i(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(e,/^\u00a0+/)}for(var u=[],s=e.firstChild;null!=s;)if(u.push(s),null!==(s=s.walk()))for(;void 0!==s&&s.parent!==e;)s=s.walk();for(var c=0;c<u.length;c++)if("p"===(e=u[c]).name&&e.firstChild){var l=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(l)){a(e,"ul");continue}if(H(l)){var f=/([0-9]+)\./.exec(l),d=1;f&&(d=parseInt(f[1],10)),a(e,"ol",d);continue}if(e._listLevel){a(e,"ul",1);continue}t=null}else n=t,t=null}(u),D({validate:e.settings.validate},i).serialize(u)}(e,t):t},X=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},G=function(e,t){return{content:e,cancelled:t}},K=function(e,t,n){var r=X(t);return function(e,t,n,r){var o,i,a,u,s,c,l=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})}(e,t,n,r),f=function(e,t){var n=P({},e.schema);n.addNodeFilter("meta",(function(e){k.each(e,(function(e){return e.remove()}))}));var r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return D({validate:e.settings.validate},e.schema).serialize(r)}(e,l.content);return e.hasEventListeners("PastePostProcess")&&!l.isDefaultPrevented()?(i=f,a=n,u=r,s=(o=e).dom.create("div",{style:"display:none"},i),c=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})}(o,s,a,u),G(c.node.innerHTML,c.isDefaultPrevented())):G(f,l.isDefaultPrevented())}(e,r?Y(e,t):t,n,r)},J=function(e,t){return e.insertContent(t,{merge:m(e),paste:!0}),!0},Z=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},Q=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!Z(t)||(o=t,i=n,(r=e).undoManager.extra((function(){i(r,o)}),(function(){r.execCommand("mceInsertLink",!1,o)})),0));var r,o,i},ee=function(e,t,n){return!!function(e){return Z(e)&&/.(gif|jpe?g|png)$/.test(e)}(t)&&(o=t,i=n,(r=e).undoManager.extra((function(){i(r,o)}),(function(){r.insertContent('<img src="'+o+'">')})),!0);var r,o,i},te=function(e){return function(){return e}},ne=te(!1),re=te(!0),oe=function(){return ie},ie=(z=function(e){return e.isNone()},j={fold:function(e,t){return e()},is:ne,isSome:ne,isNone:re,getOr:U=function(e){return e},getOrThunk:W=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:te(null),getOrUndefined:te(void 0),or:U,orThunk:W,map:oe,each:function(){},bind:oe,exists:ne,forall:re,filter:oe,equals:z,equals_:z,toArray:function(){return[]},toString:te("none()")},Object.freeze&&Object.freeze(j),j),ae=function(e){var t=te(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:re,isNone:ne,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return ae(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:ie},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(ne,(function(t){return n(e,t)}))}};return o},ue={some:ae,none:oe,from:function(e){return null==e?ie:ae(e)}},se=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),ce=Array.prototype.slice,le=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},fe=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},de=se(Array.from)?Array.from:function(e){return ce.call(e)},me={},he={exports:me};V=void 0,$=me,q=he,function(e){"object"==typeof $&&void 0!==q?q.exports=e():"function"==typeof V&&V.amd?V([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s=!1;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(e){o=u}}();var c,l=[],f=!1,d=-1;function m(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!f){var e=s(m);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||f||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){!function(n){var r=setTimeout;function o(){}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}u(t.promise,r)}else(1===e._state?u:s)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}var r,o}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,s(t,e))}))}catch(e){if(n)return;n=!0,s(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new l(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i((function(e,n){if(0===t.length)return e([]);var r=t.length;function o(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(e){o(i,e)}),n)}t[i]=a,0==--r&&e(t)}catch(e){n(e)}}for(var i=0;i<t.length;i++)o(i,t[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},i._immediateFn="function"==typeof e?function(t){e(t)}:function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==t&&t.exports?t.exports=i:n.Promise||(n.Promise=i)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},s=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=s++,r=!(arguments.length<2)&&a.call(arguments,1);return u[t]=!0,o((function(){u[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),o="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:o.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)}));var ge=he.exports.boltExport,pe=function(t){var n=ue.none(),r=[],o=function(e){i()?a(e):r.push(e)},i=function(){return n.isSome()},a=function(t){n.each((function(n){e.setTimeout((function(){t(n)}),0)}))};return t((function(e){n=ue.some(e),function(e){fe(e,a)}(r),r=[]})),{get:o,map:function(e){return pe((function(t){o((function(n){t(e(n))}))}))},isReady:i}},ve={nu:pe,pure:function(e){return pe((function(t){t(e)}))}},be=function(t){e.setTimeout((function(){throw t}),0)},ye=function(e){var t=function(t){e().then(t,be)};return{map:function(t){return ye((function(){return e().then(t)}))},bind:function(t){return ye((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function(t){return ye((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function(){return ve.nu(t)},toCached:function(){var t=null;return ye((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},xe=function(e){return ye((function(){return new ge(e)}))},we=function(e,t){return function(e,t){return t((function(t){var n=[],r=0;0===e.length?t([]):fe(e,(function(o,i){var a;o.get((a=i,function(o){n[a]=o,++r>=e.length&&t(n)}))}))}))}(le(e,t),xe)},Ce=function(e,t,n){var r=n||N(t),o=K(e,function(e){return e.replace(E,"")}(t),r);!1===o.cancelled&&function(e,t){var n,r;!1===h(e)?J(e,t):(n=e,r=t,k.each([Q,ee,J],(function(e){return!0!==e(n,r,J)})))}(e,o.content)},ke=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=A(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),Ce(e,t,!1)},Te=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&0<n.length&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t},Se=function(e,t){return t in e&&0<e[t].length},Ee=function(e){return Se(e,"text/html")||Se(e,"text/plain")},_e=L.createIdGenerator("mceclip"),Ne=function(t,n,r){var o,i,a,u,s="paste"===n.type?n.clipboardData:n.dataTransfer;if(t.settings.paste_data_images&&s){var c=(a=(i=s).items?le(de(i.items),(function(e){return e.getAsFile()})):[],u=i.files?de(i.files):[],function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i)&&n.push(i)}return n}(0<a.length?a:u,(function(e){return/^image\/(jpeg|png|gif|bmp)$/.test(e.type)})));if(0<c.length)return n.preventDefault(),(o=c,we(o,(function(e){return xe((function(t){var n=e.getAsFile?e.getAsFile():e,r=new window.FileReader;r.onload=function(){t({blob:n,uri:r.result})},r.readAsDataURL(n)}))}))).get((function(n){r&&t.selection.setRng(r),fe(n,(function(n){!function(t,n){var r,o,i,a,u,s,c=-1!==(o=(r=n.uri).indexOf(","))?r.substr(o+1):null,l=_e(),f=t.settings.images_reuse_filename&&n.blob.name?(i=t,(a=n.blob.name.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?i.dom.encode(a[1]):null):l,d=new e.Image;if(d.src=n.uri,s=d,!(u=t.settings).images_dataimg_filter||u.images_dataimg_filter(s)){var m,h=t.editorUpload.blobCache,g=void 0;(m=h.findFirst((function(e){return e.base64()===c})))?g=m:(g=h.create(l,n.blob,c,f),h.add(g)),Ce(t,'<img src="'+g.blobUri()+'">',!1)}else Ce(t,'<img src="'+n.uri+'">',!1)}(t,n)}))})),!0}return!1},Re=function(e){return T.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Oe=function(n,r,o){var i,a,u=(i=t(ue.none()),{clear:function(){i.set(ue.none())},set:function(e){i.set(ue.some(e))},isSet:function(){return i.get().isSome()},on:function(e){i.get().each(e)}});function s(e,t,o,i){var a,u;Se(e,"text/html")?a=e["text/html"]:(a=r.getHtml(),i=i||N(a),r.isDefaultContent(a)&&(o=!0)),a=L.trimHtml(a),r.remove(),u=!1===i&&function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)}(a),a.length&&!u||(o=!0),o&&(a=Se(e,"text/plain")&&u?e["text/plain"]:L.innerText(a)),r.isDefaultContent(a)?t||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?ke(n,a):Ce(n,a,i)}n.on("keydown",(function(t){function o(e){Re(e)&&!e.isDefaultPrevented()&&r.remove()}if(Re(t)&&!t.isDefaultPrevented()){if((a=t.shiftKey&&86===t.keyCode)&&w.webkit&&-1!==e.navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),u.set(t),window.setTimeout((function(){u.clear()}),100),w.ie&&a)return t.preventDefault(),void function(e,t){e.fire("paste",{ieFake:t})}(n,!0);r.remove(),r.create(),n.once("keyup",o),n.once("paste",(function(){n.off("keyup",o)}))}})),n.on("paste",(function(t){var i,c,l,f=u.isSet(),d=(i=n,c=Te(t.clipboardData||i.getDoc().dataTransfer),L.isMsEdge()?k.extend(c,{"text/html":""}):c),m="text"===o.get()||a,h=Se(d,R());a=!1,t.isDefaultPrevented()||(l=t.clipboardData,-1!==e.navigator.userAgent.indexOf("Android")&&l&&l.items&&0===l.items.length)?r.remove():Ee(d)||!Ne(n,t,r.getLastRng()||n.selection.getRng())?(f||t.preventDefault(),!w.ie||f&&!t.ieFake||Se(d,"text/html")||(r.create(),n.dom.bind(r.getEl(),"paste",(function(e){e.stopPropagation()})),n.getDoc().execCommand("Paste",!1,null),d["text/html"]=r.getHtml()),Se(d,"text/html")?(t.preventDefault(),h||(h=N(d["text/html"])),s(d,f,m,h)):C.setEditorTimeout(n,(function(){s(d,f,m,h)}),0)):r.remove()}))},Ae=function(t){return w.ie&&t.inline?e.document.body:t.getBody()},Pe=function(e){return e.dom.get("mcepastebin")},De=function(e,t){return t===e},Me=function(e,t){var n,r=Pe(e);return(n=r)&&"mcepastebin"===n.id&&De(t,r.innerHTML)},Be=function(e){var n=t(null),r="%MCEPASTEBIN%";return{create:function(){return o=n,i=r,u=(t=e).dom,s=t.getBody(),o.set(t.selection.getRng()),a=t.dom.add(Ae(t),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},i),(w.ie||w.gecko)&&u.setStyle(a,"left","rtl"===u.getStyle(s,"direction",!0)?65535:-65535),u.bind(a,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),function(e,t,n){var r;Ae(r=e)!==r.getBody()&&e.dom.bind(t,"paste keyup",(function(t){Me(e,n)||e.fire("paste")}))}(t,a,i),a.focus(),void t.selection.select(a,!0);var t,o,i,a,u,s},remove:function(){return function(e,t){if(Pe(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,n)},getEl:function(){return Pe(e)},getHtml:function(){return function(e){var t,n,r,o,i,a=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=k.grep(Ae(e).childNodes,(function(e){return"mcepastebin"===e.id})),t=n.shift(),k.each(n,(function(e){a(t,e)})),r=(o=e.dom.select("div[id=mcepastebin]",t)).length-1;0<=r;r--)i=e.dom.create("div"),t.insertBefore(i,o[r]),a(i,o[r]);return t?t.innerHTML:""}(e)},getLastRng:function(){return n.get()},isDefault:function(){return Me(e,r)},isDefaultContent:function(e){return De(r,e)}}},Ie=function(e,t){var n=Be(e);return e.on("preInit",(function(){return Oe(r=e,n,t),void r.parser.addNodeFilter("img",(function(e,t,n){var i,a=function(e){e.attr("data-mce-object")||o===w.transparentSrc||e.remove()};if(!r.settings.paste_data_images&&(i=n).data&&!0===i.data.paste)for(var u=e.length;u--;)(o=e[u].attributes.map.src)&&(0===o.indexOf("webkit-fake-url")?a(e[u]):r.settings.allow_html_data_urls||0!==o.indexOf("data:")||a(e[u]))}));var r,o})),{pasteFormat:t,pasteHtml:function(t,n){return Ce(e,t,n)},pasteText:function(t){return ke(e,t)},pasteImageData:function(t,n){return Ne(e,t,n)},getDataTransferItems:Te,hasHtmlOrText:Ee,hasContentType:Se}},Le=function(){},He=function(e,t,n,r){!function(e,t,n){if(r=e,!1!==w.iOS||void 0===r||"function"!=typeof r.setData||!0===L.isMsEdge())return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(R(),t),!0}catch(e){return!1}var r}(e.clipboardData,t.html,t.text)?n(t.html,r):(e.preventDefault(),r())},Fe=function(e){return function(t,n){var r=_(t),o=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(i),e.dom.add(e.getBody(),o);var a=e.selection.getRng();i.focus();var u=e.dom.createRng();u.selectNodeContents(i),e.selection.setRng(u),setTimeout((function(){e.selection.setRng(a),o.parentNode.removeChild(o),n()}),0)}},ze=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},We=function(e){return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},Ue=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),je=function(e,t){return Ue.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Ve=function(e,t){e.focus(),e.selection.setRng(t)};function $e(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal,n.wordContent)}))}function qe(e,t){if(!X(t))return t;var n=[];k.each(e.schema.getBlockElements(),(function(e,t){n.push(t)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=L.filter(t,[[r,"$1"]]),L.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function Ye(e,t,n,r){if(r||n)return t;var o,i=f(e);if(!1===d(e)||"all"===i)return t;if(i&&(o=i.split(/[, ]/)),o){var a=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,r){var i=a.parseStyle(a.decode(n)),s={};if("none"===o)return t+r;for(var c=0;c<o.length;c++){var l=i[o[c]],f=a.getStyle(u,o[c],!0);/color/.test(o[c])&&(l=a.toHex(l),f=a.toHex(f)),f!==l&&(s[o[c]]=l)}return(s=a.serializeStyle(s,"span"))?t+' style="'+s+'"'+r:t+r}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,r){return t+' style="'+n+'"'+r}))}function Xe(e,t){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,!0)}))}var Ge=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",(function(e){r.active(e.state)}))};n.add("paste",(function(e){if(!1===r(e)){var n=t(!1),o=t(!1),i=t(g(e)?"text":"html"),f=Ie(e,i),d=function(e){var t,n;w.webkit&&$e(e,Ye),w.ie&&($e(e,qe),n=Xe,(t=e).on("PastePostProcess",(function(e){n(t,e.node)})))}(e);return function(e,t){var n=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(Ge,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})}(e,f),x(e,f,n),function(e){var t=e.plugins.paste,n=c(e);n&&e.on("PastePreProcess",(function(e){n.call(t,t,e)}));var r=l(e);r&&e.on("PastePostProcess",(function(e){r.call(t,t,e)}))}(e),function(e){var t,n;e.on("cut",(t=e,function(e){We(t)&&He(e,ze(t),Fe(t),(function(){setTimeout((function(){t.execCommand("Delete")}),0)}))})),e.on("copy",(n=e,function(e){We(n)&&He(e,ze(n),Fe(n),Le)}))}(e),function(e,t,n){a(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault(),e.stopPropagation()})),u(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()})),e.on("drop",(function(r){var o,i;if(i=je(e,r),!r.isDefaultPrevented()&&!n.get()){o=t.getDataTransferItems(r.dataTransfer);var a,u=t.hasContentType(o,R());if((t.hasHtmlOrText(o)&&(!(a=o["text/plain"])||0!==a.indexOf("file://"))||!t.pasteImageData(r,i))&&i&&s(e)){var c=o["mce-internal"]||o["text/html"]||o["text/plain"];c&&(r.preventDefault(),C.setEditorTimeout(e,(function(){e.undoManager.transact((function(){o["mce-internal"]&&e.execCommand("Delete"),Ve(e,i),c=L.trimHtml(c),o["text/html"]?t.pasteHtml(c,u):t.pasteText(c)}))})))}}})),e.on("dragstart",(function(e){n.set(!0)})),e.on("dragover dragend",(function(t){u(e)&&!1===n.get()&&(t.preventDefault(),Ve(e,je(e,t))),"dragend"===t.type&&n.set(!1)}))}(e,f,o),function(e,t){return{clipboard:e,quirks:t}}(f,d)}}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e,t,r){var o=function(e){var t="",r=e.dom.encode,o=function(e){return e.getParam("content_style","")}(e);t+='<base href="'+r(e.documentBaseURI.getURI())+'">',o&&(t+='<style type="text/css">'+o+"</style>"),n.each(e.contentCSS,(function(n){t+='<link type="text/css" rel="stylesheet" href="'+r(e.documentBaseURI.toAbsolute(n))+'">'}));var i=e.settings.body_id||"tinymce";-1!==i.indexOf("=")&&(i=(i=e.getParam("body_id","","hash"))[e.id]||i);var a=e.settings.body_class||"";-1!==a.indexOf("=")&&(a=(a=e.getParam("body_class","","hash"))[e.id]||"");var u=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+t+'</head><body id="'+r(i)+'" class="mce-content-body '+r(a)+'"'+r(u)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'}(e);if(r)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(o);else{var i=t.contentWindow.document;i.open(),i.write(o),i.close()}},o=function(e){var n=!t.ie,o='<iframe src="" frameborder="0"'+(n?' sandbox="allow-scripts"':"")+"></iframe>",i=function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)}(e),a=function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)}(e);e.windowManager.open({title:"Preview",width:i,height:a,html:o,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(t){var o=t.control.getEl("body").firstChild;r(e,o,n)}})};e.add("preview",(function(e){(function(e){e.addCommand("mcePreview",(function(){o(e)}))})(e),function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");e.add("print",(function(e){(function(e){e.addCommand("mcePrint",(function(){t.ie&&t.ie<=11?e.getDoc().execCommand("print",!1,null):e.getWin().print()}))})(e),function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})}(e),e.addShortcut("Meta+P","","mcePrint")}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("save_enablewhendirty",!0)},o=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})},i=function(e){e.addCommand("mceSave",(function(){!function(e){var n;if(n=t.DOM.getParent(e.id,"form"),!r(e)||e.isDirty()){if(e.save(),function(e){return!!e.getParam("save_onsavecallback")}(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();n?(e.setDirty(!1),n.onsubmit&&!n.onsubmit()||("function"==typeof n.submit?n.submit():o(e,"Error: Form submit field collision.")),e.nodeChanged()):o(e,"Error: No form element found.")}}(e)})),e.addCommand("mceCancel",(function(){!function(e){var t=n.trim(e.startContent);!function(e){return!!e.getParam("save_oncancelcallback")}(e)?(e.setContent(t),e.undoManager.clear(),e.nodeChanged()):e.execCallback("save_oncancelcallback",e)}(e)}))},a=function(e){return function(t){var n=t.control;e.on("nodeChange dirty",(function(){n.disabled(r(e)&&!e.isDirty())}))}};e.add("save",(function(e){(function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:a(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:a(e)}),e.addShortcut("Meta+S","","mceSave")})(e),i(e)}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var o=function(e,t,n,o,i){var a,u,s,c,l,f,d=[],m=0;function h(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(0<t){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(s=t.ownerDocument,c=i.getBlockElements(),l=i.getWhiteSpaceElements(),f=i.getShortEndedElements(),u=function e(t){var n;if(3===t.nodeType)return t.data;if(l[t.nodeName]&&!c[t.nodeName])return"";if(n="",r(t))return"\n";if((c[t.nodeName]||f[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;a=e.exec(u);)d.push(h(a,o));else a=u.match(e),d.push(h(a,o));return d.length&&(m=d.length,function(e,t,n){var o,i,a,u,s=[],d=0,m=e,h=t.shift(),g=0;e:for(;;){if((c[m.nodeName]||f[m.nodeName]||r(m))&&d++,3===m.nodeType&&(!i&&m.length+d>=h[1]?(i=m,u=h[1]-d):o&&s.push(m),!o&&m.length+d>h[0]&&(o=m,a=h[0]-d),d+=m.length),o&&i){if(m=n({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:u,innerNodes:s,match:h[2],matchIndex:g}),d-=i.length-u,i=o=null,s=[],g++,!(h=t.shift()))break}else if(l[m.nodeName]&&!c[m.nodeName]||!m.firstChild){if(m.nextSibling){m=m.nextSibling;continue}}else if(!r(m)){m=m.firstChild;continue}for(;;){if(m.nextSibling){m=m.nextSibling;break}if(m.parentNode===e)break e;m=m.parentNode}}}(t,d,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:s.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(s.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex;if(i===a){var c=i;o=c.parentNode,0<e.startNodeIndex&&(n=s.createTextNode(c.data.substring(0,e.startNodeIndex)),o.insertBefore(n,c));var l=t(e.match[0],u);return o.insertBefore(l,c),e.endNodeIndex<c.length&&(r=s.createTextNode(c.data.substring(e.endNodeIndex)),o.insertBefore(r,c)),c.parentNode.removeChild(c),l}n=s.createTextNode(i.data.substring(0,e.startNodeIndex)),r=s.createTextNode(a.data.substring(e.endNodeIndex));for(var f=t(i.data.substring(e.startNodeIndex),u),d=0,m=e.innerNodes.length;d<m;++d){var h=e.innerNodes[d],g=t(h.data,u);h.parentNode.replaceChild(g,h)}var p=t(a.data.substring(0,e.endNodeIndex),u);return(o=i.parentNode).insertBefore(n,i),o.insertBefore(f,i),o.removeChild(i),(o=a.parentNode).insertBefore(p,a),o.insertBefore(r,a),o.removeChild(a),p}}(n))),m}},i=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},u=function(e,t){var r,o=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var a=0;a<r.length;a++){var u=i(r[a]);null!==u&&u.length&&u===t.toString()&&o.push(r[a])}return o},s=function(e,t,n){var r=t.get(),o=e.dom;(n=!1!==n)?r++:r--,o.removeClass(u(e,t.get()),"mce-match-marker-selected");var i=u(e,r);return i.length?(o.addClass(u(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(i[0]),r):-1},c=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},l=function(e,t){var n=s(e,t,!0);-1!==n&&t.set(n)},f=function(e,t){var n=s(e,t,!1);-1!==n&&t.set(n)},d=function(e){var t=i(e);return null!==t&&0<t.length},m=function(e,t,r){var o,u,s,c;for(u=n.toArray(e.getBody().getElementsByTagName("span")),o=0;o<u.length;o++){var l=i(u[o]);null!==l&&l.length&&(l===t.get().toString()&&(s||(s=u[o].firstChild),c=u[o].firstChild),a(u[o]))}if(s&&c){var f=e.dom.createRng();return f.setStart(s,0),f.setEnd(c,c.data.length),!1!==r&&e.selection.setRng(f),f}},h=function(e,t){return 0<u(e,t.get()+1).length},g=function(e,t){return 0<u(e,t.get()-1).length},p=m,v=function(e,t,n,r,i){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"[^\\S\\r\\n]"),n=i?"\\b"+n+"\\b":n;var a,u,c,l,f,d=(a=e,u=t,c=new RegExp(n,r?"g":"gi"),(f=a.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",l=a.getBody(),m(a,u,!1),o(c,l,f,!1,a.schema));return d&&(t.set(-1),t.set(s(e,t,!0))),d},b=l,y=f,x=function(e,t,r,o,u){var s,m,p,v,b,y,x=t.get();for(o=!1!==o,p=e.getBody(),m=n.grep(n.toArray(p.getElementsByTagName("span")),d),s=0;s<m.length;s++){var w=i(m[s]);if(v=b=parseInt(w,10),u||v===t.get()){for(r.length?(m[s].firstChild.nodeValue=r,a(m[s])):c(e.dom,m[s]);m[++s];){if((v=parseInt(i(m[s]),10))!==b){s--;break}c(e.dom,m[s])}o&&x--}else b>t.get()&&m[s].setAttribute("data-mce-index",b-1)}return t.set(x),o?(y=h(e,t),l(e,t)):(y=g(e,t),f(e,t)),!u&&y},w=h,C=g,k=function(e,t){var r,o={};function i(){u.statusbar.find("#next").disabled(!1===w(e,t)),u.statusbar.find("#prev").disabled(!1===C(e,t))}function a(){e.windowManager.alert("Could not find the specified string.",(function(){u.find("#find")[0].focus()}))}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var u=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),p(e,t),e.undoManager.add()},onSubmit:function(n){var r,s,c,l;return n.preventDefault(),s=u.find("#case").checked(),l=u.find("#words").checked(),(c=u.find("#find").value()).length?o.text===c&&o.caseState===s&&o.wholeWord===l?w(e,t)?(b(e,t),void i()):void a():((r=v(e,t,c,s,l))||a(),u.statusbar.items().slice(1).disabled(0===r),i(),void(o={text:c,caseState:s,wholeWord:l})):(p(e,t,!1),void u.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:!0,onclick:function(){x(e,t,u.find("#replace").value())||(u.statusbar.items().slice(1).disabled(!0),t.set(-1),o={})}},{text:"Replace all",disabled:!0,onclick:function(){x(e,t,u.find("#replace").value(),!0,!0),u.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){y(e,t),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){b(e,t),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},T=function(e,t){return function(){k(e,t)}};t.add("searchreplace",(function(t){var n=e(-1);return function(e,t){e.addCommand("SearchReplace",(function(){k(e,t)}))}(t,n),function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:T(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:T(e,t)}),e.shortcuts.add("Meta+F","",T(e,t))}(t,n),function(e,t){return{done:function(n){return p(e,t,n)},find:function(n,r,o){return v(e,t,n,r,o)},next:function(){return b(e,t)},prev:function(){return y(e,t)},replace:function(n,r,o){return x(e,t,n,r,o)}}}(t,n)}))}(),function(e){"use strict";var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(t){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(t.settings.plugins)||!n.get("tinymcespellchecker")||(void 0!==e.window.console&&e.window.console.log&&e.window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},o=function(e){return e.getParam("spellchecker_rpc_url")},i=function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)},a=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.util.URI"),s=tinymce.util.Tools.resolve("tinymce.util.XHR");function c(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var l,f=function(e,t){if(!t.get()){var n=function(e,t){var n,r,o,i,a,u=[],s=t.dom;function l(e,t){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function f(t){var n=e.getElementsByTagName("*"),r=[];t="number"==typeof t?""+t:null;for(var o=0;o<n.length;o++){var i=n[o],a=i.getAttribute("data-mce-index");null!==a&&a.length&&-1!==i.className.indexOf("mce-spellchecker-word")&&(a!==t&&null!==t||r.push(i))}return r}function d(e){for(var t=u.length;t--;)if(u[t]===e)return t;return-1}function m(e){for(var t=0,n=u.length;t<n&&!1!==e(u[t],t);t++);return this}function h(e){var t,n,r=f(e?d(e):null);for(t=r.length;t--;)(n=r[t]).parentNode.insertBefore(n.firstChild,n),n.parentNode.removeChild(n);return this}function g(e){var n=f(d(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r}return o=t.schema.getBlockElements(),i=t.schema.getWhiteSpaceElements(),a=t.schema.getShortEndedElements(),{text:r=function e(t){var n;if(3===t.nodeType)return t.data;if(i[t.nodeName]&&!o[t.nodeName])return"";if(c(t))return"\n";if(n="",(o[t.nodeName]||a[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(e),matches:u,each:m,filter:function(e){var t=[];return m((function(n,r){e(n,r)&&t.push(n)})),u=t,this},reset:function(){return u.splice(0,u.length),h(),this},matchFromElement:function(e){return u[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return f(d(e))[0]},find:function(e,t){if(r&&e.global)for(;n=e.exec(r);)u.push(l(n,t));return this},add:function(e,t,n){return u.push({start:e,end:e+t,text:r.substr(e,t),data:n}),this},wrap:function(t){return u.length&&function(e,t,n){var r,u,s,l,f,d=[],m=0,h=e,g=0;(t=t.slice(0)).sort((function(e,t){return e.start-t.start})),f=t.shift();e:for(;;){if((o[h.nodeName]||a[h.nodeName]||c(h))&&m++,3===h.nodeType&&(!u&&h.length+m>=f.end?(u=h,l=f.end-m):r&&d.push(h),!r&&h.length+m>f.start&&(r=h,s=f.start-m),m+=h.length),r&&u){if(h=n({startNode:r,startNodeIndex:s,endNode:u,endNodeIndex:l,innerNodes:d,match:f.text,matchIndex:g}),m-=u.length-l,u=r=null,d=[],g++,!(f=t.shift()))break}else if(i[h.nodeName]&&!o[h.nodeName]||!h.firstChild){if(h.nextSibling){h=h.nextSibling;continue}}else if(!c(h)){h=h.firstChild;continue}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===e)break e;h=h.parentNode}}}(e,u,function(e){function t(t,n){var r=u[n];r.stencil||(r.stencil=e(r));var o=r.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(s.doc.createTextNode(t)),o}return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex,c=s.doc;if(i===a){var l=i;o=l.parentNode,0<e.startNodeIndex&&(n=c.createTextNode(l.data.substring(0,e.startNodeIndex)),o.insertBefore(n,l));var f=t(e.match,u);return o.insertBefore(f,l),e.endNodeIndex<l.length&&(r=c.createTextNode(l.data.substring(e.endNodeIndex)),o.insertBefore(r,l)),l.parentNode.removeChild(l),f}n=c.createTextNode(i.data.substring(0,e.startNodeIndex)),r=c.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(i.data.substring(e.startNodeIndex),u),m=0,h=e.innerNodes.length;m<h;++m){var g=e.innerNodes[m],p=t(g.data,u);g.parentNode.replaceChild(p,g)}var v=t(a.data.substring(0,e.endNodeIndex),u);return(o=i.parentNode).insertBefore(n,i),o.insertBefore(d,i),o.removeChild(i),(o=a.parentNode).insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}(t)),this},unwrap:h,replace:function(e,n){var r=g(e);return r.deleteContents(),0<n.length&&r.insertNode(t.dom.doc.createTextNode(n)),r},rangeFromMatch:g,indexOf:d}}(e.getBody(),e);t.set(n)}return t.get()},d=function(e,t,n,r,i,c,l){var f,d,m;(function(e){return e.getParam("spellchecker_callback")}(e)||(f=e,d=t,m=n,function(e,t,n,r){var i={method:e,lang:m.get()},c="";i["addToDictionary"===e?"word":"text"]=t,a.each(i,(function(e,t){c&&(c+="&"),c+=t+"="+encodeURIComponent(e)})),s.send({url:new u(d).toAbsolute(o(f)),type:"post",content_type:"application/x-www-form-urlencoded",data:c,success:function(e){if(e=JSON.parse(e))e.error?r(e.error):n(e);else{var t=f.translate("Server response wasn't proper JSON.");r(t)}},error:function(){var e=f.translate("The spelling service was not found: (")+o(f)+f.translate(")");r(e)}})})).call(e.plugins.spellchecker,r,i,c,l)},m=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||h(e,t,n)},h=function(e,t,n){var r=e.selection.getBookmark();if(f(e,n).reset(),e.selection.moveToBookmark(r),n.set(null),t.get())return t.set(!1),function(e){e.fire("SpellcheckEnd")}(e),!0},g=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},p=function(e,t,n,r,o){var a,u;if("string"!=typeof o&&o.words?(u=!!o.dictionary,a=o.words):a=o,e.setProgressState(!1),function(e){for(var t in e)return!1;return!0}(a)){var s=e.translate("No misspellings found.");return e.notificationManager.open({text:s,type:"info"}),void t.set(!1)}r.set({suggestions:a,hasDictionarySupport:u});var c=e.selection.getBookmark();f(e,n).find(i(e)).filter((function(e){return!!a[e.text]})).wrap((function(t){return e.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})})),e.selection.moveToBookmark(c),t.set(!0),function(e){e.fire("SpellcheckStart")}(e)},v=function(e,t,n,r,o,i){h(e,n,r)||(e.setProgressState(!0),d(e,t,i,"spellcheck",f(e,r).text,(function(t){p(e,n,r,o,t)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),h(e,n,r)})),e.focus())},b=m,y=function(e,t,n,r,o,i,a){e.setProgressState(!0),d(e,t,o,"addToDictionary",i,(function(){e.setProgressState(!1),e.dom.remove(a,!0),m(e,n,r)}),(function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)}))},x=function(e,t,n,r,o,i){e.selection.collapse(),i?a.each(e.dom.select("span.mce-spellchecker-word"),(function(t){t.getAttribute("data-mce-word")===r&&e.dom.remove(t,!0)})):e.dom.remove(o,!0),m(e,t,n)},w=function(e,t){var n,r=[];if((n=a.toArray(e.getBody().getElementsByTagName("span"))).length)for(var o=0;o<n.length;o++){var i=g(n[o]);null!==i&&i.length&&i===t.toString()&&r.push(n[o])}return r},C=g,k=p,T=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),S=tinymce.util.Tools.resolve("tinymce.ui.Factory");n.add("spellchecker",(function(n,o){if(!1===r(n)){var u=t(!1),s=t(function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)}(n)),c=t(null),f=t(null);return function(e,t,n,r,o,i){var u,s,c,l,f=(c=e,u=a.map(function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")}(c).split(","),(function(e){return{name:(e=e.split("="))[0],value:e[1]}})),s=[],a.each(u,(function(e){s.push({selectable:!0,text:e.name,data:e.value})})),s),d=function(){v(e,t,n,r,i,o)},m={tooltip:"Spellcheck",onclick:d,onPostRender:function(t){var r=t.control;e.on("SpellcheckStart SpellcheckEnd",(function(){r.active(n.get())}))}};1<f.length&&(m.type="splitbutton",m.menu=f,m.onshow=(l=o,function(e){var t=l.get();e.control.items().each((function(e){e.active(e.settings.data===t)}))}),m.onselect=function(e){o.set(e.control.settings.data)}),e.addButton("spellchecker",m),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:d,selectable:!0,onPostRender:function(){var t=this;t.active(n.get()),e.on("SpellcheckStart SpellcheckEnd",(function(){t.active(n.get())}))}})}(n,o,u,c,s,f),function(t,n,r,o,i,u){t.on("click",(function(s){var c=s.target;if("mce-spellchecker-word"===c.className){s.preventDefault();var f=w(t,C(c));if(0<f.length){var d=t.dom.createRng();d.setStartBefore(f[0]),d.setEndAfter(f[f.length-1]),t.selection.setRng(d),function(t,n,r,o,i,u,s,c){var f=[],d=r.get().suggestions[s];a.each(d,(function(e){f.push({text:e,onclick:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(c),b(t,o,i)}})})),f.push({text:"-"}),r.get().hasDictionarySupport&&f.push({text:"Add to Dictionary",onclick:function(){y(t,n,o,i,u,s,c)}}),f.push.apply(f,[{text:"Ignore",onclick:function(){x(t,o,i,s,c)}},{text:"Ignore all",onclick:function(){x(t,o,i,s,c,!0)}}]),(l=S.create("menu",{items:f,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){l.remove(),l=null}})).renderTo(e.document.body);var m=T.DOM.getPos(t.getContentAreaContainer()),h=t.dom.getPos(c[0]),g=t.dom.getRoot();"BODY"===g.nodeName?(h.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,h.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop):(h.x-=g.scrollLeft,h.y-=g.scrollTop),m.x+=h.x,m.y+=h.y,l.moveTo(m.x,m.y+c[0].offsetHeight)}(t,n,r,o,i,u,c.getAttribute("data-mce-word"),f)}}}))}(n,o,f,u,c,s),function(e,t,n,r,o,i){e.addCommand("mceSpellCheck",(function(){v(e,t,n,r,o,i)}))}(n,o,u,c,f,s),function(e,t,n,r,o,a){return{getTextMatcher:function(){return r.get()},getWordCharPattern:function(){return i(e)},markErrors:function(o){k(e,t,r,n,o)},getLanguage:function(){return o.get()}}}(n,u,f,c,s)}}))}(window),function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.EditorManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Delay"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.util.VK"),s=n.DOM,c=function(e){e.keyCode!==u.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()};t.add("tabfocus",(function(t){!function(t){function n(n){var c,l,f,d;if(!(n.keyCode!==u.TAB||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented())&&(1===(f=a.explode(function(e){return e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))}(t))).length&&(f[1]=f[0],f[0]=":prev"),l=n.shiftKey?":prev"===f[0]?h(-1):s.get(f[0]):":next"===f[1]?h(1):s.get(f[1]))){var m=r.get(l.id||l.name);l.id&&m?m.focus():i.setTimeout((function(){o.webkit||e.window.focus(),l.focus()}),10),n.preventDefault()}function h(e){function o(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&r.get(n.id)&&-1!==e.tabIndex&&function e(t){return"BODY"===t.nodeName||"hidden"!==t.type&&"none"!==t.style.display&&"hidden"!==t.style.visibility&&e(t.parentNode)}(e)}if(l=s.select(":input:enabled,*[tabindex]:not(iframe)"),a.each(l,(function(e,n){if(e.id===t.id)return c=n,!1})),0<e){for(d=c+1;d<l.length;d++)if(o(l[d]))return l[d]}else for(d=c-1;0<=d;d--)if(o(l[d]))return l[d];return null}}t.on("init",(function(){t.inline&&s.setAttrib(t.getBody(),"tabIndex",null),t.on("keyup",c),o.gecko?t.on("keypress keydown",n):t.on("keydown",n)}))}(t)}))}(window),function(e){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},r=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,n))}},o=function(e){return function(){return e}},i=function(e){return e};function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}var u,s,c,l,f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},d=o(!1),m=o(!0),h=function(){return g},g=(u=function(e){return e.isNone()},l={fold:function(e,t){return e()},is:d,isSome:d,isNone:m,getOr:c=function(e){return e},getOrThunk:s=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:c,orThunk:s,map:h,each:n,bind:h,exists:d,forall:m,filter:h,equals:u,equals_:u,toArray:function(){return[]},toString:o("none()")},Object.freeze&&Object.freeze(l),l),p=function(e){var t=o(e),n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:m,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:g},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(d,(function(t){return n(e,t)}))}};return i},v={some:p,none:h,from:function(e){return null==e?g:p(e)}},b=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(t)===e}},y=b("string"),x=b("array"),w=b("boolean"),C=b("function"),k=b("number"),T=Array.prototype.slice,S=Array.prototype.indexOf,E=Array.prototype.push,_=function(e,t){return n=e,r=t,-1<S.call(n,r);var n,r},N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},R=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},O=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},A=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},P=function(e,t,n){return function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n])}(e,(function(e){n=t(n,e)})),n},D=function(e,t,n){return O(e,(function(e){n=t(n,e)})),n},M=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return v.some(o)}return v.none()},B=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return v.some(n);return v.none()},I=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!x(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);E.apply(t,e[n])}return t},L=function(e,t){var n=R(e,t);return I(n)},H=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},F=function(e){var t=T.call(e,0);return t.reverse(),t},z=(C(Array.from)&&Array.from,Object.keys),W=function(e,t){for(var n=z(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},U=function(e,t){return j(e,(function(e,n){return{k:n,v:t(e,n)}}))},j=function(e,t){var n={};return W(e,(function(e,r){var o=t(e,r);n[o.k]=o.v})),n},V=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return O(e,(function(e,n){r[e]=o(t[n])})),r}},$=function(e){return e.slice(0).sort()},q=function(e,t){throw new Error("All required keys ("+$(e).join(", ")+") were not specified. Specified keys were: "+$(t).join(", ")+".")},Y=function(e){throw new Error("Unsupported keys for object: "+$(e).join(", "))},X=function(e,t){if(!x(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");O(t,(function(t){if(!y(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},G=function(e){var t=$(e);M(t,(function(e,n){return n<t.length-1&&e===t[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},K=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return X("required",e),X("optional",t),G(n),function(r){var i=z(r);H(e,(function(e){return _(i,e)}))||q(e,i);var a=A(i,(function(e){return!_(n,e)}));0<a.length&&Y(a);var u={};return O(e,(function(e){u[e]=o(r[e])})),O(t,(function(e){u[e]=o(Object.prototype.hasOwnProperty.call(r,e)?v.some(r[e]):v.none())})),u}},J=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE),Z=e.Node.DOCUMENT_NODE,Q=(e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),ee=e.Node.TEXT_NODE,te=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")()),ne=function(e,t){var n=function(e,t){return function(e,t){for(var n=null!=t?t:te,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)}(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},re=function(e){return e.dom().nodeName.toLowerCase()},oe=function(e){return e.dom().nodeType},ie=function(e){return function(t){return oe(t)===e}},ae=function(e){return oe(e)===J||"#comment"===re(e)},ue=ie(Q),se=ie(ee),ce=function(t,n,r){if(!(y(r)||w(r)||k(r)))throw e.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")},le=function(e,t,n){ce(e.dom(),t,n)},fe=function(e,t){var n=e.dom();W(t,(function(e,t){ce(n,t,e)}))},de=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},me=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},he=function(e,t){e.dom().removeAttribute(t)},ge=function(e){return D(e.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},pe=function(e,t){return-1!==e.indexOf(t)},ve=function(e){return void 0!==e.style&&C(e.style.getPropertyValue)},be=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},ye=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:o(e)}},xe={fromHtml:function(t,n){var r=(n||e.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return ye(r.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return ye(r)},fromText:function(t,n){var r=(n||e.document).createTextNode(t);return ye(r)},fromDom:ye,fromPoint:function(e,t,n){var r=e.dom();return v.from(r.elementFromPoint(t,n)).map(ye)}},we=function(e){var t=se(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)},Ce=be((function(){return ke(xe.fromDom(e.document))})),ke=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return xe.fromDom(t)},Te=function(t,n,r){if(!y(r))throw e.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);ve(t)&&t.style.setProperty(n,r)},Se=function(e,t,n){var r=e.dom();Te(r,t,n)},Ee=function(e,t){var n=e.dom();W(t,(function(e,t){Te(n,t,e)}))},_e=function(t,n){var r=t.dom(),o=e.window.getComputedStyle(r).getPropertyValue(n),i=""!==o||we(t)?o:Ne(r,n);return null===i?void 0:i},Ne=function(e,t){return ve(e)?e.style.getPropertyValue(t):""},Re=function(e,t){var n=e.dom(),r=Ne(n,t);return v.from(r).filter((function(e){return 0<e.length}))},Oe=function(e,t){var n,r,o=e.dom();r=t,ve(n=o)&&n.style.removeProperty(r),me(e,"style")&&""===de(e,"style").replace(/^\s+|\s+$/g,"")&&he(e,"style")},Ae=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ne("Node").DOCUMENT_POSITION_CONTAINED_BY)},Pe=function(){return De(0,0)},De=function(e,t){return{major:e,minor:t}},Me=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Pe():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return De(r(1),r(2))}(e,n)},Be=Pe,Ie="Firefox",Le=function(e,t){return function(){return t===e}},He=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Le("Edge",t),isChrome:Le("Chrome",t),isIE:Le("IE",t),isOpera:Le("Opera",t),isFirefox:Le(Ie,t),isSafari:Le("Safari",t)}},Fe=function(){return He({current:void 0,version:Be()})},ze=He,We=(o("Edge"),o("Chrome"),o("IE"),o("Opera"),o(Ie),o("Safari"),"Windows"),Ue="Android",je="Solaris",Ve="FreeBSD",$e=function(e,t){return function(){return t===e}},qe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:$e(We,t),isiOS:$e("iOS",t),isAndroid:$e(Ue,t),isOSX:$e("OSX",t),isLinux:$e("Linux",t),isSolaris:$e(je,t),isFreeBSD:$e(Ve,t)}},Ye=function(){return qe({current:void 0,version:Be()})},Xe=qe,Ge=(o(We),o("iOS"),o(Ue),o("Linux"),o("OSX"),o(je),o(Ve),function(e,t){var n=String(t).toLowerCase();return M(e,(function(e){return e.search(n)}))}),Ke=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=function(e){return function(t){return pe(t,e)}},Ze=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return pe(e,"edge/")&&pe(e,"chrome")&&pe(e,"safari")&&pe(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ke],search:function(e){return pe(e,"chrome")&&!pe(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return pe(e,"msie")||pe(e,"trident")}},{name:"Opera",versionRegexes:[Ke,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[Ke,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(pe(e,"safari")||pe(e,"mobile/"))&&pe(e,"applewebkit")}}],Qe=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return pe(e,"iphone")||pe(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Je("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]}],et={browsers:o(Ze),oses:o(Qe)},tt=function(e){var t,n,r,i,a,u,s,c,l,f,d,m=et.browsers(),h=et.oses(),g=function(e,t){return Ge(e,t).map((function(e){var n=Me(e.versionRegexes,t);return{current:e.name,version:n}}))}(m,e).fold(Fe,ze),p=function(e,t){return Ge(e,t).map((function(e){var n=Me(e.versionRegexes,t);return{current:e.name,version:n}}))}(h,e).fold(Ye,Xe);return{browser:g,os:p,deviceType:(n=g,r=e,i=(t=p).isiOS()&&!0===/ipad/i.test(r),a=t.isiOS()&&!i,u=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,c=i||u||s&&!0===/mobile/i.test(r),l=t.isiOS()||t.isAndroid(),f=l&&!c,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r),{isiPad:o(i),isiPhone:o(a),isTablet:o(c),isPhone:o(f),isTouch:o(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(d)})}},nt={detect:be((function(){var t=e.navigator.userAgent;return tt(t)}))},rt=Q,ot=Z,it=function(e,t){var n=e.dom();if(n.nodeType!==rt)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},at=function(e){return e.nodeType!==rt&&e.nodeType!==ot||0===e.childElementCount},ut=function(e,t){return e.dom()===t.dom()},st=nt.detect().browser.isIE()?function(e,t){return Ae(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},ct=it,lt=function(e){return xe.fromDom(e.dom().ownerDocument)},ft=function(e){return v.from(e.dom().parentNode).map(xe.fromDom)},dt=function(e,t){for(var n=C(t)?t:d,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=xe.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},mt=function(e){return v.from(e.dom().previousSibling).map(xe.fromDom)},ht=function(e){return v.from(e.dom().nextSibling).map(xe.fromDom)},gt=function(e){return R(e.dom().childNodes,xe.fromDom)},pt=function(e,t){var n=e.dom().childNodes;return v.from(n[t]).map(xe.fromDom)},vt=(V("element","offset"),function(e,t){ft(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))}),bt=function(e,t){ht(e).fold((function(){ft(e).each((function(e){xt(e,t)}))}),(function(e){vt(e,t)}))},yt=function(e,t){pt(e,0).fold((function(){xt(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},xt=function(e,t){e.dom().appendChild(t.dom())},wt=function(e,t){vt(e,t),xt(t,e)},Ct=function(e,t){O(t,(function(n,r){var o=0===r?e:t[r-1];bt(o,n)}))},kt=function(e,t){O(t,(function(t){xt(e,t)}))},Tt=function(e){e.dom().textContent="",O(gt(e),(function(e){St(e)}))},St=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Et=function(e){var t,n=gt(e);0<n.length&&(t=e,O(n,(function(e){vt(t,e)}))),St(e)},_t=(V("width","height"),V("width","height"),V("rows","columns")),Nt=V("row","column"),Rt=(V("x","y"),V("element","rowspan","colspan")),Ot=V("element","rowspan","colspan","isNew"),At=V("element","rowspan","colspan","row","column"),Pt=V("element","cells","section"),Dt=V("element","isNew"),Mt=V("element","cells","section","isNew"),Bt=V("cells","section"),It=V("details","section"),Lt=V("startRow","startCol","finishRow","finishCol"),Ht=function(e,t){var n=[];return O(gt(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(Ht(e,t))})),n},Ft=function(e,t,n){return r=function(e){return it(e,t)},A(dt(e,n),r);var r},zt=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),at(i)?[]:R(i.querySelectorAll(r),xe.fromDom);var r,o,i};function Wt(e,t,n,r,o){return e(n,r)?v.some(n):C(o)&&o(n)?v.none():t(n,r,o)}var Ut,jt,Vt=function(e,t,n){for(var r=e.dom(),i=C(n)?n:o(!1);r.parentNode;){r=r.parentNode;var a=xe.fromDom(r);if(t(a))return v.some(a);if(i(a))break}return v.none()},$t=function(e,t,n){return Vt(e,(function(e){return it(e,t)}),n)},qt=function(e,t){return n=function(e){return it(e,t)},M(e.dom().childNodes,(function(e){return n(xe.fromDom(e))})).map(xe.fromDom);var n},Yt=function(t,n){return r=n,i=void 0===(o=t)?e.document:o.dom(),at(i)?v.none():v.from(i.querySelector(r)).map(xe.fromDom);var r,o,i},Xt=function(e,t,n){return Wt(it,$t,e,t,n)},Gt=function(e,t,n){return L(gt(e),(function(e){return it(e,t)?n(e)?[e]:[]:Gt(e,t,n)}))},Kt={firstLayer:function(e,t){return Gt(e,t,o(!0))},filterFirstLayer:Gt},Jt=function(e,t,n){return void 0===n&&(n=d),n(t)?v.none():_(e,re(t))?v.some(t):$t(t,e.join(","),(function(e){return it(e,"table")||n(e)}))},Zt=function(e,t){return ft(t).map((function(t){return function(e,t){return n=function(e){return it(e,t)},A(gt(e),n);var n}(t,e)}))},Qt=(a(Zt,"th,td"),a(Zt,"tr"),function(e,t){return Jt(["td","th"],e,t)}),en=function(e){return Kt.firstLayer(e,"th,td")},tn=function(e,t){return Xt(e,"table",t)},nn=function(e){return Kt.firstLayer(e,"tr")},rn=function(e){var t=nn(e);return R(t,(function(e){var t=e,n=ft(t).map((function(e){var t=re(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"})).getOr("tbody"),r=R(en(e),(function(e){var t=me(e,"rowspan")?parseInt(de(e,"rowspan"),10):1,n=me(e,"colspan")?parseInt(de(e,"colspan"),10):1;return Rt(e,t,n)}));return Pt(t,r,n)}))},on=function(e,t){return e+","+t},an=function(e,t){var n=L(e.all(),(function(e){return e.cells()}));return A(n,t)},un=function(e){var t={},n=[],r=e.length,i=0;O(e,(function(e,r){var o=[];O(e.cells(),(function(e){for(var n=0;void 0!==t[on(r,n)];)n++;for(var a=At(e.element(),e.rowspan(),e.colspan(),r,n),u=0;u<e.colspan();u++)for(var s=0;s<e.rowspan();s++){var c=n+u,l=on(r+s,c);t[l]=a,i=Math.max(i,c+1)}o.push(a)})),n.push(Pt(e.element(),o,e.section()))}));var a=_t(r,i);return{grid:o(a),access:o(t),all:o(n)}},sn=function(e,t,n){var r=e.access()[on(t,n)];return void 0!==r?v.some(r):v.none()},cn=function(e,t,n){var r=an(e,(function(e){return n(t,e.element())}));return 0<r.length?v.some(r[0]):v.none()},ln=an,fn=function(e){var t=R(e.all(),(function(e){return e.cells()}));return I(t)},dn=V("minRow","minCol","maxRow","maxCol"),mn=function(e,t){var n,r,o,i,a,u,s,c,l,f,d=function(e){return it(e.element(),t)},m=rn(e),h=un(m),g=(r=d,o=(n=h).grid().columns(),i=n.grid().rows(),a=o,s=u=0,W(n.access(),(function(e){if(r(e)){var t=e.row(),n=t+e.rowspan()-1,o=e.column(),c=o+e.colspan()-1;t<i?i=t:u<n&&(u=n),o<a?a=o:s<c&&(s=c)}})),dn(i,a,u,s)),p="th:not("+t+"),td:not("+t+")",v=Kt.filterFirstLayer(e,"th,td",(function(e){return it(e,p)}));return O(v,St),function(e,t,n,r){for(var o,i,a,u=t.grid().columns(),s=t.grid().rows(),c=0;c<s;c++)for(var l=!1,f=0;f<u;f++)c<n.minRow()||c>n.maxRow()||f<n.minCol()||f>n.maxCol()||(sn(t,c,f).filter(r).isNone()?(o=l,i=e[c].element(),a=xe.fromTag("td"),xt(a,xe.fromTag("br")),(o?xt:yt)(i,a)):l=!0)}(m,h,g,d),c=e,l=g,f=A(Kt.firstLayer(c,"tr"),(function(e){return 0===e.dom().childElementCount})),O(f,St),l.minCol()!==l.maxCol()&&l.minRow()!==l.maxRow()||O(Kt.firstLayer(c,"th,td"),(function(e){he(e,"rowspan"),he(e,"colspan")})),he(c,"width"),he(c,"height"),Oe(c,"width"),Oe(c,"height"),e},hn=(Ut=se,"text",{get:function(e){if(!Ut(e))throw new Error("Can only get text value of a text node");return jt(e).getOr("")},getOption:jt=function(e){return Ut(e)?v.from(e.dom().nodeValue):v.none()},set:function(e,t){if(!Ut(e))throw new Error("Can only set raw text value of a text node");e.dom().nodeValue=t}}),gn=function(e){return hn.get(e)},pn=function(e){return hn.getOption(e)},vn=function(e,t){hn.set(e,t)},bn=function(e){return"img"===re(e)?1:pn(e).fold((function(){return gt(e).length}),(function(e){return e.length}))},yn=["img","br"],xn=function(e){return pn(e).filter((function(e){return 0!==e.trim().length||-1<e.indexOf(" ")})).isSome()||_(yn,re(e))},wn=function(e){return t=xn,(n=function(e){for(var r=0;r<e.childNodes.length;r++){var o=xe.fromDom(e.childNodes[r]);if(t(o))return v.some(o);var i=n(e.childNodes[r]);if(i.isSome())return i}return v.none()})(e.dom());var t,n},Cn=function(e){return kn(e,xn)},kn=function(e,t){var n=function(e){for(var r=gt(e),o=r.length-1;0<=o;o--){var i=r[o];if(t(i))return v.some(i);var a=n(i);if(a.isSome())return a}return v.none()};return n(e)},Tn=function(e,t){return xe.fromDom(e.dom().cloneNode(t))},Sn=function(e){return Tn(e,!1)},En=function(e){return Tn(e,!0)},_n=function(){var e=xe.fromTag("td");return xt(e,xe.fromTag("br")),e},Nn=function(e,t,n){var r=function(e,t){var n,r,o,i=(n=e,r=xe.fromTag(t),o=ge(n),fe(r,o),r),a=gt(En(e));return kt(i,a),i}(e,t);return W(n,(function(e,t){null===e?he(r,t):le(r,t,e)})),r},Rn=function(e){return e},On=function(e){return function(){return xe.fromTag("tr",e.dom())}},An=function(e,t,n){return{row:On(t),cell:function(t){var r,o,i,a,u,s,c=lt(t.element()),l=xe.fromTag(re(t.element()),c.dom()),f=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),d=0<f.length?(r=t.element(),o=l,i=f,wn(r).map((function(e){var t=i.join(","),n=Ft(e,t,(function(e){return ut(e,r)}));return P(n,(function(e,t){var n=Sn(t);return he(n,"contenteditable"),xt(e,n),n}),o)})).getOr(o)):l;return xt(d,xe.fromTag("br")),a=l,u=t.element().dom(),s=a.dom(),ve(u)&&ve(s)&&(s.style.cssText=u.style.cssText),Oe(l,"height"),1!==t.colspan()&&Oe(t.element(),"width"),e(t.element(),l),l},replace:Nn,gap:_n}},Pn=function(e){return{row:On(e),cell:_n,replace:Rn,gap:_n}},Dn=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Mn=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},Bn=function(e,t,n){var r=cn(e,t,ut),o=cn(e,n,ut);return r.bind((function(e){return o.map((function(t){return n=e,r=t,Lt(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r}))}))},In=Bn,Ln=function(e,t,n){return Bn(e,t,n).bind((function(t){return function(e,t){for(var n=!0,r=a(Dn,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&sn(e,o,i).exists(r);return n?v.some(t):v.none()}(e,t)}))},Hn=function(e,t,n){return In(e,t,n).map((function(t){var n=ln(e,a(Mn,t));return R(n,(function(e){return e.element()}))}))},Fn=function(e,t){return cn(e,t,(function(e,t){return st(t,e)})).map((function(e){return e.element()}))},zn=function(e){var t=rn(e);return un(t)},Wn=function(e,t,n){return tn(e).bind((function(r){return function(e,t,n,r){return cn(e,t,ut).bind((function(t){var o=0<n?t.row()+t.rowspan()-1:t.row(),i=0<r?t.column()+t.colspan()-1:t.column();return sn(e,o+n,i+r).map((function(e){return e.element()}))}))}(zn(r),e,t,n)}))},Un=function(e,t,n){var r=zn(e);return Hn(r,t,n)},jn=function(e,t,n,r,o){var i=zn(e),a=ut(e,n)?v.some(t):Fn(i,t),u=ut(e,o)?v.some(r):Fn(i,r);return a.bind((function(e){return u.bind((function(t){return Hn(i,e,t)}))}))},Vn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function $n(){return{up:o({selector:$t,closest:Xt,predicate:Vt,all:dt}),down:o({selector:zt,predicate:Ht}),styles:o({get:_e,getRaw:Re,set:Se,remove:Oe}),attrs:o({get:de,set:le,remove:he,copyTo:function(e,t){var n=ge(e);fe(t,n)}}),insert:o({before:vt,after:bt,afterAll:Ct,append:xt,appendAll:kt,prepend:yt,wrap:wt}),remove:o({unwrap:Et,remove:St}),create:o({nu:xe.fromTag,clone:function(e){return xe.fromDom(e.dom().cloneNode(!1))},text:xe.fromText}),query:o({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:mt,nextSibling:ht}),property:o({children:gt,name:re,parent:ft,document:function(e){return e.dom().ownerDocument},isText:se,isComment:ae,isElement:ue,getText:gn,setText:vn,isBoundary:function(e){return!!ue(e)&&("body"===re(e)||_(Vn,re(e)))},isEmptyTag:function(e){return!!ue(e)&&_(["br","img","hr","input"],re(e))}}),eq:ut,is:ct}}V("left","right"),V("first","second","splits");var qn=function(e,t,n){return t.bind((function(t){return n.filter(a(e.eq,t))}))},Yn=function(e,t){return a(e.eq,t)},Xn=function(e,t,n,r){void 0===r&&(r=d);var i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),u=function(e){return B(e,r).fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},s=u(i),c=u(a),l=M(s,(function(t){return N(c,Yn(e,t))}));return{firstpath:o(s),secondpath:o(c),shared:o(l)}},Gn=function(e,t,n){return 0<n.length?function(e,t,n,r){var o=t(e,n);return P(r,(function(n,r){var o=t(e,r);return qn(e,n,o)}),o)}(e,t,(r=n)[0],r.slice(1)):v.none();var r},Kn=Xn,Jn=$n(),Zn=function(e,t){return Gn(Jn,(function(t,n){return e(n)}),t)},Qn=function(e,t,n){return Kn(Jn,e,t,n)},er={create:K(["boxes","start","finish"],[])},tr=function(e){return $t(e,"table")},nr=function(e,t,n){var r=function(e){return function(t){return void 0!==n&&n(t)||ut(t,e)}};return ut(e,t)?v.some(er.create({boxes:v.some([e]),start:e,finish:t})):tr(e).bind((function(o){return tr(t).bind((function(i){if(ut(o,i))return v.some(er.create({boxes:Un(o,e,t),start:e,finish:t}));if(st(o,i)){var a=0<(u=Ft(t,"td,th",r(o))).length?u[u.length-1]:t;return v.some(er.create({boxes:jn(o,e,o,t,i),start:e,finish:a}))}if(st(i,o)){var u,s=0<(u=Ft(e,"td,th",r(i))).length?u[u.length-1]:e;return v.some(er.create({boxes:jn(i,e,o,t,i),start:e,finish:s}))}return Qn(e,t).shared().bind((function(a){return Xt(a,"table",n).bind((function(n){var a=Ft(t,"td,th",r(n)),u=0<a.length?a[a.length-1]:t,s=Ft(e,"td,th",r(n)),c=0<s.length?s[s.length-1]:e;return v.some(er.create({boxes:jn(n,e,o,t,i),start:c,finish:u}))}))}))}))}))},rr=nr,or=function(e,t){var n=zt(e,t);return 0<n.length?v.some(n):v.none()},ir=function(e,t,n){return Yt(e,t).bind((function(t){return Yt(e,n).bind((function(e){return Zn(tr,[t,e]).map((function(n){return{first:o(t),last:o(e),table:o(n)}}))}))}))},ar=function(e,t,n){return ir(e,t,n).bind((function(t){var n=function(t){return ut(e,t)},r=$t(t.first(),"thead,tfoot,tbody,table",n),o=$t(t.last(),"thead,tfoot,tbody,table",n);return r.bind((function(e){return o.bind((function(n){return ut(e,n)?function(e,t,n){var r=zn(e);return Ln(r,t,n)}(t.table(),t.first(),t.last()):v.none()}))}))}))},ur={selected:o("data-mce-selected"),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},sr=function(t){if(!x(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],r={};return O(t,(function(o,i){var a=z(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],s=o[u];if(void 0!==r[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!x(s))throw new Error("case arguments must be an array");n.push(u),r[u]=function(){var r=arguments.length;if(r!==s.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+s.length+" ("+s+"), got "+r);for(var o=new Array(r),a=0;a<o.length;a++)o[a]=arguments[a];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,o)},match:function(e){var t=z(e);if(n.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+t.join(","));if(!H(n,(function(e){return _(t,e)})))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+n.join(", "));return e[u].apply(null,o)},log:function(t){e.console.log(t,{constructors:n,constructor:u,params:o})}}}})),r},cr=sr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),lr={cata:function(e,t,n,r){return e.fold(t,n,r)},none:cr.none,multiple:cr.multiple,single:cr.single},fr=function(e,t){return lr.cata(t.get(),o([]),i,o([e]))},dr=function(e,t){return lr.cata(t.get(),v.none,(function(t,n){return 0===t.length?v.none():ar(e,ur.firstSelectedSelector(),ur.lastSelectedSelector()).bind((function(e){return 1<t.length?v.some({bounds:o(e),cells:o(t)}):v.none()}))}),v.none)},mr=function(e,t){var n=fr(e,t);return 0<n.length&&H(n,(function(e){return me(e,"rowspan")&&1<parseInt(de(e,"rowspan"),10)||me(e,"colspan")&&1<parseInt(de(e,"colspan"),10)}))?v.some(n):v.none()},hr=fr,gr=function(e){return{element:o(e),mergable:v.none,unmergable:v.none,selection:o([e])}},pr=V("element","clipboard","generators"),vr={noMenu:gr,forMenu:function(e,t,n){return{element:o(n),mergable:o(dr(t,e)),unmergable:o(mr(n,e)),selection:o(hr(n,e))}},notCell:function(e){return gr(e)},paste:pr,pasteRows:function(e,t,n,r,i){return{element:o(n),mergable:v.none,unmergable:v.none,selection:o(hr(n,e)),clipboard:o(r),generators:o(i)}}};function br(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var o=_e(n,e);return parseFloat(o)||0}return r},r=function(e,t){return D(t,(function(t,n){var r=_e(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,n){if(!k(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var r=t.dom();ve(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return o<t?t-o:0}}}var yr=br("height",(function(e){var t=e.dom();return we(e)?t.getBoundingClientRect().height:t.offsetHeight})),xr=function(e){return yr.get(e)},wr=function(e){return yr.getOuter(e)},Cr=br("width",(function(e){return e.dom().offsetWidth})),kr=function(e){return Cr.get(e)},Tr=function(e){return Cr.getOuter(e)},Sr=nt.detect(),Er=function(e,t,n){return r=_e(e,t),o=n,i=parseFloat(r),isNaN(i)?o:i;var r,o,i},_r=/(\d+(\.\d+)?)(\w|%)*/,Nr=/(\d+(\.\d+)?)%/,Rr=/(\d+(\.\d+)?)px|em/,Or=function(e,t){Se(e,"height",t+"px")},Ar=function(e){var t,n=Re(t=e,"height").getOrThunk((function(){return function(e){return Sr.browser.isIE()||Sr.browser.isEdge()?(n=Er(t=e,"padding-top",0),r=Er(t,"padding-bottom",0),o=Er(t,"border-top-width",0),i=Er(t,"border-bottom-width",0),a=t.dom().getBoundingClientRect().height,"border-box"===_e(t,"box-sizing")?a:a-n-r-(o+i)):Er(e,"height",xr(e));var t,n,r,o,i,a}(t)+"px"}));return n?function(e,t,n,r){var o,i,a,u,s,c,l,f=parseInt(e,10);return c="%",l=(s=e).length-"%".length,""!==c&&(s.length<c.length||s.substr(l,l+c.length)!==c)||"table"===re(t)?f:(i=f,a=n,r(o=t,u=tn(o).map((function(e){var t=a(e);return Math.floor(i/100*t)})).getOr(i)),u)}(n,e,xr,Or):xr(e)},Pr=function(e){return Re(e,"width").fold((function(){return v.from(de(e,"width"))}),(function(e){return v.some(e)}))},Dr=function(e,t){return e/t.pixelWidth()*100},Mr={percentageBasedSizeRegex:o(Nr),pixelBasedSizeRegex:o(Rr),setPixelWidth:function(e,t){Se(e,"width",t+"px")},setPercentageWidth:function(e,t){Se(e,"width",t+"%")},setHeight:Or,getPixelWidth:function(e,t){return Pr(e).fold((function(){return kr(e)}),(function(n){return function(e,t,n){var r=Rr.exec(t);if(null!==r)return parseInt(r[1],10);var o=Nr.exec(t);return null!==o?parseFloat(o[1])/100*n.pixelWidth():kr(e)}(e,n,t)}))},getPercentageWidth:function(e,t){return Pr(e).fold((function(){var n=kr(e);return Dr(n,t)}),(function(n){return function(e,t,n){var r=Nr.exec(t);if(null!==r)return parseFloat(r[1]);var o=kr(e);return Dr(o,n)}(e,n,t)}))},getGenericWidth:function(e){return Pr(e).bind((function(e){var t=_r.exec(e);return null!==t?v.some({width:o(parseFloat(t[1])),unit:o(t[3])}):v.none()}))},setGenericWidth:function(e,t,n){Se(e,"width",t+n)},getHeight:function(e){return"rowspan",Ar(t=e)/function(e,t){return me(e,t)?parseInt(de(e,t),10):1}(t,"rowspan");var t},getRawWidth:Pr},Br=function(e,t){Mr.getGenericWidth(e).each((function(n){var r=n.width()/2;Mr.setGenericWidth(e,r,n.unit()),Mr.setGenericWidth(t,r,n.unit())}))},Ir=function(e,t){return{left:o(e),top:o(t),translate:function(n,r){return Ir(e+n,t+r)}}},Lr=Ir,Hr=function(e,t){return void 0!==e?e:void 0!==t?t:0},Fr=function(e){var t=e.dom().ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement,i=Hr(r.pageYOffset,o.scrollTop),a=Hr(r.pageXOffset,o.scrollLeft),u=Hr(o.clientTop,n.clientTop),s=Hr(o.clientLeft,n.clientLeft);return zr(e).translate(a-s,i-u)},zr=function(e){var t,n=e.dom(),r=n.ownerDocument.body;return r===n?Lr(r.offsetLeft,r.offsetTop):we(e)?(t=n.getBoundingClientRect(),Lr(t.left,t.top)):Lr(0,0)},Wr=V("row","y"),Ur=V("col","x"),jr=function(e){return Fr(e).left()+Tr(e)},Vr=function(e){return Fr(e).left()},$r=function(e,t){return Ur(e,Vr(t))},qr=function(e,t){return Ur(e,jr(t))},Yr=function(e){return Fr(e).top()},Xr=function(e,t){return Wr(e,Yr(t))},Gr=function(e,t){return Wr(e,Yr(t)+wr(t))},Kr=function(e,t,n){if(0===n.length)return[];var r=R(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),o=n[n.length-1].map((function(e){return t(n.length-1,e)}));return r.concat([o])},Jr={height:{delta:i,positions:function(e){return Kr(Xr,Gr,e)},edge:Yr},rtl:{delta:function(e){return-e},edge:jr,positions:function(e){return Kr(qr,$r,e)}},ltr:{delta:i,edge:Vr,positions:function(e){return Kr($r,qr,e)}}},Zr={ltr:Jr.ltr,rtl:Jr.rtl};function Qr(e){var t=function(t){return e(t).isRtl()?Zr.rtl:Zr.ltr};return{delta:function(e,n){return t(n).delta(e,n)},edge:function(e){return t(e).edge(e)},positions:function(e,n){return t(n).positions(e,n)}}}var eo=function(e){var t=rn(e);return un(t).grid()},to=function(){return(to=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},no=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ro=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return v.none()},oo=function(e,t,n,r){n===r?he(e,t):le(e,t,n)},io=function(e,t){var n=de(e,t);return void 0===n||""===n?[]:n.split(" ")},ao=function(e){return void 0!==e.dom().classList},uo=function(e,t){ao(e)?e.dom().classList.add(t):function(e,t){return r=t,o=io(n=e,"class").concat([r]),le(n,"class",o.join(" ")),!0;var n,r,o}(e,t)},so=function(e,t){return ao(e)&&e.dom().classList.contains(t)},co=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},lo=function(e,t){if(t<0||t>=e.length-1)return v.none();var n=e[t].fold((function(){var n=F(e.slice(0,t));return ro(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return v.some({value:e,delta:0})})),r=e[t+1].fold((function(){var n=e.slice(t+1);return ro(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return v.some({value:e,delta:1})}));return n.bind((function(e){return r.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},fo=function(e,t,n){var r=e();return M(r,t).orThunk((function(){return v.from(r[0]).orThunk(n)})).map((function(e){return e.element()}))},mo=function(e){var t=e.grid(),n=co(0,t.columns()),r=co(0,t.rows());return R(n,(function(t){return fo((function(){return L(r,(function(n){return sn(e,n,t).filter((function(e){return e.column()===t})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.colspan()}),(function(){return sn(e,0,t)}))}))},ho=function(e){var t=e.grid(),n=co(0,t.rows()),r=co(0,t.columns());return R(n,(function(t){return fo((function(){return L(r,(function(n){return sn(e,t,n).filter((function(e){return e.row()===t})).fold(o([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan()}),(function(){return sn(e,t,0)}))}))},go=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},po={resolve:go("ephox-snooker").resolve},vo=po.resolve("resizer-bar"),bo=po.resolve("resizer-rows"),yo=po.resolve("resizer-cols"),xo=function(e){var t=zt(e.parent(),"."+vo);O(t,St)},wo=function(e,t,n){var r=e.origin();O(t,(function(t,o){t.each((function(t){var o=n(r,t);uo(o,vo),xt(e.parent(),o)}))}))},Co=function(e,t,n,r,o,i){var a,u,s,c,l,f,d,m,h=Fr(t);a=e,u=0<n.length?o.positions(n,t):[],s=h,c=Tr(t),wo(a,u,(function(e,t){var n=function(e,t,n,r,o){var i=xe.fromTag("div");return Ee(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),fe(i,{"data-row":e,role:"presentation"}),i}(t.row(),s.left()-e.left(),t.y()-e.top(),c,7);return uo(n,bo),n})),l=e,f=0<r.length?i.positions(r,t):[],d=h,m=wr(t),wo(l,f,(function(e,t){var n=function(e,t,n,r,o){var i=xe.fromTag("div");return Ee(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),fe(i,{"data-column":e,role:"presentation"}),i}(t.col(),t.x()-e.left(),d.top()-e.top(),7,m);return uo(n,yo),n}))},ko=function(e,t){var n=zt(e.parent(),"."+vo);O(n,t)},To=function(e,t,n,r){xo(e);var o=rn(t),i=un(o),a=ho(i),u=mo(i);Co(e,t,a,u,n,r)},So=function(e){ko(e,(function(e){Se(e,"display","none")}))},Eo=function(e){ko(e,(function(e){Se(e,"display","block")}))},_o=xo,No=function(e,t){return Bt(t,e.section())},Ro=function(e,t){return e.cells()[t]},Oo=function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),a=o.concat([n]).concat(i);return No(e,a)},Ao=No,Po=function(e,t,n){e.cells()[t]=n},Do=Ro,Mo=function(e,t){return Ro(e,t).element()},Bo=function(e,t){var n=e.cells(),r=R(n,t);return Bt(r,e.section())},Io=function(e){return e.cells().length},Lo=function(e,t){if(0===e.length)return 0;var n=e[0];return B(e,(function(e){return!t(n.element(),e.element())})).fold((function(){return e.length}),(function(e){return e}))},Ho=function(e,t){var n=R(e,(function(e,t){return R(e.cells(),(function(e,t){return!1}))}));return R(e,(function(r,i){var a=L(r.cells(),(function(r,a){if(!1===n[i][a]){var u=function(e,t,n,r){var i,a,u,s,c=(i=e,a=t,i[a]).cells().slice(n),l=Lo(c,r),f=(u=e,s=n,R(u,(function(e){return Do(e,s)}))).slice(t),d=Lo(f,r);return{colspan:o(l),rowspan:o(d)}}(e,i,a,t);return function(e,t,r,o){for(var i=e;i<e+r;i++)for(var a=t;a<t+o;a++)n[i][a]=!0}(i,a,u.rowspan(),u.colspan()),[Ot(r.element(),u.rowspan(),u.colspan(),r.isNew())]}return[]}));return It(a,r.section())}))},Fo=function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],a=0;a<e.grid().columns();a++){var u=sn(e,o,a).map((function(e){return Dt(e.element(),n)})).getOrThunk((function(){return Dt(t.gap(),!0)}));i.push(u)}var s=Bt(i,e.all()[o].section());r.push(s)}return r},zo=function(e,t){return function(e,t){return R(e,(function(e){var n,r=(n=e.details(),ro(n,(function(e){return ft(e.element()).map((function(e){var t=ft(e).isNone();return Dt(e,t)}))})).getOrThunk((function(){return Dt(t.row(),!0)})));return Mt(r.element(),e.details(),e.section(),r.isNew())}))}(Ho(e,ut),t)},Wo=function(e,t){var n=I(R(e.all(),(function(e){return e.cells()})));return M(n,(function(e){return ut(t,e.element())}))},Uo=function(e,t,n,r,i){return function(a,u,s,c,l){var f=rn(u),d=un(f);return t(d,s).map((function(t){var n=Fo(d,c,!1),r=e(n,t,ut,i(c)),a=zo(r.grid(),c);return{grid:o(a),cursor:r.cursor}})).fold((function(){return v.none()}),(function(e){var t=function(e,t){var n=[],r=[],i=function(t,o){0<t.length?function(t,o){var i=qt(e,o).getOrThunk((function(){var t=xe.fromTag(o,lt(e).dom());return xt(e,t),t}));Tt(i);var a=R(t,(function(e){e.isNew()&&n.push(e.element());var t=e.element();return Tt(t),O(e.cells(),(function(e){e.isNew()&&r.push(e.element()),oo(e.element(),"colspan",e.colspan(),1),oo(e.element(),"rowspan",e.rowspan(),1),xt(t,e.element())})),t}));kt(i,a)}(t,o):qt(e,o).each(St)},a=[],u=[],s=[];return O(t,(function(e){switch(e.section()){case"thead":a.push(e);break;case"tbody":u.push(e);break;case"tfoot":s.push(e)}})),i(a,"thead"),i(u,"tbody"),i(s,"tfoot"),{newRows:o(n),newCells:o(r)}}(u,e.grid());return n(u,e.grid(),l),r(u),To(a,u,Jr.height,l),v.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},jo=function(e,t){return Qt(t.element()).bind((function(t){return Wo(e,t)}))},Vo=function(e,t){var n=R(t.selection(),(function(t){return Qt(t).bind((function(t){return Wo(e,t)}))})),r=no(n);return 0<r.length?v.some({cells:r,generators:t.generators,clipboard:t.clipboard}):v.none()},$o=function(e,t){var n=R(t.selection(),(function(t){return Qt(t).bind((function(t){return Wo(e,t)}))})),r=no(n);return 0<r.length?v.some(r):v.none()},qo=function(e){return{is:function(t){return e===t},isValue:m,isError:d,getOr:o(e),getOrThunk:o(e),getOrDie:o(e),or:function(t){return qo(e)},orThunk:function(t){return qo(e)},fold:function(t,n){return n(e)},map:function(t){return qo(t(e))},mapError:function(t){return qo(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return v.some(e)}}},Yo=function(e){return{is:d,isValue:d,isError:m,getOr:i,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return Yo(e)},mapError:function(t){return Yo(t(e))},each:n,bind:function(t){return Yo(e)},exists:d,forall:m,toOption:v.none}},Xo={value:qo,error:Yo,fromOption:function(e,t){return e.fold((function(){return Yo(t)}),qo)}},Go=function(e,t){return R(e,(function(){return Dt(t.cell(),!0)}))},Ko=function(e,t,n){return e.concat(function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}(t,(function(t){return Ao(e[e.length-1],Go(e[e.length-1].cells(),n))})))},Jo=function(e,t,n){return R(e,(function(e){return Ao(e,e.cells().concat(Go(co(0,t),n)))}))},Zo=function(e,t){var n=Io(e[0]),r=Io(t[0]);return{rowDelta:o(0),colDelta:o(n-r)}},Qo=function(e,t,n){var r=t.colDelta()<0?Jo:i;return(t.rowDelta()<0?Ko:i)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},ei=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var a=0;a<Io(e[0]);a++){var u=n(Mo(e[i],a),t);!0===u&&!1===o?Po(e[i],a,Dt(r(),!0)):!0===u&&(o=!1)}return e},ti=function(e,t,n,r,i){return function(e,t,n){if(e.row()>=t.length||e.column()>Io(t[0]))return Xo.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),i=r[0].cells().slice(e.column()),a=Io(n[0]),u=n.length;return Xo.value({rowDelta:o(r.length-u),colDelta:o(i.length-a)})}(e,t,n).map((function(o){var u=Qo(t,o,r);return function(e,t,n,r,o){for(var i,u,s,c,l,f=e.row(),d=e.column(),m=f+n.length,h=d+Io(n[0]),g=f;g<m;g++)for(var p=d;p<h;p++){s=p,l=c=void 0,c=a(o,Do((i=t)[u=g],s).element()),l=i[u],1<i.length&&1<Io(l)&&(0<s&&c(Mo(l,s-1))||s<l.cells().length-1&&c(Mo(l,s+1))||0<u&&c(Mo(i[u-1],s))||u<i.length-1&&c(Mo(i[u+1],s)))&&ei(t,Mo(t[g],p),o,r.cell);var v=Mo(n[g-f],p-d),b=r.replace(v);Po(t[g],p,Dt(b,!0))}return t}(e,u,n,r,i)}))},ni=function(e,t,n,r,o){!function(e,t,n,r){if(0<t&&t<e.length){var o=e[t-1].cells(),i=(a=n,D(o,(function(e,t){return N(e,(function(e){return a(e.element(),t.element())}))?e:e.concat([t])}),[]));O(i,(function(o){for(var i=v.none(),a=function(t){for(var a=function(a){var u=e[t].cells()[a];n(u.element(),o.element())&&(i.isNone()&&(i=v.some(r())),i.each((function(n){Po(e[t],a,Dt(n,!0))})))},u=0;u<Io(e[0]);u++)a(u)},u=t;u<e.length;u++)a(u)}))}var a}(t,e,o,r.cell);var i=Zo(n,t),a=Qo(n,i,r),u=Zo(t,a),s=Qo(t,u,r);return s.slice(0,e).concat(a).concat(s.slice(e,s.length))},ri=function(e,t,n,r,o){var i=e.slice(0,t),a=e.slice(t),u=Bo(e[n],(function(n,i){return 0<t&&t<e.length&&r(Mo(e[t-1],i),Mo(e[t],i))?Do(e[t],i):Dt(o(n.element(),r),!0)}));return i.concat([u]).concat(a)},oi=function(e,t,n,r,o){return R(e,(function(e){var i=0<t&&t<Io(e)&&r(Mo(e,t-1),Mo(e,t))?Do(e,t):Dt(o(Mo(e,n),r),!0);return Oo(e,t,i)}))},ii=function(e,t,n,r){return R(e,(function(e){return Bo(e,(function(e){return o=e,N(t,(function(e){return n(o.element(),e.element())}))?Dt(r(e.element(),n),!0):e;var o}))}))},ai=function(e,t,n,r){return void 0!==Mo(e[t],n)&&0<t&&r(Mo(e[t-1],n),Mo(e[t],n))},ui=function(e,t,n){return 0<t&&n(Mo(e,t-1),Mo(e,t))},si=function(e,t,n,r){var o=L(e,(function(r,o){return ai(e,o,t,n)||ui(r,t,n)?[]:[Do(r,t)]}));return ii(e,o,n,r)},ci=function(e,t,n,r){var o=e[t],i=L(o.cells(),(function(r,i){return ai(e,t,i,n)||ui(o,i,n)?[]:[r]}));return ii(e,i,n,r)},li=sr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),fi=to({},li),di=function(e,t){return me(e,t)&&1<parseInt(de(e,t),10)},mi={hasColspan:function(e){return di(e,"colspan")},hasRowspan:function(e){return di(e,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(e,t){return parseInt(_e(e,t),10)}},hi=function(e,t,n){return Re(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))},gi=function(e,t){return hi(e,"width",(function(e){return Mr.getPixelWidth(e,t)}))},pi=function(e){return hi(e,"height",Mr.getHeight)},vi=function(e,t,n,r,o){var i=mo(e),a=R(i,(function(e){return e.map(t.edge)}));return R(i,(function(e,t){return e.filter(f(mi.hasColspan)).fold((function(){var e=lo(a,t);return r(e)}),(function(e){return n(e,o)}))}))},bi=function(e){return e.map((function(e){return e+"px"})).getOr("")},yi=function(e,t,n,r){var o=ho(e),i=R(o,(function(e){return e.map(t.edge)}));return R(o,(function(e,t){return e.filter(f(mi.hasRowspan)).fold((function(){var e=lo(i,t);return r(e)}),(function(e){return n(e)}))}))},xi={getRawWidths:function(e,t,n){return vi(e,t,gi,bi,n)},getPixelWidths:function(e,t,n){return vi(e,t,Mr.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(e,t,n){return vi(e,t,Mr.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)},getPixelHeights:function(e,t){return yi(e,t,Mr.getHeight,(function(e){return e.getOrThunk(mi.minHeight)}))},getRawHeights:function(e,t){return yi(e,t,pi,bi)}},wi=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},Ci=function(e,t){var n=fn(e);return R(n,(function(e){var n=wi(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:o(n),colspan:e.colspan}}))},ki=function(e){var t=i;return{width:o(e),pixelWidth:o(e),getWidths:xi.getPixelWidths,getCellDelta:t,singleColumnWidth:function(e,t){return[Math.max(mi.minWidth(),e+t)-e]},minCellWidth:mi.minWidth,setElementWidth:Mr.setPixelWidth,setTableWidth:function(e,t,n){var r=P(t,(function(e,t){return e+t}),0);Mr.setPixelWidth(e,r)}}},Ti=function(e){return Mr.getRawWidth(e).fold((function(){var t=kr(e);return ki(t)}),(function(t){return function(e,t){var n,r,i,a,u=Mr.percentageBasedSizeRegex().exec(t);if(null!==u)return n=u[1],r=e,i=parseFloat(n),a=kr(r),{width:o(i),pixelWidth:o(a),getWidths:xi.getPercentageWidths,getCellDelta:function(e){return e/a*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return mi.minWidth()/a*100},setElementWidth:Mr.setPercentageWidth,setTableWidth:function(e,t,n){var r=n/100*i;Mr.setPercentageWidth(e,i+r)}};var s=Mr.pixelBasedSizeRegex().exec(t);if(null!==s){var c=parseInt(s[1],10);return ki(c)}var l=kr(e);return ki(l)}(e,t)}))},Si=function(e){return un(e)},Ei=function(e){var t=rn(e);return Si(t)},_i=function(e,t,n,r){var i=Ti(e),a=i.getCellDelta(t),u=Ei(e),s=i.getWidths(u,r,i),c=function(e,t,n,r){var i,a,u=e.slice(0),s=(a=t,0===(i=e).length?fi.none():1===i.length?fi.only(0):0===a?fi.left(0,1):a===i.length-1?fi.right(a-1,a):0<a&&a<i.length-1?fi.middle(a-1,a,a+1):fi.none()),c=function(e){return R(e,o(0))},l=o(c(u)),f=function(e,t){if(0<=n){var o=Math.max(r.minCellWidth(),u[t]-n);return c(u.slice(0,e)).concat([n,o-u[t]]).concat(c(u.slice(t+1)))}var i=Math.max(r.minCellWidth(),u[e]+n),a=u[e]-i;return c(u.slice(0,e)).concat([i-u[e],a]).concat(c(u.slice(t+1)))},d=f;return s.fold(l,(function(e){return r.singleColumnWidth(u[e],n)}),d,(function(e,t,n){return f(t,n)}),(function(e,t){if(0<=n)return c(u.slice(0,t)).concat([n]);var o=Math.max(r.minCellWidth(),u[t]+n);return c(u.slice(0,t)).concat([o-u[t]])}))}(s,n,a,i),l=R(c,(function(e,t){return e+s[t]})),f=Ci(u,l);O(f,(function(e){i.setElementWidth(e.element(),e.width())})),n===u.grid().columns()-1&&i.setTableWidth(e,l,a)},Ni=function(e,t,n,r){var i=Ei(e),a=xi.getPixelHeights(i,r),u=R(a,(function(e,r){return n===r?Math.max(t+e,mi.minHeight()):e})),s=function(e,t){var n=fn(e);return R(n,(function(e){var n=wi(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:o(n),rowspan:e.rowspan}}))}(i,u),c=function(e,t){return R(e.all(),(function(e,n){return{element:e.element,height:o(t[n])}}))}(i,u);O(c,(function(e){Mr.setHeight(e.element(),e.height())})),O(s,(function(e){Mr.setHeight(e.element(),e.height())}));var l=P(u,(function(e,t){return e+t}),0);Mr.setHeight(e,l)},Ri=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ri(n())}}},Oi=function(e,t){var n=A(t,(function(t){return!_(e,t)}));0<n.length&&Y(n)},Ai=function(e){return function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return X("required",t),G(t),function(r){var o=z(r);H(t,(function(e){return _(o,e)}))||q(t,o),e(t,o);var i=A(t,(function(e){return!n.validate(r[e],e)}));return 0<i.length&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+$(e).join(", ")+") were not.")}(i,n.label),r}}(Oi,e,{validate:C,label:"function"})},Pi=Ai(["cell","row","replace","gap"]),Di=function(e){var t=me(e,"colspan")?parseInt(de(e,"colspan"),10):1,n=me(e,"rowspan")?parseInt(de(e,"rowspan"),10):1;return{element:o(e),colspan:o(t),rowspan:o(n)}},Mi=function(e,t){void 0===t&&(t=Di),Pi(e);var n=Ri(v.none()),r=function(r){var i=function(n){var r;return r=t(n),e.cell(r)}(r);return n.get().isNone()&&n.set(v.some(i)),o=v.some({item:r,replacement:i}),i},o=v.none();return{getOrInit:function(e,t){return o.fold((function(){return r(e)}),(function(n){return t(e,n.item)?n.replacement:r(e)}))},cursor:n.get}},Bi=function(e,t){return function(n){var r=Ri(v.none());Pi(n);var o=[],i=function(i){var a={scope:e},u=n.replace(i,t,a);return o.push({item:i,sub:u}),r.get().isNone()&&r.set(v.some(u)),u};return{replaceOrInit:function(e,t){return(n=e,r=t,M(o,(function(e){return r(e.item,n)}))).fold((function(){return i(e)}),(function(n){return t(e,n.item)?n.sub:i(e)}));var n,r},cursor:r.get}}},Ii=function(e){Pi(e);var t=Ri(v.none());return{combine:function(n){return t.get().isNone()&&t.set(v.some(n)),function(){var t=e.cell({element:o(n),colspan:o(1),rowspan:o(1)});return Oe(t,"width"),Oe(n,"width"),t}},cursor:t.get}},Li=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hi=function(e,t){var n=e.property().name(t);return _(Li,n)},Fi=function(e,t){return _(["br","img","hr","input"],e.property().name(t))},zi=$n(),Wi=function(e){return Hi(zi,e)},Ui=function(e){return function(e,t){var n=e.property().name(t);return _(["ol","ul"],n)}(zi,e)},ji=function(e){var t,n=function(e){return"br"===re(e)},r=function(e){return Cn(e).bind((function(t){var r=ht(t).map((function(e){return!!Wi(e)||!!function(e){return Fi(zi,e)}(e)&&"img"!==re(e)})).getOr(!1);return ft(t).map((function(o){return!0===r||"li"===re(i=o)||Vt(i,Ui).isSome()||n(t)||Wi(o)&&!ut(e,o)?[]:[xe.fromTag("br")];var i}))})).getOr([])},o=0===(t=L(e,(function(e){var t=gt(e);return H(t,(function(e){return n(e)||se(e)&&0===gn(e).trim().length}))?[]:t.concat(r(e))}))).length?[xe.fromTag("br")]:t;Tt(e[0]),kt(e[0],o)},Vi=function(e){0===en(e).length&&St(e)},$i=V("grid","cursor"),qi=function(e,t,n){return Yi(e,t,n).orThunk((function(){return Yi(e,0,0)}))},Yi=function(e,t,n){return v.from(e[t]).bind((function(e){return v.from(e.cells()[n]).bind((function(e){return v.from(e.element())}))}))},Xi=function(e,t,n){return $i(e,Yi(e,t,n))},Gi=function(e){return D(e,(function(e,t){return N(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))},Ki=function(e){return D(e,(function(e,t){return N(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))},Ji=function(e,t,n){var r=function(e,t){return R(e,(function(e){var n=R(en(e),(function(e){var t=me(e,"rowspan")?parseInt(de(e,"rowspan"),10):1,n=me(e,"colspan")?parseInt(de(e,"colspan"),10):1;return Rt(e,t,n)}));return Pt(e,n,t.section())}))}(e,n),o=un(r);return Fo(o,t,!0)},Zi=function(e,t,n){var r=Ti(e),o=Si(t),i=r.getWidths(o,n,r),a=Ci(o,i);O(a,(function(e){r.setElementWidth(e.element(),e.width())})),0<a.length&&r.setTableWidth(e,i,r.getCellDelta(0))},Qi={insertRowBefore:Uo((function(e,t,n,r){var o=t.row(),i=t.row(),a=ri(e,i,o,n,r.getOrInit);return Xi(a,i,t.column())}),jo,n,n,Mi),insertRowsBefore:Uo((function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=Gi(t),u=D(a,(function(e,t){return ri(e,i,o,n,r.getOrInit)}),e);return Xi(u,i,t[0].column())}),$o,n,n,Mi),insertRowAfter:Uo((function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=ri(e,i,o,n,r.getOrInit);return Xi(a,i,t.column())}),jo,n,n,Mi),insertRowsAfter:Uo((function(e,t,n,r){var o=Gi(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),u=D(o,(function(e,t){return ri(e,a,i,n,r.getOrInit)}),e);return Xi(u,a,t[0].column())}),$o,n,n,Mi),insertColumnBefore:Uo((function(e,t,n,r){var o=t.column(),i=t.column(),a=oi(e,i,o,n,r.getOrInit);return Xi(a,t.row(),i)}),jo,Zi,n,Mi),insertColumnsBefore:Uo((function(e,t,n,r){var o=Ki(t),i=o[0].column(),a=o[0].column(),u=D(o,(function(e,t){return oi(e,a,i,n,r.getOrInit)}),e);return Xi(u,t[0].row(),a)}),$o,Zi,n,Mi),insertColumnAfter:Uo((function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=oi(e,i,o,n,r.getOrInit);return Xi(a,t.row(),i)}),jo,Zi,n,Mi),insertColumnsAfter:Uo((function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=Ki(t),u=D(a,(function(e,t){return oi(e,i,o,n,r.getOrInit)}),e);return Xi(u,t[0].row(),i)}),$o,Zi,n,Mi),splitCellIntoColumns:Uo((function(e,t,n,r){var o=function(e,t,n,r,o){var i=n+1;return R(e,(function(e,a){var u=a===t?Dt(o(Mo(e,n),r),!0):Do(e,n);return Oo(e,i,u)}))}(e,t.row(),t.column(),n,r.getOrInit);return Xi(o,t.row(),t.column())}),jo,Zi,n,Mi),splitCellIntoRows:Uo((function(e,t,n,r){var o=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),u=e.slice(i),s=Bo(e[t],(function(e,t){return t===n?Dt(o(e.element(),r),!0):e}));return a.concat([s]).concat(u)}(e,t.row(),t.column(),n,r.getOrInit);return Xi(o,t.row(),t.column())}),jo,n,n,Mi),eraseColumns:Uo((function(e,t,n,r){var o=Ki(t),i=function(e,t,n){var r=R(e,(function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Bt(r,e.section())}));return A(r,(function(e){return 0<e.cells().length}))}(e,o[0].column(),o[o.length-1].column()),a=qi(i,t[0].row(),t[0].column());return $i(i,a)}),$o,Zi,Vi,Mi),eraseRows:Uo((function(e,t,n,r){var o=Gi(t),i=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))}(e,o[0].row(),o[o.length-1].row()),a=qi(i,t[0].row(),t[0].column());return $i(i,a)}),$o,n,Vi,Mi),makeColumnHeader:Uo((function(e,t,n,r){var o=si(e,t.column(),n,r.replaceOrInit);return Xi(o,t.row(),t.column())}),jo,n,n,Bi("row","th")),unmakeColumnHeader:Uo((function(e,t,n,r){var o=si(e,t.column(),n,r.replaceOrInit);return Xi(o,t.row(),t.column())}),jo,n,n,Bi(null,"td")),makeRowHeader:Uo((function(e,t,n,r){var o=ci(e,t.row(),n,r.replaceOrInit);return Xi(o,t.row(),t.column())}),jo,n,n,Bi("col","th")),unmakeRowHeader:Uo((function(e,t,n,r){var o=ci(e,t.row(),n,r.replaceOrInit);return Xi(o,t.row(),t.column())}),jo,n,n,Bi(null,"td")),mergeCells:Uo((function(e,t,n,r){var i=t.cells();ji(i);var a=function(e,t,n,r){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)Po(e[o],i,Dt(r(),!1));return e}(e,t.bounds(),0,o(i[0]));return $i(a,v.from(i[0]))}),(function(e,t){return t.mergable()}),n,n,Ii),unmergeCells:Uo((function(e,t,n,r){var o=P(t,(function(e,t){return ei(e,t,n,r.combine(t))}),e);return $i(o,v.from(t[0]))}),(function(e,t){return t.unmergable()}),Zi,n,Ii),pasteCells:Uo((function(e,t,n,r){var o,i,a,u,s=(o=t.clipboard(),i=t.generators(),a=rn(o),u=un(a),Fo(u,i,!0)),c=Nt(t.row(),t.column());return ti(c,e,s,t.generators(),n).fold((function(){return $i(e,v.some(t.element()))}),(function(e){var n=qi(e,t.row(),t.column());return $i(e,n)}))}),(function(e,t){return Qt(t.element()).bind((function(n){return Wo(e,n).map((function(e){return to(to({},e),{generators:t.generators,clipboard:t.clipboard})}))}))}),Zi,n,Mi),pasteRowsBefore:Uo((function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=Ji(t.clipboard(),t.generators(),o),u=ni(i,e,a,t.generators(),n),s=qi(u,t.cells[0].row(),t.cells[0].column());return $i(u,s)}),Vo,n,n,Mi),pasteRowsAfter:Uo((function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=Ji(t.clipboard(),t.generators(),o),u=ni(i,e,a,t.generators(),n),s=qi(u,t.cells[0].row(),t.cells[0].column());return $i(u,s)}),Vo,n,n,Mi)},ea=function(e){return xe.fromDom(e.getBody())},ta=function(e){return e.getBoundingClientRect().width},na=function(e){return e.getBoundingClientRect().height},ra=function(e){return function(t){return ut(t,ea(e))}},oa=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},ia=function(e){var t=zt(e,"td[data-mce-style],th[data-mce-style]");he(e,"data-mce-style"),O(t,(function(e){he(e,"data-mce-style")}))},aa={isRtl:o(!1)},ua={isRtl:o(!0)},sa=function(e){return"rtl"==("rtl"===_e(e,"direction")?"rtl":"ltr")?ua:aa},ca=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],la={"border-collapse":"collapse",width:"100%"},fa={border:"1"},da=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},ma=function(e){return e.getParam("table_row_advtab",!0,"boolean")},ha=function(e){return e.getParam("table_advtab",!0,"boolean")},ga=function(e){return e.getParam("table_style_by_css",!1,"boolean")},pa=function(e){return e.getParam("table_cell_class_list",[],"array")},va=function(e){return e.getParam("table_row_class_list",[],"array")},ba=function(e){return e.getParam("table_class_list",[],"array")},ya=function(e){return!1===e.getParam("table_responsive_width")},xa=function(e,t){return e.fire("newrow",{node:t})},wa=function(e,t){return e.fire("newcell",{node:t})},Ca=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},ka=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},Ta=function(e,t){var r,o=function(e){return"table"===re(ea(e))},i=(r=e.getParam("table_clone_elements"),y(r)?v.some(r.split(/[ ,]/)):Array.isArray(r)?v.some(r):v.none()),a=function(t,n,r,o){return function(a,u){ia(a);var s=o(),c=xe.fromDom(e.getDoc()),l=Qr(sa),f=An(r,c,i);return n(a)?t(s,a,u,f,l).bind((function(t){return O(t.newRows(),(function(t){xa(e,t.dom())})),O(t.newCells(),(function(t){wa(e,t.dom())})),t.cursor().map((function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n}))})):v.none()}};return{deleteRow:a(Qi.eraseRows,(function(t){var n=eo(t);return!1===o(e)||1<n.rows()}),n,t),deleteColumn:a(Qi.eraseColumns,(function(t){var n=eo(t);return!1===o(e)||1<n.columns()}),n,t),insertRowsBefore:a(Qi.insertRowsBefore,m,n,t),insertRowsAfter:a(Qi.insertRowsAfter,m,n,t),insertColumnsBefore:a(Qi.insertColumnsBefore,m,Br,t),insertColumnsAfter:a(Qi.insertColumnsAfter,m,Br,t),mergeCells:a(Qi.mergeCells,m,n,t),unmergeCells:a(Qi.unmergeCells,m,n,t),pasteRowsBefore:a(Qi.pasteRowsBefore,m,n,t),pasteRowsAfter:a(Qi.pasteRowsAfter,m,n,t),pasteCells:a(Qi.pasteCells,m,n,t)}},Sa=function(e,t,n){var r=rn(e),o=un(r);return $o(o,t).map((function(e){var t=Fo(o,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());return function(e){return R(e,(function(e){var t=Sn(e.element());return O(e.cells(),(function(e){var n=En(e.element());oo(n,"colspan",e.colspan(),1),oo(n,"rowspan",e.rowspan(),1),xt(t,n)})),t}))}(zo(t,n))}))},Ea=tinymce.util.Tools.resolve("tinymce.util.Tools"),_a=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},Na=function(e,t){Ea.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},Ra=function(e,t,n){var r;return function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if(void 0===t&&(t=i),t!==i)return""}return t}(r,e.select("td,th",t))},Oa=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?oa(o.width):"",i.height=o.height?oa(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},Aa=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},Pa=function(e){var t=function(){var t=e.getParam("color_picker_callback");if(t)return function(n){return t.call(e,(function(e){n.control.value(e).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(Oa,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(Aa,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(Oa,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},Da=function(e,t,n){var r=function(e,n){return n=n||[],Ea.each(e,(function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t&&t(o)),n.push(o)})),n};return r(e,n||[])},Ma=Oa,Ba=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},Ia=function(t,n){n.control.rootControl.find("#style")[0].getEl().isEqualNode(e.document.activeElement)?Aa(t,n):Oa(t,n)},La=function(e,t,n){var r,o=e.dom;function i(e,n,r){(1===t.length||r)&&o.setAttrib(e,n,r)}function a(e,n,r){(1===t.length||r)&&o.setStyle(e,n,r)}da(e)&&Ia(e,n),r=n.control.rootControl.toJSON(),e.undoManager.transact((function(){Ea.each(t,(function(n){var u,s;i(n,"scope",r.scope),1===t.length?i(n,"style",r.style):(u=n,s=r.style,delete u.dataset.mceStyle,u.style.cssText+=";"+s),i(n,"class",r.class),a(n,"width",oa(r.width)),a(n,"height",oa(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=o.rename(n,r.type)),1===t.length&&(Na(e,n),function(e,t){Ea.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))}(e,n)),r.align&&_a(e,n,r.align),r.valign&&function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)}(e,n,r.valign)})),e.focus()}))},Ha=function(e){var t,n,r,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){var i,u,s,c;1<o.length?n={width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:(u=t,s=(i=e).dom,c={width:s.getStyle(u,"width")||s.getAttrib(u,"width"),height:s.getStyle(u,"height")||s.getAttrib(u,"height"),scope:s.getAttrib(u,"scope"),class:s.getAttrib(u,"class"),type:u.nodeName.toLowerCase(),style:"",align:"",valign:""},Ea.each("left center right".split(" "),(function(e){i.formatter.matchNode(u,"align"+e)&&(c.align=e)})),Ea.each("top middle bottom".split(" "),(function(e){i.formatter.matchNode(u,"valign"+e)&&(c.valign=e)})),da(i)&&Ea.extend(c,Ba(s,u)),n=c),0<pa(e).length&&(r={name:"class",type:"listbox",label:"Class",values:Da(pa(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})}))});var l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(Ma,e)},{label:"Height",name:"height",onchange:a(Ma,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};da(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:l},Pa(e)],onsubmit:a(La,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:l,onsubmit:a(La,e,o)})}};function Fa(e,t,n,r){var o=e.dom;function i(e,n,r){(1===t.length||r)&&o.setAttrib(e,n,r)}ma(e)&&Ia(e,r);var a=r.control.rootControl.toJSON();e.undoManager.transact((function(){Ea.each(t,(function(r){var u,s,c,l,f,d,m,h;i(r,"scope",a.scope),i(r,"style",a.style),i(r,"class",a.class),u=r,s=oa(a.height),(1===t.length||s)&&o.setStyle(u,"height",s),a.type!==r.parentNode.nodeName.toLowerCase()&&(c=e.dom,l=r,f=a.type,d=c.getParent(l,"table"),m=l.parentNode,(h=c.select(f,d)[0])||(h=c.create(f),d.firstChild?"CAPTION"===d.firstChild.nodeName?c.insertAfter(h,d.firstChild):d.insertBefore(h,d.firstChild):d.appendChild(h)),h.appendChild(l),m.hasChildNodes()||c.remove(m)),a.align!==n.align&&(Na(e,r),_a(e,r,a.align))})),e.focus()}))}var za=function(e){var t,n,r,o,i,u,s,c,l,f,d=e.dom,m=[];t=d.getParent(e.selection.getStart(),"table"),n=d.getParent(e.selection.getStart(),"td,th"),Ea.each(t.rows,(function(e){Ea.each(e.cells,(function(t){if(d.getAttrib(t,"data-mce-selected")||t===n)return m.push(e),!1}))})),(r=m[0])&&(1<m.length?i={height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:(c=r,l=(s=e).dom,f={height:l.getStyle(c,"height")||l.getAttrib(c,"height"),scope:l.getAttrib(c,"scope"),class:l.getAttrib(c,"class"),align:"",style:"",type:c.parentNode.nodeName.toLowerCase()},Ea.each("left center right".split(" "),(function(e){s.formatter.matchNode(c,"align"+e)&&(f.align=e)})),ma(s)&&Ea.extend(f,Ba(l,c)),i=f),0<va(e).length&&(o={name:"class",type:"listbox",label:"Class",values:Da(va(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}))}),u={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},ma(e)?e.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},Pa(e)],onsubmit:a(Fa,e,m,i)}):e.windowManager.open({title:"Row properties",data:i,body:u,onsubmit:a(Fa,e,m,i)}))},Wa=tinymce.util.Tools.resolve("tinymce.Env"),Ua={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ja=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Va=function(e,t,n){var r,o,i=e.getParam("table_default_styles",la,"object"),u=function(e,t,n,r,o){void 0===o&&(o=Ua);var i=xe.fromTag("table");Ee(i,o.styles),fe(i,o.attributes);var a=xe.fromTag("tbody");xt(i,a);for(var u=[],s=0;s<e;s++){for(var c=xe.fromTag("tr"),l=0;l<t;l++){var f=xe.fromTag(s<n||l<r?"th":"td");l<r&&le(f,"scope","row"),s<n&&le(f,"scope","col"),xt(f,xe.fromTag("br")),o.percentages&&Se(f,"width",100/t+"%"),xt(c,f)}u.push(c)}return kt(a,u),i}(n,t,0,0,{styles:i,attributes:(o=e,o.getParam("table_default_attributes",fa,"object")),percentages:(r=i.width,y(r)&&-1!==r.indexOf("%")&&!ya(e))});le(u,"data-mce-id","__mce");var s,c,l,f=(s=u,c=xe.fromTag("div"),l=xe.fromDom(s.dom().cloneNode(!0)),xt(c,l),c.dom().innerHTML);return e.insertContent(f),Yt(ea(e),'table[data-mce-id="__mce"]').map((function(t){var n,r;return ya(e)&&Se(t,"width",_e(t,"width")),he(t,"data-mce-id"),n=e,O(zt(t,"tr"),(function(e){xa(n,e.dom()),O(zt(e,"th,td"),(function(e){wa(n,e.dom())}))})),r=e,Yt(t,"td,th").each(a(ja,r)),t.dom()})).getOr(null)};function $a(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)$a(e,t.children[o],n,r)}var qa,Ya=function(e,t,n){var r,o,i=e.dom;ha(e)&&Ia(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact((function(){t||(t=Va(e,o.cols||1,o.rows||1)),function(e,t,n){var r,o=e.dom,i={},a={};if(i.class=n.class,a.height=oa(n.height),o.getAttrib(t,"width")&&!ga(e)?i.width=(r=n.width)?r.replace(/px$/,""):"":a.width=oa(n.width),ga(e)?(a["border-width"]=oa(n.border),a["border-spacing"]=oa(n.cellspacing),Ea.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):Ea.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ga(e)&&t.children)for(var u=0;u<t.children.length;u++)$a(o,t.children[u],{"border-width":oa(n.border),"border-color":n.borderColor,padding:oa(n.cellpadding)});n.style?Ea.extend(a,o.parseStyle(n.style)):a=Ea.extend({},o.parseStyle(o.getAttrib(t,"style")),a),i.style=o.serializeStyle(a),o.setAttribs(t,i)}(e,t,o),(r=i.select("caption",t)[0])&&!o.caption&&i.remove(r),!r&&o.caption&&((r=i.create("caption")).innerHTML=Wa.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),Na(e,t),o.align&&_a(e,t,o.align),e.focus(),e.addVisual()}))},Xa=function(e,t){var n,r,o,i,u,s,c,l,f,d,m=e.dom,h={};!0===t?(n=m.getParent(e.selection.getStart(),"table"))&&(c=n,l=(s=e).dom,f={width:l.getStyle(c,"width")||l.getAttrib(c,"width"),height:l.getStyle(c,"height")||l.getAttrib(c,"height"),cellspacing:l.getStyle(c,"border-spacing")||l.getAttrib(c,"cellspacing"),cellpadding:l.getAttrib(c,"data-mce-cell-padding")||l.getAttrib(c,"cellpadding")||Ra(s.dom,c,"padding"),border:l.getAttrib(c,"data-mce-border")||l.getAttrib(c,"border")||Ra(s.dom,c,"border"),borderColor:l.getAttrib(c,"data-mce-border-color"),caption:!!l.select("caption",c)[0],class:l.getAttrib(c,"class")},Ea.each("left center right".split(" "),(function(e){s.formatter.matchNode(c,"align"+e)&&(f.align=e)})),ha(s)&&Ea.extend(f,Ba(l,c)),h=f):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),0<ba(e).length&&(h.class&&(h.class=h.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:Da(ba(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})}))}),u={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(d=e,d.getParam("table_appearance_options",!0,"boolean")?[r,o,{label:"Width",name:"width",onchange:a(Ma,e)},{label:"Height",name:"height",onchange:a(Ma,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:a(Ma,e)},{label:"Height",name:"height",onchange:a(Ma,e)}])},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},ha(e)?e.windowManager.open({title:"Table properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},Pa(e)],onsubmit:a(Ya,e,n)}):e.windowManager.open({title:"Table properties",data:h,body:u,onsubmit:a(Ya,e,n)})},Ga=Ea.each,Ka=function(e){var t=v.from(e.dom().documentElement).map(xe.fromDom).getOr(e);return{parent:o(t),view:o(e),origin:o(Lr(0,0))}},Ja=function(e){var t=V.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw new Error("Event bind error: undefined handler");n.push(e)},unbind:function(e){n=A(n,(function(t){return t!==e}))},trigger:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.apply(null,e);O(n,(function(e){e(o)}))}}},Za=function(e){return{registry:U(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:U(e,(function(e){return e.trigger}))}},Qa=function(e,t,n,i){return u=e,s=t,!1,c=function(e,t){return function(n){if(e(n)){var i,a,u,s,c,l,f,d=xe.fromDom(n.target),m=function(){n.stopPropagation()},h=function(){n.preventDefault()},g=r(h,m),p=(i=d,a=n.clientX,u=n.clientY,s=m,c=h,l=g,f=n,{target:o(i),x:o(a),y:o(u),stop:s,prevent:c,kill:l,raw:o(f)});t(p)}}}(n,i),u.dom().addEventListener(s,c,!1),{unbind:a(eu,u,s,c,!1)};var u,s,c},eu=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},tu=o(!0),nu=function(e,t,n){return Qa(e,t,tu,n)},ru=Object.prototype.hasOwnProperty,ou=(qa=function(e,t){return t},function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o=e[r];for(var i in o)ru.call(o,i)&&(n[i]=qa(n[i],o[i]))}return n}),iu={resolve:go("ephox-dragster").resolve},au=Ai(["compare","extract","mutate","sink"]),uu=Ai(["element","start","stop","destroy"]),su=Ai(["forceDrop","drop","move","delayDrop"]),cu=au({compare:function(e,t){return Lr(t.left()-e.left(),t.top()-e.top())},extract:function(e){return v.some(Lr(e.x(),e.y()))},sink:function(e,t){var n,r,o,i=(n=t,r=ou({layerClass:iu.resolve("blocker")},n),o=xe.fromTag("div"),le(o,"role","presentation"),Ee(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),uo(o,iu.resolve("blocker")),uo(o,r.layerClass),{element:function(){return o},destroy:function(){St(o)}}),a=nu(i.element(),"mousedown",e.forceDrop),u=nu(i.element(),"mouseup",e.drop),s=nu(i.element(),"mousemove",e.move),c=nu(i.element(),"mouseout",e.delayDrop);return uu({element:i.element,start:function(e){xt(e,i.element())},stop:function(){St(i.element())},destroy:function(){i.destroy(),u.unbind(),s.unbind(),c.unbind(),a.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function lu(){var e={onEvent:n,reset:n},t=function(){var e=v.none(),t=Za({move:Ja(["info"])});return{onEvent:function(n,r){r.extract(n).each((function(n){var o,i,a;(o=r,i=n,a=e.map((function(e){return o.compare(e,i)})),e=v.some(i),a).each((function(e){t.trigger.move(e)}))}))},reset:function(){e=v.none()},events:t.registry}}(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(e,t){r.onEvent(e,t)},events:t.events}}var fu=function(t,n){return void 0===n&&(n={}),function(t,n,r){var o,i,a=!1,u=Za({start:Ja([]),stop:Ja([])}),s=lu(),c=function(){d.stop(),s.isOn()&&(s.off(),u.trigger.stop())},l=(o=c,200,i=null,{cancel:function(){null!==i&&(e.clearTimeout(i),i=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null!==i&&e.clearTimeout(i),i=e.setTimeout((function(){o.apply(null,t),i=null}),200)}});s.events.move.bind((function(e){n.mutate(t,e.info())}));var f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a&&e.apply(null,t)}},d=n.sink(su({forceDrop:c,drop:f(c),move:f((function(e){l.cancel(),s.onEvent(e,n)})),delayDrop:f(l.throttle)}),r);return{element:d.element,go:function(e){d.start(e),s.on(),u.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){d.destroy()},events:u.registry}}(t,void 0!==n.mode?n.mode:cu,n)},du=function(e){return"true"===de(e,"contenteditable")},mu=po.resolve("resizer-bar-dragging"),hu=function(e,t,n){var r=function(){var e,t=Za({drag:Ja(["xDelta","yDelta","target"])}),n=v.none(),r={mutate:function(t,n){e.trigger.drag(t,n)},events:(e=Za({drag:Ja(["xDelta","yDelta"])})).registry};return r.events.drag.bind((function(e){n.each((function(n){t.trigger.drag(e.xDelta(),e.yDelta(),n)}))})),{assign:function(e){n=v.some(e)},get:function(){return n},mutate:r.mutate,events:t.registry}}(),o=fu(r,{}),i=v.none(),u=function(e,t){return v.from(de(e,t))};r.events.drag.bind((function(e){u(e.target(),"data-row").each((function(t){var n=mi.getInt(e.target(),"top");Se(e.target(),"top",n+e.yDelta()+"px")})),u(e.target(),"data-column").each((function(t){var n=mi.getInt(e.target(),"left");Se(e.target(),"left",n+e.xDelta()+"px")}))}));var s=function(e,t){return mi.getInt(e,t)-parseInt(de(e,"data-initial-"+t),10)};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){u(r,"data-row").each((function(e){var t=s(r,"top");he(r,"data-initial-top"),m.trigger.adjustHeight(o,t,parseInt(e,10))})),u(r,"data-column").each((function(e){var t=s(r,"left");he(r,"data-initial-left"),m.trigger.adjustWidth(o,t,parseInt(e,10))})),To(e,o,n,t)}))}))}));var c=function(t,n){m.trigger.startAdjust(),r.assign(t),le(t,"data-initial-"+n,parseInt(_e(t,n),10)),uo(t,mu),Se(t,"opacity","0.2"),o.go(e.parent())},l=nu(e.parent(),"mousedown",(function(e){(function(e){return so(e,bo)})(e.target())&&c(e.target(),"top"),function(e){return so(e,yo)}(e.target())&&c(e.target(),"left")})),f=function(t){return ut(t,e.view())},d=nu(e.view(),"mouseover",(function(r){(function(e){return Xt(e,"table",f).filter((function(e){return(t=e,n=f,Xt(t,"[contenteditable]",n)).exists(du);var t,n}))})(r.target()).fold((function(){we(r.target())&&_o(e)}),(function(r){i=v.some(r),To(e,r,n,t)}))})),m=Za({adjustHeight:Ja(["table","delta","row"]),adjustWidth:Ja(["table","delta","column"]),startAdjust:Ja([])});return{destroy:function(){l.unbind(),d.unbind(),o.destroy(),_o(e)},refresh:function(r){To(e,r,n,t)},on:o.on,off:o.off,hideBars:a(So,e),showBars:a(Eo,e),events:m.registry}},gu=function(e,t){return e.inline?function(e,t){return{parent:o(t),view:o(e),origin:o(Lr(0,0))}}(ea(e),(n=xe.fromTag("div"),Ee(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),xt(Ce(),n),n)):Ka(xe.fromDom(e.getDoc()));var n},pu=function(e){var t,n,r=v.none(),o=v.none(),i=v.none(),a=/(\d+(\.\d+)?)%/,u=function(e){return"TABLE"===e.nodeName};return e.on("init",(function(){var t,n=Qr(sa),a=gu(e);if(i=v.some(a),("table"===(t=e.getParam("object_resizing",!0))||t)&&e.getParam("table_resize_bars",!0,"boolean")){var u=function(e,t){var n=Jr.height,r=hu(e,t,n),o=Za({beforeResize:Ja(["table"]),afterResize:Ja(["table"]),startDrag:Ja([])});return r.events.adjustHeight.bind((function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Ni(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())})),r.events.startAdjust.bind((function(e){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());_i(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}(a,n);u.on(),u.events.startDrag.bind((function(t){r=v.some(e.selection.getRng())})),u.events.beforeResize.bind((function(t){var n=t.table().dom();Ca(e,n,ta(n),na(n))})),u.events.afterResize.bind((function(t){var n=t.table(),o=n.dom();ia(n),r.each((function(t){e.selection.setRng(t),e.focus()})),ka(e,o,ta(o),na(o)),e.undoManager.add()})),o=v.some(u)}})),e.on("ObjectResizeStart",(function(r){var o,i=r.target;u(i)&&(t=r.width,o=i,n=e.dom.getStyle(o,"width")||e.dom.getAttrib(o,"width"))})),e.on("ObjectResized",(function(r){var o=r.target;if(u(o)){var i=o;if(a.test(n)){var s=parseFloat(a.exec(n)[1]),c=r.width*s/t;e.dom.setStyle(i,"width",c+"%")}else{var l=[];Ea.each(i.rows,(function(t){Ea.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",!0);l.push({cell:t,width:n})}))})),Ea.each(l,(function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)}))}}})),{lazyResize:function(){return o},lazyWire:function(){return i.getOr(Ka(xe.fromDom(e.getBody())))},destroy:function(){o.each((function(e){e.destroy()})),i.each((function(t){!function(e,t){e.inline&&St(t.parent())}(e,t)}))}}},vu=sr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),bu=to(to({},vu),{none:function(e){return void 0===e&&(e=void 0),vu.none(e)}}),yu=function(e,t){return tn(e,t).bind((function(t){var n=en(t);return B(n,(function(t){return ut(e,t)})).map((function(e){return{index:o(e),all:o(n)}}))}))},xu={create:V("start","soffset","finish","foffset")},wu=sr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Cu={before:wu.before,on:wu.on,after:wu.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(i,i,i)}},ku=sr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tu={domRange:ku.domRange,relative:ku.relative,exact:ku.exact,exactFromRange:function(e){return ku.exact(e.start(),e.soffset(),e.finish(),e.foffset())},getWin:function(e){var t=e.match({domRange:function(e){return xe.fromDom(e.startContainer)},relative:function(e,t){return Cu.getStart(e)},exact:function(e,t,n,r){return e}});return xe.fromDom(t.dom().ownerDocument.defaultView)},range:xu.create},Su=function(e,t,n){var r,o,i=e.document.createRange();return r=i,t.fold((function(e){r.setStartBefore(e.dom())}),(function(e,t){r.setStart(e.dom(),t)}),(function(e){r.setStartAfter(e.dom())})),o=i,n.fold((function(e){o.setEndBefore(e.dom())}),(function(e,t){o.setEnd(e.dom(),t)}),(function(e){o.setEndAfter(e.dom())})),i},Eu=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},_u=function(e){return{left:o(e.left),top:o(e.top),right:o(e.right),bottom:o(e.bottom),width:o(e.width),height:o(e.height)}},Nu=sr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ru=function(e,t,n){return t(xe.fromDom(n.startContainer),n.startOffset,xe.fromDom(n.endContainer),n.endOffset)},Ou=function(e,t){var n,r,i,a=(n=e,t.match({domRange:function(e){return{ltr:o(e),rtl:v.none}},relative:function(e,t){return{ltr:be((function(){return Su(n,e,t)})),rtl:be((function(){return v.some(Su(n,t,e))}))}},exact:function(e,t,r,o){return{ltr:be((function(){return Eu(n,e,t,r,o)})),rtl:be((function(){return v.some(Eu(n,r,o,e,t))}))}}}));return(i=(r=a).ltr()).collapsed?r.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Nu.rtl(xe.fromDom(e.endContainer),e.endOffset,xe.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return Ru(0,Nu.ltr,i)})):Ru(0,Nu.ltr,i)},Au=function(e,t){return Ou(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})},Pu=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Du=function(e,t,n,r){return se(t)?function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects();return ro(i,(function(e){return Pu(e,n,r)?v.some(e):v.none()})).map((function(o){return function(e,t,n,r,o){var i=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=gn(t).length,u=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,a=1;a<o;a++){var u=e(a),s=Math.abs(t-u.left);if(n<=u.bottom){if(n<u.top||i<s)return a-1;i=s}}return 0}((function(e){return i(e).getBoundingClientRect()}),n,r,o.right,a);return i(u)}(e,t,n,r,o)}))}(e,t,n,r):(i=t,a=n,u=r,s=(o=e).dom().createRange(),c=gt(i),ro(c,(function(e){return s.selectNode(e.dom()),Pu(s.getBoundingClientRect(),a,u)?Du(o,e,a,u):v.none()})));var o,i,a,u,s,c},Mu=function(e,t){return t-e.left<e.right-t},Bu=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Iu=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var o=r.getBoundingClientRect(),i=Mu(o,n);return(!0===i?wn:Cn)(t).map((function(t){return Bu(e,t,i)}))},Lu=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=Mu(r,n);return v.some(Bu(e,t,o))},Hu=document.caretPositionFromPoint?function(e,t,n){return v.from(e.dom().caretPositionFromPoint(t,n)).bind((function(t){if(null===t.offsetNode)return v.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),v.some(n)}))}:document.caretRangeFromPoint?function(e,t,n){return v.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return xe.fromPoint(e,t,n).bind((function(r){var o=function(){return n=e,i=t,(0===gt(o=r).length?Lu:Iu)(n,o,i);var n,o,i};return 0===gt(r).length?o():function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect();return function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),u=Math.max(i.top,Math.min(i.bottom,r));return Du(e,t,a,u)}(e,t,Math.max(i.left,Math.min(i.right,n)),Math.max(i.top,Math.min(i.bottom,r)))}(e,r,t,n).orThunk(o)}))},Fu=function(e,t){var n=re(e);return"input"===n?Cu.after(e):_(["br","img"],n)?0===t?Cu.before(e):Cu.after(e):Cu.on(e,t)},zu=function(e,t){var n=e.fold(Cu.before,Fu,Cu.after),r=t.fold(Cu.before,Fu,Cu.after);return Tu.relative(n,r)},Wu=function(e,t,n,r){var o=Fu(e,t),i=Fu(n,r);return Tu.relative(o,i)},Uu=function(e,t){v.from(e.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(t)}))},ju=function(e,t,n,r,o){var i=Eu(e,t,n,r,o);Uu(e,i)},Vu=function(e,t){return Ou(e,t).match({ltr:function(t,n,r,o){ju(e,t,n,r,o)},rtl:function(t,n,r,o){var i,a,u,s,c,l=e.getSelection();if(l.setBaseAndExtent)l.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(l.extend)try{a=t,u=n,s=r,c=o,(i=l).collapse(a.dom(),u),i.extend(s.dom(),c)}catch(i){ju(e,r,o,t,n)}else ju(e,r,o,t,n)}})},$u=function(e){var t=xe.fromDom(e.anchorNode),n=xe.fromDom(e.focusNode);return function(e,t,n,r){var o,i,a,u,s,c=(i=t,a=n,u=r,(s=lt(o=e).dom().createRange()).setStart(o.dom(),i),s.setEnd(a.dom(),u),s),l=ut(e,n)&&t===r;return c.collapsed&&!l}(t,e.anchorOffset,n,e.focusOffset)?v.some(xu.create(t,e.anchorOffset,n,e.focusOffset)):function(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return v.some(xu.create(xe.fromDom(t.startContainer),t.startOffset,xe.fromDom(n.endContainer),n.endOffset))}return v.none()}(e)},qu=tinymce.util.Tools.resolve("tinymce.util.VK"),Yu=function(e,t,n,r){return Ku(e,t,function(e,t){return yu(e,t).fold((function(){return bu.none(e)}),(function(t){return t.index()+1<t.all().length?bu.middle(e,t.all()[t.index()+1]):bu.last(e)}))}(n),r)},Xu=function(e,t,n,r){return Ku(e,t,function(e,t){return yu(e,t).fold((function(){return bu.none()}),(function(t){return 0<=t.index()-1?bu.middle(e,t.all()[t.index()-1]):bu.first(e)}))}(n),r)},Gu=function(e,t){return function(e){var t=Tu.getWin(e).dom(),n=function(e,n,r,o){return Eu(t,e,n,r,o)},r=e.match({domRange:function(e){var t=xe.fromDom(e.startContainer),n=xe.fromDom(e.endContainer);return Wu(t,e.startOffset,n,e.endOffset)},relative:zu,exact:Wu});return Ou(t,r).match({ltr:n,rtl:n})}(Tu.exact(t,0,t,0))},Ku=function(e,t,n,r,o){return n.fold(v.none,v.none,(function(e,t){return wn(t).map((function(e){return Gu(0,e)}))}),(function(n){return tn(n,t).bind((function(t){var o=vr.noMenu(n);return e.undoManager.transact((function(){r.insertRowsAfter(t,o)})),function(e,t){var n;return(n=zt(t,"tr"),0===n.length?v.none():v.some(n[n.length-1])).bind((function(e){return Yt(e,"td,th").map((function(e){return Gu(0,e)}))}))}(0,t)}))}))},Ju=["table","li","dl"],Zu={create:V("selection","kill")},Qu=function(e,t,n,r){return{start:o(Cu.on(e,t)),finish:o(Cu.on(n,r))}},es=function(e,t){var n=Au(e,t);return xu.create(xe.fromDom(n.startContainer),n.startOffset,xe.fromDom(n.endContainer),n.endOffset)},ts=Qu,ns=function(e,t,n,r,o){return ut(n,r)?v.none():rr(n,r,t).bind((function(t){var r=t.boxes().getOr([]);return 0<r.length?(o(e,r,t.start(),t.finish()),v.some(Zu.create(v.some(ts(n,0,n,bn(n))),!0))):v.none()}))},rs=function(e,t,n,r,o,i,a){return ut(n,o)&&r===i?v.none():Xt(n,"td,th",t).bind((function(n){return Xt(o,"td,th",t).bind((function(r){return ns(e,t,n,r,a)}))}))},os=ns,is=function(e,t,n,r,i){return function(e,t,n,r,i){return(a=e,u=i,M(a,(function(e){return it(e,u)}))).bind((function(e){return Wn(e,t,n).bind((function(e){return n=r,$t(t=e,"table").bind((function(e){return Yt(e,n).bind((function(e){return nr(e,t).bind((function(e){return e.boxes().map((function(t){return{boxes:o(t),start:o(e.start()),finish:o(e.finish())}}))}))}))}));var t,n}))}));var a,u}(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map((function(e){return i.clear(n),i.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()}))},as=V("item","mode"),us=function(e,t,n,r){return void 0===r&&(r=ss),e.property().parent(t).map((function(e){return as(e,r)}))},ss=function(e,t,n,r){return void 0===r&&(r=cs),n.sibling(e,t).map((function(e){return as(e,r)}))},cs=function(e,t,n,r){void 0===r&&(r=cs);var o=e.property().children(t);return n.first(o).map((function(e){return as(e,r)}))},ls=[{current:us,next:ss,fallback:v.none()},{current:ss,next:cs,fallback:v.some(us)},{current:cs,next:cs,fallback:v.some(ss)}],fs=function(e,t,n,r,o){return void 0===o&&(o=ls),M(o,(function(e){return e.current===n})).bind((function(n){return n.current(e,t,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return fs(e,t,n,r)}))}))}))},ds=function(e,t,n,r,o,i){return fs(e,t,r,o).bind((function(t){return i(t.item())?v.none():n(t.item())?v.some(t.item()):ds(e,t.item(),n,t.mode(),o,i)}))},ms=function(e){return function(t){return 0===e.property().children(t).length}},hs=function(e,t,n,r){return ds(e,t,n,ss,{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return 0<e.length?v.some(e[e.length-1]):v.none()}},r)},gs=function(e,t,n,r){return ds(e,t,n,ss,{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return 0<e.length?v.some(e[0]):v.none()}},r)},ps=$n(),vs=function(e,t){return r=t,hs(n=ps,e,ms(n),r);var n,r},bs=function(e,t){return r=t,gs(n=ps,e,ms(n),r);var n,r},ys=V("element","offset"),xs=(V("element","deltaOffset"),V("element","start","finish"),V("begin","end"),V("element","text"),sr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),ws=function(e){return Xt(e,"tr")},Cs=to(to({},xs),{verify:function(e,t,n,r,o,i,a){return Xt(r,"td,th",a).bind((function(n){return Xt(t,"td,th",a).map((function(t){return ut(n,t)?ut(r,n)&&bn(n)===o?i(t):xs.none("in same cell"):Zn(ws,[n,t]).fold((function(){return o=t,a=n,u=(r=e).getRect(o),(s=r.getRect(a)).right>u.left&&s.left<u.right?xs.success():i(t);var r,o,a,u,s}),(function(e){return i(t)}))}))})).getOr(xs.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)}}),ks=(V("ancestor","descendants","element","index"),V("parent","children","element","index")),Ts=function(e){return"br"===re(e)},Ss=function(e,t,n){return t(e,n).bind((function(e){return se(e)&&0===gn(e).trim().length?Ss(e,t,n):v.some(e)}))},Es=function(e,t,n,r){return(o=t,i=n,pt(o,i).filter(Ts).orThunk((function(){return pt(o,i-1).filter(Ts)}))).bind((function(t){return r.traverse(t).fold((function(){return Ss(t,r.gather,e).map(r.relative)}),(function(e){return(t=e,ft(t).bind((function(e){var n=gt(e);return function(e,t){return B(e,a(ut,t))}(n,t).map((function(r){return ks(e,n,t,r)}))}))).map((function(e){return Cu.on(e.parent(),e.index())}));var t}))}));var o,i},_s=K(["left","top","right","bottom"],[]),Ns={nu:_s,moveUp:function(e,t){return _s({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return _s({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return _s({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return _s({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return _s({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},Rs=function(e){return Ns.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},Os=function(e,t){return v.some(e.getRect(t))},As=function(e,t,n){return ue(t)?Os(e,t).map(Rs):se(t)?(r=e,o=t,i=n,0<=i&&i<bn(o)?r.getRangedRect(o,i,o,i+1):0<i?r.getRangedRect(o,i-1,o,i):v.none()).map(Rs):v.none();var r,o,i},Ps=function(e,t){return ue(t)?Os(e,t).map(Rs):se(t)?e.getRangedRect(t,0,t,bn(t)).map(Rs):v.none()},Ds=sr([{none:[]},{retry:["caret"]}]),Ms=function(e,t,n){return(r=t,i=Wi,Wt((function(e,t){return t(e)}),Vt,r,i,void 0)).fold(o(!1),(function(t){return Ps(e,t).exists((function(e){return r=e,(t=n).left()<r.left()||Math.abs(r.right()-t.left())<1||t.left()>r.right();var t,r}))}));var r,i},Bs={point:Ns.getTop,adjuster:function(e,t,n,r,o){var i=Ns.moveUp(o,5);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?Ds.retry(i):n.bottom()===o.top()?Ds.retry(Ns.moveUp(o,1)):Ms(e,t,o)?Ds.retry(Ns.translate(i,5,0)):Ds.none()},move:Ns.moveUp,gather:vs},Is={point:Ns.getBottom,adjuster:function(e,t,n,r,o){var i=Ns.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?Ds.retry(i):n.top()===o.bottom()?Ds.retry(Ns.moveDown(o,1)):Ms(e,t,o)?Ds.retry(Ns.translate(i,5,0)):Ds.none()},move:Ns.moveDown,gather:bs},Ls=function(e,t,n,r,o){return 0===o?v.some(r):(s=e,c=r.left(),l=t.point(r),s.elementFromPoint(c,l).filter((function(e){return"table"===re(e)})).isSome()?(a=r,u=o-1,Ls(e,i=t,n,i.move(a,5),u)):e.situsFromPoint(r.left(),t.point(r)).bind((function(i){return i.start().fold(v.none,(function(i){return Ps(e,i).bind((function(a){return t.adjuster(e,i,a,n,r).fold(v.none,(function(r){return Ls(e,t,n,r,o-1)}))})).orThunk((function(){return v.some(r)}))}),v.none)})));var i,a,u,s,c,l},Hs=function(e,t,n){var r,o,i,a=e.move(n,5),u=Ls(t,e,n,a,100).getOr(a);return(r=e,o=u,i=t,r.point(o)>i.getInnerHeight()?v.some(r.point(o)-i.getInnerHeight()):r.point(o)<0?v.some(-r.point(o)):v.none()).fold((function(){return t.situsFromPoint(u.left(),e.point(u))}),(function(n){return t.scrollBy(0,n),t.situsFromPoint(u.left(),e.point(u)-n)}))},Fs={tryUp:a(Hs,Bs),tryDown:a(Hs,Is),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:o(5)},zs=nt.detect(),Ws=function(e,t,n,r,o,i){return 0===i?v.none():Vs(e,t,n,r,o).bind((function(a){var u=e.fromSitus(a),s=Cs.verify(e,n,r,u.finish(),u.foffset(),o.failure,t);return Cs.cata(s,(function(){return v.none()}),(function(){return v.some(a)}),(function(a){return ut(n,a)&&0===r?Us(e,n,r,Ns.moveUp,o):Ws(e,t,a,0,o,i-1)}),(function(a){return ut(n,a)&&r===bn(a)?Us(e,n,r,Ns.moveDown,o):Ws(e,t,a,bn(a),o,i-1)}))}))},Us=function(e,t,n,r,o){return As(e,t,n).bind((function(t){return js(e,o,r(t,Fs.getJumpSize()))}))},js=function(e,t,n){return zs.browser.isChrome()||zs.browser.isSafari()||zs.browser.isFirefox()||zs.browser.isEdge()?t.otherRetry(e,n):zs.browser.isIE()?t.ieRetry(e,n):v.none()},Vs=function(e,t,n,r,o){return As(e,n,r).bind((function(t){return js(e,o,t)}))},$s=function(e,t,n){return(r=e,i=t,a=n,r.getSelection().bind((function(e){return function(e,t,n,r){var i,a,u;return(Ts(t)?(i=e,a=t,(u=r).traverse(a).orThunk((function(){return Ss(a,u.gather,i)})).map(u.relative)):Es(e,t,n,r)).map((function(e){return{start:o(e),finish:o(e)}}))}(i,e.finish(),e.foffset(),a).fold((function(){return v.some(ys(e.finish(),e.foffset()))}),(function(t){var n=r.fromSitus(t);return function(e){return Cs.cata(e,(function(e){return v.none()}),(function(){return v.none()}),(function(e){return v.some(ys(e,0))}),(function(e){return v.some(ys(e,bn(e)))}))}(Cs.verify(r,e.finish(),e.foffset(),n.finish(),n.foffset(),a.failure,i))}))}))).bind((function(r){return Ws(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)}));var r,i,a},qs=nt.detect(),Ys=function(e,t,n,r,i){return Xt(r,"td,th",t).bind((function(r){return Xt(r,"table",t).bind((function(a){return function(e,t){return Vt(e,(function(e){return ft(e).exists((function(e){return ut(e,t)}))}),void 0).isSome()}(i,a)?$s(e,t,n).bind((function(e){return Xt(e.finish(),"td,th",t).map((function(t){return{start:o(r),finish:o(t),range:o(e)}}))})):v.none()}))}))},Xs=function(e,t,n,r,o,i){return qs.browser.isIE()?v.none():i(r,t).orThunk((function(){return Ys(e,t,n,r,o).map((function(e){var t=e.range();return Zu.create(v.some(ts(t.start(),t.soffset(),t.finish(),t.foffset())),!0)}))}))},Gs=function(e,t,n,r,o,i,a){return Ys(e,n,r,o,i).bind((function(e){return os(t,n,e.start(),e.finish(),a)}))},Ks=function(e,t){return Xt(e,"tr",t).bind((function(e){return Xt(e,"table",t).bind((function(n){var r,o,i,a=zt(n,"tr");return ut(e,a[0])?(r=n,o=function(e){return Cn(e).isSome()},i=t,hs(ps,r,o,i)).map((function(e){var t=bn(e);return Zu.create(v.some(ts(e,t,e,t)),!0)})):v.none()}))}))},Js=function(e,t){return Xt(e,"tr",t).bind((function(e){return Xt(e,"table",t).bind((function(n){var r,o,i,a=zt(n,"tr");return ut(e,a[a.length-1])?(r=n,o=function(e){return wn(e).isSome()},i=t,gs(ps,r,o,i)).map((function(e){return Zu.create(v.some(ts(e,0,e,0)),!0)})):v.none()}))}))},Zs=function(e,t){return Xt(e,"td,th",t)},Qs={down:{traverse:ht,gather:bs,relative:Cu.before,otherRetry:Fs.tryDown,ieRetry:Fs.ieTryDown,failure:Cs.failedDown},up:{traverse:mt,gather:vs,relative:Cu.before,otherRetry:Fs.tryUp,ieRetry:Fs.ieTryUp,failure:Cs.failedUp}},ec=function(e){return function(t){return t===e}},tc=ec(38),nc=ec(40),rc={ltr:{isBackward:ec(37),isForward:ec(39)},rtl:{isBackward:ec(39),isForward:ec(37)},isUp:tc,isDown:nc,isNavigation:function(e){return 37<=e&&e<=40}},oc=function(e){return{left:e.left(),top:e.top(),right:e.right(),bottom:e.bottom(),width:e.width(),height:e.height()}},ic=(nt.detect().browser.isSafari(),function(t){return{elementFromPoint:function(e,n){return xe.fromPoint(xe.fromDom(t.document),e,n)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(e,n,r,o){var i=Tu.exact(e,n,r,o);return function(e,t){var n,r,o;return 0<(o=0<(r=(n=Au(e,t)).getClientRects()).length?r[0]:n.getBoundingClientRect()).width||0<o.height?v.some(o).map(_u):v.none()}(t,i).map(oc)},getSelection:function(){return function(e){return(t=e,v.from(t.getSelection()).filter((function(e){return 0<e.rangeCount})).bind($u)).map((function(e){return Tu.exact(e.start(),e.soffset(),e.finish(),e.foffset())}));var t}(t).map((function(e){return es(t,e)}))},fromSitus:function(e){var n=Tu.relative(e.start(),e.finish());return es(t,n)},situsFromPoint:function(e,n){return function(e,t,n){return r=t,o=n,i=xe.fromDom(e.document),Hu(i,r,o).map((function(e){return xu.create(xe.fromDom(e.startContainer),e.startOffset,xe.fromDom(e.endContainer),e.endOffset)}));var r,o,i}(t,e,n).map((function(e){return Qu(e.start(),e.soffset(),e.finish(),e.foffset())}))},clearSelection:function(){t.getSelection().removeAllRanges()},setSelection:function(e){var n,r,o,i,a,u;n=t,r=e.start(),o=e.soffset(),i=e.finish(),a=e.foffset(),u=Wu(r,o,i,a),Vu(n,u)},setRelativeSelection:function(e,n){var r,o;r=t,o=zu(e,n),Vu(r,o)},selectContents:function(e){!function(e,t){var n,r,o=(n=t,function(e,t){e.selectNodeContents(t.dom())}(r=e.document.createRange(),n),r);Uu(e,o)}(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){var n,r,o,i;return(n=xe.fromDom(t.document),r=void 0!==n?n.dom():e.document,o=r.body.scrollLeft||r.documentElement.scrollLeft,i=r.body.scrollTop||r.documentElement.scrollTop,Lr(o,i)).top()},scrollBy:function(n,r){var o,i,a;o=n,i=r,(void 0!==(a=xe.fromDom(t.document))?a.dom():e.document).defaultView.scrollBy(o,i)}}}),ac=V("rows","cols"),uc=function(e,t,n,r){var o,i,a,u,s,c,l=ic(e),f=(o=l,i=t,a=n,u=r,s=v.none(),c=function(){s=v.none()},{mousedown:function(e){u.clear(i),s=Zs(e.target(),a)},mouseover:function(e){s.each((function(t){u.clear(i),Zs(e.target(),a).each((function(e){rr(t,e,a).each((function(n){var r=n.boxes().getOr([]);(1<r.length||1===r.length&&!ut(t,e))&&(u.selectRange(i,r,n.start(),n.finish()),o.selectContents(e))}))}))}))},mouseup:function(e){s.each(c)}});return{mousedown:f.mousedown,mouseover:f.mouseover,mouseup:f.mouseup}},sc=function(e,t,n,r){var o=ic(e),i=function(){return r.clear(t),v.none()};return{keydown:function(e,u,s,c,l,f){var d=e.raw(),m=d.which,h=!0===d.shiftKey;return or(t,r.selectedSelector()).fold((function(){return rc.isDown(m)&&h?a(Gs,o,t,n,Qs.down,c,u,r.selectRange):rc.isUp(m)&&h?a(Gs,o,t,n,Qs.up,c,u,r.selectRange):rc.isDown(m)?a(Xs,o,n,Qs.down,c,u,Js):rc.isUp(m)?a(Xs,o,n,Qs.up,c,u,Ks):v.none}),(function(e){var n=function(n){return function(){return ro(n,(function(n){return is(n.rows(),n.cols(),t,e,r)})).fold((function(){return ir(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(e){var n=rc.isDown(m)||f.isForward(m)?Cu.after:Cu.before;return o.setRelativeSelection(Cu.on(e.first(),0),n(e.table())),r.clear(t),Zu.create(v.none(),!0)}))}),(function(e){return v.some(Zu.create(v.none(),!0))}))}};return rc.isDown(m)&&h?n([ac(1,0)]):rc.isUp(m)&&h?n([ac(-1,0)]):f.isBackward(m)&&h?n([ac(0,-1),ac(-1,0)]):f.isForward(m)&&h?n([ac(0,1),ac(1,0)]):rc.isNavigation(m)&&!1===h?i:v.none}))()},keyup:function(e,o,i,a,u){return or(t,r.selectedSelector()).fold((function(){var s=e.raw(),c=s.which;return 0==(!0===s.shiftKey)?v.none():rc.isNavigation(c)?rs(t,n,o,i,a,u,r.selectRange):v.none()}),v.none)}}},cc=function(e){var t=function(t){he(t,e.selected()),he(t,e.firstSelected()),he(t,e.lastSelected())},n=function(t){le(t,e.selected(),"1")},r=function(n){var r=zt(n,e.selectedSelector());O(r,t)};return{clear:r,selectRange:function(t,o,i,a){r(t),O(o,n),le(i,e.firstSelected(),"1"),le(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},lc=function(e){return!1===so(xe.fromDom(e.target),"ephox-snooker-resizer-bar")};var fc=Ea.each;t.add("table",(function(t){var i,u=pu(t),s=function(e,t){var i=K(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=v.none(),u=cc(ur);return e.on("init",(function(s){var c=e.getWin(),l=ea(e),f=ra(e),d=uc(c,l,f,u),m=sc(c,l,f,u),h=function(t,n){!0===t.raw().shiftKey&&(n.kill()&&t.kill(),n.selection().each((function(t){var n=Tu.relative(t.start(),t.finish()),r=Au(c,n);e.selection.setRng(r)})))},g=function(t){var n=y(t);if(n.raw().shiftKey&&rc.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=xe.fromDom(r.startContainer),i=xe.fromDom(r.endContainer);m.keyup(n,o,r.startOffset,i,r.endOffset).each((function(e){h(n,e)}))}},p=function(n){var r=y(n);t().each((function(e){e.hideBars()}));var o=e.selection.getRng(),i=xe.fromDom(e.selection.getStart()),a=xe.fromDom(o.startContainer),u=xe.fromDom(o.endContainer),s=sa(i).isRtl()?rc.rtl:rc.ltr;m.keydown(r,a,o.startOffset,u,o.endOffset,s).each((function(e){h(r,e)})),t().each((function(e){e.showBars()}))},b=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},y=function(e){var t=xe.fromDom(e.target),n=function(){e.stopPropagation()},i=function(){e.preventDefault()},a=r(i,n);return{target:o(t),x:o(b(e)?e.x:null),y:o(b(e)?e.y:null),stop:n,prevent:i,kill:a,raw:o(e)}},x=function(e){return 0===e.button},w=function(e){x(e)&&lc(e)&&d.mousedown(y(e))},C=function(e){var t;(void 0===(t=e).buttons||Wa.ie&&12<=Wa.ie&&0===t.buttons||0!=(1&t.buttons))&&lc(e)&&d.mouseover(y(e))},k=function(e){x(e)&&lc(e)&&d.mouseup(y(e))};e.on("mousedown",w),e.on("mouseover",C),e.on("mouseup",k),e.on("keyup",g),e.on("keydown",p),e.on("nodechange",(function(){var t=e.selection,r=xe.fromDom(t.getStart()),o=xe.fromDom(t.getEnd());Zn(tn,[r,o]).fold((function(){u.clear(l)}),n)})),a=v.some(i({mousedown:w,mouseover:C,mouseup:k,keyup:g,keydown:p}))})),{clear:u.clear,destroy:function(){a.each((function(e){}))}}}(t,u.lazyResize),c=Ta(t,u.lazyWire),l=(i=t,{get:function(){return function(e,t){return or(e,t)}(ea(i),ur.selectedSelector()).fold((function(){return void 0===i.selection.getStart()?lr.none():lr.single(i.selection)}),(function(e){return lr.multiple(e)}))}}),d=Ri(v.none());return function(e,t,r,o,i){var u=ra(e),s=function(t){return function(){return v.from(e.dom.getParent(e.selection.getStart(),t)).map(xe.fromDom)}},c=s("caption"),l=s("th,td"),d=function(e){return tn(e,u)},m=function(e){return{width:ta(e.dom()),height:ta(e.dom())}},h=function(t){l().each((function(n){d(n).each((function(i){var a=vr.forMenu(o,i,n),u=m(i);t(i,a).each((function(t){var n,o,a,s;n=e,o=u,s=m(a=i),o.width===s.width&&o.height===s.height||(Ca(n,a.dom(),o.width,o.height),ka(n,a.dom(),s.width,s.height)),e.selection.setRng(t),e.focus(),r.clear(i),ia(i)}))}))}))},g=function(t){return l().bind((function(t){return d(t).bind((function(r){var i=xe.fromDom(e.getDoc()),a=vr.forMenu(o,r,t),u=An(n,i,v.none());return Sa(r,a,u)}))}))},p=function(t){i.get().each((function(n){var i=R(n,(function(e){return En(e)}));l().each((function(n){d(n).each((function(a){var u=xe.fromDom(e.getDoc()),s=Pn(u),c=vr.pasteRows(o,a,n,i,s);t(a,c).each((function(t){e.selection.setRng(t),e.focus(),r.clear(a)}))}))}))}))};Ga({mceTableSplitCells:function(){h(t.unmergeCells)},mceTableMergeCells:function(){h(t.mergeCells)},mceTableInsertRowBefore:function(){h(t.insertRowsBefore)},mceTableInsertRowAfter:function(){h(t.insertRowsAfter)},mceTableInsertColBefore:function(){h(t.insertColumnsBefore)},mceTableInsertColAfter:function(){h(t.insertColumnsAfter)},mceTableDeleteCol:function(){h(t.deleteColumn)},mceTableDeleteRow:function(){h(t.deleteRow)},mceTableCutRow:function(e){i.set(g()),h(t.deleteRow)},mceTableCopyRow:function(e){i.set(g())},mceTablePasteRowBefore:function(e){p(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){p(t.pasteRowsAfter)},mceTableDelete:function(){l().orThunk(c).each((function(t){tn(t,u).filter(f(u)).each((function(t){var n=xe.fromText("");bt(t,n),St(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)}))}))}},(function(t,n){e.addCommand(n,t)})),Ga({mceInsertTable:a(Xa,e),mceTableProps:a(Xa,e,!0),mceTableRowProps:a(za,e),mceTableCellProps:a(Ha,e)},(function(t,n){e.addCommand(n,(function(e,n){t(n)}))}))}(t,c,s,l,d),function(t,r,o,i){t.on("BeforeGetContent",(function(e){!0===e.selection&&lr.cata(r.get(),n,(function(n){var r;e.preventDefault(),(r=n,tn(r[0]).map(En).map((function(e){return[mn(e,ur.attributeSelector())]}))).each((function(n){var r;e.content="text"===e.format?R(n,(function(e){return e.dom().innerText})).join(""):(r=t,R(n,(function(e){return r.selection.serializer.serialize(e.dom(),{})})).join(""))}))}),n)})),t.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&v.from(t.dom.getParent(t.selection.getStart(),"th,td")).each((function(r){var a=xe.fromDom(r);tn(a).each((function(r){var u,s,c=A((u=n.content,(s=e.document.createElement("div")).innerHTML=u,gt(xe.fromDom(s))),(function(e){return"meta"!==re(e)}));if(1===c.length&&"table"===re(c[0])){n.preventDefault();var l=xe.fromDom(t.getDoc()),f=Pn(l),d=vr.paste(a,c[0],f);o.pasteCells(r,d).each((function(e){t.selection.setRng(e),t.focus(),i.clear(r)}))}}))}))}))}(t,l,c,s),function(e,t){var n=v.none(),r=[],o=[],i=[],a=[],u=function(e){e.disabled(!0)},s=function(e){e.disabled(!1)},c=function(){var e=this;r.push(e),n.fold((function(){u(e)}),(function(t){s(e)}))},l=function(){var e=this;o.push(e),n.fold((function(){u(e)}),(function(t){s(e)}))};e.on("init",(function(){e.on("nodechange",(function(c){var l=v.from(e.dom.getParent(e.selection.getStart(),"th,td"));(n=l.bind((function(e){var n=xe.fromDom(e);return tn(n).map((function(e){return vr.forMenu(t,e,n)}))}))).fold((function(){O(r,u),O(o,u),O(i,u),O(a,u)}),(function(e){O(r,s),O(o,s),O(i,(function(t){t.disabled(e.mergable().isNone())})),O(a,(function(t){t.disabled(e.unmergable().isNone())}))}))}))}));var f=function(e,t,n,r){var o,i,a,u,s,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(c.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=c.rows[i].childNodes[o].firstChild,s=(l?t<=o:o<=t)&&i<=n,e.dom.toggleClass(u,"mce-active",s),s&&(a=u);return a.parentNode},d=!1===e.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:m("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){f(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(f(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact((function(){Va(e,n.lastX+1,n.lastY+1)})),e.addVisual())}}]};function m(t){return function(){e.execCommand(t)}}var h={text:"Table properties",context:"table",onPostRender:c,onclick:m("mceTableProps")},g={text:"Delete table",context:"table",onPostRender:c,cmd:"mceTableDelete"},p={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:l},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:l},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:l},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:l},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:l},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:l},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:l},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:l}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:l},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:l},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:l}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:l},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var e=this;i.push(e),n.fold((function(){u(e)}),(function(t){e.disabled(t.mergable().isNone())}))}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var e=this;a.push(e),n.fold((function(){u(e)}),(function(t){e.disabled(t.unmergable().isNone())}))}}]};e.addMenuItem("inserttable",d),e.addMenuItem("tableprops",h),e.addMenuItem("deletetable",g),e.addMenuItem("row",p),e.addMenuItem("column",b),e.addMenuItem("cell",y)}(t,l),function(e){var t=[];function n(t){return function(){e.execCommand(t)}}fc("inserttable tableprops deletetable | cell row column".split(" "),(function(n){"|"===n?t.push({text:"-"}):t.push(e.menuItems[n])})),e.addButton("table",{type:"menubutton",title:"Table",menu:t}),e.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})}(t),function(e){var t,n=""===(t=e.getParam("table_toolbar",ca))||!1===t?[]:y(t)?t.split(/[ ,]/):x(t)?t:[];0<n.length&&e.addContextToolbar((function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)}),n.join(" "))}(t),t.on("PreInit",(function(){t.serializer.addTempAttr(ur.firstSelected()),t.serializer.addTempAttr(ur.lastSelected())})),t.getParam("table_tab_navigation",!0,"boolean")&&t.on("keydown",(function(e){!function(e,t,n,r){if(e.keyCode===qu.TAB){var o=ea(t),i=function(e){var t=re(e);return ut(e,o)||_(Ju,t)},a=t.selection.getRng();if(a.collapsed){var u=xe.fromDom(a.startContainer);Qt(u,i).each((function(o){e.preventDefault(),(e.shiftKey?Xu:Yu)(t,i,o,n,r).each((function(e){t.selection.setRng(e)}))}))}}}(e,t,c,u.lazyWire)})),t.on("remove",(function(){u.destroy(),s.destroy()})),function(e,t){return{insertTable:function(t,n){return Va(e,t,n)},setClipboardRows:function(e){return n=t,r=R(e,xe.fromDom),void n.set(v.from(r));var n,r},getClipboardRows:function(){return t.get().fold((function(){}),(function(e){return R(e,(function(e){return e.dom()}))}))}}}(t,d)}))}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=tinymce.util.Tools.resolve("tinymce.util.XHR"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(e){return e.getParam("template_replace_values")},i=function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},a=function(e){return e.getParam("template_popup_width",600)},u=function(e){return Math.min(r.DOM.getViewPort().h,e.getParam("template_popup_height",500))},s=function(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},c=function(e,t,n){var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return n=n||new Date,(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",s(n.getMonth()+1,2))).replace("%d",s(n.getDate(),2))).replace("%H",""+s(n.getHours(),2))).replace("%M",""+s(n.getMinutes(),2))).replace("%S",""+s(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(a[n.getMonth()]))).replace("%b",""+e.translate(i[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")},l=function(e,n,r){return t.each(r,(function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)})),n},f=function(e,n){var r=e.dom,i=o(e);t.each(r.select("*",n),(function(e){t.each(i,(function(t,n){r.hasClass(e,n)&&"function"==typeof i[n]&&i[n](e)}))}))},d=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)},m=function(e,t){return function(){var r=function(e){return e.templates}(e);"function"!=typeof r?"string"==typeof r?n.send({url:r,success:function(e){t(JSON.parse(e))}}):t(r):r(t)}},h=l,g=f,p=function(e,n,r){var a,u,s=e.dom,m=e.selection.getContent();r=l(0,r,o(e)),a=s.create("div",null,r),(u=s.select(".mceTmpl",a))&&0<u.length&&(a=s.create("div",null)).appendChild(u[0].cloneNode(!0)),t.each(s.select("*",a),(function(t){d(t,function(e){return e.getParam("template_cdate_classes","cdate")}(e).replace(/\s+/g,"|"))&&(t.innerHTML=c(e,function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))}(e))),d(t,function(e){return e.getParam("template_mdate_classes","mdate")}(e).replace(/\s+/g,"|"))&&(t.innerHTML=c(e,i(e))),d(t,function(e){return e.getParam("template_selected_content_classes","selcontent")}(e).replace(/\s+/g,"|"))&&(t.innerHTML=m)})),f(e,a),e.execCommand("mceInsertContent",!1,a.innerHTML),e.addVisual()},v=function(e,n,r){if(-1===r.indexOf("<html>")){var o="";t.each(e.contentCSS,(function(t){o+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'}));var i=e.settings.body_class||"";-1!==i.indexOf("=")&&(i=(i=e.getParam("body_class","","hash"))[e.id]||""),r="<!DOCTYPE html><html><head>"+o+'</head><body class="'+i+'">'+r+"</body></html>"}r=h(e,r,function(e){return e.getParam("template_preview_replace_values")}(e));var a=n.find("iframe")[0].getEl().contentWindow.document;a.open(),a.write(r),a.close()},b=function(e){return function(r){!function(e,r){var o,i,s=[];if(r&&0!==r.length)t.each(r,(function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})})),(o=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:s,onselect:function(t){var r=t.control.value();r.url?n.send({url:r.url,success:function(t){v(e,o,i=t)}}):(i=r.content,v(e,o,i)),o.find("#description")[0].text(t.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){p(e,0,i)},minWidth:a(e),minHeight:u(e)})).find("listbox")[0].fire("select");else{var c=e.translate("No templates defined.");e.notificationManager.open({text:c,type:"info"})}}(e,r)}};e.add("template",(function(e){(function(e){e.addButton("template",{title:"Insert template",onclick:m(e.settings,b(e))}),e.addMenuItem("template",{text:"Template",onclick:m(e.settings,b(e)),icon:"template",context:"insert"})})(e),function(e){e.addCommand("mceInsertTemplate",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.concat(n);return e.apply(null,o)}}(p,e))}(e),function(e){e.on("PreProcess",(function(n){var r=e.dom,o=i(e);t.each(r.select("div",n.node),(function(n){r.hasClass(n,"mceTmpl")&&(t.each(r.select("*",n),(function(t){r.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=c(e,o))})),g(e,n))}))}))}(e)}))}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],o=function(e){return e.getParam("textcolor_map",r)},i=function(e){return e.getParam("textcolor_rows",5)},a=function(e){return e.getParam("textcolor_cols",8)},u=function(e){return e.getParam("color_picker_callback",null)},s=function(e){return e.getParam("forecolor_cols",a(e))},c=function(e){return e.getParam("backcolor_cols",a(e))},l=u,f=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},m=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},h=function(e,r){return function(o){var i,a=this.parent(),u=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),(function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)})),n}(e,a.settings.format),s=function(t){e.execCommand("mceApplyTextcolor",a.settings.format,t),a.hidePanel(),a.color(t)};t.DOM.getParent(o.target,".mce-custom-color-btn")&&(a.hidePanel(),l(e).call(e,(function(e){var t,o,i,u=a.panel.getEl().getElementsByTagName("table")[0];for(t=n.map(u.rows[u.rows.length-1].childNodes,(function(e){return e.firstChild})),i=0;i<t.length&&(o=t[i]).getAttribute("data-mce-color");i++);if(i===r)for(i=0;i<r-1;i++)d(t[i],t[i+1].getAttribute("data-mce-color"));d(o,e),s(e)}),u)),(i=o.target.getAttribute("data-mce-color"))?(this.lastId&&t.DOM.get(this.lastId).setAttribute("aria-selected","false"),o.target.setAttribute("aria-selected",!0),this.lastId=o.target.id,"transparent"===i?(e.execCommand("mceRemoveTextcolor",a.settings.format),a.hidePanel(),a.resetColor()):s(i)):null!==i&&a.hidePanel()}},g=function(e,n){return function(){var r=n?s(e):c(e),a=n?function(e){return e.getParam("forecolor_rows",i(e))}(e):function(e){return e.getParam("backcolor_rows",i(e))}(e),l=n?function(e){return e.getParam("forecolor_map",o(e))}(e):function(e){return e.getParam("backcolor_map",o(e))}(e);return function(e,n,r,o){var i,a,u,s,c,l,d,m=0,h=t.DOM.uniqueId("mcearia"),g=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+h+"-"+m+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+f.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"};for((i=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n}(r)).push({text:f.translate("No color"),color:"transparent"}),u='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',s=i.length-1,l=0;l<n;l++){for(u+="<tr>",c=0;c<e;c++)u+=s<(d=l*e+c)?"<td></td>":g((a=i[d]).color,a.text);u+="</tr>"}if(o){for(u+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+h+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+h+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+f.translate("Custom...")+"</button></div></td></tr>",u+="<tr>",c=0;c<e;c++)u+=g("","Custom color");u+="</tr>"}return u+"</tbody></table>"}(r,a,l,function(e){return"function"==typeof u(e)}(e))}};e.add("textcolor",(function(e){(function(e){e.addCommand("mceApplyTextcolor",(function(t,n){!function(e,t,n){e.undoManager.transact((function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))}(e,t,n)})),e.addCommand("mceRemoveTextcolor",(function(t){!function(e,t){e.undoManager.transact((function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))}(e,t)}))})(e),function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:g(e,!0),onclick:h(e,s(e))},onclick:m(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:g(e,!1),onclick:h(e,c(e))},onclick:m(e)})}(e)}))}(),function(e){"use strict";var t,n,r,o,i=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return i(n())}}},a=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(e){return function(){return e}},s=u(!1),c=u(!0),l=function(){return f},f=(t=function(e){return e.isNone()},o={fold:function(e,t){return e()},is:s,isSome:s,isNone:c,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:r,orThunk:n,map:l,each:function(){},bind:l,exists:s,forall:c,filter:l,equals:t,equals_:t,toArray:function(){return[]},toString:u("none()")},Object.freeze&&Object.freeze(o),o),d=function(e){var t=u(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:c,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return o},m={some:d,none:l,from:function(e){return null==e?f:d(e)}},h=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),g=Array.prototype.slice,p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},v=(h(Array.from)&&Array.from,Object.hasOwnProperty),b=function(e,t){return v.call(e,t)},y=function(e){return b(e,"start")&&b(e,"end")},x=function(e){return!b(e,"end")&&!b(e,"replacement")},w=function(e){return b(e,"replacement")},C=function(e){return t=e,n=function(e,t){return e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1},(r=g.call(t,0)).sort(n),r;var t,n,r},k=function(e){return{inlinePatterns:C(p(e,y)),blockPatterns:C(p(e,x)),replacementPatterns:p(e,w)}},T=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],S=tinymce.util.Tools.resolve("tinymce.util.Delay"),E=tinymce.util.Tools.resolve("tinymce.util.VK"),_=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),N=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(0===t.indexOf(r.start)&&(!r.end||t.lastIndexOf(r.end)===t.length-r.end.length))return r}},O=function(e){return e&&3===e.nodeType},A=function(e,t,n){var r=e.dom.createRng();r.setStart(t,n),r.setEnd(t,n),e.selection.setRng(r)},P=function(t,n,r){var o=t.selection.getRng();return m.from(function(t,n,r){if(!1!==n.collapsed){var o=n.startContainer,i=o.data,a=!0===r?1:0;if(3===o.nodeType){var u=function(e,t,n,r){var o,i,a,u,s,c;for(i=0;i<e.length;i++)if(void 0!==(o=e[i]).end&&(u=o,s=n,c=r,t.substr(s-u.end.length-c,u.end.length)===u.end)&&0<n-r-(a=o).end.length-a.start.length)return o}(t,i,n.startOffset,a);if(void 0!==u){var s=i.lastIndexOf(u.end,n.startOffset-a),c=i.lastIndexOf(u.start,s-u.end.length);if(s=i.indexOf(u.end,c+u.start.length),-1!==c){var l=e.document.createRange();l.setStart(o,c),l.setEnd(o,s+u.end.length);var f=R(t,l.toString());if(!(void 0===u||f!==u||o.data.length<=u.start.length+u.end.length))return{pattern:u,startOffset:c,endOffset:s}}}}}}(n,o,r)).map((function(e){return function(e,t,n,r){var o=N.isArray(n.pattern.format)?n.pattern.format:[n.pattern.format];if(0!==N.grep(o,(function(t){var n=e.formatter.get(t);return n&&n[0].inline})).length)return e.undoManager.transact((function(){var i,a,u,s;i=t,a=n.pattern,u=n.endOffset,(i=0<(s=n.startOffset)?i.splitText(s):i).splitText(u-s+a.end.length),i.deleteData(0,a.start.length),i.deleteData(i.data.length-a.end.length,a.end.length),t=i,r&&e.selection.setCursorLocation(t.nextSibling,1),o.forEach((function(n){e.formatter.apply(n,{},t)}))})),t}(t,o.startContainer,e,r)}))},D=function(e,t,n){var r=e.selection.getRng(),o=r.startContainer;r.collapsed&&O(o)&&function(e,t,n){for(var r=0;r<e.length;r++){var o=n.lastIndexOf(e[r].start,t);if(-1!==o)return m.some({pattern:e[r],startOffset:o})}return m.none()}(t,r.startOffset,o.data).each((function(t){var r,i,a,u,s,c,l,f=n?m.some((r=o,a=(i=t).startOffset+i.pattern.start.length,u=r.data.slice(a,a+1),r.deleteData(a,1),u)):m.none();s=e,l=t,(c=o).deleteData(l.startOffset,l.pattern.start.length),s.insertContent(l.pattern.replacement),m.from(c.nextSibling).filter(O).each((function(e){e.insertData(0,c.data),s.dom.remove(c)})),f.each((function(t){return function(e,t){var n=e.selection.getRng(),r=n.startContainer;if(O(r)){var o=n.startOffset;r.insertData(o,t),A(e,r,o+t.length)}else{var i=e.dom.doc.createTextNode(t);n.insertNode(i),A(e,i,i.length)}}(e,t)}))}))},M=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},B=function(e,t){var n,r,o,i;n=e,r=t.replacementPatterns,D(n,r,!0),o=e,i=t.inlinePatterns,P(o,i,!0).each((function(e){var t=e.data.slice(-1);if(/[\u00a0 ]/.test(t)){e.deleteData(e.data.length-1,1);var n=o.dom.doc.createTextNode(t);o.dom.insertAfter(n,e.parentNode),A(o,n,1)}}))},I=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",(function(n){13!==n.keyCode||E.modifierPressed(n)||function(e,t){var n,r,o,i;n=e,r=t.replacementPatterns,D(n,r,!1),o=e,i=t.inlinePatterns,P(o,i,!1).each((function(e){A(o,e,e.data.length)})),function(e,t){var n,r,o,i,a,u,s,c,l,f,d;if(n=e.selection,r=e.dom,n.isCollapsed()&&(s=r.getParent(n.getStart(),"p"))){for(l=new _(s,s);a=l.next();)if(O(a)){i=a;break}if(i){if(!(c=R(t,i.data)))return;if(o=(f=n.getRng(!0)).startContainer,d=f.startOffset,i===o&&(d=Math.max(0,d-c.start.length)),N.trim(i.data).length===c.start.length)return;c.format&&(u=e.formatter.get(c.format))&&u[0].block&&(i.deleteData(0,c.start.length),e.formatter.apply(c.format,{},i),f.setStart(o,d),f.collapse(!0),n.setRng(f)),c.cmd&&e.undoManager.transact((function(){i.deleteData(0,c.start.length),e.execCommand(c.cmd)}))}}}(e,t.blockPatterns)}(e,t.get())}),!0),e.on("keyup",(function(n){(function(e,t){return M(e,t,(function(e,t){return e===t.keyCode&&!1===E.modifierPressed(t)}))})(r,n)&&B(e,t.get())})),e.on("keypress",(function(r){(function(e,t){return M(e,t,(function(e,t){return e.charCodeAt(0)===t.charCode}))})(n,r)&&S.setEditorTimeout(e,(function(){B(e,t.get())}))}))};a.add("textpattern",(function(e){var t=i(function(e){var t,n,r=(t=e,n="textpattern_patterns",b(t,n)?m.from(t[n]):m.none()).getOr(T);return k(r)}(e.settings));return I(e,t),function(e){return{setPatterns:function(t){e.set(k(t))},getPatterns:function(){return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}(e.get().inlinePatterns,e.get().blockPatterns,e.get().replacementPatterns)}}}(t)}))}(window),function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.I18n"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return e.getParam("toc_class","mce-toc")},a=function(e){var t=e.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},u=("mcetoc_",e=0,function(){return"mcetoc_"+(new Date).getTime().toString(32)+(e++).toString(32)}),s=function(e){var t=i(e),n=a(e),r=function(e){var t,n=[];for(t=1;t<=e;t++)n.push("h"+t);return n.join(",")}(function(e){var t=parseInt(e.getParam("toc_depth","3"),10);return 1<=t&&t<=9?t:3}(e)),s=e.$(r);return s.length&&/^h[1-9]$/i.test(n)&&(s=s.filter((function(n,r){return!e.dom.hasClass(r.parentNode,t)}))),o.map(s,(function(t){return{id:t.id?t.id:u(),level:parseInt(t.nodeName.replace(/^H/i,""),10),title:e.$.text(t),element:t}}))},c=function(e){var t,o,i,u,c,l,f,d="",m=s(e),h=function(e){var t,n=9;for(t=0;t<e.length;t++)if(e[t].level<n&&(n=e[t].level),1===n)return n;return n}(m)-1;if(!m.length)return"";for(d+=(c=a(e),l=r.translate("Table of Contents"),f="</"+c+">","<"+c+' contenteditable="true">'+n.DOM.encode(l)+f),t=0;t<m.length;t++){if((i=m[t]).element.id=i.id,u=m[t+1]&&m[t+1].level,h===i.level)d+="<li>";else for(o=h;o<i.level;o++)d+="<ul><li>";if(d+='<a href="#'+i.id+'">'+i.title+"</a>",u!==i.level&&u)for(o=i.level;u<o;o--)d+="</li></ul><li>";else d+="</li>",u||(d+="</ul>");h=i.level}return d},l=function(e){var t=i(e),n=e.$("."+t);n.length&&e.undoManager.transact((function(){n.html(c(e))}))},f=function(e){return 0<s(e).length},d=function(e){var t,n,r,o,a=i(e),u=e.$("."+a);r=e,!(o=u).length||0<r.dom.getParents(o[0],".mce-offscreen-selection").length?e.insertContent((n=c(t=e),'<div class="'+t.dom.encode(i(t))+'" contenteditable="false">'+n+"</div>")):l(e)},m=l,h=function(e){return function(t){var n=t.control;e.on("LoadContent SetContent change",(function(){n.disabled(e.readonly||!f(e))}))}};t.add("toc",(function(e){(function(e){e.addCommand("mceInsertToc",(function(){d(e)})),e.addCommand("mceUpdateToc",(function(){m(e)}))})(e),function(e){var t;e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:h(e)}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:h(e)}),e.addContextToolbar((t=e,function(e){return e&&t.dom.is(e,"."+i(t))&&t.getBody().contains(e)}),"tocupdate")}(e),function(e){var t=e.$,n=i(e);e.on("PreProcess",(function(e){var r=t("."+n,e.node);r.length&&(r.removeAttr("contentEditable"),r.find("[contenteditable]").removeAttr("contentEditable"))})),e.on("SetContent",(function(){var e=t("."+n);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))}))}(e)}))}(),function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=n.DOM.uniqueId(),i=function(e,t,i){var a=e.dom,u=function(e){return e.settings.visualblocks_content_css}(e);(function(e,t){var i=r.toArray(e.getElementsByTagName("link"));if(0===r.grep(i,(function(e){return e.id===o})).length){var a=n.DOM.create("link",{id:o,rel:"stylesheet",href:t});e.getElementsByTagName("head")[0].appendChild(a)}})(e.getDoc(),u||t+"/css/visualblocks.css"),a.toggleClass(e.getBody(),"mce-visualblocks"),i.set(!i.get()),function(e,t){e.fire("VisualBlocks",{state:t})}(e,i.get())},a=function(e,t){return function(n){var r=n.control;r.active(t.get()),e.on("VisualBlocks",(function(e){r.active(e.state)}))}},u=function(e,t){e.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:a(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:a(e,t),selectable:!0,context:"view",prependToContext:!0})};t.add("visualblocks",(function(t,n){var r=e(!1);(function(e,t,n){e.addCommand("mceVisualBlocks",(function(){i(e,t,n)}))})(t,n,r),u(t,r),function(e,t,n){e.on("PreviewFormats AfterPreviewFormats",(function(t){n.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(function(){(function(e){return e.getParam("visualblocks_default_state",!1)})(e)&&i(e,t,n)})),e.on("remove",(function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))}(t,n,r)}))}(),function(e){"use strict";var t,n,r,o,i,a=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return a(n())}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=function(e){return function(){return e}},c=s(!1),l=s(!0),f=function(){return d},d=(t=function(e){return e.isNone()},o={fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:r,orThunk:n,map:f,each:function(){},bind:f,exists:c,forall:l,filter:f,equals:t,equals_:t,toArray:function(){return[]},toString:s("none()")},Object.freeze&&Object.freeze(o),o),m=function(e){var t=s(e),n=function(){return o},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return m(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?o:d},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return o},h=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),g=(Array.prototype.slice,function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}),p=(h(Array.from)&&Array.from,function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:s(e)}}),v={fromHtml:function(t,n){var r=(n||e.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||1<r.childNodes.length)throw e.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return p(r.childNodes[0])},fromTag:function(t,n){var r=(n||e.document).createElement(t);return p(r)},fromText:function(t,n){var r=(n||e.document).createTextNode(t);return p(r)},fromDom:p,fromPoint:function(e,t,n){return function(e){return null==e?d:m(e)}(e.dom().elementFromPoint(t,n)).map(p)}},b=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE,e.Node.TEXT_NODE),y=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),function(e){return e.dom().nodeValue}),x=(i=b,function(e){return e.dom().nodeType===i}),w={" ":"nbsp","­":"shy"},C=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},k=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n},T={charMap:w,regExp:C(w),regExpGlobal:C(w,!0),selector:k(w),charMapToRegExp:C,charMapToSelector:k},S=function(e){return'<span data-mce-bogus="1" class="mce-'+T.charMap[e]+'">'+e+"</span>"},E=function(e,t){var n=[],r=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e.dom().childNodes,v.fromDom);return g(r,(function(e){t(e)&&(n=n.concat([e])),n=n.concat(E(e,t))})),n},_={isMatch:function(e){var t=y(e);return x(e)&&void 0!==t&&T.regExp.test(t)},filterDescendants:E,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(e){return e.replace(T.regExpGlobal,S)}},N=function(e,t){var n,r,o=_.filterDescendants(v.fromDom(t),_.isMatch);g(o,(function(t){var o=_.replaceWithSpans(e.dom.encode(y(t)));for(r=e.dom.create("div",null,o);n=r.lastChild;)e.dom.insertAfter(n,t.dom());e.dom.remove(t.dom())}))},R=function(e,t){var n=e.dom.select(T.selector,t);g(n,(function(t){e.dom.remove(t,1)}))},O=N,A=R,P=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=_.findParentElm(e.selection.getNode(),t);R(e,r=void 0!==r?r:t),N(e,r),e.selection.moveToBookmark(n)},D=function(e,t){var n,r=e.getBody(),o=e.selection;t.set(!t.get()),function(e,t){e.fire("VisualChars",{state:t})}(e,t.get()),n=o.getBookmark(),!0===t.get()?O(e,r):A(e,r),o.moveToBookmark(n)},M=tinymce.util.Tools.resolve("tinymce.util.Delay"),B=function(e){return function(t){var n=t.control;e.on("VisualChars",(function(e){n.active(e.state)}))}};u.add("visualchars",(function(e){var t,n=a(!1);return function(e,t){e.addCommand("mceVisualChars",(function(){D(e,t)}))}(e,n),(t=e).addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:B(t)}),t.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:B(t),selectable:!0,context:"view",prependToContext:!0}),function(e,t){var n=M.debounce((function(){P(e)}),300);!1!==e.settings.forced_root_block&&e.on("keydown",(function(r){!0===t.get()&&(13===r.keyCode?P(e):n())}))}(e,n),function(e,t){e.on("init",(function(){var n=!function(e){return e.getParam("visualchars_default_state",!1)}(e);t.set(n),D(e,t)}))}(e,n),function(e){return{isEnabled:function(){return e.get()}}}(n)}))}(window),function(){"use strict";var e,t,n,r,o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),a=tinymce.util.Tools.resolve("tinymce.Env"),u={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp("[-'\\.‘’․﹒＇．]"),new RegExp("[:··״‧︓﹕：]"),new RegExp("[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]"),new RegExp("[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]"),new RegExp("\\r"),new RegExp("\\n"),new RegExp("[\v\f\u2028\u2029]"),new RegExp("[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]"),new RegExp("[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]"),new RegExp("[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]"),new RegExp("[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]"),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]$"),WHITESPACE:/^\s+$/},s=function(e){return function(){return e}},c=s(!1),l=s(!0),f=function(){return d},d=(e=function(e){return e.isNone()},r={fold:function(e,t){return e()},is:c,isSome:c,isNone:l,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(void 0),or:n,orThunk:t,map:f,each:function(){},bind:f,exists:c,forall:l,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:s("none()")},Object.freeze&&Object.freeze(r),r),m=("function",function(e){return"function"===function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)}),h=(Array.prototype.slice,m(Array.from)&&Array.from,u.SETS),g=u.characterIndices.OTHER,p=function(e){var t,n,r=g,o=h.length;for(t=0;t<o;++t)if((n=h[t])&&n.test(e)){r=t;break}return r},v=u.characterIndices,b=function(e,t){var n,r,o=e[t],i=e[t+1];return!(t<0||t>e.length-1&&0!==t||o===v.ALETTER&&i===v.ALETTER||(r=e[t+2],o===v.ALETTER&&(i===v.MIDLETTER||i===v.MIDNUMLET||i===v.AT)&&r===v.ALETTER||(n=e[t-1],(o===v.MIDLETTER||o===v.MIDNUMLET||i===v.AT)&&i===v.ALETTER&&n===v.ALETTER||!(o!==v.NUMERIC&&o!==v.ALETTER||i!==v.NUMERIC&&i!==v.ALETTER)||(o===v.MIDNUM||o===v.MIDNUMLET)&&i===v.NUMERIC&&n===v.NUMERIC||o===v.NUMERIC&&(i===v.MIDNUM||i===v.MIDNUMLET)&&r===v.NUMERIC||o===v.EXTEND||o===v.FORMAT||n===v.EXTEND||n===v.FORMAT||i===v.EXTEND||i===v.FORMAT||o===v.CR&&i===v.LF||o!==v.NEWLINE&&o!==v.CR&&o!==v.LF&&i!==v.NEWLINE&&i!==v.CR&&i!==v.LF&&(o===v.KATAKANA&&i===v.KATAKANA||i===v.EXTENDNUMLET&&(o===v.ALETTER||o===v.NUMERIC||o===v.KATAKANA||o===v.EXTENDNUMLET)||o===v.EXTENDNUMLET&&(i===v.ALETTER||i===v.NUMERIC||i===v.KATAKANA)||o===v.AT))))},y=u.EMPTY_STRING,x=u.WHITESPACE,w=u.PUNCTUATION,C=function(e,t,n){var r=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(x.test(r))break}return n}(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},k=function(e,t){return function(e,t){var n,r,o,i,a=0,u=function(e){var t,n,r=(t=p,n={},function(e){if(n[e])return n[e];var r=t(e);return n[e]=r});return function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}(e.split(""),r)}(e),s=u.length,c=[],l=[];for(t||(t={}),t.ignoreCase&&(e=e.toLowerCase()),r=t.includePunctuation,o=t.includeWhitespace;a<s;++a)if(n=e.charAt(a),c.push(n),b(u,a)){if((c=c.join(y))&&(o||!x.test(c))&&(r||!w.test(c)))if("http"===(i=c)||"https"===i){var f=C(c,e,a);l.push(f.word),a=f.index}else l.push(c);c=[]}return l}(e.replace(/\ufeff/g,""),t)},T=function(e){return k((t=e,t.removed?"":function(e,t){return a.ie?function(e,t){for(var n,r=t.getBlockElements(),o=t.getShortEndedElements(),a=t.getWhiteSpaceElements(),u="",s=new i(e,e);e=s.next();)3===e.nodeType?u+=e.data:(r[(n=e).nodeName]||o[n.nodeName]||a[n.nodeName])&&(u+=" ");return u}(e,t):e.innerText}(t.getBody(),t.schema))).length;var t},S=tinymce.util.Tools.resolve("tinymce.util.Delay"),E=tinymce.util.Tools.resolve("tinymce.util.I18n");o.add("wordcount",(function(e){return function(e){var t=function(e){return E.translate(["{0} words",T(e)])},n=function(){e.theme.panel.find("#wordcount").text(t(e))};e.on("init",(function(){var r=e.theme.panel&&e.theme.panel.find("#statusbar")[0],o=S.debounce(n,300);r&&S.setEditorTimeout(e,(function(){r.insert({type:"label",name:"wordcount",text:t(e),classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",o)}),0)}))}(e),function(e){return{getCount:function(){return T(e)}}}(e)}))}();
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-pay-password"]=e():t["vue-pay-password"]=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=0)}({0:function(t,e,n){t.exports=n("lVK7")},DIVP:function(t,e,n){var o=n("UKM+");t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},EuXz:function(t,e,n){var o=n("lDLk").f,r=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in r||n("bUqO")&&o(r,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},OzIq:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"UKM+":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},bUqO:function(t,e,n){t.exports=!n("zgIt")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},jhxf:function(t,e,n){var o=n("UKM+"),r=n("OzIq").document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},lDLk:function(t,e,n){var o=n("DIVP"),r=n("xZa+"),i=n("s4j0"),s=Object.defineProperty;e.f=n("bUqO")?Object.defineProperty:function(t,e,n){if(o(t),e=i(e,!0),o(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},lVK7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("EuXz");var o=function(t,e,n,o,r,i,s,u){var a=typeof(t=t||{}).default;"object"!==a&&"function"!==a||(t=t.default);var f,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),i&&(c._scopeId=i),s?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=f):r&&(f=u?function(){r.call(this,this.$root.$options.shadowRoot)}:r),f)if(c.functional){c._injectStyles=f;var l=c.render;c.render=function(t,e){return f.call(e),l(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,f):[f]}return{exports:t,options:c}}({name:"PayPassword",props:{onlyNumber:{type:Boolean,default:!0},value:{type:String,default:""},length:{type:Number,default:6},tabindex:{type:Number,default:0},disable:{type:Boolean,default:!1},name:{type:String,default:"payPassword"},type:{type:String,default:"password"}},data:function(){return{status:"",val:"",step:0,MODE:{FOCUS:1,BLUR:2,COMPLETE:3}}},computed:{inputStyle:function(){return{width:"29px",left:"".concat(this.val.length*this.step,"px")}}},watch:{val:function(t){this.$emit("input",t),this.status!==this.MODE.BLUR&&(t.length===this.length?this.status=this.MODE.COMPLETE:this.status=this.MODE.FOCUS)},value:function(t){this.updateVal(t)}},mounted:function(){this.status=this.MODE.BLUR,this.updateVal(this.value),this.step=(this.$el.offsetWidth-2)/this.length},methods:{keydown:function(t){if(this.onlyNumber){var e=t.charCode||t.keyCode||0;8==e||9==e||46==e||110==e||190==e||e>=35&&e<=40||e>=48&&e<=57||e>=96&&e<=105||t.preventDefault()}},updateVal:function(t){this.val===t||t.length>this.length||(this.val=t)},clear:function(){this.val="",this.$emit("clear")},blur:function(){this.status=this.MODE.BLUR,this.$emit("blur")},focus:function(t){if(this.disable)return t&&(t.preventDefault(),t.stopPropagation()),!1;this.$refs.input.focus(),this.val.length===this.length?this.status=this.MODE.COMPLETE:this.status=this.MODE.FOCUS,this.$emit("focus")}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"payPassword"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],ref:"input",staticClass:"sixDigitPassword",attrs:{"aria-disabled":t.disable,type:t.type,name:t.name,autocomplete:"off",maxlength:t.length,minlength:t.length},domProps:{value:t.val},on:{keydown:t.keydown,contextmenu:function(){return!1},paste:function(){return!1},copy:function(){return!1},cut:function(){return!1},blur:t.blur,input:function(e){e.target.composing||(t.val=e.target.value)}}}),t._v(" "),n("div",{staticClass:"sixDigitPassword",attrs:{tabindex:t.tabindex},on:{focus:t.focus}},[t._l(t.length,(function(e,o){return n("i",{key:o},[n("b",{directives:[{name:"show",rawName:"v-show",value:e<=t.val.length,expression:"index <= val.length"}]})])})),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.status===t.MODE.FOCUS,expression:"status === MODE.FOCUS"}],style:t.inputStyle})],2)])}),[],!1,(function(t){n("nQUG")}),null,null).exports;o.install=function(t){t.component(o.name,o)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(o);e.default=o},nQUG:function(t,e){},s4j0:function(t,e,n){var o=n("UKM+");t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"xZa+":function(t,e,n){t.exports=!n("bUqO")&&!n("zgIt")((function(){return 7!=Object.defineProperty(n("jhxf")("div"),"a",{get:function(){return 7}}).a}))},zgIt:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}}}).default}));
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueTheMask=t():e.VueTheMask=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="wmdO")}({FsIF:function(e,t,n){if("undefined"!=typeof window){let e;(e=window.document.currentScript)&&(e=e.src.match(/(.+\/)[^/]+\.js$/))&&(n.p=e[1])}},wmdO:function(e,t,n){"use strict";n.r(t);n("FsIF");var r={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:e=>e.toLocaleUpperCase()},a:{pattern:/[a-zA-Z]/,transform:e=>e.toLocaleLowerCase()},"!":{escape:!0}};function a(e,t,n=!0,r){e=e||"",t=t||"";for(var a=0,o=0,s="";a<t.length&&o<e.length;){var i=r[f=t[a]],u=e[o];i&&!i.escape?(i.pattern.test(u)&&(s+=i.transform?i.transform(u):u,a++),o++):(i&&i.escape&&(f=t[++a]),n&&(s+=f),u===f&&o++,a++)}for(var l="";a<t.length&&n;){var f;if(r[f=t[a]]){l="";break}l+=f,a++}return s+l}var o=function(e,t,n=!0,r){return Array.isArray(t)?function(e,t,n){return t=t.sort((e,t)=>e.length-t.length),function(r,a,o=!0){for(var s=0;s<t.length;){var i=t[s];s++;var u=t[s];if(!(u&&e(r,u,!0,n).length>i.length))return e(r,i,o,n)}return""}}(a,t,r)(e,t,n,r):a(e,t,n,r)};function s(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var i=function(e,t){var n=t.value;if((Array.isArray(n)||"string"==typeof n)&&(n={mask:n,tokens:r}),"INPUT"!==e.tagName.toLocaleUpperCase()){var a=e.getElementsByTagName("input");if(1!==a.length)throw new Error("v-mask directive requires 1 input, found "+a.length);e=a[0]}e.oninput=function(t){if(t.isTrusted){var r=e.selectionEnd,a=e.value[r-1];for(e.value=o(e.value,n.mask,!0,n.tokens);r<e.value.length&&e.value.charAt(r-1)!==a;)r++;e===document.activeElement&&(e.setSelectionRange(r,r),setTimeout((function(){e.setSelectionRange(r,r)}),0)),e.dispatchEvent(s("input"))}};var i=o(e.value,n.mask,!0,n.tokens);i!==e.value&&(e.value=i,e.dispatchEvent(s("input")))};var u=function(e,t,n,r,a,o,s,i){var u=typeof(e=e||{}).default;"object"!==u&&"function"!==u||(e=e.default);var l,f="function"==typeof e?e.options:e;if(t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),o&&(f._scopeId=o),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},f._ssrRegister=l):a&&(l=i?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(f.functional){f._injectStyles=l;var c=f.render;f.render=function(e,t){return l.call(t),c(e,t)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:f}}({name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:()=>r}},directives:{mask:i},data(){return{lastValue:null,display:this.value}},watch:{value(e){e!==this.lastValue&&(this.display=e)},masked(){this.refresh(this.display)}},computed:{config(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput(e){e.isTrusted||this.refresh(e.target.value)},refresh(e){this.display=e,(e=o(e,this.mask,this.masked,this.tokens))!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}},(function(){var e=this.$createElement;return(this._self._c||e)("input",{directives:[{name:"mask",rawName:"v-mask",value:this.config,expression:"config"}],attrs:{type:"text"},domProps:{value:this.display},on:{input:this.onInput}})}),[],!1,null,null,null).exports;function l(e){e.component(u.name,u),e.directive("mask",i)}var f=l;"undefined"!=typeof window&&window.Vue&&window.Vue.use(l),n.d(t,"TheMask",(function(){return u})),n.d(t,"mask",(function(){return i})),n.d(t,"tokens",(function(){return r}));t.default=f}}).default}));